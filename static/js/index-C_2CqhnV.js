(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function aS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ad={exports:{}},na={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fv;function sx(){if(Fv)return na;Fv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,a){var d=null;if(a!==void 0&&(d=""+a),o.key!==void 0&&(d=""+o.key),"key"in o){a={};for(var h in o)h!=="key"&&(a[h]=o[h])}else a=o;return o=a.ref,{$$typeof:n,type:i,key:d,ref:o!==void 0?o:null,props:a}}return na.Fragment=e,na.jsx=t,na.jsxs=t,na}var Hv;function ox(){return Hv||(Hv=1,ad.exports=sx()),ad.exports}var M=ox(),rd={exports:{}},we={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gv;function lx(){if(Gv)return we;Gv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.iterator;function S(w){return w===null||typeof w!="object"?null:(w=_&&w[_]||w["@@iterator"],typeof w=="function"?w:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,E={};function D(w,F,Z){this.props=w,this.context=F,this.refs=E,this.updater=Z||b}D.prototype.isReactComponent={},D.prototype.setState=function(w,F){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,F,"setState")},D.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function I(){}I.prototype=D.prototype;function B(w,F,Z){this.props=w,this.context=F,this.refs=E,this.updater=Z||b}var q=B.prototype=new I;q.constructor=B,x(q,D.prototype),q.isPureReactComponent=!0;var R=Array.isArray,U={H:null,A:null,T:null,S:null,V:null},Y=Object.prototype.hasOwnProperty;function G(w,F,Z,te,se,ge){return Z=ge.ref,{$$typeof:n,type:w,key:F,ref:Z!==void 0?Z:null,props:ge}}function ne(w,F){return G(w.type,F,void 0,void 0,void 0,w.props)}function K(w){return typeof w=="object"&&w!==null&&w.$$typeof===n}function X(w){var F={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(Z){return F[Z]})}var ee=/\/+/g;function de(w,F){return typeof w=="object"&&w!==null&&w.key!=null?X(""+w.key):F.toString(36)}function Ee(){}function ke(w){switch(w.status){case"fulfilled":return w.value;case"rejected":throw w.reason;default:switch(typeof w.status=="string"?w.then(Ee,Ee):(w.status="pending",w.then(function(F){w.status==="pending"&&(w.status="fulfilled",w.value=F)},function(F){w.status==="pending"&&(w.status="rejected",w.reason=F)})),w.status){case"fulfilled":return w.value;case"rejected":throw w.reason}}throw w}function be(w,F,Z,te,se){var ge=typeof w;(ge==="undefined"||ge==="boolean")&&(w=null);var le=!1;if(w===null)le=!0;else switch(ge){case"bigint":case"string":case"number":le=!0;break;case"object":switch(w.$$typeof){case n:case e:le=!0;break;case v:return le=w._init,be(le(w._payload),F,Z,te,se)}}if(le)return se=se(w),le=te===""?"."+de(w,0):te,R(se)?(Z="",le!=null&&(Z=le.replace(ee,"$&/")+"/"),be(se,F,Z,"",function(mt){return mt})):se!=null&&(K(se)&&(se=ne(se,Z+(se.key==null||w&&w.key===se.key?"":(""+se.key).replace(ee,"$&/")+"/")+le)),F.push(se)),1;le=0;var Ze=te===""?".":te+":";if(R(w))for(var ye=0;ye<w.length;ye++)te=w[ye],ge=Ze+de(te,ye),le+=be(te,F,Z,ge,se);else if(ye=S(w),typeof ye=="function")for(w=ye.call(w),ye=0;!(te=w.next()).done;)te=te.value,ge=Ze+de(te,ye++),le+=be(te,F,Z,ge,se);else if(ge==="object"){if(typeof w.then=="function")return be(ke(w),F,Z,te,se);throw F=String(w),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return le}function P(w,F,Z){if(w==null)return w;var te=[],se=0;return be(w,te,"","",function(ge){return F.call(Z,ge,se++)}),te}function ie(w){if(w._status===-1){var F=w._result;F=F(),F.then(function(Z){(w._status===0||w._status===-1)&&(w._status=1,w._result=Z)},function(Z){(w._status===0||w._status===-1)&&(w._status=2,w._result=Z)}),w._status===-1&&(w._status=0,w._result=F)}if(w._status===1)return w._result.default;throw w._result}var j=typeof reportError=="function"?reportError:function(w){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof w=="object"&&w!==null&&typeof w.message=="string"?String(w.message):String(w),error:w});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",w);return}console.error(w)};function he(){}return we.Children={map:P,forEach:function(w,F,Z){P(w,function(){F.apply(this,arguments)},Z)},count:function(w){var F=0;return P(w,function(){F++}),F},toArray:function(w){return P(w,function(F){return F})||[]},only:function(w){if(!K(w))throw Error("React.Children.only expected to receive a single React element child.");return w}},we.Component=D,we.Fragment=t,we.Profiler=o,we.PureComponent=B,we.StrictMode=i,we.Suspense=p,we.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,we.__COMPILER_RUNTIME={__proto__:null,c:function(w){return U.H.useMemoCache(w)}},we.cache=function(w){return function(){return w.apply(null,arguments)}},we.cloneElement=function(w,F,Z){if(w==null)throw Error("The argument must be a React element, but you passed "+w+".");var te=x({},w.props),se=w.key,ge=void 0;if(F!=null)for(le in F.ref!==void 0&&(ge=void 0),F.key!==void 0&&(se=""+F.key),F)!Y.call(F,le)||le==="key"||le==="__self"||le==="__source"||le==="ref"&&F.ref===void 0||(te[le]=F[le]);var le=arguments.length-2;if(le===1)te.children=Z;else if(1<le){for(var Ze=Array(le),ye=0;ye<le;ye++)Ze[ye]=arguments[ye+2];te.children=Ze}return G(w.type,se,void 0,void 0,ge,te)},we.createContext=function(w){return w={$$typeof:d,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null},w.Provider=w,w.Consumer={$$typeof:a,_context:w},w},we.createElement=function(w,F,Z){var te,se={},ge=null;if(F!=null)for(te in F.key!==void 0&&(ge=""+F.key),F)Y.call(F,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(se[te]=F[te]);var le=arguments.length-2;if(le===1)se.children=Z;else if(1<le){for(var Ze=Array(le),ye=0;ye<le;ye++)Ze[ye]=arguments[ye+2];se.children=Ze}if(w&&w.defaultProps)for(te in le=w.defaultProps,le)se[te]===void 0&&(se[te]=le[te]);return G(w,ge,void 0,void 0,null,se)},we.createRef=function(){return{current:null}},we.forwardRef=function(w){return{$$typeof:h,render:w}},we.isValidElement=K,we.lazy=function(w){return{$$typeof:v,_payload:{_status:-1,_result:w},_init:ie}},we.memo=function(w,F){return{$$typeof:m,type:w,compare:F===void 0?null:F}},we.startTransition=function(w){var F=U.T,Z={};U.T=Z;try{var te=w(),se=U.S;se!==null&&se(Z,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(he,j)}catch(ge){j(ge)}finally{U.T=F}},we.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},we.use=function(w){return U.H.use(w)},we.useActionState=function(w,F,Z){return U.H.useActionState(w,F,Z)},we.useCallback=function(w,F){return U.H.useCallback(w,F)},we.useContext=function(w){return U.H.useContext(w)},we.useDebugValue=function(){},we.useDeferredValue=function(w,F){return U.H.useDeferredValue(w,F)},we.useEffect=function(w,F,Z){var te=U.H;if(typeof Z=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return te.useEffect(w,F)},we.useId=function(){return U.H.useId()},we.useImperativeHandle=function(w,F,Z){return U.H.useImperativeHandle(w,F,Z)},we.useInsertionEffect=function(w,F){return U.H.useInsertionEffect(w,F)},we.useLayoutEffect=function(w,F){return U.H.useLayoutEffect(w,F)},we.useMemo=function(w,F){return U.H.useMemo(w,F)},we.useOptimistic=function(w,F){return U.H.useOptimistic(w,F)},we.useReducer=function(w,F,Z){return U.H.useReducer(w,F,Z)},we.useRef=function(w){return U.H.useRef(w)},we.useState=function(w){return U.H.useState(w)},we.useSyncExternalStore=function(w,F,Z){return U.H.useSyncExternalStore(w,F,Z)},we.useTransition=function(){return U.H.useTransition()},we.version="19.1.0",we}var $v;function kh(){return $v||($v=1,rd.exports=lx()),rd.exports}var ue=kh();const ax=aS(ue);var ud={exports:{}},ia={},cd={exports:{}},fd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yv;function rx(){return Yv||(Yv=1,function(n){function e(P,ie){var j=P.length;P.push(ie);e:for(;0<j;){var he=j-1>>>1,w=P[he];if(0<o(w,ie))P[he]=ie,P[j]=w,j=he;else break e}}function t(P){return P.length===0?null:P[0]}function i(P){if(P.length===0)return null;var ie=P[0],j=P.pop();if(j!==ie){P[0]=j;e:for(var he=0,w=P.length,F=w>>>1;he<F;){var Z=2*(he+1)-1,te=P[Z],se=Z+1,ge=P[se];if(0>o(te,j))se<w&&0>o(ge,te)?(P[he]=ge,P[se]=j,he=se):(P[he]=te,P[Z]=j,he=Z);else if(se<w&&0>o(ge,j))P[he]=ge,P[se]=j,he=se;else break e}}return ie}function o(P,ie){var j=P.sortIndex-ie.sortIndex;return j!==0?j:P.id-ie.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var d=Date,h=d.now();n.unstable_now=function(){return d.now()-h}}var p=[],m=[],v=1,_=null,S=3,b=!1,x=!1,E=!1,D=!1,I=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function R(P){for(var ie=t(m);ie!==null;){if(ie.callback===null)i(m);else if(ie.startTime<=P)i(m),ie.sortIndex=ie.expirationTime,e(p,ie);else break;ie=t(m)}}function U(P){if(E=!1,R(P),!x)if(t(p)!==null)x=!0,Y||(Y=!0,de());else{var ie=t(m);ie!==null&&be(U,ie.startTime-P)}}var Y=!1,G=-1,ne=5,K=-1;function X(){return D?!0:!(n.unstable_now()-K<ne)}function ee(){if(D=!1,Y){var P=n.unstable_now();K=P;var ie=!0;try{e:{x=!1,E&&(E=!1,B(G),G=-1),b=!0;var j=S;try{t:{for(R(P),_=t(p);_!==null&&!(_.expirationTime>P&&X());){var he=_.callback;if(typeof he=="function"){_.callback=null,S=_.priorityLevel;var w=he(_.expirationTime<=P);if(P=n.unstable_now(),typeof w=="function"){_.callback=w,R(P),ie=!0;break t}_===t(p)&&i(p),R(P)}else i(p);_=t(p)}if(_!==null)ie=!0;else{var F=t(m);F!==null&&be(U,F.startTime-P),ie=!1}}break e}finally{_=null,S=j,b=!1}ie=void 0}}finally{ie?de():Y=!1}}}var de;if(typeof q=="function")de=function(){q(ee)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,ke=Ee.port2;Ee.port1.onmessage=ee,de=function(){ke.postMessage(null)}}else de=function(){I(ee,0)};function be(P,ie){G=I(function(){P(n.unstable_now())},ie)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(P){P.callback=null},n.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<P?Math.floor(1e3/P):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(P){switch(S){case 1:case 2:case 3:var ie=3;break;default:ie=S}var j=S;S=ie;try{return P()}finally{S=j}},n.unstable_requestPaint=function(){D=!0},n.unstable_runWithPriority=function(P,ie){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var j=S;S=P;try{return ie()}finally{S=j}},n.unstable_scheduleCallback=function(P,ie,j){var he=n.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?he+j:he):j=he,P){case 1:var w=-1;break;case 2:w=250;break;case 5:w=1073741823;break;case 4:w=1e4;break;default:w=5e3}return w=j+w,P={id:v++,callback:ie,priorityLevel:P,startTime:j,expirationTime:w,sortIndex:-1},j>he?(P.sortIndex=j,e(m,P),t(p)===null&&P===t(m)&&(E?(B(G),G=-1):E=!0,be(U,j-he))):(P.sortIndex=w,e(p,P),x||b||(x=!0,Y||(Y=!0,de()))),P},n.unstable_shouldYield=X,n.unstable_wrapCallback=function(P){var ie=S;return function(){var j=S;S=ie;try{return P.apply(this,arguments)}finally{S=j}}}}(fd)),fd}var Jv;function ux(){return Jv||(Jv=1,cd.exports=rx()),cd.exports}var dd={exports:{}},Lt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zv;function cx(){if(Zv)return Lt;Zv=1;var n=kh();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(p,m,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:_==null?null:""+_,children:p,containerInfo:m,implementation:v}}var d=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Lt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Lt.createPortal=function(p,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return a(p,m,null,v)},Lt.flushSync=function(p){var m=d.T,v=i.p;try{if(d.T=null,i.p=2,p)return p()}finally{d.T=m,i.p=v,i.d.f()}},Lt.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(p,m))},Lt.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},Lt.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var v=m.as,_=h(v,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,b=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?i.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:_,integrity:S,fetchPriority:b}):v==="script"&&i.d.X(p,{crossOrigin:_,integrity:S,fetchPriority:b,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Lt.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=h(m.as,m.crossOrigin);i.d.M(p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(p)},Lt.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,_=h(v,m.crossOrigin);i.d.L(p,v,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Lt.preloadModule=function(p,m){if(typeof p=="string")if(m){var v=h(m.as,m.crossOrigin);i.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(p)},Lt.requestFormReset=function(p){i.d.r(p)},Lt.unstable_batchedUpdates=function(p,m){return p(m)},Lt.useFormState=function(p,m,v){return d.H.useFormState(p,m,v)},Lt.useFormStatus=function(){return d.H.useHostTransitionStatus()},Lt.version="19.1.0",Lt}var Kv;function fx(){if(Kv)return dd.exports;Kv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),dd.exports=cx(),dd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xv;function dx(){if(Xv)return ia;Xv=1;var n=ux(),e=kh(),t=fx();function i(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)l+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var l=s,r=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(r=l.return),s=l.return;while(s)}return l.tag===3?r:null}function d(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function h(s){if(a(s)!==s)throw Error(i(188))}function p(s){var l=s.alternate;if(!l){if(l=a(s),l===null)throw Error(i(188));return l!==s?null:s}for(var r=s,f=l;;){var g=r.return;if(g===null)break;var y=g.alternate;if(y===null){if(f=g.return,f!==null){r=f;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===r)return h(g),s;if(y===f)return h(g),l;y=y.sibling}throw Error(i(188))}if(r.return!==f.return)r=g,f=y;else{for(var T=!1,C=g.child;C;){if(C===r){T=!0,r=g,f=y;break}if(C===f){T=!0,f=g,r=y;break}C=C.sibling}if(!T){for(C=y.child;C;){if(C===r){T=!0,r=y,f=g;break}if(C===f){T=!0,f=y,r=g;break}C=C.sibling}if(!T)throw Error(i(189))}}if(r.alternate!==f)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?s:l}function m(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=m(s),l!==null)return l;s=s.sibling}return null}var v=Object.assign,_=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),B=Symbol.for("react.consumer"),q=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),X=Symbol.for("react.memo_cache_sentinel"),ee=Symbol.iterator;function de(s){return s===null||typeof s!="object"?null:(s=ee&&s[ee]||s["@@iterator"],typeof s=="function"?s:null)}var Ee=Symbol.for("react.client.reference");function ke(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===Ee?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case x:return"Fragment";case D:return"Profiler";case E:return"StrictMode";case U:return"Suspense";case Y:return"SuspenseList";case K:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case b:return"Portal";case q:return(s.displayName||"Context")+".Provider";case B:return(s._context.displayName||"Context")+".Consumer";case R:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case G:return l=s.displayName||null,l!==null?l:ke(s.type)||"Memo";case ne:l=s._payload,s=s._init;try{return ke(s(l))}catch{}}return null}var be=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j={pending:!1,data:null,method:null,action:null},he=[],w=-1;function F(s){return{current:s}}function Z(s){0>w||(s.current=he[w],he[w]=null,w--)}function te(s,l){w++,he[w]=s.current,s.current=l}var se=F(null),ge=F(null),le=F(null),Ze=F(null);function ye(s,l){switch(te(le,l),te(ge,s),te(se,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?gv(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=gv(l),s=vv(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Z(se),te(se,s)}function mt(){Z(se),Z(ge),Z(le)}function Ne(s){s.memoizedState!==null&&te(Ze,s);var l=se.current,r=vv(l,s.type);l!==r&&(te(ge,s),te(se,r))}function et(s){ge.current===s&&(Z(se),Z(ge)),Ze.current===s&&(Z(Ze),Wl._currentValue=j)}var me=Object.prototype.hasOwnProperty,Me=n.unstable_scheduleCallback,tt=n.unstable_cancelCallback,We=n.unstable_shouldYield,Wt=n.unstable_requestPaint,Rt=n.unstable_now,ss=n.unstable_getCurrentPriorityLevel,Nt=n.unstable_ImmediatePriority,Dt=n.unstable_UserBlockingPriority,Ct=n.unstable_NormalPriority,al=n.unstable_LowPriority,rn=n.unstable_IdlePriority,Rn=n.log,Zu=n.unstable_setDisableYieldValue,os=null,Vt=null;function Nn(s){if(typeof Rn=="function"&&Zu(s),Vt&&typeof Vt.setStrictMode=="function")try{Vt.setStrictMode(os,s)}catch{}}var Ot=Math.clz32?Math.clz32:Wu,Ku=Math.log,Xu=Math.LN2;function Wu(s){return s>>>=0,s===0?32:31-(Ku(s)/Xu|0)|0}var Hs=256,Gs=4194304;function Dn(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function ls(s,l,r){var f=s.pendingLanes;if(f===0)return 0;var g=0,y=s.suspendedLanes,T=s.pingedLanes;s=s.warmLanes;var C=f&134217727;return C!==0?(f=C&~y,f!==0?g=Dn(f):(T&=C,T!==0?g=Dn(T):r||(r=C&~s,r!==0&&(g=Dn(r))))):(C=f&~y,C!==0?g=Dn(C):T!==0?g=Dn(T):r||(r=f&~s,r!==0&&(g=Dn(r)))),g===0?0:l!==0&&l!==g&&(l&y)===0&&(y=g&-g,r=l&-l,y>=r||y===32&&(r&4194048)!==0)?l:g}function ce(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function kt(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ht(){var s=Hs;return Hs<<=1,(Hs&4194048)===0&&(Hs=256),s}function $s(){var s=Gs;return Gs<<=1,(Gs&62914560)===0&&(Gs=4194304),s}function Ys(s){for(var l=[],r=0;31>r;r++)l.push(s);return l}function Ti(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function kn(s,l,r,f,g,y){var T=s.pendingLanes;s.pendingLanes=r,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=r,s.entangledLanes&=r,s.errorRecoveryDisabledLanes&=r,s.shellSuspendCounter=0;var C=s.entanglements,A=s.expirationTimes,L=s.hiddenUpdates;for(r=T&~r;0<r;){var H=31-Ot(r),J=1<<H;C[H]=0,A[H]=-1;var V=L[H];if(V!==null)for(L[H]=null,H=0;H<V.length;H++){var O=V[H];O!==null&&(O.lane&=-536870913)}r&=~J}f!==0&&bi(s,f,0),y!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=y&~(T&~l))}function bi(s,l,r){s.pendingLanes|=l,s.suspendedLanes&=~l;var f=31-Ot(l);s.entangledLanes|=l,s.entanglements[f]=s.entanglements[f]|1073741824|r&4194090}function Ci(s,l){var r=s.entangledLanes|=l;for(s=s.entanglements;r;){var f=31-Ot(r),g=1<<f;g&l|s[f]&l&&(s[f]|=l),r&=~g}}function Kn(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Xn(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Js(){var s=ie.p;return s!==0?s:(s=window.event,s===void 0?32:Uv(s.type))}function JT(s,l){var r=ie.p;try{return ie.p=s,l()}finally{ie.p=r}}var xi=Math.random().toString(36).slice(2),It="__reactFiber$"+xi,Gt="__reactProps$"+xi,Zs="__reactContainer$"+xi,Qu="__reactEvents$"+xi,ZT="__reactListeners$"+xi,KT="__reactHandles$"+xi,sm="__reactResources$"+xi,rl="__reactMarker$"+xi;function ju(s){delete s[It],delete s[Gt],delete s[Qu],delete s[ZT],delete s[KT]}function Ks(s){var l=s[It];if(l)return l;for(var r=s.parentNode;r;){if(l=r[Zs]||r[It]){if(r=l.alternate,l.child!==null||r!==null&&r.child!==null)for(s=Tv(s);s!==null;){if(r=s[It])return r;s=Tv(s)}return l}s=r,r=s.parentNode}return null}function Xs(s){if(s=s[It]||s[Zs]){var l=s.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return s}return null}function ul(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(i(33))}function Ws(s){var l=s[sm];return l||(l=s[sm]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function yt(s){s[rl]=!0}var om=new Set,lm={};function as(s,l){Qs(s,l),Qs(s+"Capture",l)}function Qs(s,l){for(lm[s]=l,s=0;s<l.length;s++)om.add(l[s])}var XT=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),am={},rm={};function WT(s){return me.call(rm,s)?!0:me.call(am,s)?!1:XT.test(s)?rm[s]=!0:(am[s]=!0,!1)}function Fa(s,l,r){if(WT(l))if(r===null)s.removeAttribute(l);else{switch(typeof r){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var f=l.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+r)}}function Ha(s,l,r){if(r===null)s.removeAttribute(l);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+r)}}function Wn(s,l,r,f){if(f===null)s.removeAttribute(r);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttributeNS(l,r,""+f)}}var ec,um;function js(s){if(ec===void 0)try{throw Error()}catch(r){var l=r.stack.trim().match(/\n( *(at )?)/);ec=l&&l[1]||"",um=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ec+s+um}var tc=!1;function nc(s,l){if(!s||tc)return"";tc=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(l){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(O){var V=O}Reflect.construct(s,[],J)}else{try{J.call()}catch(O){V=O}s.call(J.prototype)}}else{try{throw Error()}catch(O){V=O}(J=s())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(O){if(O&&V&&typeof O.stack=="string")return[O.stack,V.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=f.DetermineComponentFrameRoot(),T=y[0],C=y[1];if(T&&C){var A=T.split(`
`),L=C.split(`
`);for(g=f=0;f<A.length&&!A[f].includes("DetermineComponentFrameRoot");)f++;for(;g<L.length&&!L[g].includes("DetermineComponentFrameRoot");)g++;if(f===A.length||g===L.length)for(f=A.length-1,g=L.length-1;1<=f&&0<=g&&A[f]!==L[g];)g--;for(;1<=f&&0<=g;f--,g--)if(A[f]!==L[g]){if(f!==1||g!==1)do if(f--,g--,0>g||A[f]!==L[g]){var H=`
`+A[f].replace(" at new "," at ");return s.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",s.displayName)),H}while(1<=f&&0<=g);break}}}finally{tc=!1,Error.prepareStackTrace=r}return(r=s?s.displayName||s.name:"")?js(r):""}function QT(s){switch(s.tag){case 26:case 27:case 5:return js(s.type);case 16:return js("Lazy");case 13:return js("Suspense");case 19:return js("SuspenseList");case 0:case 15:return nc(s.type,!1);case 11:return nc(s.type.render,!1);case 1:return nc(s.type,!0);case 31:return js("Activity");default:return""}}function cm(s){try{var l="";do l+=QT(s),s=s.return;while(s);return l}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}function un(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function fm(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function jT(s){var l=fm(s)?"checked":"value",r=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),f=""+s[l];if(!s.hasOwnProperty(l)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var g=r.get,y=r.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return g.call(this)},set:function(T){f=""+T,y.call(this,T)}}),Object.defineProperty(s,l,{enumerable:r.enumerable}),{getValue:function(){return f},setValue:function(T){f=""+T},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function Ga(s){s._valueTracker||(s._valueTracker=jT(s))}function dm(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var r=l.getValue(),f="";return s&&(f=fm(s)?s.checked?"true":"false":s.value),s=f,s!==r?(l.setValue(s),!0):!1}function $a(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var eb=/[\n"\\]/g;function cn(s){return s.replace(eb,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function ic(s,l,r,f,g,y,T,C){s.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?s.type=T:s.removeAttribute("type"),l!=null?T==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+un(l)):s.value!==""+un(l)&&(s.value=""+un(l)):T!=="submit"&&T!=="reset"||s.removeAttribute("value"),l!=null?sc(s,T,un(l)):r!=null?sc(s,T,un(r)):f!=null&&s.removeAttribute("value"),g==null&&y!=null&&(s.defaultChecked=!!y),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?s.name=""+un(C):s.removeAttribute("name")}function hm(s,l,r,f,g,y,T,C){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(s.type=y),l!=null||r!=null){if(!(y!=="submit"&&y!=="reset"||l!=null))return;r=r!=null?""+un(r):"",l=l!=null?""+un(l):r,C||l===s.value||(s.value=l),s.defaultValue=l}f=f??g,f=typeof f!="function"&&typeof f!="symbol"&&!!f,s.checked=C?s.checked:!!f,s.defaultChecked=!!f,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.name=T)}function sc(s,l,r){l==="number"&&$a(s.ownerDocument)===s||s.defaultValue===""+r||(s.defaultValue=""+r)}function eo(s,l,r,f){if(s=s.options,l){l={};for(var g=0;g<r.length;g++)l["$"+r[g]]=!0;for(r=0;r<s.length;r++)g=l.hasOwnProperty("$"+s[r].value),s[r].selected!==g&&(s[r].selected=g),g&&f&&(s[r].defaultSelected=!0)}else{for(r=""+un(r),l=null,g=0;g<s.length;g++){if(s[g].value===r){s[g].selected=!0,f&&(s[g].defaultSelected=!0);return}l!==null||s[g].disabled||(l=s[g])}l!==null&&(l.selected=!0)}}function mm(s,l,r){if(l!=null&&(l=""+un(l),l!==s.value&&(s.value=l),r==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=r!=null?""+un(r):""}function pm(s,l,r,f){if(l==null){if(f!=null){if(r!=null)throw Error(i(92));if(be(f)){if(1<f.length)throw Error(i(93));f=f[0]}r=f}r==null&&(r=""),l=r}r=un(l),s.defaultValue=r,f=s.textContent,f===r&&f!==""&&f!==null&&(s.value=f)}function to(s,l){if(l){var r=s.firstChild;if(r&&r===s.lastChild&&r.nodeType===3){r.nodeValue=l;return}}s.textContent=l}var tb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gm(s,l,r){var f=l.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?f?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":f?s.setProperty(l,r):typeof r!="number"||r===0||tb.has(l)?l==="float"?s.cssFloat=r:s[l]=(""+r).trim():s[l]=r+"px"}function vm(s,l,r){if(l!=null&&typeof l!="object")throw Error(i(62));if(s=s.style,r!=null){for(var f in r)!r.hasOwnProperty(f)||l!=null&&l.hasOwnProperty(f)||(f.indexOf("--")===0?s.setProperty(f,""):f==="float"?s.cssFloat="":s[f]="");for(var g in l)f=l[g],l.hasOwnProperty(g)&&r[g]!==f&&gm(s,g,f)}else for(var y in l)l.hasOwnProperty(y)&&gm(s,y,l[y])}function oc(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ib=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ya(s){return ib.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var lc=null;function ac(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var no=null,io=null;function ym(s){var l=Xs(s);if(l&&(s=l.stateNode)){var r=s[Gt]||null;e:switch(s=l.stateNode,l.type){case"input":if(ic(s,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),l=r.name,r.type==="radio"&&l!=null){for(r=s;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+cn(""+l)+'"][type="radio"]'),l=0;l<r.length;l++){var f=r[l];if(f!==s&&f.form===s.form){var g=f[Gt]||null;if(!g)throw Error(i(90));ic(f,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(l=0;l<r.length;l++)f=r[l],f.form===s.form&&dm(f)}break e;case"textarea":mm(s,r.value,r.defaultValue);break e;case"select":l=r.value,l!=null&&eo(s,!!r.multiple,l,!1)}}}var rc=!1;function _m(s,l,r){if(rc)return s(l,r);rc=!0;try{var f=s(l);return f}finally{if(rc=!1,(no!==null||io!==null)&&(Dr(),no&&(l=no,s=io,io=no=null,ym(l),s)))for(l=0;l<s.length;l++)ym(s[l])}}function cl(s,l){var r=s.stateNode;if(r===null)return null;var f=r[Gt]||null;if(f===null)return null;r=f[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(r&&typeof r!="function")throw Error(i(231,l,typeof r));return r}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uc=!1;if(Qn)try{var fl={};Object.defineProperty(fl,"passive",{get:function(){uc=!0}}),window.addEventListener("test",fl,fl),window.removeEventListener("test",fl,fl)}catch{uc=!1}var Ei=null,cc=null,Ja=null;function Sm(){if(Ja)return Ja;var s,l=cc,r=l.length,f,g="value"in Ei?Ei.value:Ei.textContent,y=g.length;for(s=0;s<r&&l[s]===g[s];s++);var T=r-s;for(f=1;f<=T&&l[r-f]===g[y-f];f++);return Ja=g.slice(s,1<f?1-f:void 0)}function Za(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Ka(){return!0}function Tm(){return!1}function $t(s){function l(r,f,g,y,T){this._reactName=r,this._targetInst=g,this.type=f,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var C in s)s.hasOwnProperty(C)&&(r=s[C],this[C]=r?r(y):y[C]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Ka:Tm,this.isPropagationStopped=Tm,this}return v(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ka)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ka)},persist:function(){},isPersistent:Ka}),l}var rs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xa=$t(rs),dl=v({},rs,{view:0,detail:0}),sb=$t(dl),fc,dc,hl,Wa=v({},dl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mc,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==hl&&(hl&&s.type==="mousemove"?(fc=s.screenX-hl.screenX,dc=s.screenY-hl.screenY):dc=fc=0,hl=s),fc)},movementY:function(s){return"movementY"in s?s.movementY:dc}}),bm=$t(Wa),ob=v({},Wa,{dataTransfer:0}),lb=$t(ob),ab=v({},dl,{relatedTarget:0}),hc=$t(ab),rb=v({},rs,{animationName:0,elapsedTime:0,pseudoElement:0}),ub=$t(rb),cb=v({},rs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),fb=$t(cb),db=v({},rs,{data:0}),Cm=$t(db),hb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gb(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=pb[s])?!!l[s]:!1}function mc(){return gb}var vb=v({},dl,{key:function(s){if(s.key){var l=hb[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Za(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?mb[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mc,charCode:function(s){return s.type==="keypress"?Za(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Za(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),yb=$t(vb),_b=v({},Wa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xm=$t(_b),Sb=v({},dl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mc}),Tb=$t(Sb),bb=v({},rs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Cb=$t(bb),xb=v({},Wa,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Eb=$t(xb),wb=v({},rs,{newState:0,oldState:0}),Mb=$t(wb),Ab=[9,13,27,32],pc=Qn&&"CompositionEvent"in window,ml=null;Qn&&"documentMode"in document&&(ml=document.documentMode);var Rb=Qn&&"TextEvent"in window&&!ml,Em=Qn&&(!pc||ml&&8<ml&&11>=ml),wm=" ",Mm=!1;function Am(s,l){switch(s){case"keyup":return Ab.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rm(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var so=!1;function Nb(s,l){switch(s){case"compositionend":return Rm(l);case"keypress":return l.which!==32?null:(Mm=!0,wm);case"textInput":return s=l.data,s===wm&&Mm?null:s;default:return null}}function Db(s,l){if(so)return s==="compositionend"||!pc&&Am(s,l)?(s=Sm(),Ja=cc=Ei=null,so=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Em&&l.locale!=="ko"?null:l.data;default:return null}}var kb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nm(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!kb[s.type]:l==="textarea"}function Dm(s,l,r,f){no?io?io.push(f):io=[f]:no=f,l=Vr(l,"onChange"),0<l.length&&(r=new Xa("onChange","change",null,r,f),s.push({event:r,listeners:l}))}var pl=null,gl=null;function Ib(s){fv(s,0)}function Qa(s){var l=ul(s);if(dm(l))return s}function km(s,l){if(s==="change")return l}var Im=!1;if(Qn){var gc;if(Qn){var vc="oninput"in document;if(!vc){var zm=document.createElement("div");zm.setAttribute("oninput","return;"),vc=typeof zm.oninput=="function"}gc=vc}else gc=!1;Im=gc&&(!document.documentMode||9<document.documentMode)}function Lm(){pl&&(pl.detachEvent("onpropertychange",Um),gl=pl=null)}function Um(s){if(s.propertyName==="value"&&Qa(gl)){var l=[];Dm(l,gl,s,ac(s)),_m(Ib,l)}}function zb(s,l,r){s==="focusin"?(Lm(),pl=l,gl=r,pl.attachEvent("onpropertychange",Um)):s==="focusout"&&Lm()}function Lb(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Qa(gl)}function Ub(s,l){if(s==="click")return Qa(l)}function Vb(s,l){if(s==="input"||s==="change")return Qa(l)}function Ob(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var Qt=typeof Object.is=="function"?Object.is:Ob;function vl(s,l){if(Qt(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var r=Object.keys(s),f=Object.keys(l);if(r.length!==f.length)return!1;for(f=0;f<r.length;f++){var g=r[f];if(!me.call(l,g)||!Qt(s[g],l[g]))return!1}return!0}function Vm(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Om(s,l){var r=Vm(s);s=0;for(var f;r;){if(r.nodeType===3){if(f=s+r.textContent.length,s<=l&&f>=l)return{node:r,offset:l-s};s=f}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Vm(r)}}function Bm(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?Bm(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function Pm(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=$a(s.document);l instanceof s.HTMLIFrameElement;){try{var r=typeof l.contentWindow.location.href=="string"}catch{r=!1}if(r)s=l.contentWindow;else break;l=$a(s.document)}return l}function yc(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var Bb=Qn&&"documentMode"in document&&11>=document.documentMode,oo=null,_c=null,yl=null,Sc=!1;function qm(s,l,r){var f=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Sc||oo==null||oo!==$a(f)||(f=oo,"selectionStart"in f&&yc(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),yl&&vl(yl,f)||(yl=f,f=Vr(_c,"onSelect"),0<f.length&&(l=new Xa("onSelect","select",null,l,r),s.push({event:l,listeners:f}),l.target=oo)))}function us(s,l){var r={};return r[s.toLowerCase()]=l.toLowerCase(),r["Webkit"+s]="webkit"+l,r["Moz"+s]="moz"+l,r}var lo={animationend:us("Animation","AnimationEnd"),animationiteration:us("Animation","AnimationIteration"),animationstart:us("Animation","AnimationStart"),transitionrun:us("Transition","TransitionRun"),transitionstart:us("Transition","TransitionStart"),transitioncancel:us("Transition","TransitionCancel"),transitionend:us("Transition","TransitionEnd")},Tc={},Fm={};Qn&&(Fm=document.createElement("div").style,"AnimationEvent"in window||(delete lo.animationend.animation,delete lo.animationiteration.animation,delete lo.animationstart.animation),"TransitionEvent"in window||delete lo.transitionend.transition);function cs(s){if(Tc[s])return Tc[s];if(!lo[s])return s;var l=lo[s],r;for(r in l)if(l.hasOwnProperty(r)&&r in Fm)return Tc[s]=l[r];return s}var Hm=cs("animationend"),Gm=cs("animationiteration"),$m=cs("animationstart"),Pb=cs("transitionrun"),qb=cs("transitionstart"),Fb=cs("transitioncancel"),Ym=cs("transitionend"),Jm=new Map,bc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bc.push("scrollEnd");function xn(s,l){Jm.set(s,l),as(l,[s])}var Zm=new WeakMap;function fn(s,l){if(typeof s=="object"&&s!==null){var r=Zm.get(s);return r!==void 0?r:(l={value:s,source:l,stack:cm(l)},Zm.set(s,l),l)}return{value:s,source:l,stack:cm(l)}}var dn=[],ao=0,Cc=0;function ja(){for(var s=ao,l=Cc=ao=0;l<s;){var r=dn[l];dn[l++]=null;var f=dn[l];dn[l++]=null;var g=dn[l];dn[l++]=null;var y=dn[l];if(dn[l++]=null,f!==null&&g!==null){var T=f.pending;T===null?g.next=g:(g.next=T.next,T.next=g),f.pending=g}y!==0&&Km(r,g,y)}}function er(s,l,r,f){dn[ao++]=s,dn[ao++]=l,dn[ao++]=r,dn[ao++]=f,Cc|=f,s.lanes|=f,s=s.alternate,s!==null&&(s.lanes|=f)}function xc(s,l,r,f){return er(s,l,r,f),tr(s)}function ro(s,l){return er(s,null,null,l),tr(s)}function Km(s,l,r){s.lanes|=r;var f=s.alternate;f!==null&&(f.lanes|=r);for(var g=!1,y=s.return;y!==null;)y.childLanes|=r,f=y.alternate,f!==null&&(f.childLanes|=r),y.tag===22&&(s=y.stateNode,s===null||s._visibility&1||(g=!0)),s=y,y=y.return;return s.tag===3?(y=s.stateNode,g&&l!==null&&(g=31-Ot(r),s=y.hiddenUpdates,f=s[g],f===null?s[g]=[l]:f.push(l),l.lane=r|536870912),y):null}function tr(s){if(50<Hl)throw Hl=0,Df=null,Error(i(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var uo={};function Hb(s,l,r,f){this.tag=s,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jt(s,l,r,f){return new Hb(s,l,r,f)}function Ec(s){return s=s.prototype,!(!s||!s.isReactComponent)}function jn(s,l){var r=s.alternate;return r===null?(r=jt(s.tag,l,s.key,s.mode),r.elementType=s.elementType,r.type=s.type,r.stateNode=s.stateNode,r.alternate=s,s.alternate=r):(r.pendingProps=l,r.type=s.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=s.flags&65011712,r.childLanes=s.childLanes,r.lanes=s.lanes,r.child=s.child,r.memoizedProps=s.memoizedProps,r.memoizedState=s.memoizedState,r.updateQueue=s.updateQueue,l=s.dependencies,r.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},r.sibling=s.sibling,r.index=s.index,r.ref=s.ref,r.refCleanup=s.refCleanup,r}function Xm(s,l){s.flags&=65011714;var r=s.alternate;return r===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=r.childLanes,s.lanes=r.lanes,s.child=r.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=r.memoizedProps,s.memoizedState=r.memoizedState,s.updateQueue=r.updateQueue,s.type=r.type,l=r.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function nr(s,l,r,f,g,y){var T=0;if(f=s,typeof s=="function")Ec(s)&&(T=1);else if(typeof s=="string")T=$C(s,r,se.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case K:return s=jt(31,r,l,g),s.elementType=K,s.lanes=y,s;case x:return fs(r.children,g,y,l);case E:T=8,g|=24;break;case D:return s=jt(12,r,l,g|2),s.elementType=D,s.lanes=y,s;case U:return s=jt(13,r,l,g),s.elementType=U,s.lanes=y,s;case Y:return s=jt(19,r,l,g),s.elementType=Y,s.lanes=y,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case I:case q:T=10;break e;case B:T=9;break e;case R:T=11;break e;case G:T=14;break e;case ne:T=16,f=null;break e}T=29,r=Error(i(130,s===null?"null":typeof s,"")),f=null}return l=jt(T,r,l,g),l.elementType=s,l.type=f,l.lanes=y,l}function fs(s,l,r,f){return s=jt(7,s,f,l),s.lanes=r,s}function wc(s,l,r){return s=jt(6,s,null,l),s.lanes=r,s}function Mc(s,l,r){return l=jt(4,s.children!==null?s.children:[],s.key,l),l.lanes=r,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var co=[],fo=0,ir=null,sr=0,hn=[],mn=0,ds=null,ei=1,ti="";function hs(s,l){co[fo++]=sr,co[fo++]=ir,ir=s,sr=l}function Wm(s,l,r){hn[mn++]=ei,hn[mn++]=ti,hn[mn++]=ds,ds=s;var f=ei;s=ti;var g=32-Ot(f)-1;f&=~(1<<g),r+=1;var y=32-Ot(l)+g;if(30<y){var T=g-g%5;y=(f&(1<<T)-1).toString(32),f>>=T,g-=T,ei=1<<32-Ot(l)+g|r<<g|f,ti=y+s}else ei=1<<y|r<<g|f,ti=s}function Ac(s){s.return!==null&&(hs(s,1),Wm(s,1,0))}function Rc(s){for(;s===ir;)ir=co[--fo],co[fo]=null,sr=co[--fo],co[fo]=null;for(;s===ds;)ds=hn[--mn],hn[mn]=null,ti=hn[--mn],hn[mn]=null,ei=hn[--mn],hn[mn]=null}var Bt=null,ot=null,Pe=!1,ms=null,In=!1,Nc=Error(i(519));function ps(s){var l=Error(i(418,""));throw Tl(fn(l,s)),Nc}function Qm(s){var l=s.stateNode,r=s.type,f=s.memoizedProps;switch(l[It]=s,l[Gt]=f,r){case"dialog":ze("cancel",l),ze("close",l);break;case"iframe":case"object":case"embed":ze("load",l);break;case"video":case"audio":for(r=0;r<$l.length;r++)ze($l[r],l);break;case"source":ze("error",l);break;case"img":case"image":case"link":ze("error",l),ze("load",l);break;case"details":ze("toggle",l);break;case"input":ze("invalid",l),hm(l,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),Ga(l);break;case"select":ze("invalid",l);break;case"textarea":ze("invalid",l),pm(l,f.value,f.defaultValue,f.children),Ga(l)}r=f.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||l.textContent===""+r||f.suppressHydrationWarning===!0||pv(l.textContent,r)?(f.popover!=null&&(ze("beforetoggle",l),ze("toggle",l)),f.onScroll!=null&&ze("scroll",l),f.onScrollEnd!=null&&ze("scrollend",l),f.onClick!=null&&(l.onclick=Or),l=!0):l=!1,l||ps(s)}function jm(s){for(Bt=s.return;Bt;)switch(Bt.tag){case 5:case 13:In=!1;return;case 27:case 3:In=!0;return;default:Bt=Bt.return}}function _l(s){if(s!==Bt)return!1;if(!Pe)return jm(s),Pe=!0,!1;var l=s.tag,r;if((r=l!==3&&l!==27)&&((r=l===5)&&(r=s.type,r=!(r!=="form"&&r!=="button")||Jf(s.type,s.memoizedProps)),r=!r),r&&ot&&ps(s),jm(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8)if(r=s.data,r==="/$"){if(l===0){ot=wn(s.nextSibling);break e}l--}else r!=="$"&&r!=="$!"&&r!=="$?"||l++;s=s.nextSibling}ot=null}}else l===27?(l=ot,qi(s.type)?(s=Wf,Wf=null,ot=s):ot=l):ot=Bt?wn(s.stateNode.nextSibling):null;return!0}function Sl(){ot=Bt=null,Pe=!1}function ep(){var s=ms;return s!==null&&(Zt===null?Zt=s:Zt.push.apply(Zt,s),ms=null),s}function Tl(s){ms===null?ms=[s]:ms.push(s)}var Dc=F(null),gs=null,ni=null;function wi(s,l,r){te(Dc,l._currentValue),l._currentValue=r}function ii(s){s._currentValue=Dc.current,Z(Dc)}function kc(s,l,r){for(;s!==null;){var f=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,f!==null&&(f.childLanes|=l)):f!==null&&(f.childLanes&l)!==l&&(f.childLanes|=l),s===r)break;s=s.return}}function Ic(s,l,r,f){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var y=g.dependencies;if(y!==null){var T=g.child;y=y.firstContext;e:for(;y!==null;){var C=y;y=g;for(var A=0;A<l.length;A++)if(C.context===l[A]){y.lanes|=r,C=y.alternate,C!==null&&(C.lanes|=r),kc(y.return,r,s),f||(T=null);break e}y=C.next}}else if(g.tag===18){if(T=g.return,T===null)throw Error(i(341));T.lanes|=r,y=T.alternate,y!==null&&(y.lanes|=r),kc(T,r,s),T=null}else T=g.child;if(T!==null)T.return=g;else for(T=g;T!==null;){if(T===s){T=null;break}if(g=T.sibling,g!==null){g.return=T.return,T=g;break}T=T.return}g=T}}function bl(s,l,r,f){s=null;for(var g=l,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var T=g.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var C=g.type;Qt(g.pendingProps.value,T.value)||(s!==null?s.push(C):s=[C])}}else if(g===Ze.current){if(T=g.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(Wl):s=[Wl])}g=g.return}s!==null&&Ic(l,s,r,f),l.flags|=262144}function or(s){for(s=s.firstContext;s!==null;){if(!Qt(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function vs(s){gs=s,ni=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function zt(s){return tp(gs,s)}function lr(s,l){return gs===null&&vs(s),tp(s,l)}function tp(s,l){var r=l._currentValue;if(l={context:l,memoizedValue:r,next:null},ni===null){if(s===null)throw Error(i(308));ni=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else ni=ni.next=l;return r}var Gb=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(r,f){s.push(f)}};this.abort=function(){l.aborted=!0,s.forEach(function(r){return r()})}},$b=n.unstable_scheduleCallback,Yb=n.unstable_NormalPriority,pt={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zc(){return{controller:new Gb,data:new Map,refCount:0}}function Cl(s){s.refCount--,s.refCount===0&&$b(Yb,function(){s.controller.abort()})}var xl=null,Lc=0,ho=0,mo=null;function Jb(s,l){if(xl===null){var r=xl=[];Lc=0,ho=Of(),mo={status:"pending",value:void 0,then:function(f){r.push(f)}}}return Lc++,l.then(np,np),l}function np(){if(--Lc===0&&xl!==null){mo!==null&&(mo.status="fulfilled");var s=xl;xl=null,ho=0,mo=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function Zb(s,l){var r=[],f={status:"pending",value:null,reason:null,then:function(g){r.push(g)}};return s.then(function(){f.status="fulfilled",f.value=l;for(var g=0;g<r.length;g++)(0,r[g])(l)},function(g){for(f.status="rejected",f.reason=g,g=0;g<r.length;g++)(0,r[g])(void 0)}),f}var ip=P.S;P.S=function(s,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&Jb(s,l),ip!==null&&ip(s,l)};var ys=F(null);function Uc(){var s=ys.current;return s!==null?s:Xe.pooledCache}function ar(s,l){l===null?te(ys,ys.current):te(ys,l.pool)}function sp(){var s=Uc();return s===null?null:{parent:pt._currentValue,pool:s}}var El=Error(i(460)),op=Error(i(474)),rr=Error(i(542)),Vc={then:function(){}};function lp(s){return s=s.status,s==="fulfilled"||s==="rejected"}function ur(){}function ap(s,l,r){switch(r=s[r],r===void 0?s.push(l):r!==l&&(l.then(ur,ur),l=r),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,up(s),s;default:if(typeof l.status=="string")l.then(ur,ur);else{if(s=Xe,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=l,s.status="pending",s.then(function(f){if(l.status==="pending"){var g=l;g.status="fulfilled",g.value=f}},function(f){if(l.status==="pending"){var g=l;g.status="rejected",g.reason=f}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,up(s),s}throw wl=l,El}}var wl=null;function rp(){if(wl===null)throw Error(i(459));var s=wl;return wl=null,s}function up(s){if(s===El||s===rr)throw Error(i(483))}var Mi=!1;function Oc(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bc(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Ai(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ri(s,l,r){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,(Fe&2)!==0){var g=f.pending;return g===null?l.next=l:(l.next=g.next,g.next=l),f.pending=l,l=tr(s),Km(s,null,r),l}return er(s,f,l,r),tr(s)}function Ml(s,l,r){if(l=l.updateQueue,l!==null&&(l=l.shared,(r&4194048)!==0)){var f=l.lanes;f&=s.pendingLanes,r|=f,l.lanes=r,Ci(s,r)}}function Pc(s,l){var r=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,r===f)){var g=null,y=null;if(r=r.firstBaseUpdate,r!==null){do{var T={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};y===null?g=y=T:y=y.next=T,r=r.next}while(r!==null);y===null?g=y=l:y=y.next=l}else g=y=l;r={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:f.shared,callbacks:f.callbacks},s.updateQueue=r;return}s=r.lastBaseUpdate,s===null?r.firstBaseUpdate=l:s.next=l,r.lastBaseUpdate=l}var qc=!1;function Al(){if(qc){var s=mo;if(s!==null)throw s}}function Rl(s,l,r,f){qc=!1;var g=s.updateQueue;Mi=!1;var y=g.firstBaseUpdate,T=g.lastBaseUpdate,C=g.shared.pending;if(C!==null){g.shared.pending=null;var A=C,L=A.next;A.next=null,T===null?y=L:T.next=L,T=A;var H=s.alternate;H!==null&&(H=H.updateQueue,C=H.lastBaseUpdate,C!==T&&(C===null?H.firstBaseUpdate=L:C.next=L,H.lastBaseUpdate=A))}if(y!==null){var J=g.baseState;T=0,H=L=A=null,C=y;do{var V=C.lane&-536870913,O=V!==C.lane;if(O?(Ve&V)===V:(f&V)===V){V!==0&&V===ho&&(qc=!0),H!==null&&(H=H.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Te=s,_e=C;V=l;var Je=r;switch(_e.tag){case 1:if(Te=_e.payload,typeof Te=="function"){J=Te.call(Je,J,V);break e}J=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=_e.payload,V=typeof Te=="function"?Te.call(Je,J,V):Te,V==null)break e;J=v({},J,V);break e;case 2:Mi=!0}}V=C.callback,V!==null&&(s.flags|=64,O&&(s.flags|=8192),O=g.callbacks,O===null?g.callbacks=[V]:O.push(V))}else O={lane:V,tag:C.tag,payload:C.payload,callback:C.callback,next:null},H===null?(L=H=O,A=J):H=H.next=O,T|=V;if(C=C.next,C===null){if(C=g.shared.pending,C===null)break;O=C,C=O.next,O.next=null,g.lastBaseUpdate=O,g.shared.pending=null}}while(!0);H===null&&(A=J),g.baseState=A,g.firstBaseUpdate=L,g.lastBaseUpdate=H,y===null&&(g.shared.lanes=0),Vi|=T,s.lanes=T,s.memoizedState=J}}function cp(s,l){if(typeof s!="function")throw Error(i(191,s));s.call(l)}function fp(s,l){var r=s.callbacks;if(r!==null)for(s.callbacks=null,s=0;s<r.length;s++)cp(r[s],l)}var po=F(null),cr=F(0);function dp(s,l){s=ci,te(cr,s),te(po,l),ci=s|l.baseLanes}function Fc(){te(cr,ci),te(po,po.current)}function Hc(){ci=cr.current,Z(po),Z(cr)}var Ni=0,Re=null,$e=null,ct=null,fr=!1,go=!1,_s=!1,dr=0,Nl=0,vo=null,Kb=0;function at(){throw Error(i(321))}function Gc(s,l){if(l===null)return!1;for(var r=0;r<l.length&&r<s.length;r++)if(!Qt(s[r],l[r]))return!1;return!0}function $c(s,l,r,f,g,y){return Ni=y,Re=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,P.H=s===null||s.memoizedState===null?Kp:Xp,_s=!1,y=r(f,g),_s=!1,go&&(y=mp(l,r,f,g)),hp(s),y}function hp(s){P.H=yr;var l=$e!==null&&$e.next!==null;if(Ni=0,ct=$e=Re=null,fr=!1,Nl=0,vo=null,l)throw Error(i(300));s===null||_t||(s=s.dependencies,s!==null&&or(s)&&(_t=!0))}function mp(s,l,r,f){Re=s;var g=0;do{if(go&&(vo=null),Nl=0,go=!1,25<=g)throw Error(i(301));if(g+=1,ct=$e=null,s.updateQueue!=null){var y=s.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}P.H=nC,y=l(r,f)}while(go);return y}function Xb(){var s=P.H,l=s.useState()[0];return l=typeof l.then=="function"?Dl(l):l,s=s.useState()[0],($e!==null?$e.memoizedState:null)!==s&&(Re.flags|=1024),l}function Yc(){var s=dr!==0;return dr=0,s}function Jc(s,l,r){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~r}function Zc(s){if(fr){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}fr=!1}Ni=0,ct=$e=Re=null,go=!1,Nl=dr=0,vo=null}function Yt(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?Re.memoizedState=ct=s:ct=ct.next=s,ct}function ft(){if($e===null){var s=Re.alternate;s=s!==null?s.memoizedState:null}else s=$e.next;var l=ct===null?Re.memoizedState:ct.next;if(l!==null)ct=l,$e=s;else{if(s===null)throw Re.alternate===null?Error(i(467)):Error(i(310));$e=s,s={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},ct===null?Re.memoizedState=ct=s:ct=ct.next=s}return ct}function Kc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Dl(s){var l=Nl;return Nl+=1,vo===null&&(vo=[]),s=ap(vo,s,l),l=Re,(ct===null?l.memoizedState:ct.next)===null&&(l=l.alternate,P.H=l===null||l.memoizedState===null?Kp:Xp),s}function hr(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Dl(s);if(s.$$typeof===q)return zt(s)}throw Error(i(438,String(s)))}function Xc(s){var l=null,r=Re.updateQueue;if(r!==null&&(l=r.memoCache),l==null){var f=Re.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(l={data:f.data.map(function(g){return g.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),r===null&&(r=Kc(),Re.updateQueue=r),r.memoCache=l,r=l.data[l.index],r===void 0)for(r=l.data[l.index]=Array(s),f=0;f<s;f++)r[f]=X;return l.index++,r}function si(s,l){return typeof l=="function"?l(s):l}function mr(s){var l=ft();return Wc(l,$e,s)}function Wc(s,l,r){var f=s.queue;if(f===null)throw Error(i(311));f.lastRenderedReducer=r;var g=s.baseQueue,y=f.pending;if(y!==null){if(g!==null){var T=g.next;g.next=y.next,y.next=T}l.baseQueue=g=y,f.pending=null}if(y=s.baseState,g===null)s.memoizedState=y;else{l=g.next;var C=T=null,A=null,L=l,H=!1;do{var J=L.lane&-536870913;if(J!==L.lane?(Ve&J)===J:(Ni&J)===J){var V=L.revertLane;if(V===0)A!==null&&(A=A.next={lane:0,revertLane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),J===ho&&(H=!0);else if((Ni&V)===V){L=L.next,V===ho&&(H=!0);continue}else J={lane:0,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},A===null?(C=A=J,T=y):A=A.next=J,Re.lanes|=V,Vi|=V;J=L.action,_s&&r(y,J),y=L.hasEagerState?L.eagerState:r(y,J)}else V={lane:J,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},A===null?(C=A=V,T=y):A=A.next=V,Re.lanes|=J,Vi|=J;L=L.next}while(L!==null&&L!==l);if(A===null?T=y:A.next=C,!Qt(y,s.memoizedState)&&(_t=!0,H&&(r=mo,r!==null)))throw r;s.memoizedState=y,s.baseState=T,s.baseQueue=A,f.lastRenderedState=y}return g===null&&(f.lanes=0),[s.memoizedState,f.dispatch]}function Qc(s){var l=ft(),r=l.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=s;var f=r.dispatch,g=r.pending,y=l.memoizedState;if(g!==null){r.pending=null;var T=g=g.next;do y=s(y,T.action),T=T.next;while(T!==g);Qt(y,l.memoizedState)||(_t=!0),l.memoizedState=y,l.baseQueue===null&&(l.baseState=y),r.lastRenderedState=y}return[y,f]}function pp(s,l,r){var f=Re,g=ft(),y=Pe;if(y){if(r===void 0)throw Error(i(407));r=r()}else r=l();var T=!Qt(($e||g).memoizedState,r);T&&(g.memoizedState=r,_t=!0),g=g.queue;var C=yp.bind(null,f,g,s);if(kl(2048,8,C,[s]),g.getSnapshot!==l||T||ct!==null&&ct.memoizedState.tag&1){if(f.flags|=2048,yo(9,pr(),vp.bind(null,f,g,r,l),null),Xe===null)throw Error(i(349));y||(Ni&124)!==0||gp(f,l,r)}return r}function gp(s,l,r){s.flags|=16384,s={getSnapshot:l,value:r},l=Re.updateQueue,l===null?(l=Kc(),Re.updateQueue=l,l.stores=[s]):(r=l.stores,r===null?l.stores=[s]:r.push(s))}function vp(s,l,r,f){l.value=r,l.getSnapshot=f,_p(l)&&Sp(s)}function yp(s,l,r){return r(function(){_p(l)&&Sp(s)})}function _p(s){var l=s.getSnapshot;s=s.value;try{var r=l();return!Qt(s,r)}catch{return!0}}function Sp(s){var l=ro(s,2);l!==null&&on(l,s,2)}function jc(s){var l=Yt();if(typeof s=="function"){var r=s;if(s=r(),_s){Nn(!0);try{r()}finally{Nn(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:s},l}function Tp(s,l,r,f){return s.baseState=r,Wc(s,$e,typeof f=="function"?f:si)}function Wb(s,l,r,f,g){if(vr(s))throw Error(i(485));if(s=l.action,s!==null){var y={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){y.listeners.push(T)}};P.T!==null?r(!0):y.isTransition=!1,f(y),r=l.pending,r===null?(y.next=l.pending=y,bp(l,y)):(y.next=r.next,l.pending=r.next=y)}}function bp(s,l){var r=l.action,f=l.payload,g=s.state;if(l.isTransition){var y=P.T,T={};P.T=T;try{var C=r(g,f),A=P.S;A!==null&&A(T,C),Cp(s,l,C)}catch(L){ef(s,l,L)}finally{P.T=y}}else try{y=r(g,f),Cp(s,l,y)}catch(L){ef(s,l,L)}}function Cp(s,l,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(f){xp(s,l,f)},function(f){return ef(s,l,f)}):xp(s,l,r)}function xp(s,l,r){l.status="fulfilled",l.value=r,Ep(l),s.state=r,l=s.pending,l!==null&&(r=l.next,r===l?s.pending=null:(r=r.next,l.next=r,bp(s,r)))}function ef(s,l,r){var f=s.pending;if(s.pending=null,f!==null){f=f.next;do l.status="rejected",l.reason=r,Ep(l),l=l.next;while(l!==f)}s.action=null}function Ep(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function wp(s,l){return l}function Mp(s,l){if(Pe){var r=Xe.formState;if(r!==null){e:{var f=Re;if(Pe){if(ot){t:{for(var g=ot,y=In;g.nodeType!==8;){if(!y){g=null;break t}if(g=wn(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){ot=wn(g.nextSibling),f=g.data==="F!";break e}}ps(f)}f=!1}f&&(l=r[0])}}return r=Yt(),r.memoizedState=r.baseState=l,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wp,lastRenderedState:l},r.queue=f,r=Yp.bind(null,Re,f),f.dispatch=r,f=jc(!1),y=lf.bind(null,Re,!1,f.queue),f=Yt(),g={state:l,dispatch:null,action:s,pending:null},f.queue=g,r=Wb.bind(null,Re,g,y,r),g.dispatch=r,f.memoizedState=s,[l,r,!1]}function Ap(s){var l=ft();return Rp(l,$e,s)}function Rp(s,l,r){if(l=Wc(s,l,wp)[0],s=mr(si)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var f=Dl(l)}catch(T){throw T===El?rr:T}else f=l;l=ft();var g=l.queue,y=g.dispatch;return r!==l.memoizedState&&(Re.flags|=2048,yo(9,pr(),Qb.bind(null,g,r),null)),[f,y,s]}function Qb(s,l){s.action=l}function Np(s){var l=ft(),r=$e;if(r!==null)return Rp(l,r,s);ft(),l=l.memoizedState,r=ft();var f=r.queue.dispatch;return r.memoizedState=s,[l,f,!1]}function yo(s,l,r,f){return s={tag:s,create:r,deps:f,inst:l,next:null},l=Re.updateQueue,l===null&&(l=Kc(),Re.updateQueue=l),r=l.lastEffect,r===null?l.lastEffect=s.next=s:(f=r.next,r.next=s,s.next=f,l.lastEffect=s),s}function pr(){return{destroy:void 0,resource:void 0}}function Dp(){return ft().memoizedState}function gr(s,l,r,f){var g=Yt();f=f===void 0?null:f,Re.flags|=s,g.memoizedState=yo(1|l,pr(),r,f)}function kl(s,l,r,f){var g=ft();f=f===void 0?null:f;var y=g.memoizedState.inst;$e!==null&&f!==null&&Gc(f,$e.memoizedState.deps)?g.memoizedState=yo(l,y,r,f):(Re.flags|=s,g.memoizedState=yo(1|l,y,r,f))}function kp(s,l){gr(8390656,8,s,l)}function Ip(s,l){kl(2048,8,s,l)}function zp(s,l){return kl(4,2,s,l)}function Lp(s,l){return kl(4,4,s,l)}function Up(s,l){if(typeof l=="function"){s=s();var r=l(s);return function(){typeof r=="function"?r():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function Vp(s,l,r){r=r!=null?r.concat([s]):null,kl(4,4,Up.bind(null,l,s),r)}function tf(){}function Op(s,l){var r=ft();l=l===void 0?null:l;var f=r.memoizedState;return l!==null&&Gc(l,f[1])?f[0]:(r.memoizedState=[s,l],s)}function Bp(s,l){var r=ft();l=l===void 0?null:l;var f=r.memoizedState;if(l!==null&&Gc(l,f[1]))return f[0];if(f=s(),_s){Nn(!0);try{s()}finally{Nn(!1)}}return r.memoizedState=[f,l],f}function nf(s,l,r){return r===void 0||(Ni&1073741824)!==0?s.memoizedState=l:(s.memoizedState=r,s=Fg(),Re.lanes|=s,Vi|=s,r)}function Pp(s,l,r,f){return Qt(r,l)?r:po.current!==null?(s=nf(s,r,f),Qt(s,l)||(_t=!0),s):(Ni&42)===0?(_t=!0,s.memoizedState=r):(s=Fg(),Re.lanes|=s,Vi|=s,l)}function qp(s,l,r,f,g){var y=ie.p;ie.p=y!==0&&8>y?y:8;var T=P.T,C={};P.T=C,lf(s,!1,l,r);try{var A=g(),L=P.S;if(L!==null&&L(C,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var H=Zb(A,f);Il(s,l,H,sn(s))}else Il(s,l,f,sn(s))}catch(J){Il(s,l,{then:function(){},status:"rejected",reason:J},sn())}finally{ie.p=y,P.T=T}}function jb(){}function sf(s,l,r,f){if(s.tag!==5)throw Error(i(476));var g=Fp(s).queue;qp(s,g,l,j,r===null?jb:function(){return Hp(s),r(f)})}function Fp(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:j,baseState:j,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:j},next:null};var r={};return l.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:r},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function Hp(s){var l=Fp(s).next.queue;Il(s,l,{},sn())}function of(){return zt(Wl)}function Gp(){return ft().memoizedState}function $p(){return ft().memoizedState}function eC(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var r=sn();s=Ai(r);var f=Ri(l,s,r);f!==null&&(on(f,l,r),Ml(f,l,r)),l={cache:zc()},s.payload=l;return}l=l.return}}function tC(s,l,r){var f=sn();r={lane:f,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},vr(s)?Jp(l,r):(r=xc(s,l,r,f),r!==null&&(on(r,s,f),Zp(r,l,f)))}function Yp(s,l,r){var f=sn();Il(s,l,r,f)}function Il(s,l,r,f){var g={lane:f,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(vr(s))Jp(l,g);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=l.lastRenderedReducer,y!==null))try{var T=l.lastRenderedState,C=y(T,r);if(g.hasEagerState=!0,g.eagerState=C,Qt(C,T))return er(s,l,g,0),Xe===null&&ja(),!1}catch{}finally{}if(r=xc(s,l,g,f),r!==null)return on(r,s,f),Zp(r,l,f),!0}return!1}function lf(s,l,r,f){if(f={lane:2,revertLane:Of(),action:f,hasEagerState:!1,eagerState:null,next:null},vr(s)){if(l)throw Error(i(479))}else l=xc(s,r,f,2),l!==null&&on(l,s,2)}function vr(s){var l=s.alternate;return s===Re||l!==null&&l===Re}function Jp(s,l){go=fr=!0;var r=s.pending;r===null?l.next=l:(l.next=r.next,r.next=l),s.pending=l}function Zp(s,l,r){if((r&4194048)!==0){var f=l.lanes;f&=s.pendingLanes,r|=f,l.lanes=r,Ci(s,r)}}var yr={readContext:zt,use:hr,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useLayoutEffect:at,useInsertionEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useSyncExternalStore:at,useId:at,useHostTransitionStatus:at,useFormState:at,useActionState:at,useOptimistic:at,useMemoCache:at,useCacheRefresh:at},Kp={readContext:zt,use:hr,useCallback:function(s,l){return Yt().memoizedState=[s,l===void 0?null:l],s},useContext:zt,useEffect:kp,useImperativeHandle:function(s,l,r){r=r!=null?r.concat([s]):null,gr(4194308,4,Up.bind(null,l,s),r)},useLayoutEffect:function(s,l){return gr(4194308,4,s,l)},useInsertionEffect:function(s,l){gr(4,2,s,l)},useMemo:function(s,l){var r=Yt();l=l===void 0?null:l;var f=s();if(_s){Nn(!0);try{s()}finally{Nn(!1)}}return r.memoizedState=[f,l],f},useReducer:function(s,l,r){var f=Yt();if(r!==void 0){var g=r(l);if(_s){Nn(!0);try{r(l)}finally{Nn(!1)}}}else g=l;return f.memoizedState=f.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},f.queue=s,s=s.dispatch=tC.bind(null,Re,s),[f.memoizedState,s]},useRef:function(s){var l=Yt();return s={current:s},l.memoizedState=s},useState:function(s){s=jc(s);var l=s.queue,r=Yp.bind(null,Re,l);return l.dispatch=r,[s.memoizedState,r]},useDebugValue:tf,useDeferredValue:function(s,l){var r=Yt();return nf(r,s,l)},useTransition:function(){var s=jc(!1);return s=qp.bind(null,Re,s.queue,!0,!1),Yt().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,r){var f=Re,g=Yt();if(Pe){if(r===void 0)throw Error(i(407));r=r()}else{if(r=l(),Xe===null)throw Error(i(349));(Ve&124)!==0||gp(f,l,r)}g.memoizedState=r;var y={value:r,getSnapshot:l};return g.queue=y,kp(yp.bind(null,f,y,s),[s]),f.flags|=2048,yo(9,pr(),vp.bind(null,f,y,r,l),null),r},useId:function(){var s=Yt(),l=Xe.identifierPrefix;if(Pe){var r=ti,f=ei;r=(f&~(1<<32-Ot(f)-1)).toString(32)+r,l="«"+l+"R"+r,r=dr++,0<r&&(l+="H"+r.toString(32)),l+="»"}else r=Kb++,l="«"+l+"r"+r.toString(32)+"»";return s.memoizedState=l},useHostTransitionStatus:of,useFormState:Mp,useActionState:Mp,useOptimistic:function(s){var l=Yt();l.memoizedState=l.baseState=s;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=r,l=lf.bind(null,Re,!0,r),r.dispatch=l,[s,l]},useMemoCache:Xc,useCacheRefresh:function(){return Yt().memoizedState=eC.bind(null,Re)}},Xp={readContext:zt,use:hr,useCallback:Op,useContext:zt,useEffect:Ip,useImperativeHandle:Vp,useInsertionEffect:zp,useLayoutEffect:Lp,useMemo:Bp,useReducer:mr,useRef:Dp,useState:function(){return mr(si)},useDebugValue:tf,useDeferredValue:function(s,l){var r=ft();return Pp(r,$e.memoizedState,s,l)},useTransition:function(){var s=mr(si)[0],l=ft().memoizedState;return[typeof s=="boolean"?s:Dl(s),l]},useSyncExternalStore:pp,useId:Gp,useHostTransitionStatus:of,useFormState:Ap,useActionState:Ap,useOptimistic:function(s,l){var r=ft();return Tp(r,$e,s,l)},useMemoCache:Xc,useCacheRefresh:$p},nC={readContext:zt,use:hr,useCallback:Op,useContext:zt,useEffect:Ip,useImperativeHandle:Vp,useInsertionEffect:zp,useLayoutEffect:Lp,useMemo:Bp,useReducer:Qc,useRef:Dp,useState:function(){return Qc(si)},useDebugValue:tf,useDeferredValue:function(s,l){var r=ft();return $e===null?nf(r,s,l):Pp(r,$e.memoizedState,s,l)},useTransition:function(){var s=Qc(si)[0],l=ft().memoizedState;return[typeof s=="boolean"?s:Dl(s),l]},useSyncExternalStore:pp,useId:Gp,useHostTransitionStatus:of,useFormState:Np,useActionState:Np,useOptimistic:function(s,l){var r=ft();return $e!==null?Tp(r,$e,s,l):(r.baseState=s,[s,r.queue.dispatch])},useMemoCache:Xc,useCacheRefresh:$p},_o=null,zl=0;function _r(s){var l=zl;return zl+=1,_o===null&&(_o=[]),ap(_o,s,l)}function Ll(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function Sr(s,l){throw l.$$typeof===_?Error(i(525)):(s=Object.prototype.toString.call(l),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function Wp(s){var l=s._init;return l(s._payload)}function Qp(s){function l(k,N){if(s){var z=k.deletions;z===null?(k.deletions=[N],k.flags|=16):z.push(N)}}function r(k,N){if(!s)return null;for(;N!==null;)l(k,N),N=N.sibling;return null}function f(k){for(var N=new Map;k!==null;)k.key!==null?N.set(k.key,k):N.set(k.index,k),k=k.sibling;return N}function g(k,N){return k=jn(k,N),k.index=0,k.sibling=null,k}function y(k,N,z){return k.index=z,s?(z=k.alternate,z!==null?(z=z.index,z<N?(k.flags|=67108866,N):z):(k.flags|=67108866,N)):(k.flags|=1048576,N)}function T(k){return s&&k.alternate===null&&(k.flags|=67108866),k}function C(k,N,z,$){return N===null||N.tag!==6?(N=wc(z,k.mode,$),N.return=k,N):(N=g(N,z),N.return=k,N)}function A(k,N,z,$){var ae=z.type;return ae===x?H(k,N,z.props.children,$,z.key):N!==null&&(N.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===ne&&Wp(ae)===N.type)?(N=g(N,z.props),Ll(N,z),N.return=k,N):(N=nr(z.type,z.key,z.props,null,k.mode,$),Ll(N,z),N.return=k,N)}function L(k,N,z,$){return N===null||N.tag!==4||N.stateNode.containerInfo!==z.containerInfo||N.stateNode.implementation!==z.implementation?(N=Mc(z,k.mode,$),N.return=k,N):(N=g(N,z.children||[]),N.return=k,N)}function H(k,N,z,$,ae){return N===null||N.tag!==7?(N=fs(z,k.mode,$,ae),N.return=k,N):(N=g(N,z),N.return=k,N)}function J(k,N,z){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=wc(""+N,k.mode,z),N.return=k,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case S:return z=nr(N.type,N.key,N.props,null,k.mode,z),Ll(z,N),z.return=k,z;case b:return N=Mc(N,k.mode,z),N.return=k,N;case ne:var $=N._init;return N=$(N._payload),J(k,N,z)}if(be(N)||de(N))return N=fs(N,k.mode,z,null),N.return=k,N;if(typeof N.then=="function")return J(k,_r(N),z);if(N.$$typeof===q)return J(k,lr(k,N),z);Sr(k,N)}return null}function V(k,N,z,$){var ae=N!==null?N.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return ae!==null?null:C(k,N,""+z,$);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case S:return z.key===ae?A(k,N,z,$):null;case b:return z.key===ae?L(k,N,z,$):null;case ne:return ae=z._init,z=ae(z._payload),V(k,N,z,$)}if(be(z)||de(z))return ae!==null?null:H(k,N,z,$,null);if(typeof z.then=="function")return V(k,N,_r(z),$);if(z.$$typeof===q)return V(k,N,lr(k,z),$);Sr(k,z)}return null}function O(k,N,z,$,ae){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return k=k.get(z)||null,C(N,k,""+$,ae);if(typeof $=="object"&&$!==null){switch($.$$typeof){case S:return k=k.get($.key===null?z:$.key)||null,A(N,k,$,ae);case b:return k=k.get($.key===null?z:$.key)||null,L(N,k,$,ae);case ne:var De=$._init;return $=De($._payload),O(k,N,z,$,ae)}if(be($)||de($))return k=k.get(z)||null,H(N,k,$,ae,null);if(typeof $.then=="function")return O(k,N,z,_r($),ae);if($.$$typeof===q)return O(k,N,z,lr(N,$),ae);Sr(N,$)}return null}function Te(k,N,z,$){for(var ae=null,De=null,pe=N,Se=N=0,Tt=null;pe!==null&&Se<z.length;Se++){pe.index>Se?(Tt=pe,pe=null):Tt=pe.sibling;var Oe=V(k,pe,z[Se],$);if(Oe===null){pe===null&&(pe=Tt);break}s&&pe&&Oe.alternate===null&&l(k,pe),N=y(Oe,N,Se),De===null?ae=Oe:De.sibling=Oe,De=Oe,pe=Tt}if(Se===z.length)return r(k,pe),Pe&&hs(k,Se),ae;if(pe===null){for(;Se<z.length;Se++)pe=J(k,z[Se],$),pe!==null&&(N=y(pe,N,Se),De===null?ae=pe:De.sibling=pe,De=pe);return Pe&&hs(k,Se),ae}for(pe=f(pe);Se<z.length;Se++)Tt=O(pe,k,Se,z[Se],$),Tt!==null&&(s&&Tt.alternate!==null&&pe.delete(Tt.key===null?Se:Tt.key),N=y(Tt,N,Se),De===null?ae=Tt:De.sibling=Tt,De=Tt);return s&&pe.forEach(function(Yi){return l(k,Yi)}),Pe&&hs(k,Se),ae}function _e(k,N,z,$){if(z==null)throw Error(i(151));for(var ae=null,De=null,pe=N,Se=N=0,Tt=null,Oe=z.next();pe!==null&&!Oe.done;Se++,Oe=z.next()){pe.index>Se?(Tt=pe,pe=null):Tt=pe.sibling;var Yi=V(k,pe,Oe.value,$);if(Yi===null){pe===null&&(pe=Tt);break}s&&pe&&Yi.alternate===null&&l(k,pe),N=y(Yi,N,Se),De===null?ae=Yi:De.sibling=Yi,De=Yi,pe=Tt}if(Oe.done)return r(k,pe),Pe&&hs(k,Se),ae;if(pe===null){for(;!Oe.done;Se++,Oe=z.next())Oe=J(k,Oe.value,$),Oe!==null&&(N=y(Oe,N,Se),De===null?ae=Oe:De.sibling=Oe,De=Oe);return Pe&&hs(k,Se),ae}for(pe=f(pe);!Oe.done;Se++,Oe=z.next())Oe=O(pe,k,Se,Oe.value,$),Oe!==null&&(s&&Oe.alternate!==null&&pe.delete(Oe.key===null?Se:Oe.key),N=y(Oe,N,Se),De===null?ae=Oe:De.sibling=Oe,De=Oe);return s&&pe.forEach(function(ix){return l(k,ix)}),Pe&&hs(k,Se),ae}function Je(k,N,z,$){if(typeof z=="object"&&z!==null&&z.type===x&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case S:e:{for(var ae=z.key;N!==null;){if(N.key===ae){if(ae=z.type,ae===x){if(N.tag===7){r(k,N.sibling),$=g(N,z.props.children),$.return=k,k=$;break e}}else if(N.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===ne&&Wp(ae)===N.type){r(k,N.sibling),$=g(N,z.props),Ll($,z),$.return=k,k=$;break e}r(k,N);break}else l(k,N);N=N.sibling}z.type===x?($=fs(z.props.children,k.mode,$,z.key),$.return=k,k=$):($=nr(z.type,z.key,z.props,null,k.mode,$),Ll($,z),$.return=k,k=$)}return T(k);case b:e:{for(ae=z.key;N!==null;){if(N.key===ae)if(N.tag===4&&N.stateNode.containerInfo===z.containerInfo&&N.stateNode.implementation===z.implementation){r(k,N.sibling),$=g(N,z.children||[]),$.return=k,k=$;break e}else{r(k,N);break}else l(k,N);N=N.sibling}$=Mc(z,k.mode,$),$.return=k,k=$}return T(k);case ne:return ae=z._init,z=ae(z._payload),Je(k,N,z,$)}if(be(z))return Te(k,N,z,$);if(de(z)){if(ae=de(z),typeof ae!="function")throw Error(i(150));return z=ae.call(z),_e(k,N,z,$)}if(typeof z.then=="function")return Je(k,N,_r(z),$);if(z.$$typeof===q)return Je(k,N,lr(k,z),$);Sr(k,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,N!==null&&N.tag===6?(r(k,N.sibling),$=g(N,z),$.return=k,k=$):(r(k,N),$=wc(z,k.mode,$),$.return=k,k=$),T(k)):r(k,N)}return function(k,N,z,$){try{zl=0;var ae=Je(k,N,z,$);return _o=null,ae}catch(pe){if(pe===El||pe===rr)throw pe;var De=jt(29,pe,null,k.mode);return De.lanes=$,De.return=k,De}finally{}}}var So=Qp(!0),jp=Qp(!1),pn=F(null),zn=null;function Di(s){var l=s.alternate;te(gt,gt.current&1),te(pn,s),zn===null&&(l===null||po.current!==null||l.memoizedState!==null)&&(zn=s)}function eg(s){if(s.tag===22){if(te(gt,gt.current),te(pn,s),zn===null){var l=s.alternate;l!==null&&l.memoizedState!==null&&(zn=s)}}else ki()}function ki(){te(gt,gt.current),te(pn,pn.current)}function oi(s){Z(pn),zn===s&&(zn=null),Z(gt)}var gt=F(0);function Tr(s){for(var l=s;l!==null;){if(l.tag===13){var r=l.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||Xf(r)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function af(s,l,r,f){l=s.memoizedState,r=r(f,l),r=r==null?l:v({},l,r),s.memoizedState=r,s.lanes===0&&(s.updateQueue.baseState=r)}var rf={enqueueSetState:function(s,l,r){s=s._reactInternals;var f=sn(),g=Ai(f);g.payload=l,r!=null&&(g.callback=r),l=Ri(s,g,f),l!==null&&(on(l,s,f),Ml(l,s,f))},enqueueReplaceState:function(s,l,r){s=s._reactInternals;var f=sn(),g=Ai(f);g.tag=1,g.payload=l,r!=null&&(g.callback=r),l=Ri(s,g,f),l!==null&&(on(l,s,f),Ml(l,s,f))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var r=sn(),f=Ai(r);f.tag=2,l!=null&&(f.callback=l),l=Ri(s,f,r),l!==null&&(on(l,s,r),Ml(l,s,r))}};function tg(s,l,r,f,g,y,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,y,T):l.prototype&&l.prototype.isPureReactComponent?!vl(r,f)||!vl(g,y):!0}function ng(s,l,r,f){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(r,f),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(r,f),l.state!==s&&rf.enqueueReplaceState(l,l.state,null)}function Ss(s,l){var r=l;if("ref"in l){r={};for(var f in l)f!=="ref"&&(r[f]=l[f])}if(s=s.defaultProps){r===l&&(r=v({},r));for(var g in s)r[g]===void 0&&(r[g]=s[g])}return r}var br=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function ig(s){br(s)}function sg(s){console.error(s)}function og(s){br(s)}function Cr(s,l){try{var r=s.onUncaughtError;r(l.value,{componentStack:l.stack})}catch(f){setTimeout(function(){throw f})}}function lg(s,l,r){try{var f=s.onCaughtError;f(r.value,{componentStack:r.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function uf(s,l,r){return r=Ai(r),r.tag=3,r.payload={element:null},r.callback=function(){Cr(s,l)},r}function ag(s){return s=Ai(s),s.tag=3,s}function rg(s,l,r,f){var g=r.type.getDerivedStateFromError;if(typeof g=="function"){var y=f.value;s.payload=function(){return g(y)},s.callback=function(){lg(l,r,f)}}var T=r.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(s.callback=function(){lg(l,r,f),typeof g!="function"&&(Oi===null?Oi=new Set([this]):Oi.add(this));var C=f.stack;this.componentDidCatch(f.value,{componentStack:C!==null?C:""})})}function iC(s,l,r,f,g){if(r.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(l=r.alternate,l!==null&&bl(l,r,g,!0),r=pn.current,r!==null){switch(r.tag){case 13:return zn===null?If():r.alternate===null&&lt===0&&(lt=3),r.flags&=-257,r.flags|=65536,r.lanes=g,f===Vc?r.flags|=16384:(l=r.updateQueue,l===null?r.updateQueue=new Set([f]):l.add(f),Lf(s,f,g)),!1;case 22:return r.flags|=65536,f===Vc?r.flags|=16384:(l=r.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([f])},r.updateQueue=l):(r=l.retryQueue,r===null?l.retryQueue=new Set([f]):r.add(f)),Lf(s,f,g)),!1}throw Error(i(435,r.tag))}return Lf(s,f,g),If(),!1}if(Pe)return l=pn.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=g,f!==Nc&&(s=Error(i(422),{cause:f}),Tl(fn(s,r)))):(f!==Nc&&(l=Error(i(423),{cause:f}),Tl(fn(l,r))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,f=fn(f,r),g=uf(s.stateNode,f,g),Pc(s,g),lt!==4&&(lt=2)),!1;var y=Error(i(520),{cause:f});if(y=fn(y,r),Fl===null?Fl=[y]:Fl.push(y),lt!==4&&(lt=2),l===null)return!0;f=fn(f,r),r=l;do{switch(r.tag){case 3:return r.flags|=65536,s=g&-g,r.lanes|=s,s=uf(r.stateNode,f,s),Pc(r,s),!1;case 1:if(l=r.type,y=r.stateNode,(r.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Oi===null||!Oi.has(y))))return r.flags|=65536,g&=-g,r.lanes|=g,g=ag(g),rg(g,s,r,f),Pc(r,g),!1}r=r.return}while(r!==null);return!1}var ug=Error(i(461)),_t=!1;function xt(s,l,r,f){l.child=s===null?jp(l,null,r,f):So(l,s.child,r,f)}function cg(s,l,r,f,g){r=r.render;var y=l.ref;if("ref"in f){var T={};for(var C in f)C!=="ref"&&(T[C]=f[C])}else T=f;return vs(l),f=$c(s,l,r,T,y,g),C=Yc(),s!==null&&!_t?(Jc(s,l,g),li(s,l,g)):(Pe&&C&&Ac(l),l.flags|=1,xt(s,l,f,g),l.child)}function fg(s,l,r,f,g){if(s===null){var y=r.type;return typeof y=="function"&&!Ec(y)&&y.defaultProps===void 0&&r.compare===null?(l.tag=15,l.type=y,dg(s,l,y,f,g)):(s=nr(r.type,null,f,l,l.mode,g),s.ref=l.ref,s.return=l,l.child=s)}if(y=s.child,!vf(s,g)){var T=y.memoizedProps;if(r=r.compare,r=r!==null?r:vl,r(T,f)&&s.ref===l.ref)return li(s,l,g)}return l.flags|=1,s=jn(y,f),s.ref=l.ref,s.return=l,l.child=s}function dg(s,l,r,f,g){if(s!==null){var y=s.memoizedProps;if(vl(y,f)&&s.ref===l.ref)if(_t=!1,l.pendingProps=f=y,vf(s,g))(s.flags&131072)!==0&&(_t=!0);else return l.lanes=s.lanes,li(s,l,g)}return cf(s,l,r,f,g)}function hg(s,l,r){var f=l.pendingProps,g=f.children,y=s!==null?s.memoizedState:null;if(f.mode==="hidden"){if((l.flags&128)!==0){if(f=y!==null?y.baseLanes|r:r,s!==null){for(g=l.child=s.child,y=0;g!==null;)y=y|g.lanes|g.childLanes,g=g.sibling;l.childLanes=y&~f}else l.childLanes=0,l.child=null;return mg(s,l,f,r)}if((r&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&ar(l,y!==null?y.cachePool:null),y!==null?dp(l,y):Fc(),eg(l);else return l.lanes=l.childLanes=536870912,mg(s,l,y!==null?y.baseLanes|r:r,r)}else y!==null?(ar(l,y.cachePool),dp(l,y),ki(),l.memoizedState=null):(s!==null&&ar(l,null),Fc(),ki());return xt(s,l,g,r),l.child}function mg(s,l,r,f){var g=Uc();return g=g===null?null:{parent:pt._currentValue,pool:g},l.memoizedState={baseLanes:r,cachePool:g},s!==null&&ar(l,null),Fc(),eg(l),s!==null&&bl(s,l,f,!0),null}function xr(s,l){var r=l.ref;if(r===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(i(284));(s===null||s.ref!==r)&&(l.flags|=4194816)}}function cf(s,l,r,f,g){return vs(l),r=$c(s,l,r,f,void 0,g),f=Yc(),s!==null&&!_t?(Jc(s,l,g),li(s,l,g)):(Pe&&f&&Ac(l),l.flags|=1,xt(s,l,r,g),l.child)}function pg(s,l,r,f,g,y){return vs(l),l.updateQueue=null,r=mp(l,f,r,g),hp(s),f=Yc(),s!==null&&!_t?(Jc(s,l,y),li(s,l,y)):(Pe&&f&&Ac(l),l.flags|=1,xt(s,l,r,y),l.child)}function gg(s,l,r,f,g){if(vs(l),l.stateNode===null){var y=uo,T=r.contextType;typeof T=="object"&&T!==null&&(y=zt(T)),y=new r(f,y),l.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=rf,l.stateNode=y,y._reactInternals=l,y=l.stateNode,y.props=f,y.state=l.memoizedState,y.refs={},Oc(l),T=r.contextType,y.context=typeof T=="object"&&T!==null?zt(T):uo,y.state=l.memoizedState,T=r.getDerivedStateFromProps,typeof T=="function"&&(af(l,r,T,f),y.state=l.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(T=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),T!==y.state&&rf.enqueueReplaceState(y,y.state,null),Rl(l,f,y,g),Al(),y.state=l.memoizedState),typeof y.componentDidMount=="function"&&(l.flags|=4194308),f=!0}else if(s===null){y=l.stateNode;var C=l.memoizedProps,A=Ss(r,C);y.props=A;var L=y.context,H=r.contextType;T=uo,typeof H=="object"&&H!==null&&(T=zt(H));var J=r.getDerivedStateFromProps;H=typeof J=="function"||typeof y.getSnapshotBeforeUpdate=="function",C=l.pendingProps!==C,H||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C||L!==T)&&ng(l,y,f,T),Mi=!1;var V=l.memoizedState;y.state=V,Rl(l,f,y,g),Al(),L=l.memoizedState,C||V!==L||Mi?(typeof J=="function"&&(af(l,r,J,f),L=l.memoizedState),(A=Mi||tg(l,r,A,f,V,L,T))?(H||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(l.flags|=4194308)):(typeof y.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=f,l.memoizedState=L),y.props=f,y.state=L,y.context=T,f=A):(typeof y.componentDidMount=="function"&&(l.flags|=4194308),f=!1)}else{y=l.stateNode,Bc(s,l),T=l.memoizedProps,H=Ss(r,T),y.props=H,J=l.pendingProps,V=y.context,L=r.contextType,A=uo,typeof L=="object"&&L!==null&&(A=zt(L)),C=r.getDerivedStateFromProps,(L=typeof C=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==J||V!==A)&&ng(l,y,f,A),Mi=!1,V=l.memoizedState,y.state=V,Rl(l,f,y,g),Al();var O=l.memoizedState;T!==J||V!==O||Mi||s!==null&&s.dependencies!==null&&or(s.dependencies)?(typeof C=="function"&&(af(l,r,C,f),O=l.memoizedState),(H=Mi||tg(l,r,H,f,V,O,A)||s!==null&&s.dependencies!==null&&or(s.dependencies))?(L||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(f,O,A),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(f,O,A)),typeof y.componentDidUpdate=="function"&&(l.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===s.memoizedProps&&V===s.memoizedState||(l.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&V===s.memoizedState||(l.flags|=1024),l.memoizedProps=f,l.memoizedState=O),y.props=f,y.state=O,y.context=A,f=H):(typeof y.componentDidUpdate!="function"||T===s.memoizedProps&&V===s.memoizedState||(l.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&V===s.memoizedState||(l.flags|=1024),f=!1)}return y=f,xr(s,l),f=(l.flags&128)!==0,y||f?(y=l.stateNode,r=f&&typeof r.getDerivedStateFromError!="function"?null:y.render(),l.flags|=1,s!==null&&f?(l.child=So(l,s.child,null,g),l.child=So(l,null,r,g)):xt(s,l,r,g),l.memoizedState=y.state,s=l.child):s=li(s,l,g),s}function vg(s,l,r,f){return Sl(),l.flags|=256,xt(s,l,r,f),l.child}var ff={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function df(s){return{baseLanes:s,cachePool:sp()}}function hf(s,l,r){return s=s!==null?s.childLanes&~r:0,l&&(s|=gn),s}function yg(s,l,r){var f=l.pendingProps,g=!1,y=(l.flags&128)!==0,T;if((T=y)||(T=s!==null&&s.memoizedState===null?!1:(gt.current&2)!==0),T&&(g=!0,l.flags&=-129),T=(l.flags&32)!==0,l.flags&=-33,s===null){if(Pe){if(g?Di(l):ki(),Pe){var C=ot,A;if(A=C){e:{for(A=C,C=In;A.nodeType!==8;){if(!C){C=null;break e}if(A=wn(A.nextSibling),A===null){C=null;break e}}C=A}C!==null?(l.memoizedState={dehydrated:C,treeContext:ds!==null?{id:ei,overflow:ti}:null,retryLane:536870912,hydrationErrors:null},A=jt(18,null,null,0),A.stateNode=C,A.return=l,l.child=A,Bt=l,ot=null,A=!0):A=!1}A||ps(l)}if(C=l.memoizedState,C!==null&&(C=C.dehydrated,C!==null))return Xf(C)?l.lanes=32:l.lanes=536870912,null;oi(l)}return C=f.children,f=f.fallback,g?(ki(),g=l.mode,C=Er({mode:"hidden",children:C},g),f=fs(f,g,r,null),C.return=l,f.return=l,C.sibling=f,l.child=C,g=l.child,g.memoizedState=df(r),g.childLanes=hf(s,T,r),l.memoizedState=ff,f):(Di(l),mf(l,C))}if(A=s.memoizedState,A!==null&&(C=A.dehydrated,C!==null)){if(y)l.flags&256?(Di(l),l.flags&=-257,l=pf(s,l,r)):l.memoizedState!==null?(ki(),l.child=s.child,l.flags|=128,l=null):(ki(),g=f.fallback,C=l.mode,f=Er({mode:"visible",children:f.children},C),g=fs(g,C,r,null),g.flags|=2,f.return=l,g.return=l,f.sibling=g,l.child=f,So(l,s.child,null,r),f=l.child,f.memoizedState=df(r),f.childLanes=hf(s,T,r),l.memoizedState=ff,l=g);else if(Di(l),Xf(C)){if(T=C.nextSibling&&C.nextSibling.dataset,T)var L=T.dgst;T=L,f=Error(i(419)),f.stack="",f.digest=T,Tl({value:f,source:null,stack:null}),l=pf(s,l,r)}else if(_t||bl(s,l,r,!1),T=(r&s.childLanes)!==0,_t||T){if(T=Xe,T!==null&&(f=r&-r,f=(f&42)!==0?1:Kn(f),f=(f&(T.suspendedLanes|r))!==0?0:f,f!==0&&f!==A.retryLane))throw A.retryLane=f,ro(s,f),on(T,s,f),ug;C.data==="$?"||If(),l=pf(s,l,r)}else C.data==="$?"?(l.flags|=192,l.child=s.child,l=null):(s=A.treeContext,ot=wn(C.nextSibling),Bt=l,Pe=!0,ms=null,In=!1,s!==null&&(hn[mn++]=ei,hn[mn++]=ti,hn[mn++]=ds,ei=s.id,ti=s.overflow,ds=l),l=mf(l,f.children),l.flags|=4096);return l}return g?(ki(),g=f.fallback,C=l.mode,A=s.child,L=A.sibling,f=jn(A,{mode:"hidden",children:f.children}),f.subtreeFlags=A.subtreeFlags&65011712,L!==null?g=jn(L,g):(g=fs(g,C,r,null),g.flags|=2),g.return=l,f.return=l,f.sibling=g,l.child=f,f=g,g=l.child,C=s.child.memoizedState,C===null?C=df(r):(A=C.cachePool,A!==null?(L=pt._currentValue,A=A.parent!==L?{parent:L,pool:L}:A):A=sp(),C={baseLanes:C.baseLanes|r,cachePool:A}),g.memoizedState=C,g.childLanes=hf(s,T,r),l.memoizedState=ff,f):(Di(l),r=s.child,s=r.sibling,r=jn(r,{mode:"visible",children:f.children}),r.return=l,r.sibling=null,s!==null&&(T=l.deletions,T===null?(l.deletions=[s],l.flags|=16):T.push(s)),l.child=r,l.memoizedState=null,r)}function mf(s,l){return l=Er({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function Er(s,l){return s=jt(22,s,null,l),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function pf(s,l,r){return So(l,s.child,null,r),s=mf(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function _g(s,l,r){s.lanes|=l;var f=s.alternate;f!==null&&(f.lanes|=l),kc(s.return,l,r)}function gf(s,l,r,f,g){var y=s.memoizedState;y===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:f,tail:r,tailMode:g}:(y.isBackwards=l,y.rendering=null,y.renderingStartTime=0,y.last=f,y.tail=r,y.tailMode=g)}function Sg(s,l,r){var f=l.pendingProps,g=f.revealOrder,y=f.tail;if(xt(s,l,f.children,r),f=gt.current,(f&2)!==0)f=f&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&_g(s,r,l);else if(s.tag===19)_g(s,r,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}switch(te(gt,f),g){case"forwards":for(r=l.child,g=null;r!==null;)s=r.alternate,s!==null&&Tr(s)===null&&(g=r),r=r.sibling;r=g,r===null?(g=l.child,l.child=null):(g=r.sibling,r.sibling=null),gf(l,!1,g,r,y);break;case"backwards":for(r=null,g=l.child,l.child=null;g!==null;){if(s=g.alternate,s!==null&&Tr(s)===null){l.child=g;break}s=g.sibling,g.sibling=r,r=g,g=s}gf(l,!0,r,null,y);break;case"together":gf(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function li(s,l,r){if(s!==null&&(l.dependencies=s.dependencies),Vi|=l.lanes,(r&l.childLanes)===0)if(s!==null){if(bl(s,l,r,!1),(r&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(i(153));if(l.child!==null){for(s=l.child,r=jn(s,s.pendingProps),l.child=r,r.return=l;s.sibling!==null;)s=s.sibling,r=r.sibling=jn(s,s.pendingProps),r.return=l;r.sibling=null}return l.child}function vf(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&or(s)))}function sC(s,l,r){switch(l.tag){case 3:ye(l,l.stateNode.containerInfo),wi(l,pt,s.memoizedState.cache),Sl();break;case 27:case 5:Ne(l);break;case 4:ye(l,l.stateNode.containerInfo);break;case 10:wi(l,l.type,l.memoizedProps.value);break;case 13:var f=l.memoizedState;if(f!==null)return f.dehydrated!==null?(Di(l),l.flags|=128,null):(r&l.child.childLanes)!==0?yg(s,l,r):(Di(l),s=li(s,l,r),s!==null?s.sibling:null);Di(l);break;case 19:var g=(s.flags&128)!==0;if(f=(r&l.childLanes)!==0,f||(bl(s,l,r,!1),f=(r&l.childLanes)!==0),g){if(f)return Sg(s,l,r);l.flags|=128}if(g=l.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),te(gt,gt.current),f)break;return null;case 22:case 23:return l.lanes=0,hg(s,l,r);case 24:wi(l,pt,s.memoizedState.cache)}return li(s,l,r)}function Tg(s,l,r){if(s!==null)if(s.memoizedProps!==l.pendingProps)_t=!0;else{if(!vf(s,r)&&(l.flags&128)===0)return _t=!1,sC(s,l,r);_t=(s.flags&131072)!==0}else _t=!1,Pe&&(l.flags&1048576)!==0&&Wm(l,sr,l.index);switch(l.lanes=0,l.tag){case 16:e:{s=l.pendingProps;var f=l.elementType,g=f._init;if(f=g(f._payload),l.type=f,typeof f=="function")Ec(f)?(s=Ss(f,s),l.tag=1,l=gg(null,l,f,s,r)):(l.tag=0,l=cf(null,l,f,s,r));else{if(f!=null){if(g=f.$$typeof,g===R){l.tag=11,l=cg(null,l,f,s,r);break e}else if(g===G){l.tag=14,l=fg(null,l,f,s,r);break e}}throw l=ke(f)||f,Error(i(306,l,""))}}return l;case 0:return cf(s,l,l.type,l.pendingProps,r);case 1:return f=l.type,g=Ss(f,l.pendingProps),gg(s,l,f,g,r);case 3:e:{if(ye(l,l.stateNode.containerInfo),s===null)throw Error(i(387));f=l.pendingProps;var y=l.memoizedState;g=y.element,Bc(s,l),Rl(l,f,null,r);var T=l.memoizedState;if(f=T.cache,wi(l,pt,f),f!==y.cache&&Ic(l,[pt],r,!0),Al(),f=T.element,y.isDehydrated)if(y={element:f,isDehydrated:!1,cache:T.cache},l.updateQueue.baseState=y,l.memoizedState=y,l.flags&256){l=vg(s,l,f,r);break e}else if(f!==g){g=fn(Error(i(424)),l),Tl(g),l=vg(s,l,f,r);break e}else{switch(s=l.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(ot=wn(s.firstChild),Bt=l,Pe=!0,ms=null,In=!0,r=jp(l,null,f,r),l.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Sl(),f===g){l=li(s,l,r);break e}xt(s,l,f,r)}l=l.child}return l;case 26:return xr(s,l),s===null?(r=Ev(l.type,null,l.pendingProps,null))?l.memoizedState=r:Pe||(r=l.type,s=l.pendingProps,f=Br(le.current).createElement(r),f[It]=l,f[Gt]=s,wt(f,r,s),yt(f),l.stateNode=f):l.memoizedState=Ev(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return Ne(l),s===null&&Pe&&(f=l.stateNode=bv(l.type,l.pendingProps,le.current),Bt=l,In=!0,g=ot,qi(l.type)?(Wf=g,ot=wn(f.firstChild)):ot=g),xt(s,l,l.pendingProps.children,r),xr(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&Pe&&((g=f=ot)&&(f=kC(f,l.type,l.pendingProps,In),f!==null?(l.stateNode=f,Bt=l,ot=wn(f.firstChild),In=!1,g=!0):g=!1),g||ps(l)),Ne(l),g=l.type,y=l.pendingProps,T=s!==null?s.memoizedProps:null,f=y.children,Jf(g,y)?f=null:T!==null&&Jf(g,T)&&(l.flags|=32),l.memoizedState!==null&&(g=$c(s,l,Xb,null,null,r),Wl._currentValue=g),xr(s,l),xt(s,l,f,r),l.child;case 6:return s===null&&Pe&&((s=r=ot)&&(r=IC(r,l.pendingProps,In),r!==null?(l.stateNode=r,Bt=l,ot=null,s=!0):s=!1),s||ps(l)),null;case 13:return yg(s,l,r);case 4:return ye(l,l.stateNode.containerInfo),f=l.pendingProps,s===null?l.child=So(l,null,f,r):xt(s,l,f,r),l.child;case 11:return cg(s,l,l.type,l.pendingProps,r);case 7:return xt(s,l,l.pendingProps,r),l.child;case 8:return xt(s,l,l.pendingProps.children,r),l.child;case 12:return xt(s,l,l.pendingProps.children,r),l.child;case 10:return f=l.pendingProps,wi(l,l.type,f.value),xt(s,l,f.children,r),l.child;case 9:return g=l.type._context,f=l.pendingProps.children,vs(l),g=zt(g),f=f(g),l.flags|=1,xt(s,l,f,r),l.child;case 14:return fg(s,l,l.type,l.pendingProps,r);case 15:return dg(s,l,l.type,l.pendingProps,r);case 19:return Sg(s,l,r);case 31:return f=l.pendingProps,r=l.mode,f={mode:f.mode,children:f.children},s===null?(r=Er(f,r),r.ref=l.ref,l.child=r,r.return=l,l=r):(r=jn(s.child,f),r.ref=l.ref,l.child=r,r.return=l,l=r),l;case 22:return hg(s,l,r);case 24:return vs(l),f=zt(pt),s===null?(g=Uc(),g===null&&(g=Xe,y=zc(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=r),g=y),l.memoizedState={parent:f,cache:g},Oc(l),wi(l,pt,g)):((s.lanes&r)!==0&&(Bc(s,l),Rl(l,null,null,r),Al()),g=s.memoizedState,y=l.memoizedState,g.parent!==f?(g={parent:f,cache:f},l.memoizedState=g,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=g),wi(l,pt,f)):(f=y.cache,wi(l,pt,f),f!==g.cache&&Ic(l,[pt],r,!0))),xt(s,l,l.pendingProps.children,r),l.child;case 29:throw l.pendingProps}throw Error(i(156,l.tag))}function ai(s){s.flags|=4}function bg(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Nv(l)){if(l=pn.current,l!==null&&((Ve&4194048)===Ve?zn!==null:(Ve&62914560)!==Ve&&(Ve&536870912)===0||l!==zn))throw wl=Vc,op;s.flags|=8192}}function wr(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?$s():536870912,s.lanes|=l,xo|=l)}function Ul(s,l){if(!Pe)switch(s.tailMode){case"hidden":l=s.tail;for(var r=null;l!==null;)l.alternate!==null&&(r=l),l=l.sibling;r===null?s.tail=null:r.sibling=null;break;case"collapsed":r=s.tail;for(var f=null;r!==null;)r.alternate!==null&&(f=r),r=r.sibling;f===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function st(s){var l=s.alternate!==null&&s.alternate.child===s.child,r=0,f=0;if(l)for(var g=s.child;g!==null;)r|=g.lanes|g.childLanes,f|=g.subtreeFlags&65011712,f|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)r|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=f,s.childLanes=r,l}function oC(s,l,r){var f=l.pendingProps;switch(Rc(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(l),null;case 1:return st(l),null;case 3:return r=l.stateNode,f=null,s!==null&&(f=s.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),ii(pt),mt(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(s===null||s.child===null)&&(_l(l)?ai(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,ep())),st(l),null;case 26:return r=l.memoizedState,s===null?(ai(l),r!==null?(st(l),bg(l,r)):(st(l),l.flags&=-16777217)):r?r!==s.memoizedState?(ai(l),st(l),bg(l,r)):(st(l),l.flags&=-16777217):(s.memoizedProps!==f&&ai(l),st(l),l.flags&=-16777217),null;case 27:et(l),r=le.current;var g=l.type;if(s!==null&&l.stateNode!=null)s.memoizedProps!==f&&ai(l);else{if(!f){if(l.stateNode===null)throw Error(i(166));return st(l),null}s=se.current,_l(l)?Qm(l):(s=bv(g,f,r),l.stateNode=s,ai(l))}return st(l),null;case 5:if(et(l),r=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==f&&ai(l);else{if(!f){if(l.stateNode===null)throw Error(i(166));return st(l),null}if(s=se.current,_l(l))Qm(l);else{switch(g=Br(le.current),s){case 1:s=g.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:s=g.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":s=g.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":s=g.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":s=g.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof f.is=="string"?g.createElement("select",{is:f.is}):g.createElement("select"),f.multiple?s.multiple=!0:f.size&&(s.size=f.size);break;default:s=typeof f.is=="string"?g.createElement(r,{is:f.is}):g.createElement(r)}}s[It]=l,s[Gt]=f;e:for(g=l.child;g!==null;){if(g.tag===5||g.tag===6)s.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===l)break e;for(;g.sibling===null;){if(g.return===null||g.return===l)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}l.stateNode=s;e:switch(wt(s,r,f),r){case"button":case"input":case"select":case"textarea":s=!!f.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&ai(l)}}return st(l),l.flags&=-16777217,null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==f&&ai(l);else{if(typeof f!="string"&&l.stateNode===null)throw Error(i(166));if(s=le.current,_l(l)){if(s=l.stateNode,r=l.memoizedProps,f=null,g=Bt,g!==null)switch(g.tag){case 27:case 5:f=g.memoizedProps}s[It]=l,s=!!(s.nodeValue===r||f!==null&&f.suppressHydrationWarning===!0||pv(s.nodeValue,r)),s||ps(l)}else s=Br(s).createTextNode(f),s[It]=l,l.stateNode=s}return st(l),null;case 13:if(f=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=_l(l),f!==null&&f.dehydrated!==null){if(s===null){if(!g)throw Error(i(318));if(g=l.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[It]=l}else Sl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;st(l),g=!1}else g=ep(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return l.flags&256?(oi(l),l):(oi(l),null)}if(oi(l),(l.flags&128)!==0)return l.lanes=r,l;if(r=f!==null,s=s!==null&&s.memoizedState!==null,r){f=l.child,g=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(g=f.alternate.memoizedState.cachePool.pool);var y=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(y=f.memoizedState.cachePool.pool),y!==g&&(f.flags|=2048)}return r!==s&&r&&(l.child.flags|=8192),wr(l,l.updateQueue),st(l),null;case 4:return mt(),s===null&&Ff(l.stateNode.containerInfo),st(l),null;case 10:return ii(l.type),st(l),null;case 19:if(Z(gt),g=l.memoizedState,g===null)return st(l),null;if(f=(l.flags&128)!==0,y=g.rendering,y===null)if(f)Ul(g,!1);else{if(lt!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(y=Tr(s),y!==null){for(l.flags|=128,Ul(g,!1),s=y.updateQueue,l.updateQueue=s,wr(l,s),l.subtreeFlags=0,s=r,r=l.child;r!==null;)Xm(r,s),r=r.sibling;return te(gt,gt.current&1|2),l.child}s=s.sibling}g.tail!==null&&Rt()>Rr&&(l.flags|=128,f=!0,Ul(g,!1),l.lanes=4194304)}else{if(!f)if(s=Tr(y),s!==null){if(l.flags|=128,f=!0,s=s.updateQueue,l.updateQueue=s,wr(l,s),Ul(g,!0),g.tail===null&&g.tailMode==="hidden"&&!y.alternate&&!Pe)return st(l),null}else 2*Rt()-g.renderingStartTime>Rr&&r!==536870912&&(l.flags|=128,f=!0,Ul(g,!1),l.lanes=4194304);g.isBackwards?(y.sibling=l.child,l.child=y):(s=g.last,s!==null?s.sibling=y:l.child=y,g.last=y)}return g.tail!==null?(l=g.tail,g.rendering=l,g.tail=l.sibling,g.renderingStartTime=Rt(),l.sibling=null,s=gt.current,te(gt,f?s&1|2:s&1),l):(st(l),null);case 22:case 23:return oi(l),Hc(),f=l.memoizedState!==null,s!==null?s.memoizedState!==null!==f&&(l.flags|=8192):f&&(l.flags|=8192),f?(r&536870912)!==0&&(l.flags&128)===0&&(st(l),l.subtreeFlags&6&&(l.flags|=8192)):st(l),r=l.updateQueue,r!==null&&wr(l,r.retryQueue),r=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),f=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==r&&(l.flags|=2048),s!==null&&Z(ys),null;case 24:return r=null,s!==null&&(r=s.memoizedState.cache),l.memoizedState.cache!==r&&(l.flags|=2048),ii(pt),st(l),null;case 25:return null;case 30:return null}throw Error(i(156,l.tag))}function lC(s,l){switch(Rc(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return ii(pt),mt(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return et(l),null;case 13:if(oi(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(i(340));Sl()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return Z(gt),null;case 4:return mt(),null;case 10:return ii(l.type),null;case 22:case 23:return oi(l),Hc(),s!==null&&Z(ys),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return ii(pt),null;case 25:return null;default:return null}}function Cg(s,l){switch(Rc(l),l.tag){case 3:ii(pt),mt();break;case 26:case 27:case 5:et(l);break;case 4:mt();break;case 13:oi(l);break;case 19:Z(gt);break;case 10:ii(l.type);break;case 22:case 23:oi(l),Hc(),s!==null&&Z(ys);break;case 24:ii(pt)}}function Vl(s,l){try{var r=l.updateQueue,f=r!==null?r.lastEffect:null;if(f!==null){var g=f.next;r=g;do{if((r.tag&s)===s){f=void 0;var y=r.create,T=r.inst;f=y(),T.destroy=f}r=r.next}while(r!==g)}}catch(C){Ke(l,l.return,C)}}function Ii(s,l,r){try{var f=l.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var y=g.next;f=y;do{if((f.tag&s)===s){var T=f.inst,C=T.destroy;if(C!==void 0){T.destroy=void 0,g=l;var A=r,L=C;try{L()}catch(H){Ke(g,A,H)}}}f=f.next}while(f!==y)}}catch(H){Ke(l,l.return,H)}}function xg(s){var l=s.updateQueue;if(l!==null){var r=s.stateNode;try{fp(l,r)}catch(f){Ke(s,s.return,f)}}}function Eg(s,l,r){r.props=Ss(s.type,s.memoizedProps),r.state=s.memoizedState;try{r.componentWillUnmount()}catch(f){Ke(s,l,f)}}function Ol(s,l){try{var r=s.ref;if(r!==null){switch(s.tag){case 26:case 27:case 5:var f=s.stateNode;break;case 30:f=s.stateNode;break;default:f=s.stateNode}typeof r=="function"?s.refCleanup=r(f):r.current=f}}catch(g){Ke(s,l,g)}}function Ln(s,l){var r=s.ref,f=s.refCleanup;if(r!==null)if(typeof f=="function")try{f()}catch(g){Ke(s,l,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(g){Ke(s,l,g)}else r.current=null}function wg(s){var l=s.type,r=s.memoizedProps,f=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":r.autoFocus&&f.focus();break e;case"img":r.src?f.src=r.src:r.srcSet&&(f.srcset=r.srcSet)}}catch(g){Ke(s,s.return,g)}}function yf(s,l,r){try{var f=s.stateNode;MC(f,s.type,r,l),f[Gt]=l}catch(g){Ke(s,s.return,g)}}function Mg(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&qi(s.type)||s.tag===4}function _f(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Mg(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&qi(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Sf(s,l,r){var f=s.tag;if(f===5||f===6)s=s.stateNode,l?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(s,l):(l=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,l.appendChild(s),r=r._reactRootContainer,r!=null||l.onclick!==null||(l.onclick=Or));else if(f!==4&&(f===27&&qi(s.type)&&(r=s.stateNode,l=null),s=s.child,s!==null))for(Sf(s,l,r),s=s.sibling;s!==null;)Sf(s,l,r),s=s.sibling}function Mr(s,l,r){var f=s.tag;if(f===5||f===6)s=s.stateNode,l?r.insertBefore(s,l):r.appendChild(s);else if(f!==4&&(f===27&&qi(s.type)&&(r=s.stateNode),s=s.child,s!==null))for(Mr(s,l,r),s=s.sibling;s!==null;)Mr(s,l,r),s=s.sibling}function Ag(s){var l=s.stateNode,r=s.memoizedProps;try{for(var f=s.type,g=l.attributes;g.length;)l.removeAttributeNode(g[0]);wt(l,f,r),l[It]=s,l[Gt]=r}catch(y){Ke(s,s.return,y)}}var ri=!1,rt=!1,Tf=!1,Rg=typeof WeakSet=="function"?WeakSet:Set,St=null;function aC(s,l){if(s=s.containerInfo,$f=$r,s=Pm(s),yc(s)){if("selectionStart"in s)var r={start:s.selectionStart,end:s.selectionEnd};else e:{r=(r=s.ownerDocument)&&r.defaultView||window;var f=r.getSelection&&r.getSelection();if(f&&f.rangeCount!==0){r=f.anchorNode;var g=f.anchorOffset,y=f.focusNode;f=f.focusOffset;try{r.nodeType,y.nodeType}catch{r=null;break e}var T=0,C=-1,A=-1,L=0,H=0,J=s,V=null;t:for(;;){for(var O;J!==r||g!==0&&J.nodeType!==3||(C=T+g),J!==y||f!==0&&J.nodeType!==3||(A=T+f),J.nodeType===3&&(T+=J.nodeValue.length),(O=J.firstChild)!==null;)V=J,J=O;for(;;){if(J===s)break t;if(V===r&&++L===g&&(C=T),V===y&&++H===f&&(A=T),(O=J.nextSibling)!==null)break;J=V,V=J.parentNode}J=O}r=C===-1||A===-1?null:{start:C,end:A}}else r=null}r=r||{start:0,end:0}}else r=null;for(Yf={focusedElem:s,selectionRange:r},$r=!1,St=l;St!==null;)if(l=St,s=l.child,(l.subtreeFlags&1024)!==0&&s!==null)s.return=l,St=s;else for(;St!==null;){switch(l=St,y=l.alternate,s=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&y!==null){s=void 0,r=l,g=y.memoizedProps,y=y.memoizedState,f=r.stateNode;try{var Te=Ss(r.type,g,r.elementType===r.type);s=f.getSnapshotBeforeUpdate(Te,y),f.__reactInternalSnapshotBeforeUpdate=s}catch(_e){Ke(r,r.return,_e)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,r=s.nodeType,r===9)Kf(s);else if(r===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Kf(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=l.sibling,s!==null){s.return=l.return,St=s;break}St=l.return}}function Ng(s,l,r){var f=r.flags;switch(r.tag){case 0:case 11:case 15:zi(s,r),f&4&&Vl(5,r);break;case 1:if(zi(s,r),f&4)if(s=r.stateNode,l===null)try{s.componentDidMount()}catch(T){Ke(r,r.return,T)}else{var g=Ss(r.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(g,l,s.__reactInternalSnapshotBeforeUpdate)}catch(T){Ke(r,r.return,T)}}f&64&&xg(r),f&512&&Ol(r,r.return);break;case 3:if(zi(s,r),f&64&&(s=r.updateQueue,s!==null)){if(l=null,r.child!==null)switch(r.child.tag){case 27:case 5:l=r.child.stateNode;break;case 1:l=r.child.stateNode}try{fp(s,l)}catch(T){Ke(r,r.return,T)}}break;case 27:l===null&&f&4&&Ag(r);case 26:case 5:zi(s,r),l===null&&f&4&&wg(r),f&512&&Ol(r,r.return);break;case 12:zi(s,r);break;case 13:zi(s,r),f&4&&Ig(s,r),f&64&&(s=r.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(r=gC.bind(null,r),zC(s,r))));break;case 22:if(f=r.memoizedState!==null||ri,!f){l=l!==null&&l.memoizedState!==null||rt,g=ri;var y=rt;ri=f,(rt=l)&&!y?Li(s,r,(r.subtreeFlags&8772)!==0):zi(s,r),ri=g,rt=y}break;case 30:break;default:zi(s,r)}}function Dg(s){var l=s.alternate;l!==null&&(s.alternate=null,Dg(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&ju(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var nt=null,Jt=!1;function ui(s,l,r){for(r=r.child;r!==null;)kg(s,l,r),r=r.sibling}function kg(s,l,r){if(Vt&&typeof Vt.onCommitFiberUnmount=="function")try{Vt.onCommitFiberUnmount(os,r)}catch{}switch(r.tag){case 26:rt||Ln(r,l),ui(s,l,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:rt||Ln(r,l);var f=nt,g=Jt;qi(r.type)&&(nt=r.stateNode,Jt=!1),ui(s,l,r),Jl(r.stateNode),nt=f,Jt=g;break;case 5:rt||Ln(r,l);case 6:if(f=nt,g=Jt,nt=null,ui(s,l,r),nt=f,Jt=g,nt!==null)if(Jt)try{(nt.nodeType===9?nt.body:nt.nodeName==="HTML"?nt.ownerDocument.body:nt).removeChild(r.stateNode)}catch(y){Ke(r,l,y)}else try{nt.removeChild(r.stateNode)}catch(y){Ke(r,l,y)}break;case 18:nt!==null&&(Jt?(s=nt,Sv(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,r.stateNode),ta(s)):Sv(nt,r.stateNode));break;case 4:f=nt,g=Jt,nt=r.stateNode.containerInfo,Jt=!0,ui(s,l,r),nt=f,Jt=g;break;case 0:case 11:case 14:case 15:rt||Ii(2,r,l),rt||Ii(4,r,l),ui(s,l,r);break;case 1:rt||(Ln(r,l),f=r.stateNode,typeof f.componentWillUnmount=="function"&&Eg(r,l,f)),ui(s,l,r);break;case 21:ui(s,l,r);break;case 22:rt=(f=rt)||r.memoizedState!==null,ui(s,l,r),rt=f;break;default:ui(s,l,r)}}function Ig(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ta(s)}catch(r){Ke(l,l.return,r)}}function rC(s){switch(s.tag){case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new Rg),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new Rg),l;default:throw Error(i(435,s.tag))}}function bf(s,l){var r=rC(s);l.forEach(function(f){var g=vC.bind(null,s,f);r.has(f)||(r.add(f),f.then(g,g))})}function en(s,l){var r=l.deletions;if(r!==null)for(var f=0;f<r.length;f++){var g=r[f],y=s,T=l,C=T;e:for(;C!==null;){switch(C.tag){case 27:if(qi(C.type)){nt=C.stateNode,Jt=!1;break e}break;case 5:nt=C.stateNode,Jt=!1;break e;case 3:case 4:nt=C.stateNode.containerInfo,Jt=!0;break e}C=C.return}if(nt===null)throw Error(i(160));kg(y,T,g),nt=null,Jt=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)zg(l,s),l=l.sibling}var En=null;function zg(s,l){var r=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:en(l,s),tn(s),f&4&&(Ii(3,s,s.return),Vl(3,s),Ii(5,s,s.return));break;case 1:en(l,s),tn(s),f&512&&(rt||r===null||Ln(r,r.return)),f&64&&ri&&(s=s.updateQueue,s!==null&&(f=s.callbacks,f!==null&&(r=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=r===null?f:r.concat(f))));break;case 26:var g=En;if(en(l,s),tn(s),f&512&&(rt||r===null||Ln(r,r.return)),f&4){var y=r!==null?r.memoizedState:null;if(f=s.memoizedState,r===null)if(f===null)if(s.stateNode===null){e:{f=s.type,r=s.memoizedProps,g=g.ownerDocument||g;t:switch(f){case"title":y=g.getElementsByTagName("title")[0],(!y||y[rl]||y[It]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(f),g.head.insertBefore(y,g.querySelector("head > title"))),wt(y,f,r),y[It]=s,yt(y),f=y;break e;case"link":var T=Av("link","href",g).get(f+(r.href||""));if(T){for(var C=0;C<T.length;C++)if(y=T[C],y.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&y.getAttribute("rel")===(r.rel==null?null:r.rel)&&y.getAttribute("title")===(r.title==null?null:r.title)&&y.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){T.splice(C,1);break t}}y=g.createElement(f),wt(y,f,r),g.head.appendChild(y);break;case"meta":if(T=Av("meta","content",g).get(f+(r.content||""))){for(C=0;C<T.length;C++)if(y=T[C],y.getAttribute("content")===(r.content==null?null:""+r.content)&&y.getAttribute("name")===(r.name==null?null:r.name)&&y.getAttribute("property")===(r.property==null?null:r.property)&&y.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&y.getAttribute("charset")===(r.charSet==null?null:r.charSet)){T.splice(C,1);break t}}y=g.createElement(f),wt(y,f,r),g.head.appendChild(y);break;default:throw Error(i(468,f))}y[It]=s,yt(y),f=y}s.stateNode=f}else Rv(g,s.type,s.stateNode);else s.stateNode=Mv(g,f,s.memoizedProps);else y!==f?(y===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):y.count--,f===null?Rv(g,s.type,s.stateNode):Mv(g,f,s.memoizedProps)):f===null&&s.stateNode!==null&&yf(s,s.memoizedProps,r.memoizedProps)}break;case 27:en(l,s),tn(s),f&512&&(rt||r===null||Ln(r,r.return)),r!==null&&f&4&&yf(s,s.memoizedProps,r.memoizedProps);break;case 5:if(en(l,s),tn(s),f&512&&(rt||r===null||Ln(r,r.return)),s.flags&32){g=s.stateNode;try{to(g,"")}catch(O){Ke(s,s.return,O)}}f&4&&s.stateNode!=null&&(g=s.memoizedProps,yf(s,g,r!==null?r.memoizedProps:g)),f&1024&&(Tf=!0);break;case 6:if(en(l,s),tn(s),f&4){if(s.stateNode===null)throw Error(i(162));f=s.memoizedProps,r=s.stateNode;try{r.nodeValue=f}catch(O){Ke(s,s.return,O)}}break;case 3:if(Fr=null,g=En,En=Pr(l.containerInfo),en(l,s),En=g,tn(s),f&4&&r!==null&&r.memoizedState.isDehydrated)try{ta(l.containerInfo)}catch(O){Ke(s,s.return,O)}Tf&&(Tf=!1,Lg(s));break;case 4:f=En,En=Pr(s.stateNode.containerInfo),en(l,s),tn(s),En=f;break;case 12:en(l,s),tn(s);break;case 13:en(l,s),tn(s),s.child.flags&8192&&s.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Af=Rt()),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,bf(s,f)));break;case 22:g=s.memoizedState!==null;var A=r!==null&&r.memoizedState!==null,L=ri,H=rt;if(ri=L||g,rt=H||A,en(l,s),rt=H,ri=L,tn(s),f&8192)e:for(l=s.stateNode,l._visibility=g?l._visibility&-2:l._visibility|1,g&&(r===null||A||ri||rt||Ts(s)),r=null,l=s;;){if(l.tag===5||l.tag===26){if(r===null){A=r=l;try{if(y=A.stateNode,g)T=y.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{C=A.stateNode;var J=A.memoizedProps.style,V=J!=null&&J.hasOwnProperty("display")?J.display:null;C.style.display=V==null||typeof V=="boolean"?"":(""+V).trim()}}catch(O){Ke(A,A.return,O)}}}else if(l.tag===6){if(r===null){A=l;try{A.stateNode.nodeValue=g?"":A.memoizedProps}catch(O){Ke(A,A.return,O)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;r===l&&(r=null),l=l.return}r===l&&(r=null),l.sibling.return=l.return,l=l.sibling}f&4&&(f=s.updateQueue,f!==null&&(r=f.retryQueue,r!==null&&(f.retryQueue=null,bf(s,r))));break;case 19:en(l,s),tn(s),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,bf(s,f)));break;case 30:break;case 21:break;default:en(l,s),tn(s)}}function tn(s){var l=s.flags;if(l&2){try{for(var r,f=s.return;f!==null;){if(Mg(f)){r=f;break}f=f.return}if(r==null)throw Error(i(160));switch(r.tag){case 27:var g=r.stateNode,y=_f(s);Mr(s,y,g);break;case 5:var T=r.stateNode;r.flags&32&&(to(T,""),r.flags&=-33);var C=_f(s);Mr(s,C,T);break;case 3:case 4:var A=r.stateNode.containerInfo,L=_f(s);Sf(s,L,A);break;default:throw Error(i(161))}}catch(H){Ke(s,s.return,H)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function Lg(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;Lg(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function zi(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)Ng(s,l.alternate,l),l=l.sibling}function Ts(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:Ii(4,l,l.return),Ts(l);break;case 1:Ln(l,l.return);var r=l.stateNode;typeof r.componentWillUnmount=="function"&&Eg(l,l.return,r),Ts(l);break;case 27:Jl(l.stateNode);case 26:case 5:Ln(l,l.return),Ts(l);break;case 22:l.memoizedState===null&&Ts(l);break;case 30:Ts(l);break;default:Ts(l)}s=s.sibling}}function Li(s,l,r){for(r=r&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var f=l.alternate,g=s,y=l,T=y.flags;switch(y.tag){case 0:case 11:case 15:Li(g,y,r),Vl(4,y);break;case 1:if(Li(g,y,r),f=y,g=f.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(L){Ke(f,f.return,L)}if(f=y,g=f.updateQueue,g!==null){var C=f.stateNode;try{var A=g.shared.hiddenCallbacks;if(A!==null)for(g.shared.hiddenCallbacks=null,g=0;g<A.length;g++)cp(A[g],C)}catch(L){Ke(f,f.return,L)}}r&&T&64&&xg(y),Ol(y,y.return);break;case 27:Ag(y);case 26:case 5:Li(g,y,r),r&&f===null&&T&4&&wg(y),Ol(y,y.return);break;case 12:Li(g,y,r);break;case 13:Li(g,y,r),r&&T&4&&Ig(g,y);break;case 22:y.memoizedState===null&&Li(g,y,r),Ol(y,y.return);break;case 30:break;default:Li(g,y,r)}l=l.sibling}}function Cf(s,l){var r=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==r&&(s!=null&&s.refCount++,r!=null&&Cl(r))}function xf(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Cl(s))}function Un(s,l,r,f){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Ug(s,l,r,f),l=l.sibling}function Ug(s,l,r,f){var g=l.flags;switch(l.tag){case 0:case 11:case 15:Un(s,l,r,f),g&2048&&Vl(9,l);break;case 1:Un(s,l,r,f);break;case 3:Un(s,l,r,f),g&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Cl(s)));break;case 12:if(g&2048){Un(s,l,r,f),s=l.stateNode;try{var y=l.memoizedProps,T=y.id,C=y.onPostCommit;typeof C=="function"&&C(T,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(A){Ke(l,l.return,A)}}else Un(s,l,r,f);break;case 13:Un(s,l,r,f);break;case 23:break;case 22:y=l.stateNode,T=l.alternate,l.memoizedState!==null?y._visibility&2?Un(s,l,r,f):Bl(s,l):y._visibility&2?Un(s,l,r,f):(y._visibility|=2,To(s,l,r,f,(l.subtreeFlags&10256)!==0)),g&2048&&Cf(T,l);break;case 24:Un(s,l,r,f),g&2048&&xf(l.alternate,l);break;default:Un(s,l,r,f)}}function To(s,l,r,f,g){for(g=g&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var y=s,T=l,C=r,A=f,L=T.flags;switch(T.tag){case 0:case 11:case 15:To(y,T,C,A,g),Vl(8,T);break;case 23:break;case 22:var H=T.stateNode;T.memoizedState!==null?H._visibility&2?To(y,T,C,A,g):Bl(y,T):(H._visibility|=2,To(y,T,C,A,g)),g&&L&2048&&Cf(T.alternate,T);break;case 24:To(y,T,C,A,g),g&&L&2048&&xf(T.alternate,T);break;default:To(y,T,C,A,g)}l=l.sibling}}function Bl(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var r=s,f=l,g=f.flags;switch(f.tag){case 22:Bl(r,f),g&2048&&Cf(f.alternate,f);break;case 24:Bl(r,f),g&2048&&xf(f.alternate,f);break;default:Bl(r,f)}l=l.sibling}}var Pl=8192;function bo(s){if(s.subtreeFlags&Pl)for(s=s.child;s!==null;)Vg(s),s=s.sibling}function Vg(s){switch(s.tag){case 26:bo(s),s.flags&Pl&&s.memoizedState!==null&&JC(En,s.memoizedState,s.memoizedProps);break;case 5:bo(s);break;case 3:case 4:var l=En;En=Pr(s.stateNode.containerInfo),bo(s),En=l;break;case 22:s.memoizedState===null&&(l=s.alternate,l!==null&&l.memoizedState!==null?(l=Pl,Pl=16777216,bo(s),Pl=l):bo(s));break;default:bo(s)}}function Og(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function ql(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var r=0;r<l.length;r++){var f=l[r];St=f,Pg(f,s)}Og(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Bg(s),s=s.sibling}function Bg(s){switch(s.tag){case 0:case 11:case 15:ql(s),s.flags&2048&&Ii(9,s,s.return);break;case 3:ql(s);break;case 12:ql(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,Ar(s)):ql(s);break;default:ql(s)}}function Ar(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var r=0;r<l.length;r++){var f=l[r];St=f,Pg(f,s)}Og(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:Ii(8,l,l.return),Ar(l);break;case 22:r=l.stateNode,r._visibility&2&&(r._visibility&=-3,Ar(l));break;default:Ar(l)}s=s.sibling}}function Pg(s,l){for(;St!==null;){var r=St;switch(r.tag){case 0:case 11:case 15:Ii(8,r,l);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var f=r.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:Cl(r.memoizedState.cache)}if(f=r.child,f!==null)f.return=r,St=f;else e:for(r=s;St!==null;){f=St;var g=f.sibling,y=f.return;if(Dg(f),f===r){St=null;break e}if(g!==null){g.return=y,St=g;break e}St=y}}}var uC={getCacheForType:function(s){var l=zt(pt),r=l.data.get(s);return r===void 0&&(r=s(),l.data.set(s,r)),r}},cC=typeof WeakMap=="function"?WeakMap:Map,Fe=0,Xe=null,Ie=null,Ve=0,He=0,nn=null,Ui=!1,Co=!1,Ef=!1,ci=0,lt=0,Vi=0,bs=0,wf=0,gn=0,xo=0,Fl=null,Zt=null,Mf=!1,Af=0,Rr=1/0,Nr=null,Oi=null,Et=0,Bi=null,Eo=null,wo=0,Rf=0,Nf=null,qg=null,Hl=0,Df=null;function sn(){if((Fe&2)!==0&&Ve!==0)return Ve&-Ve;if(P.T!==null){var s=ho;return s!==0?s:Of()}return Js()}function Fg(){gn===0&&(gn=(Ve&536870912)===0||Pe?Ht():536870912);var s=pn.current;return s!==null&&(s.flags|=32),gn}function on(s,l,r){(s===Xe&&(He===2||He===9)||s.cancelPendingCommit!==null)&&(Mo(s,0),Pi(s,Ve,gn,!1)),Ti(s,r),((Fe&2)===0||s!==Xe)&&(s===Xe&&((Fe&2)===0&&(bs|=r),lt===4&&Pi(s,Ve,gn,!1)),Vn(s))}function Hg(s,l,r){if((Fe&6)!==0)throw Error(i(327));var f=!r&&(l&124)===0&&(l&s.expiredLanes)===0||ce(s,l),g=f?hC(s,l):zf(s,l,!0),y=f;do{if(g===0){Co&&!f&&Pi(s,l,0,!1);break}else{if(r=s.current.alternate,y&&!fC(r)){g=zf(s,l,!1),y=!1;continue}if(g===2){if(y=l,s.errorRecoveryDisabledLanes&y)var T=0;else T=s.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){l=T;e:{var C=s;g=Fl;var A=C.current.memoizedState.isDehydrated;if(A&&(Mo(C,T).flags|=256),T=zf(C,T,!1),T!==2){if(Ef&&!A){C.errorRecoveryDisabledLanes|=y,bs|=y,g=4;break e}y=Zt,Zt=g,y!==null&&(Zt===null?Zt=y:Zt.push.apply(Zt,y))}g=T}if(y=!1,g!==2)continue}}if(g===1){Mo(s,0),Pi(s,l,0,!0);break}e:{switch(f=s,y=g,y){case 0:case 1:throw Error(i(345));case 4:if((l&4194048)!==l)break;case 6:Pi(f,l,gn,!Ui);break e;case 2:Zt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((l&62914560)===l&&(g=Af+300-Rt(),10<g)){if(Pi(f,l,gn,!Ui),ls(f,0,!0)!==0)break e;f.timeoutHandle=yv(Gg.bind(null,f,r,Zt,Nr,Mf,l,gn,bs,xo,Ui,y,2,-0,0),g);break e}Gg(f,r,Zt,Nr,Mf,l,gn,bs,xo,Ui,y,0,-0,0)}}break}while(!0);Vn(s)}function Gg(s,l,r,f,g,y,T,C,A,L,H,J,V,O){if(s.timeoutHandle=-1,J=l.subtreeFlags,(J&8192||(J&16785408)===16785408)&&(Xl={stylesheets:null,count:0,unsuspend:YC},Vg(l),J=ZC(),J!==null)){s.cancelPendingCommit=J(Wg.bind(null,s,l,y,r,f,g,T,C,A,H,1,V,O)),Pi(s,y,T,!L);return}Wg(s,l,y,r,f,g,T,C,A)}function fC(s){for(var l=s;;){var r=l.tag;if((r===0||r===11||r===15)&&l.flags&16384&&(r=l.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var f=0;f<r.length;f++){var g=r[f],y=g.getSnapshot;g=g.value;try{if(!Qt(y(),g))return!1}catch{return!1}}if(r=l.child,l.subtreeFlags&16384&&r!==null)r.return=l,l=r;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Pi(s,l,r,f){l&=~wf,l&=~bs,s.suspendedLanes|=l,s.pingedLanes&=~l,f&&(s.warmLanes|=l),f=s.expirationTimes;for(var g=l;0<g;){var y=31-Ot(g),T=1<<y;f[y]=-1,g&=~T}r!==0&&bi(s,r,l)}function Dr(){return(Fe&6)===0?(Gl(0),!1):!0}function kf(){if(Ie!==null){if(He===0)var s=Ie.return;else s=Ie,ni=gs=null,Zc(s),_o=null,zl=0,s=Ie;for(;s!==null;)Cg(s.alternate,s),s=s.return;Ie=null}}function Mo(s,l){var r=s.timeoutHandle;r!==-1&&(s.timeoutHandle=-1,RC(r)),r=s.cancelPendingCommit,r!==null&&(s.cancelPendingCommit=null,r()),kf(),Xe=s,Ie=r=jn(s.current,null),Ve=l,He=0,nn=null,Ui=!1,Co=ce(s,l),Ef=!1,xo=gn=wf=bs=Vi=lt=0,Zt=Fl=null,Mf=!1,(l&8)!==0&&(l|=l&32);var f=s.entangledLanes;if(f!==0)for(s=s.entanglements,f&=l;0<f;){var g=31-Ot(f),y=1<<g;l|=s[g],f&=~y}return ci=l,ja(),r}function $g(s,l){Re=null,P.H=yr,l===El||l===rr?(l=rp(),He=3):l===op?(l=rp(),He=4):He=l===ug?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,nn=l,Ie===null&&(lt=1,Cr(s,fn(l,s.current)))}function Yg(){var s=P.H;return P.H=yr,s===null?yr:s}function Jg(){var s=P.A;return P.A=uC,s}function If(){lt=4,Ui||(Ve&4194048)!==Ve&&pn.current!==null||(Co=!0),(Vi&134217727)===0&&(bs&134217727)===0||Xe===null||Pi(Xe,Ve,gn,!1)}function zf(s,l,r){var f=Fe;Fe|=2;var g=Yg(),y=Jg();(Xe!==s||Ve!==l)&&(Nr=null,Mo(s,l)),l=!1;var T=lt;e:do try{if(He!==0&&Ie!==null){var C=Ie,A=nn;switch(He){case 8:kf(),T=6;break e;case 3:case 2:case 9:case 6:pn.current===null&&(l=!0);var L=He;if(He=0,nn=null,Ao(s,C,A,L),r&&Co){T=0;break e}break;default:L=He,He=0,nn=null,Ao(s,C,A,L)}}dC(),T=lt;break}catch(H){$g(s,H)}while(!0);return l&&s.shellSuspendCounter++,ni=gs=null,Fe=f,P.H=g,P.A=y,Ie===null&&(Xe=null,Ve=0,ja()),T}function dC(){for(;Ie!==null;)Zg(Ie)}function hC(s,l){var r=Fe;Fe|=2;var f=Yg(),g=Jg();Xe!==s||Ve!==l?(Nr=null,Rr=Rt()+500,Mo(s,l)):Co=ce(s,l);e:do try{if(He!==0&&Ie!==null){l=Ie;var y=nn;t:switch(He){case 1:He=0,nn=null,Ao(s,l,y,1);break;case 2:case 9:if(lp(y)){He=0,nn=null,Kg(l);break}l=function(){He!==2&&He!==9||Xe!==s||(He=7),Vn(s)},y.then(l,l);break e;case 3:He=7;break e;case 4:He=5;break e;case 7:lp(y)?(He=0,nn=null,Kg(l)):(He=0,nn=null,Ao(s,l,y,7));break;case 5:var T=null;switch(Ie.tag){case 26:T=Ie.memoizedState;case 5:case 27:var C=Ie;if(!T||Nv(T)){He=0,nn=null;var A=C.sibling;if(A!==null)Ie=A;else{var L=C.return;L!==null?(Ie=L,kr(L)):Ie=null}break t}}He=0,nn=null,Ao(s,l,y,5);break;case 6:He=0,nn=null,Ao(s,l,y,6);break;case 8:kf(),lt=6;break e;default:throw Error(i(462))}}mC();break}catch(H){$g(s,H)}while(!0);return ni=gs=null,P.H=f,P.A=g,Fe=r,Ie!==null?0:(Xe=null,Ve=0,ja(),lt)}function mC(){for(;Ie!==null&&!We();)Zg(Ie)}function Zg(s){var l=Tg(s.alternate,s,ci);s.memoizedProps=s.pendingProps,l===null?kr(s):Ie=l}function Kg(s){var l=s,r=l.alternate;switch(l.tag){case 15:case 0:l=pg(r,l,l.pendingProps,l.type,void 0,Ve);break;case 11:l=pg(r,l,l.pendingProps,l.type.render,l.ref,Ve);break;case 5:Zc(l);default:Cg(r,l),l=Ie=Xm(l,ci),l=Tg(r,l,ci)}s.memoizedProps=s.pendingProps,l===null?kr(s):Ie=l}function Ao(s,l,r,f){ni=gs=null,Zc(l),_o=null,zl=0;var g=l.return;try{if(iC(s,g,l,r,Ve)){lt=1,Cr(s,fn(r,s.current)),Ie=null;return}}catch(y){if(g!==null)throw Ie=g,y;lt=1,Cr(s,fn(r,s.current)),Ie=null;return}l.flags&32768?(Pe||f===1?s=!0:Co||(Ve&536870912)!==0?s=!1:(Ui=s=!0,(f===2||f===9||f===3||f===6)&&(f=pn.current,f!==null&&f.tag===13&&(f.flags|=16384))),Xg(l,s)):kr(l)}function kr(s){var l=s;do{if((l.flags&32768)!==0){Xg(l,Ui);return}s=l.return;var r=oC(l.alternate,l,ci);if(r!==null){Ie=r;return}if(l=l.sibling,l!==null){Ie=l;return}Ie=l=s}while(l!==null);lt===0&&(lt=5)}function Xg(s,l){do{var r=lC(s.alternate,s);if(r!==null){r.flags&=32767,Ie=r;return}if(r=s.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!l&&(s=s.sibling,s!==null)){Ie=s;return}Ie=s=r}while(s!==null);lt=6,Ie=null}function Wg(s,l,r,f,g,y,T,C,A){s.cancelPendingCommit=null;do Ir();while(Et!==0);if((Fe&6)!==0)throw Error(i(327));if(l!==null){if(l===s.current)throw Error(i(177));if(y=l.lanes|l.childLanes,y|=Cc,kn(s,r,y,T,C,A),s===Xe&&(Ie=Xe=null,Ve=0),Eo=l,Bi=s,wo=r,Rf=y,Nf=g,qg=f,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,yC(Ct,function(){return nv(),null})):(s.callbackNode=null,s.callbackPriority=0),f=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||f){f=P.T,P.T=null,g=ie.p,ie.p=2,T=Fe,Fe|=4;try{aC(s,l,r)}finally{Fe=T,ie.p=g,P.T=f}}Et=1,Qg(),jg(),ev()}}function Qg(){if(Et===1){Et=0;var s=Bi,l=Eo,r=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||r){r=P.T,P.T=null;var f=ie.p;ie.p=2;var g=Fe;Fe|=4;try{zg(l,s);var y=Yf,T=Pm(s.containerInfo),C=y.focusedElem,A=y.selectionRange;if(T!==C&&C&&C.ownerDocument&&Bm(C.ownerDocument.documentElement,C)){if(A!==null&&yc(C)){var L=A.start,H=A.end;if(H===void 0&&(H=L),"selectionStart"in C)C.selectionStart=L,C.selectionEnd=Math.min(H,C.value.length);else{var J=C.ownerDocument||document,V=J&&J.defaultView||window;if(V.getSelection){var O=V.getSelection(),Te=C.textContent.length,_e=Math.min(A.start,Te),Je=A.end===void 0?_e:Math.min(A.end,Te);!O.extend&&_e>Je&&(T=Je,Je=_e,_e=T);var k=Om(C,_e),N=Om(C,Je);if(k&&N&&(O.rangeCount!==1||O.anchorNode!==k.node||O.anchorOffset!==k.offset||O.focusNode!==N.node||O.focusOffset!==N.offset)){var z=J.createRange();z.setStart(k.node,k.offset),O.removeAllRanges(),_e>Je?(O.addRange(z),O.extend(N.node,N.offset)):(z.setEnd(N.node,N.offset),O.addRange(z))}}}}for(J=[],O=C;O=O.parentNode;)O.nodeType===1&&J.push({element:O,left:O.scrollLeft,top:O.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<J.length;C++){var $=J[C];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}$r=!!$f,Yf=$f=null}finally{Fe=g,ie.p=f,P.T=r}}s.current=l,Et=2}}function jg(){if(Et===2){Et=0;var s=Bi,l=Eo,r=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||r){r=P.T,P.T=null;var f=ie.p;ie.p=2;var g=Fe;Fe|=4;try{Ng(s,l.alternate,l)}finally{Fe=g,ie.p=f,P.T=r}}Et=3}}function ev(){if(Et===4||Et===3){Et=0,Wt();var s=Bi,l=Eo,r=wo,f=qg;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Et=5:(Et=0,Eo=Bi=null,tv(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(Oi=null),Xn(r),l=l.stateNode,Vt&&typeof Vt.onCommitFiberRoot=="function")try{Vt.onCommitFiberRoot(os,l,void 0,(l.current.flags&128)===128)}catch{}if(f!==null){l=P.T,g=ie.p,ie.p=2,P.T=null;try{for(var y=s.onRecoverableError,T=0;T<f.length;T++){var C=f[T];y(C.value,{componentStack:C.stack})}}finally{P.T=l,ie.p=g}}(wo&3)!==0&&Ir(),Vn(s),g=s.pendingLanes,(r&4194090)!==0&&(g&42)!==0?s===Df?Hl++:(Hl=0,Df=s):Hl=0,Gl(0)}}function tv(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,Cl(l)))}function Ir(s){return Qg(),jg(),ev(),nv()}function nv(){if(Et!==5)return!1;var s=Bi,l=Rf;Rf=0;var r=Xn(wo),f=P.T,g=ie.p;try{ie.p=32>r?32:r,P.T=null,r=Nf,Nf=null;var y=Bi,T=wo;if(Et=0,Eo=Bi=null,wo=0,(Fe&6)!==0)throw Error(i(331));var C=Fe;if(Fe|=4,Bg(y.current),Ug(y,y.current,T,r),Fe=C,Gl(0,!1),Vt&&typeof Vt.onPostCommitFiberRoot=="function")try{Vt.onPostCommitFiberRoot(os,y)}catch{}return!0}finally{ie.p=g,P.T=f,tv(s,l)}}function iv(s,l,r){l=fn(r,l),l=uf(s.stateNode,l,2),s=Ri(s,l,2),s!==null&&(Ti(s,2),Vn(s))}function Ke(s,l,r){if(s.tag===3)iv(s,s,r);else for(;l!==null;){if(l.tag===3){iv(l,s,r);break}else if(l.tag===1){var f=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Oi===null||!Oi.has(f))){s=fn(r,s),r=ag(2),f=Ri(l,r,2),f!==null&&(rg(r,f,l,s),Ti(f,2),Vn(f));break}}l=l.return}}function Lf(s,l,r){var f=s.pingCache;if(f===null){f=s.pingCache=new cC;var g=new Set;f.set(l,g)}else g=f.get(l),g===void 0&&(g=new Set,f.set(l,g));g.has(r)||(Ef=!0,g.add(r),s=pC.bind(null,s,l,r),l.then(s,s))}function pC(s,l,r){var f=s.pingCache;f!==null&&f.delete(l),s.pingedLanes|=s.suspendedLanes&r,s.warmLanes&=~r,Xe===s&&(Ve&r)===r&&(lt===4||lt===3&&(Ve&62914560)===Ve&&300>Rt()-Af?(Fe&2)===0&&Mo(s,0):wf|=r,xo===Ve&&(xo=0)),Vn(s)}function sv(s,l){l===0&&(l=$s()),s=ro(s,l),s!==null&&(Ti(s,l),Vn(s))}function gC(s){var l=s.memoizedState,r=0;l!==null&&(r=l.retryLane),sv(s,r)}function vC(s,l){var r=0;switch(s.tag){case 13:var f=s.stateNode,g=s.memoizedState;g!==null&&(r=g.retryLane);break;case 19:f=s.stateNode;break;case 22:f=s.stateNode._retryCache;break;default:throw Error(i(314))}f!==null&&f.delete(l),sv(s,r)}function yC(s,l){return Me(s,l)}var zr=null,Ro=null,Uf=!1,Lr=!1,Vf=!1,Cs=0;function Vn(s){s!==Ro&&s.next===null&&(Ro===null?zr=Ro=s:Ro=Ro.next=s),Lr=!0,Uf||(Uf=!0,SC())}function Gl(s,l){if(!Vf&&Lr){Vf=!0;do for(var r=!1,f=zr;f!==null;){if(s!==0){var g=f.pendingLanes;if(g===0)var y=0;else{var T=f.suspendedLanes,C=f.pingedLanes;y=(1<<31-Ot(42|s)+1)-1,y&=g&~(T&~C),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(r=!0,rv(f,y))}else y=Ve,y=ls(f,f===Xe?y:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(y&3)===0||ce(f,y)||(r=!0,rv(f,y));f=f.next}while(r);Vf=!1}}function _C(){ov()}function ov(){Lr=Uf=!1;var s=0;Cs!==0&&(AC()&&(s=Cs),Cs=0);for(var l=Rt(),r=null,f=zr;f!==null;){var g=f.next,y=lv(f,l);y===0?(f.next=null,r===null?zr=g:r.next=g,g===null&&(Ro=r)):(r=f,(s!==0||(y&3)!==0)&&(Lr=!0)),f=g}Gl(s)}function lv(s,l){for(var r=s.suspendedLanes,f=s.pingedLanes,g=s.expirationTimes,y=s.pendingLanes&-62914561;0<y;){var T=31-Ot(y),C=1<<T,A=g[T];A===-1?((C&r)===0||(C&f)!==0)&&(g[T]=kt(C,l)):A<=l&&(s.expiredLanes|=C),y&=~C}if(l=Xe,r=Ve,r=ls(s,s===l?r:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),f=s.callbackNode,r===0||s===l&&(He===2||He===9)||s.cancelPendingCommit!==null)return f!==null&&f!==null&&tt(f),s.callbackNode=null,s.callbackPriority=0;if((r&3)===0||ce(s,r)){if(l=r&-r,l===s.callbackPriority)return l;switch(f!==null&&tt(f),Xn(r)){case 2:case 8:r=Dt;break;case 32:r=Ct;break;case 268435456:r=rn;break;default:r=Ct}return f=av.bind(null,s),r=Me(r,f),s.callbackPriority=l,s.callbackNode=r,l}return f!==null&&f!==null&&tt(f),s.callbackPriority=2,s.callbackNode=null,2}function av(s,l){if(Et!==0&&Et!==5)return s.callbackNode=null,s.callbackPriority=0,null;var r=s.callbackNode;if(Ir()&&s.callbackNode!==r)return null;var f=Ve;return f=ls(s,s===Xe?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),f===0?null:(Hg(s,f,l),lv(s,Rt()),s.callbackNode!=null&&s.callbackNode===r?av.bind(null,s):null)}function rv(s,l){if(Ir())return null;Hg(s,l,!0)}function SC(){NC(function(){(Fe&6)!==0?Me(Nt,_C):ov()})}function Of(){return Cs===0&&(Cs=Ht()),Cs}function uv(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Ya(""+s)}function cv(s,l){var r=l.ownerDocument.createElement("input");return r.name=l.name,r.value=l.value,s.id&&r.setAttribute("form",s.id),l.parentNode.insertBefore(r,l),s=new FormData(s),r.parentNode.removeChild(r),s}function TC(s,l,r,f,g){if(l==="submit"&&r&&r.stateNode===g){var y=uv((g[Gt]||null).action),T=f.submitter;T&&(l=(l=T[Gt]||null)?uv(l.formAction):T.getAttribute("formAction"),l!==null&&(y=l,T=null));var C=new Xa("action","action",null,f,g);s.push({event:C,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Cs!==0){var A=T?cv(g,T):new FormData(g);sf(r,{pending:!0,data:A,method:g.method,action:y},null,A)}}else typeof y=="function"&&(C.preventDefault(),A=T?cv(g,T):new FormData(g),sf(r,{pending:!0,data:A,method:g.method,action:y},y,A))},currentTarget:g}]})}}for(var Bf=0;Bf<bc.length;Bf++){var Pf=bc[Bf],bC=Pf.toLowerCase(),CC=Pf[0].toUpperCase()+Pf.slice(1);xn(bC,"on"+CC)}xn(Hm,"onAnimationEnd"),xn(Gm,"onAnimationIteration"),xn($m,"onAnimationStart"),xn("dblclick","onDoubleClick"),xn("focusin","onFocus"),xn("focusout","onBlur"),xn(Pb,"onTransitionRun"),xn(qb,"onTransitionStart"),xn(Fb,"onTransitionCancel"),xn(Ym,"onTransitionEnd"),Qs("onMouseEnter",["mouseout","mouseover"]),Qs("onMouseLeave",["mouseout","mouseover"]),Qs("onPointerEnter",["pointerout","pointerover"]),Qs("onPointerLeave",["pointerout","pointerover"]),as("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),as("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),as("onBeforeInput",["compositionend","keypress","textInput","paste"]),as("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),as("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),as("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($l));function fv(s,l){l=(l&4)!==0;for(var r=0;r<s.length;r++){var f=s[r],g=f.event;f=f.listeners;e:{var y=void 0;if(l)for(var T=f.length-1;0<=T;T--){var C=f[T],A=C.instance,L=C.currentTarget;if(C=C.listener,A!==y&&g.isPropagationStopped())break e;y=C,g.currentTarget=L;try{y(g)}catch(H){br(H)}g.currentTarget=null,y=A}else for(T=0;T<f.length;T++){if(C=f[T],A=C.instance,L=C.currentTarget,C=C.listener,A!==y&&g.isPropagationStopped())break e;y=C,g.currentTarget=L;try{y(g)}catch(H){br(H)}g.currentTarget=null,y=A}}}}function ze(s,l){var r=l[Qu];r===void 0&&(r=l[Qu]=new Set);var f=s+"__bubble";r.has(f)||(dv(l,s,2,!1),r.add(f))}function qf(s,l,r){var f=0;l&&(f|=4),dv(r,s,f,l)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Ff(s){if(!s[Ur]){s[Ur]=!0,om.forEach(function(r){r!=="selectionchange"&&(xC.has(r)||qf(r,!1,s),qf(r,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Ur]||(l[Ur]=!0,qf("selectionchange",!1,l))}}function dv(s,l,r,f){switch(Uv(l)){case 2:var g=WC;break;case 8:g=QC;break;default:g=nd}r=g.bind(null,l,r,s),g=void 0,!uc||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(g=!0),f?g!==void 0?s.addEventListener(l,r,{capture:!0,passive:g}):s.addEventListener(l,r,!0):g!==void 0?s.addEventListener(l,r,{passive:g}):s.addEventListener(l,r,!1)}function Hf(s,l,r,f,g){var y=f;if((l&1)===0&&(l&2)===0&&f!==null)e:for(;;){if(f===null)return;var T=f.tag;if(T===3||T===4){var C=f.stateNode.containerInfo;if(C===g)break;if(T===4)for(T=f.return;T!==null;){var A=T.tag;if((A===3||A===4)&&T.stateNode.containerInfo===g)return;T=T.return}for(;C!==null;){if(T=Ks(C),T===null)return;if(A=T.tag,A===5||A===6||A===26||A===27){f=y=T;continue e}C=C.parentNode}}f=f.return}_m(function(){var L=y,H=ac(r),J=[];e:{var V=Jm.get(s);if(V!==void 0){var O=Xa,Te=s;switch(s){case"keypress":if(Za(r)===0)break e;case"keydown":case"keyup":O=yb;break;case"focusin":Te="focus",O=hc;break;case"focusout":Te="blur",O=hc;break;case"beforeblur":case"afterblur":O=hc;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=bm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=lb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=Tb;break;case Hm:case Gm:case $m:O=ub;break;case Ym:O=Cb;break;case"scroll":case"scrollend":O=sb;break;case"wheel":O=Eb;break;case"copy":case"cut":case"paste":O=fb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=xm;break;case"toggle":case"beforetoggle":O=Mb}var _e=(l&4)!==0,Je=!_e&&(s==="scroll"||s==="scrollend"),k=_e?V!==null?V+"Capture":null:V;_e=[];for(var N=L,z;N!==null;){var $=N;if(z=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||z===null||k===null||($=cl(N,k),$!=null&&_e.push(Yl(N,$,z))),Je)break;N=N.return}0<_e.length&&(V=new O(V,Te,null,r,H),J.push({event:V,listeners:_e}))}}if((l&7)===0){e:{if(V=s==="mouseover"||s==="pointerover",O=s==="mouseout"||s==="pointerout",V&&r!==lc&&(Te=r.relatedTarget||r.fromElement)&&(Ks(Te)||Te[Zs]))break e;if((O||V)&&(V=H.window===H?H:(V=H.ownerDocument)?V.defaultView||V.parentWindow:window,O?(Te=r.relatedTarget||r.toElement,O=L,Te=Te?Ks(Te):null,Te!==null&&(Je=a(Te),_e=Te.tag,Te!==Je||_e!==5&&_e!==27&&_e!==6)&&(Te=null)):(O=null,Te=L),O!==Te)){if(_e=bm,$="onMouseLeave",k="onMouseEnter",N="mouse",(s==="pointerout"||s==="pointerover")&&(_e=xm,$="onPointerLeave",k="onPointerEnter",N="pointer"),Je=O==null?V:ul(O),z=Te==null?V:ul(Te),V=new _e($,N+"leave",O,r,H),V.target=Je,V.relatedTarget=z,$=null,Ks(H)===L&&(_e=new _e(k,N+"enter",Te,r,H),_e.target=z,_e.relatedTarget=Je,$=_e),Je=$,O&&Te)t:{for(_e=O,k=Te,N=0,z=_e;z;z=No(z))N++;for(z=0,$=k;$;$=No($))z++;for(;0<N-z;)_e=No(_e),N--;for(;0<z-N;)k=No(k),z--;for(;N--;){if(_e===k||k!==null&&_e===k.alternate)break t;_e=No(_e),k=No(k)}_e=null}else _e=null;O!==null&&hv(J,V,O,_e,!1),Te!==null&&Je!==null&&hv(J,Je,Te,_e,!0)}}e:{if(V=L?ul(L):window,O=V.nodeName&&V.nodeName.toLowerCase(),O==="select"||O==="input"&&V.type==="file")var ae=km;else if(Nm(V))if(Im)ae=Vb;else{ae=Lb;var De=zb}else O=V.nodeName,!O||O.toLowerCase()!=="input"||V.type!=="checkbox"&&V.type!=="radio"?L&&oc(L.elementType)&&(ae=km):ae=Ub;if(ae&&(ae=ae(s,L))){Dm(J,ae,r,H);break e}De&&De(s,V,L),s==="focusout"&&L&&V.type==="number"&&L.memoizedProps.value!=null&&sc(V,"number",V.value)}switch(De=L?ul(L):window,s){case"focusin":(Nm(De)||De.contentEditable==="true")&&(oo=De,_c=L,yl=null);break;case"focusout":yl=_c=oo=null;break;case"mousedown":Sc=!0;break;case"contextmenu":case"mouseup":case"dragend":Sc=!1,qm(J,r,H);break;case"selectionchange":if(Bb)break;case"keydown":case"keyup":qm(J,r,H)}var pe;if(pc)e:{switch(s){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else so?Am(s,r)&&(Se="onCompositionEnd"):s==="keydown"&&r.keyCode===229&&(Se="onCompositionStart");Se&&(Em&&r.locale!=="ko"&&(so||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&so&&(pe=Sm()):(Ei=H,cc="value"in Ei?Ei.value:Ei.textContent,so=!0)),De=Vr(L,Se),0<De.length&&(Se=new Cm(Se,s,null,r,H),J.push({event:Se,listeners:De}),pe?Se.data=pe:(pe=Rm(r),pe!==null&&(Se.data=pe)))),(pe=Rb?Nb(s,r):Db(s,r))&&(Se=Vr(L,"onBeforeInput"),0<Se.length&&(De=new Cm("onBeforeInput","beforeinput",null,r,H),J.push({event:De,listeners:Se}),De.data=pe)),TC(J,s,L,r,H)}fv(J,l)})}function Yl(s,l,r){return{instance:s,listener:l,currentTarget:r}}function Vr(s,l){for(var r=l+"Capture",f=[];s!==null;){var g=s,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=cl(s,r),g!=null&&f.unshift(Yl(s,g,y)),g=cl(s,l),g!=null&&f.push(Yl(s,g,y))),s.tag===3)return f;s=s.return}return[]}function No(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function hv(s,l,r,f,g){for(var y=l._reactName,T=[];r!==null&&r!==f;){var C=r,A=C.alternate,L=C.stateNode;if(C=C.tag,A!==null&&A===f)break;C!==5&&C!==26&&C!==27||L===null||(A=L,g?(L=cl(r,y),L!=null&&T.unshift(Yl(r,L,A))):g||(L=cl(r,y),L!=null&&T.push(Yl(r,L,A)))),r=r.return}T.length!==0&&s.push({event:l,listeners:T})}var EC=/\r\n?/g,wC=/\u0000|\uFFFD/g;function mv(s){return(typeof s=="string"?s:""+s).replace(EC,`
`).replace(wC,"")}function pv(s,l){return l=mv(l),mv(s)===l}function Or(){}function Ye(s,l,r,f,g,y){switch(r){case"children":typeof f=="string"?l==="body"||l==="textarea"&&f===""||to(s,f):(typeof f=="number"||typeof f=="bigint")&&l!=="body"&&to(s,""+f);break;case"className":Ha(s,"class",f);break;case"tabIndex":Ha(s,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Ha(s,r,f);break;case"style":vm(s,f,y);break;case"data":if(l!=="object"){Ha(s,"data",f);break}case"src":case"href":if(f===""&&(l!=="a"||r!=="href")){s.removeAttribute(r);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){s.removeAttribute(r);break}f=Ya(""+f),s.setAttribute(r,f);break;case"action":case"formAction":if(typeof f=="function"){s.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(r==="formAction"?(l!=="input"&&Ye(s,l,"name",g.name,g,null),Ye(s,l,"formEncType",g.formEncType,g,null),Ye(s,l,"formMethod",g.formMethod,g,null),Ye(s,l,"formTarget",g.formTarget,g,null)):(Ye(s,l,"encType",g.encType,g,null),Ye(s,l,"method",g.method,g,null),Ye(s,l,"target",g.target,g,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){s.removeAttribute(r);break}f=Ya(""+f),s.setAttribute(r,f);break;case"onClick":f!=null&&(s.onclick=Or);break;case"onScroll":f!=null&&ze("scroll",s);break;case"onScrollEnd":f!=null&&ze("scrollend",s);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(r=f.__html,r!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=r}}break;case"multiple":s.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":s.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){s.removeAttribute("xlink:href");break}r=Ya(""+f),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(r,""+f):s.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(r,""):s.removeAttribute(r);break;case"capture":case"download":f===!0?s.setAttribute(r,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(r,f):s.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?s.setAttribute(r,f):s.removeAttribute(r);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?s.removeAttribute(r):s.setAttribute(r,f);break;case"popover":ze("beforetoggle",s),ze("toggle",s),Fa(s,"popover",f);break;case"xlinkActuate":Wn(s,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Wn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Wn(s,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Wn(s,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Wn(s,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Wn(s,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Wn(s,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Wn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Wn(s,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Fa(s,"is",f);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=nb.get(r)||r,Fa(s,r,f))}}function Gf(s,l,r,f,g,y){switch(r){case"style":vm(s,f,y);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(r=f.__html,r!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=r}}break;case"children":typeof f=="string"?to(s,f):(typeof f=="number"||typeof f=="bigint")&&to(s,""+f);break;case"onScroll":f!=null&&ze("scroll",s);break;case"onScrollEnd":f!=null&&ze("scrollend",s);break;case"onClick":f!=null&&(s.onclick=Or);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!lm.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(g=r.endsWith("Capture"),l=r.slice(2,g?r.length-7:void 0),y=s[Gt]||null,y=y!=null?y[r]:null,typeof y=="function"&&s.removeEventListener(l,y,g),typeof f=="function")){typeof y!="function"&&y!==null&&(r in s?s[r]=null:s.hasAttribute(r)&&s.removeAttribute(r)),s.addEventListener(l,f,g);break e}r in s?s[r]=f:f===!0?s.setAttribute(r,""):Fa(s,r,f)}}}function wt(s,l,r){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",s),ze("load",s);var f=!1,g=!1,y;for(y in r)if(r.hasOwnProperty(y)){var T=r[y];if(T!=null)switch(y){case"src":f=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:Ye(s,l,y,T,r,null)}}g&&Ye(s,l,"srcSet",r.srcSet,r,null),f&&Ye(s,l,"src",r.src,r,null);return;case"input":ze("invalid",s);var C=y=T=g=null,A=null,L=null;for(f in r)if(r.hasOwnProperty(f)){var H=r[f];if(H!=null)switch(f){case"name":g=H;break;case"type":T=H;break;case"checked":A=H;break;case"defaultChecked":L=H;break;case"value":y=H;break;case"defaultValue":C=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(i(137,l));break;default:Ye(s,l,f,H,r,null)}}hm(s,y,C,A,L,T,g,!1),Ga(s);return;case"select":ze("invalid",s),f=T=y=null;for(g in r)if(r.hasOwnProperty(g)&&(C=r[g],C!=null))switch(g){case"value":y=C;break;case"defaultValue":T=C;break;case"multiple":f=C;default:Ye(s,l,g,C,r,null)}l=y,r=T,s.multiple=!!f,l!=null?eo(s,!!f,l,!1):r!=null&&eo(s,!!f,r,!0);return;case"textarea":ze("invalid",s),y=g=f=null;for(T in r)if(r.hasOwnProperty(T)&&(C=r[T],C!=null))switch(T){case"value":f=C;break;case"defaultValue":g=C;break;case"children":y=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:Ye(s,l,T,C,r,null)}pm(s,f,g,y),Ga(s);return;case"option":for(A in r)if(r.hasOwnProperty(A)&&(f=r[A],f!=null))switch(A){case"selected":s.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Ye(s,l,A,f,r,null)}return;case"dialog":ze("beforetoggle",s),ze("toggle",s),ze("cancel",s),ze("close",s);break;case"iframe":case"object":ze("load",s);break;case"video":case"audio":for(f=0;f<$l.length;f++)ze($l[f],s);break;case"image":ze("error",s),ze("load",s);break;case"details":ze("toggle",s);break;case"embed":case"source":case"link":ze("error",s),ze("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in r)if(r.hasOwnProperty(L)&&(f=r[L],f!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:Ye(s,l,L,f,r,null)}return;default:if(oc(l)){for(H in r)r.hasOwnProperty(H)&&(f=r[H],f!==void 0&&Gf(s,l,H,f,r,void 0));return}}for(C in r)r.hasOwnProperty(C)&&(f=r[C],f!=null&&Ye(s,l,C,f,r,null))}function MC(s,l,r,f){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,T=null,C=null,A=null,L=null,H=null;for(O in r){var J=r[O];if(r.hasOwnProperty(O)&&J!=null)switch(O){case"checked":break;case"value":break;case"defaultValue":A=J;default:f.hasOwnProperty(O)||Ye(s,l,O,null,f,J)}}for(var V in f){var O=f[V];if(J=r[V],f.hasOwnProperty(V)&&(O!=null||J!=null))switch(V){case"type":y=O;break;case"name":g=O;break;case"checked":L=O;break;case"defaultChecked":H=O;break;case"value":T=O;break;case"defaultValue":C=O;break;case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(i(137,l));break;default:O!==J&&Ye(s,l,V,O,f,J)}}ic(s,T,C,A,L,H,y,g);return;case"select":O=T=C=V=null;for(y in r)if(A=r[y],r.hasOwnProperty(y)&&A!=null)switch(y){case"value":break;case"multiple":O=A;default:f.hasOwnProperty(y)||Ye(s,l,y,null,f,A)}for(g in f)if(y=f[g],A=r[g],f.hasOwnProperty(g)&&(y!=null||A!=null))switch(g){case"value":V=y;break;case"defaultValue":C=y;break;case"multiple":T=y;default:y!==A&&Ye(s,l,g,y,f,A)}l=C,r=T,f=O,V!=null?eo(s,!!r,V,!1):!!f!=!!r&&(l!=null?eo(s,!!r,l,!0):eo(s,!!r,r?[]:"",!1));return;case"textarea":O=V=null;for(C in r)if(g=r[C],r.hasOwnProperty(C)&&g!=null&&!f.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Ye(s,l,C,null,f,g)}for(T in f)if(g=f[T],y=r[T],f.hasOwnProperty(T)&&(g!=null||y!=null))switch(T){case"value":V=g;break;case"defaultValue":O=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==y&&Ye(s,l,T,g,f,y)}mm(s,V,O);return;case"option":for(var Te in r)if(V=r[Te],r.hasOwnProperty(Te)&&V!=null&&!f.hasOwnProperty(Te))switch(Te){case"selected":s.selected=!1;break;default:Ye(s,l,Te,null,f,V)}for(A in f)if(V=f[A],O=r[A],f.hasOwnProperty(A)&&V!==O&&(V!=null||O!=null))switch(A){case"selected":s.selected=V&&typeof V!="function"&&typeof V!="symbol";break;default:Ye(s,l,A,V,f,O)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in r)V=r[_e],r.hasOwnProperty(_e)&&V!=null&&!f.hasOwnProperty(_e)&&Ye(s,l,_e,null,f,V);for(L in f)if(V=f[L],O=r[L],f.hasOwnProperty(L)&&V!==O&&(V!=null||O!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(i(137,l));break;default:Ye(s,l,L,V,f,O)}return;default:if(oc(l)){for(var Je in r)V=r[Je],r.hasOwnProperty(Je)&&V!==void 0&&!f.hasOwnProperty(Je)&&Gf(s,l,Je,void 0,f,V);for(H in f)V=f[H],O=r[H],!f.hasOwnProperty(H)||V===O||V===void 0&&O===void 0||Gf(s,l,H,V,f,O);return}}for(var k in r)V=r[k],r.hasOwnProperty(k)&&V!=null&&!f.hasOwnProperty(k)&&Ye(s,l,k,null,f,V);for(J in f)V=f[J],O=r[J],!f.hasOwnProperty(J)||V===O||V==null&&O==null||Ye(s,l,J,V,f,O)}var $f=null,Yf=null;function Br(s){return s.nodeType===9?s:s.ownerDocument}function gv(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vv(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function Jf(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Zf=null;function AC(){var s=window.event;return s&&s.type==="popstate"?s===Zf?!1:(Zf=s,!0):(Zf=null,!1)}var yv=typeof setTimeout=="function"?setTimeout:void 0,RC=typeof clearTimeout=="function"?clearTimeout:void 0,_v=typeof Promise=="function"?Promise:void 0,NC=typeof queueMicrotask=="function"?queueMicrotask:typeof _v<"u"?function(s){return _v.resolve(null).then(s).catch(DC)}:yv;function DC(s){setTimeout(function(){throw s})}function qi(s){return s==="head"}function Sv(s,l){var r=l,f=0,g=0;do{var y=r.nextSibling;if(s.removeChild(r),y&&y.nodeType===8)if(r=y.data,r==="/$"){if(0<f&&8>f){r=f;var T=s.ownerDocument;if(r&1&&Jl(T.documentElement),r&2&&Jl(T.body),r&4)for(r=T.head,Jl(r),T=r.firstChild;T;){var C=T.nextSibling,A=T.nodeName;T[rl]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&T.rel.toLowerCase()==="stylesheet"||r.removeChild(T),T=C}}if(g===0){s.removeChild(y),ta(l);return}g--}else r==="$"||r==="$?"||r==="$!"?g++:f=r.charCodeAt(0)-48;else f=0;r=y}while(r);ta(l)}function Kf(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var r=l;switch(l=l.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Kf(r),ju(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}s.removeChild(r)}}function kC(s,l,r,f){for(;s.nodeType===1;){var g=r;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!f&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(f){if(!s[rl])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(y=s.getAttribute("rel"),y==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(y!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(y=s.getAttribute("src"),(y!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===y)return s}else return s;if(s=wn(s.nextSibling),s===null)break}return null}function IC(s,l,r){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=wn(s.nextSibling),s===null))return null;return s}function Xf(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function zC(s,l){var r=s.ownerDocument;if(s.data!=="$?"||r.readyState==="complete")l();else{var f=function(){l(),r.removeEventListener("DOMContentLoaded",f)};r.addEventListener("DOMContentLoaded",f),s._reactRetry=f}}function wn(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return s}var Wf=null;function Tv(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var r=s.data;if(r==="$"||r==="$!"||r==="$?"){if(l===0)return s;l--}else r==="/$"&&l++}s=s.previousSibling}return null}function bv(s,l,r){switch(l=Br(r),s){case"html":if(s=l.documentElement,!s)throw Error(i(452));return s;case"head":if(s=l.head,!s)throw Error(i(453));return s;case"body":if(s=l.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Jl(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);ju(s)}var vn=new Map,Cv=new Set;function Pr(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var fi=ie.d;ie.d={f:LC,r:UC,D:VC,C:OC,L:BC,m:PC,X:FC,S:qC,M:HC};function LC(){var s=fi.f(),l=Dr();return s||l}function UC(s){var l=Xs(s);l!==null&&l.tag===5&&l.type==="form"?Hp(l):fi.r(s)}var Do=typeof document>"u"?null:document;function xv(s,l,r){var f=Do;if(f&&typeof l=="string"&&l){var g=cn(l);g='link[rel="'+s+'"][href="'+g+'"]',typeof r=="string"&&(g+='[crossorigin="'+r+'"]'),Cv.has(g)||(Cv.add(g),s={rel:s,crossOrigin:r,href:l},f.querySelector(g)===null&&(l=f.createElement("link"),wt(l,"link",s),yt(l),f.head.appendChild(l)))}}function VC(s){fi.D(s),xv("dns-prefetch",s,null)}function OC(s,l){fi.C(s,l),xv("preconnect",s,l)}function BC(s,l,r){fi.L(s,l,r);var f=Do;if(f&&s&&l){var g='link[rel="preload"][as="'+cn(l)+'"]';l==="image"&&r&&r.imageSrcSet?(g+='[imagesrcset="'+cn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(g+='[imagesizes="'+cn(r.imageSizes)+'"]')):g+='[href="'+cn(s)+'"]';var y=g;switch(l){case"style":y=ko(s);break;case"script":y=Io(s)}vn.has(y)||(s=v({rel:"preload",href:l==="image"&&r&&r.imageSrcSet?void 0:s,as:l},r),vn.set(y,s),f.querySelector(g)!==null||l==="style"&&f.querySelector(Zl(y))||l==="script"&&f.querySelector(Kl(y))||(l=f.createElement("link"),wt(l,"link",s),yt(l),f.head.appendChild(l)))}}function PC(s,l){fi.m(s,l);var r=Do;if(r&&s){var f=l&&typeof l.as=="string"?l.as:"script",g='link[rel="modulepreload"][as="'+cn(f)+'"][href="'+cn(s)+'"]',y=g;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Io(s)}if(!vn.has(y)&&(s=v({rel:"modulepreload",href:s},l),vn.set(y,s),r.querySelector(g)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Kl(y)))return}f=r.createElement("link"),wt(f,"link",s),yt(f),r.head.appendChild(f)}}}function qC(s,l,r){fi.S(s,l,r);var f=Do;if(f&&s){var g=Ws(f).hoistableStyles,y=ko(s);l=l||"default";var T=g.get(y);if(!T){var C={loading:0,preload:null};if(T=f.querySelector(Zl(y)))C.loading=5;else{s=v({rel:"stylesheet",href:s,"data-precedence":l},r),(r=vn.get(y))&&Qf(s,r);var A=T=f.createElement("link");yt(A),wt(A,"link",s),A._p=new Promise(function(L,H){A.onload=L,A.onerror=H}),A.addEventListener("load",function(){C.loading|=1}),A.addEventListener("error",function(){C.loading|=2}),C.loading|=4,qr(T,l,f)}T={type:"stylesheet",instance:T,count:1,state:C},g.set(y,T)}}}function FC(s,l){fi.X(s,l);var r=Do;if(r&&s){var f=Ws(r).hoistableScripts,g=Io(s),y=f.get(g);y||(y=r.querySelector(Kl(g)),y||(s=v({src:s,async:!0},l),(l=vn.get(g))&&jf(s,l),y=r.createElement("script"),yt(y),wt(y,"link",s),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},f.set(g,y))}}function HC(s,l){fi.M(s,l);var r=Do;if(r&&s){var f=Ws(r).hoistableScripts,g=Io(s),y=f.get(g);y||(y=r.querySelector(Kl(g)),y||(s=v({src:s,async:!0,type:"module"},l),(l=vn.get(g))&&jf(s,l),y=r.createElement("script"),yt(y),wt(y,"link",s),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},f.set(g,y))}}function Ev(s,l,r,f){var g=(g=le.current)?Pr(g):null;if(!g)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(l=ko(r.href),r=Ws(g).hoistableStyles,f=r.get(l),f||(f={type:"style",instance:null,count:0,state:null},r.set(l,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){s=ko(r.href);var y=Ws(g).hoistableStyles,T=y.get(s);if(T||(g=g.ownerDocument||g,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(s,T),(y=g.querySelector(Zl(s)))&&!y._p&&(T.instance=y,T.state.loading=5),vn.has(s)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},vn.set(s,r),y||GC(g,s,r,T.state))),l&&f===null)throw Error(i(528,""));return T}if(l&&f!==null)throw Error(i(529,""));return null;case"script":return l=r.async,r=r.src,typeof r=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Io(r),r=Ws(g).hoistableScripts,f=r.get(l),f||(f={type:"script",instance:null,count:0,state:null},r.set(l,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function ko(s){return'href="'+cn(s)+'"'}function Zl(s){return'link[rel="stylesheet"]['+s+"]"}function wv(s){return v({},s,{"data-precedence":s.precedence,precedence:null})}function GC(s,l,r,f){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?f.loading=1:(l=s.createElement("link"),f.preload=l,l.addEventListener("load",function(){return f.loading|=1}),l.addEventListener("error",function(){return f.loading|=2}),wt(l,"link",r),yt(l),s.head.appendChild(l))}function Io(s){return'[src="'+cn(s)+'"]'}function Kl(s){return"script[async]"+s}function Mv(s,l,r){if(l.count++,l.instance===null)switch(l.type){case"style":var f=s.querySelector('style[data-href~="'+cn(r.href)+'"]');if(f)return l.instance=f,yt(f),f;var g=v({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return f=(s.ownerDocument||s).createElement("style"),yt(f),wt(f,"style",g),qr(f,r.precedence,s),l.instance=f;case"stylesheet":g=ko(r.href);var y=s.querySelector(Zl(g));if(y)return l.state.loading|=4,l.instance=y,yt(y),y;f=wv(r),(g=vn.get(g))&&Qf(f,g),y=(s.ownerDocument||s).createElement("link"),yt(y);var T=y;return T._p=new Promise(function(C,A){T.onload=C,T.onerror=A}),wt(y,"link",f),l.state.loading|=4,qr(y,r.precedence,s),l.instance=y;case"script":return y=Io(r.src),(g=s.querySelector(Kl(y)))?(l.instance=g,yt(g),g):(f=r,(g=vn.get(y))&&(f=v({},r),jf(f,g)),s=s.ownerDocument||s,g=s.createElement("script"),yt(g),wt(g,"link",f),s.head.appendChild(g),l.instance=g);case"void":return null;default:throw Error(i(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(f=l.instance,l.state.loading|=4,qr(f,r.precedence,s));return l.instance}function qr(s,l,r){for(var f=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=f.length?f[f.length-1]:null,y=g,T=0;T<f.length;T++){var C=f[T];if(C.dataset.precedence===l)y=C;else if(y!==g)break}y?y.parentNode.insertBefore(s,y.nextSibling):(l=r.nodeType===9?r.head:r,l.insertBefore(s,l.firstChild))}function Qf(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function jf(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var Fr=null;function Av(s,l,r){if(Fr===null){var f=new Map,g=Fr=new Map;g.set(r,f)}else g=Fr,f=g.get(r),f||(f=new Map,g.set(r,f));if(f.has(s))return f;for(f.set(s,null),r=r.getElementsByTagName(s),g=0;g<r.length;g++){var y=r[g];if(!(y[rl]||y[It]||s==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var T=y.getAttribute(l)||"";T=s+T;var C=f.get(T);C?C.push(y):f.set(T,[y])}}return f}function Rv(s,l,r){s=s.ownerDocument||s,s.head.insertBefore(r,l==="title"?s.querySelector("head > title"):null)}function $C(s,l,r){if(r===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function Nv(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Xl=null;function YC(){}function JC(s,l,r){if(Xl===null)throw Error(i(475));var f=Xl;if(l.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var g=ko(r.href),y=s.querySelector(Zl(g));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(f.count++,f=Hr.bind(f),s.then(f,f)),l.state.loading|=4,l.instance=y,yt(y);return}y=s.ownerDocument||s,r=wv(r),(g=vn.get(g))&&Qf(r,g),y=y.createElement("link"),yt(y);var T=y;T._p=new Promise(function(C,A){T.onload=C,T.onerror=A}),wt(y,"link",r),l.instance=y}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(f.count++,l=Hr.bind(f),s.addEventListener("load",l),s.addEventListener("error",l))}}function ZC(){if(Xl===null)throw Error(i(475));var s=Xl;return s.stylesheets&&s.count===0&&ed(s,s.stylesheets),0<s.count?function(l){var r=setTimeout(function(){if(s.stylesheets&&ed(s,s.stylesheets),s.unsuspend){var f=s.unsuspend;s.unsuspend=null,f()}},6e4);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(r)}}:null}function Hr(){if(this.count--,this.count===0){if(this.stylesheets)ed(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Gr=null;function ed(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Gr=new Map,l.forEach(KC,s),Gr=null,Hr.call(s))}function KC(s,l){if(!(l.state.loading&4)){var r=Gr.get(s);if(r)var f=r.get(null);else{r=new Map,Gr.set(s,r);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var T=g[y];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(r.set(T.dataset.precedence,T),f=T)}f&&r.set(null,f)}g=l.instance,T=g.getAttribute("data-precedence"),y=r.get(T)||f,y===f&&r.set(null,g),r.set(T,g),this.count++,f=Hr.bind(this),g.addEventListener("load",f),g.addEventListener("error",f),y?y.parentNode.insertBefore(g,y.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),l.state.loading|=4}}var Wl={$$typeof:q,Provider:null,Consumer:null,_currentValue:j,_currentValue2:j,_threadCount:0};function XC(s,l,r,f,g,y,T,C){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ys(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ys(0),this.hiddenUpdates=Ys(null),this.identifierPrefix=f,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function Dv(s,l,r,f,g,y,T,C,A,L,H,J){return s=new XC(s,l,r,T,C,A,L,J),l=1,y===!0&&(l|=24),y=jt(3,null,null,l),s.current=y,y.stateNode=s,l=zc(),l.refCount++,s.pooledCache=l,l.refCount++,y.memoizedState={element:f,isDehydrated:r,cache:l},Oc(y),s}function kv(s){return s?(s=uo,s):uo}function Iv(s,l,r,f,g,y){g=kv(g),f.context===null?f.context=g:f.pendingContext=g,f=Ai(l),f.payload={element:r},y=y===void 0?null:y,y!==null&&(f.callback=y),r=Ri(s,f,l),r!==null&&(on(r,s,l),Ml(r,s,l))}function zv(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var r=s.retryLane;s.retryLane=r!==0&&r<l?r:l}}function td(s,l){zv(s,l),(s=s.alternate)&&zv(s,l)}function Lv(s){if(s.tag===13){var l=ro(s,67108864);l!==null&&on(l,s,67108864),td(s,67108864)}}var $r=!0;function WC(s,l,r,f){var g=P.T;P.T=null;var y=ie.p;try{ie.p=2,nd(s,l,r,f)}finally{ie.p=y,P.T=g}}function QC(s,l,r,f){var g=P.T;P.T=null;var y=ie.p;try{ie.p=8,nd(s,l,r,f)}finally{ie.p=y,P.T=g}}function nd(s,l,r,f){if($r){var g=id(f);if(g===null)Hf(s,l,f,Yr,r),Vv(s,f);else if(ex(g,s,l,r,f))f.stopPropagation();else if(Vv(s,f),l&4&&-1<jC.indexOf(s)){for(;g!==null;){var y=Xs(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var T=Dn(y.pendingLanes);if(T!==0){var C=y;for(C.pendingLanes|=2,C.entangledLanes|=2;T;){var A=1<<31-Ot(T);C.entanglements[1]|=A,T&=~A}Vn(y),(Fe&6)===0&&(Rr=Rt()+500,Gl(0))}}break;case 13:C=ro(y,2),C!==null&&on(C,y,2),Dr(),td(y,2)}if(y=id(f),y===null&&Hf(s,l,f,Yr,r),y===g)break;g=y}g!==null&&f.stopPropagation()}else Hf(s,l,f,null,r)}}function id(s){return s=ac(s),sd(s)}var Yr=null;function sd(s){if(Yr=null,s=Ks(s),s!==null){var l=a(s);if(l===null)s=null;else{var r=l.tag;if(r===13){if(s=d(l),s!==null)return s;s=null}else if(r===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return Yr=s,null}function Uv(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ss()){case Nt:return 2;case Dt:return 8;case Ct:case al:return 32;case rn:return 268435456;default:return 32}default:return 32}}var od=!1,Fi=null,Hi=null,Gi=null,Ql=new Map,jl=new Map,$i=[],jC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Vv(s,l){switch(s){case"focusin":case"focusout":Fi=null;break;case"dragenter":case"dragleave":Hi=null;break;case"mouseover":case"mouseout":Gi=null;break;case"pointerover":case"pointerout":Ql.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":jl.delete(l.pointerId)}}function ea(s,l,r,f,g,y){return s===null||s.nativeEvent!==y?(s={blockedOn:l,domEventName:r,eventSystemFlags:f,nativeEvent:y,targetContainers:[g]},l!==null&&(l=Xs(l),l!==null&&Lv(l)),s):(s.eventSystemFlags|=f,l=s.targetContainers,g!==null&&l.indexOf(g)===-1&&l.push(g),s)}function ex(s,l,r,f,g){switch(l){case"focusin":return Fi=ea(Fi,s,l,r,f,g),!0;case"dragenter":return Hi=ea(Hi,s,l,r,f,g),!0;case"mouseover":return Gi=ea(Gi,s,l,r,f,g),!0;case"pointerover":var y=g.pointerId;return Ql.set(y,ea(Ql.get(y)||null,s,l,r,f,g)),!0;case"gotpointercapture":return y=g.pointerId,jl.set(y,ea(jl.get(y)||null,s,l,r,f,g)),!0}return!1}function Ov(s){var l=Ks(s.target);if(l!==null){var r=a(l);if(r!==null){if(l=r.tag,l===13){if(l=d(r),l!==null){s.blockedOn=l,JT(s.priority,function(){if(r.tag===13){var f=sn();f=Kn(f);var g=ro(r,f);g!==null&&on(g,r,f),td(r,f)}});return}}else if(l===3&&r.stateNode.current.memoizedState.isDehydrated){s.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Jr(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var r=id(s.nativeEvent);if(r===null){r=s.nativeEvent;var f=new r.constructor(r.type,r);lc=f,r.target.dispatchEvent(f),lc=null}else return l=Xs(r),l!==null&&Lv(l),s.blockedOn=r,!1;l.shift()}return!0}function Bv(s,l,r){Jr(s)&&r.delete(l)}function tx(){od=!1,Fi!==null&&Jr(Fi)&&(Fi=null),Hi!==null&&Jr(Hi)&&(Hi=null),Gi!==null&&Jr(Gi)&&(Gi=null),Ql.forEach(Bv),jl.forEach(Bv)}function Zr(s,l){s.blockedOn===l&&(s.blockedOn=null,od||(od=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,tx)))}var Kr=null;function Pv(s){Kr!==s&&(Kr=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Kr===s&&(Kr=null);for(var l=0;l<s.length;l+=3){var r=s[l],f=s[l+1],g=s[l+2];if(typeof f!="function"){if(sd(f||r)===null)continue;break}var y=Xs(r);y!==null&&(s.splice(l,3),l-=3,sf(y,{pending:!0,data:g,method:r.method,action:f},f,g))}}))}function ta(s){function l(A){return Zr(A,s)}Fi!==null&&Zr(Fi,s),Hi!==null&&Zr(Hi,s),Gi!==null&&Zr(Gi,s),Ql.forEach(l),jl.forEach(l);for(var r=0;r<$i.length;r++){var f=$i[r];f.blockedOn===s&&(f.blockedOn=null)}for(;0<$i.length&&(r=$i[0],r.blockedOn===null);)Ov(r),r.blockedOn===null&&$i.shift();if(r=(s.ownerDocument||s).$$reactFormReplay,r!=null)for(f=0;f<r.length;f+=3){var g=r[f],y=r[f+1],T=g[Gt]||null;if(typeof y=="function")T||Pv(r);else if(T){var C=null;if(y&&y.hasAttribute("formAction")){if(g=y,T=y[Gt]||null)C=T.formAction;else if(sd(g)!==null)continue}else C=T.action;typeof C=="function"?r[f+1]=C:(r.splice(f,3),f-=3),Pv(r)}}}function ld(s){this._internalRoot=s}Xr.prototype.render=ld.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(i(409));var r=l.current,f=sn();Iv(r,f,s,l,null,null)},Xr.prototype.unmount=ld.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;Iv(s.current,2,null,s,null,null),Dr(),l[Zs]=null}};function Xr(s){this._internalRoot=s}Xr.prototype.unstable_scheduleHydration=function(s){if(s){var l=Js();s={blockedOn:null,target:s,priority:l};for(var r=0;r<$i.length&&l!==0&&l<$i[r].priority;r++);$i.splice(r,0,s),r===0&&Ov(s)}};var qv=e.version;if(qv!=="19.1.0")throw Error(i(527,qv,"19.1.0"));ie.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=p(l),s=s!==null?m(s):null,s=s===null?null:s.stateNode,s};var nx={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wr.isDisabled&&Wr.supportsFiber)try{os=Wr.inject(nx),Vt=Wr}catch{}}return ia.createRoot=function(s,l){if(!o(s))throw Error(i(299));var r=!1,f="",g=ig,y=sg,T=og,C=null;return l!=null&&(l.unstable_strictMode===!0&&(r=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(y=l.onCaughtError),l.onRecoverableError!==void 0&&(T=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(C=l.unstable_transitionCallbacks)),l=Dv(s,1,!1,null,null,r,f,g,y,T,C,null),s[Zs]=l.current,Ff(s),new ld(l)},ia.hydrateRoot=function(s,l,r){if(!o(s))throw Error(i(299));var f=!1,g="",y=ig,T=sg,C=og,A=null,L=null;return r!=null&&(r.unstable_strictMode===!0&&(f=!0),r.identifierPrefix!==void 0&&(g=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(T=r.onCaughtError),r.onRecoverableError!==void 0&&(C=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(A=r.unstable_transitionCallbacks),r.formState!==void 0&&(L=r.formState)),l=Dv(s,1,!0,l,r??null,f,g,y,T,C,A,L),l.context=kv(null),r=l.current,f=sn(),f=Kn(f),g=Ai(f),g.callback=null,Ri(r,g,f),r=f,l.current.lanes=r,Ti(l,r),Vn(l),s[Zs]=l.current,Ff(s),new Xr(l)},ia.version="19.1.0",ia}var Wv;function hx(){if(Wv)return ud.exports;Wv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ud.exports=dx(),ud.exports}var mx=hx();const px=aS(mx),gx=({onRequestAnalysis:n,onRequestChat:e,isLoading:t,apiKeyPresent:i,isChartLoading:o,showAiAnalysisDrawings:a,setShowAiAnalysisDrawings:d,analysisPanelMode:h,hasAnalysisResult:p})=>{const m=h==="analysis"&&p?"Refrescar Análisis":"Análisis IA";return M.jsxs("div",{className:"p-3 sm:p-4 bg-slate-800 rounded-lg shadow",children:[M.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-sky-400",children:"Acciones de Análisis"}),M.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-1.5 sm:gap-2",children:[M.jsx("button",{onClick:()=>d(!a),className:"bg-teal-600 hover:bg-teal-700 text-white font-medium py-1.5 sm:py-2 px-2 sm:px-3 rounded-lg focus:outline-none focus:shadow-outline transition-colors text-xs sm:text-sm","aria-label":"Alternar Dibujos en Gráfico",children:a?"Ocultar Dibujos":"Mostrar Dibujos"}),M.jsx("button",{onClick:n,disabled:t||o||!i,className:"bg-sky-600 hover:bg-sky-700 disabled:bg-slate-600 disabled:text-slate-400 disabled:cursor-not-allowed text-white font-bold py-1.5 sm:py-2 px-2 sm:px-3 rounded-lg focus:outline-none focus:shadow-outline transition-colors text-xs sm:text-sm","aria-label":"Analizar Gráfico con IA",children:t&&h==="analysis"?"Analizando...":o?"Cargando Gráfico...":m}),M.jsx("button",{onClick:e,disabled:t&&h==="chat"||!i,className:"bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-600 disabled:text-slate-400 disabled:cursor-not-allowed text-white font-bold py-1.5 sm:py-2 px-2 sm:px-3 rounded-lg focus:outline-none focus:shadow-outline transition-colors text-xs sm:text-sm","aria-label":"Abrir Asistente de Chat IA",children:t&&h==="chat"?"Procesando...":"Asistente IA"})]}),!i&&M.jsx("p",{className:"text-xs text-yellow-400 mt-1.5 sm:mt-2 text-center",children:"Funciones IA deshabilitadas: Clave API no configurada."})]})};function je(n){var e=n.width,t=n.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(t<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:t}}function Rs(n,e){return n.width===e.width&&n.height===e.height}var vx=function(){function n(e){var t=this;this._resolutionListener=function(){return t._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return n.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(n.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),n.prototype.subscribe=function(e){var t=this,i={next:e};return this._observers.push(i),{unsubscribe:function(){t._observers=t._observers.filter(function(o){return o!==i})}}},n.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},n.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},n.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},n.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(t){return t.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},n}();function yx(n){return new vx(n)}var _x=function(){function n(e,t,i){var o;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=je({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=t??function(a){return a},this._allowResizeObserver=(o=i==null?void 0:i.allowResizeObserver)!==null&&o!==void 0?o:!0,this._chooseAndInitObserver()}return n.prototype.dispose=function(){var e,t;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(t=this._devicePixelRatioObservable)===null||t===void 0||t.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(n.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bitmapSize",{get:function(){return je({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),n.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=je(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},n.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},n.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(t){return t!==e})},Object.defineProperty(n.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),n.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},n.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(t){return t!==e})},n.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},n.prototype._resizeBitmap=function(e){var t=this.bitmapSize;Rs(t,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(t,e))},n.prototype._emitBitmapSizeChanged=function(e,t){var i=this;this._bitmapSizeChangedListeners.forEach(function(o){return o.call(i,e,t)})},n.prototype._suggestNewBitmapSize=function(e){var t=this._suggestedBitmapSize,i=je(this._transformBitmapSize(e,this._canvasElementClientSize)),o=Rs(this.bitmapSize,i)?null:i;t===null&&o===null||t!==null&&o!==null&&Rs(t,o)||(this._suggestedBitmapSize=o,this._emitSuggestedBitmapSizeChanged(t,o))},n.prototype._emitSuggestedBitmapSizeChanged=function(e,t){var i=this;this._suggestedBitmapSizeChangedListeners.forEach(function(o){return o.call(i,e,t)})},n.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}Tx().then(function(t){return t?e._initResizeObserver():e._initDevicePixelRatioObservable()})},n.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var t=Qv(this._canvasElement);if(t===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=yx(t),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},n.prototype._invalidateBitmapSize=function(){var e,t;if(this._canvasElement!==null){var i=Qv(this._canvasElement);if(i!==null){var o=(t=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&t!==void 0?t:i.devicePixelRatio,a=this._canvasElement.getClientRects(),d=a[0]!==void 0?bx(a[0],o):je({width:this._canvasElementClientSize.width*o,height:this._canvasElementClientSize.height*o});this._suggestNewBitmapSize(d)}}},n.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(t){var i=t.find(function(d){return d.target===e._canvasElement});if(!(!i||!i.devicePixelContentBoxSize||!i.devicePixelContentBoxSize[0])){var o=i.devicePixelContentBoxSize[0],a=je({width:o.inlineSize,height:o.blockSize});e._suggestNewBitmapSize(a)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},n}();function Sx(n,e){return new _x(n,e.transform,e.options)}function Qv(n){return n.ownerDocument.defaultView}function Tx(){return new Promise(function(n){var e=new ResizeObserver(function(t){n(t.every(function(i){return"devicePixelContentBoxSize"in i})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function bx(n,e){return je({width:Math.round(n.left*e+n.width*e)-Math.round(n.left*e),height:Math.round(n.top*e+n.height*e)-Math.round(n.top*e)})}var Cx=function(){function n(e,t,i){if(t.width===0||t.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=t,i.width===0||i.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=i,this._context=e}return n.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},n.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(n.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),n}();function Ns(n,e){var t=n.canvasElementClientSize;if(t.width===0||t.height===0)return null;var i=n.bitmapSize;if(i.width===0||i.height===0)return null;var o=n.canvasElement.getContext("2d",e);return o===null?null:new Cx(o,t,i)}/*!
 * @license
 * TradingView Lightweight Charts™ v4.2.3
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const xx={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},Ex={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},wx={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Mx={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Ax={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Rx={color:"#26a69a",base:0},rS={color:"#2196f3"},uS={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var jv,Zi;function Ds(n,e){const t={0:[],1:[n.lineWidth,n.lineWidth],2:[2*n.lineWidth,2*n.lineWidth],3:[6*n.lineWidth,6*n.lineWidth],4:[n.lineWidth,4*n.lineWidth]}[e];n.setLineDash(t)}function cS(n,e,t,i){n.beginPath();const o=n.lineWidth%2?.5:0;n.moveTo(t,e+o),n.lineTo(i,e+o),n.stroke()}function ns(n,e){if(!n)throw new Error("Assertion failed"+(e?": "+e:""))}function qt(n){if(n===void 0)throw new Error("Value is undefined");return n}function W(n){if(n===null)throw new Error("Value is null");return n}function Bo(n){return W(qt(n))}(function(n){n[n.Simple=0]="Simple",n[n.WithSteps=1]="WithSteps",n[n.Curved=2]="Curved"})(jv||(jv={})),function(n){n[n.Solid=0]="Solid",n[n.Dotted=1]="Dotted",n[n.Dashed=2]="Dashed",n[n.LargeDashed=3]="LargeDashed",n[n.SparseDotted=4]="SparseDotted"}(Zi||(Zi={}));const e0={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function _n(n){return n<0?0:n>255?255:Math.round(n)||0}function fS(n){return n<=0||n>1?Math.min(Math.max(n,0),1):Math.round(1e4*n)/1e4}const Nx=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,Dx=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,kx=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,Ix=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d*\.?\d+)\s*\)$/;function _a(n){(n=n.toLowerCase())in e0&&(n=e0[n]);{const e=Ix.exec(n)||kx.exec(n);if(e)return[_n(parseInt(e[1],10)),_n(parseInt(e[2],10)),_n(parseInt(e[3],10)),fS(e.length<5?1:parseFloat(e[4]))]}{const e=Dx.exec(n);if(e)return[_n(parseInt(e[1],16)),_n(parseInt(e[2],16)),_n(parseInt(e[3],16)),1]}{const e=Nx.exec(n);if(e)return[_n(17*parseInt(e[1],16)),_n(17*parseInt(e[2],16)),_n(17*parseInt(e[3],16)),1]}throw new Error(`Cannot parse color: ${n}`)}function dS(n){return .199*n[0]+.687*n[1]+.114*n[2]}function zu(n){const e=_a(n);return{t:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,i:dS(e)>160?"black":"white"}}class ut{constructor(){this.h=[]}l(e,t,i){const o={o:e,_:t,u:i===!0};this.h.push(o)}v(e){const t=this.h.findIndex(i=>e===i.o);t>-1&&this.h.splice(t,1)}p(e){this.h=this.h.filter(t=>t._!==e)}m(e,t,i){const o=[...this.h];this.h=this.h.filter(a=>!a.u),o.forEach(a=>a.o(e,t,i))}M(){return this.h.length>0}S(){this.h=[]}}function Mn(n,...e){for(const t of e)for(const i in t)t[i]!==void 0&&Object.prototype.hasOwnProperty.call(t,i)&&!["__proto__","constructor","prototype"].includes(i)&&(typeof t[i]!="object"||n[i]===void 0||Array.isArray(t[i])?n[i]=t[i]:Mn(n[i],t[i]));return n}function Fn(n){return typeof n=="number"&&isFinite(n)}function Sa(n){return typeof n=="number"&&n%1==0}function za(n){return typeof n=="string"}function Qr(n){return typeof n=="boolean"}function gi(n){const e=n;if(!e||typeof e!="object")return e;let t,i,o;for(i in t=Array.isArray(e)?[]:{},e)e.hasOwnProperty(i)&&(o=e[i],t[i]=o&&typeof o=="object"?gi(o):o);return t}function zx(n){return n!==null}function Ta(n){return n===null?void 0:n}const Ih="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Yo(n,e,t){return e===void 0&&(e=Ih),`${t=t!==void 0?`${t} `:""}${n}px ${e}`}class Lx{constructor(e){this.k={C:1,T:5,P:NaN,R:"",D:"",V:"",O:"",B:0,A:0,I:0,L:0,N:0},this.F=e}W(){const e=this.k,t=this.j(),i=this.H();return e.P===t&&e.D===i||(e.P=t,e.D=i,e.R=Yo(t,i),e.L=2.5/12*t,e.B=e.L,e.A=t/12*e.T,e.I=t/12*e.T,e.N=0),e.V=this.$(),e.O=this.U(),this.k}$(){return this.F.W().layout.textColor}U(){return this.F.q()}j(){return this.F.W().layout.fontSize}H(){return this.F.W().layout.fontFamily}}class zh{constructor(){this.Y=[]}Z(e){this.Y=e}X(e,t,i){this.Y.forEach(o=>{o.X(e,t,i)})}}class An{X(e,t,i){e.useBitmapCoordinateSpace(o=>this.K(o,t,i))}}class Ux extends An{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K({context:e,horizontalPixelRatio:t,verticalPixelRatio:i}){if(this.G===null||this.G.tt===null)return;const o=this.G.tt,a=this.G,d=Math.max(1,Math.floor(t))%2/2,h=p=>{e.beginPath();for(let m=o.to-1;m>=o.from;--m){const v=a.it[m],_=Math.round(v.nt*t)+d,S=v.st*i,b=p*i+d;e.moveTo(_,S),e.arc(_,S,b,0,2*Math.PI)}e.fill()};a.et>0&&(e.fillStyle=a.rt,h(a.ht+a.et)),e.fillStyle=a.lt,h(a.ht)}}function Vx(){return{it:[{nt:0,st:0,ot:0,_t:0}],lt:"",rt:"",ht:0,et:0,tt:null}}const Ox={from:0,to:1};class Bx{constructor(e,t){this.ut=new zh,this.ct=[],this.dt=[],this.ft=!0,this.F=e,this.vt=t,this.ut.Z(this.ct)}bt(e){const t=this.F.wt();t.length!==this.ct.length&&(this.dt=t.map(Vx),this.ct=this.dt.map(i=>{const o=new Ux;return o.J(i),o}),this.ut.Z(this.ct)),this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.ut}Mt(){const e=this.vt.W().mode===2,t=this.F.wt(),i=this.vt.xt(),o=this.F.St();t.forEach((a,d)=>{var h;const p=this.dt[d],m=a.kt(i);if(e||m===null||!a.yt())return void(p.tt=null);const v=W(a.Ct());p.lt=m.Tt,p.ht=m.ht,p.et=m.Pt,p.it[0]._t=m._t,p.it[0].st=a.Dt().Rt(m._t,v.Vt),p.rt=(h=m.Ot)!==null&&h!==void 0?h:this.F.Bt(p.it[0].st/a.Dt().At()),p.it[0].ot=i,p.it[0].nt=o.It(i),p.tt=Ox})}}class Px extends An{constructor(e){super(),this.zt=e}K({context:e,bitmapSize:t,horizontalPixelRatio:i,verticalPixelRatio:o}){if(this.zt===null)return;const a=this.zt.Lt.yt,d=this.zt.Et.yt;if(!a&&!d)return;const h=Math.round(this.zt.nt*i),p=Math.round(this.zt.st*o);e.lineCap="butt",a&&h>=0&&(e.lineWidth=Math.floor(this.zt.Lt.et*i),e.strokeStyle=this.zt.Lt.V,e.fillStyle=this.zt.Lt.V,Ds(e,this.zt.Lt.Nt),function(m,v,_,S){m.beginPath();const b=m.lineWidth%2?.5:0;m.moveTo(v+b,_),m.lineTo(v+b,S),m.stroke()}(e,h,0,t.height)),d&&p>=0&&(e.lineWidth=Math.floor(this.zt.Et.et*o),e.strokeStyle=this.zt.Et.V,e.fillStyle=this.zt.Et.V,Ds(e,this.zt.Et.Nt),cS(e,p,0,t.width))}}class qx{constructor(e){this.ft=!0,this.Ft={Lt:{et:1,Nt:0,V:"",yt:!1},Et:{et:1,Nt:0,V:"",yt:!1},nt:0,st:0},this.Wt=new Px(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.yt(),t=W(this.jt.Ht()),i=t.$t().W().crosshair,o=this.Ft;if(i.mode===2)return o.Et.yt=!1,void(o.Lt.yt=!1);o.Et.yt=e&&this.jt.Ut(t),o.Lt.yt=e&&this.jt.qt(),o.Et.et=i.horzLine.width,o.Et.Nt=i.horzLine.style,o.Et.V=i.horzLine.color,o.Lt.et=i.vertLine.width,o.Lt.Nt=i.vertLine.style,o.Lt.V=i.vertLine.color,o.nt=this.jt.Yt(),o.st=this.jt.Zt()}}function Fx(n,e,t,i,o,a){n.fillRect(e+a,t,i-2*a,a),n.fillRect(e+a,t+o-a,i-2*a,a),n.fillRect(e,t,a,o),n.fillRect(e+i-a,t,a,o)}function Lu(n,e,t,i,o,a){n.save(),n.globalCompositeOperation="copy",n.fillStyle=a,n.fillRect(e,t,i,o),n.restore()}function t0(n,e,t,i,o,a){n.beginPath(),n.roundRect?n.roundRect(e,t,i,o,a):(n.lineTo(e+i-a[1],t),a[1]!==0&&n.arcTo(e+i,t,e+i,t+a[1],a[1]),n.lineTo(e+i,t+o-a[2]),a[2]!==0&&n.arcTo(e+i,t+o,e+i-a[2],t+o,a[2]),n.lineTo(e+a[3],t+o),a[3]!==0&&n.arcTo(e,t+o,e,t+o-a[3],a[3]),n.lineTo(e,t+a[0]),a[0]!==0&&n.arcTo(e,t,e+a[0],t,a[0]))}function n0(n,e,t,i,o,a,d=0,h=[0,0,0,0],p=""){if(n.save(),!d||!p||p===a)return t0(n,e,t,i,o,h),n.fillStyle=a,n.fill(),void n.restore();const m=d/2;var v;t0(n,e+m,t+m,i-d,o-d,(v=-m,h.map(_=>_===0?_:_+v))),a!=="transparent"&&(n.fillStyle=a,n.fill()),p!=="transparent"&&(n.lineWidth=d,n.strokeStyle=p,n.closePath(),n.stroke()),n.restore()}function hS(n,e,t,i,o,a,d){n.save(),n.globalCompositeOperation="copy";const h=n.createLinearGradient(0,0,0,o);h.addColorStop(0,a),h.addColorStop(1,d),n.fillStyle=h,n.fillRect(e,t,i,o),n.restore()}class i0{constructor(e,t){this.J(e,t)}J(e,t){this.zt=e,this.Xt=t}At(e,t){return this.zt.yt?e.P+e.L+e.B:0}X(e,t,i,o){if(!this.zt.yt||this.zt.Kt.length===0)return;const a=this.zt.V,d=this.Xt.t,h=e.useBitmapCoordinateSpace(p=>{const m=p.context;m.font=t.R;const v=this.Gt(p,t,i,o),_=v.Jt;return v.Qt?n0(m,_.ti,_.ii,_.ni,_.si,d,_.ei,[_.ht,0,0,_.ht],d):n0(m,_.ri,_.ii,_.ni,_.si,d,_.ei,[0,_.ht,_.ht,0],d),this.zt.hi&&(m.fillStyle=a,m.fillRect(_.ri,_.li,_.ai-_.ri,_.oi)),this.zt._i&&(m.fillStyle=t.O,m.fillRect(v.Qt?_.ui-_.ei:0,_.ii,_.ei,_.ci-_.ii)),v});e.useMediaCoordinateSpace(({context:p})=>{const m=h.di;p.font=t.R,p.textAlign=h.Qt?"right":"left",p.textBaseline="middle",p.fillStyle=a,p.fillText(this.zt.Kt,m.fi,(m.ii+m.ci)/2+m.pi)})}Gt(e,t,i,o){var a;const{context:d,bitmapSize:h,mediaSize:p,horizontalPixelRatio:m,verticalPixelRatio:v}=e,_=this.zt.hi||!this.zt.mi?t.T:0,S=this.zt.bi?t.C:0,b=t.L+this.Xt.wi,x=t.B+this.Xt.gi,E=t.A,D=t.I,I=this.zt.Kt,B=t.P,q=i.Mi(d,I),R=Math.ceil(i.xi(d,I)),U=B+b+x,Y=t.C+E+D+R+_,G=Math.max(1,Math.floor(v));let ne=Math.round(U*v);ne%2!=G%2&&(ne+=1);const K=S>0?Math.max(1,Math.floor(S*m)):0,X=Math.round(Y*m),ee=Math.round(_*m),de=(a=this.Xt.Si)!==null&&a!==void 0?a:this.Xt.ki,Ee=Math.round(de*v)-Math.floor(.5*v),ke=Math.floor(Ee+G/2-ne/2),be=ke+ne,P=o==="right",ie=P?p.width-S:S,j=P?h.width-K:K;let he,w,F;return P?(he=j-X,w=j-ee,F=ie-_-E-S):(he=j+X,w=j+ee,F=ie+_+E),{Qt:P,Jt:{ii:ke,li:Ee,ci:be,ni:X,si:ne,ht:2*m,ei:K,ti:he,ri:j,ai:w,oi:G,ui:h.width},di:{ii:ke/v,ci:be/v,fi:F,pi:q}}}}class Uu{constructor(e){this.yi={ki:0,t:"#000",gi:0,wi:0},this.Ci={Kt:"",yt:!1,hi:!0,mi:!1,Ot:"",V:"#FFF",_i:!1,bi:!1},this.Ti={Kt:"",yt:!1,hi:!1,mi:!0,Ot:"",V:"#FFF",_i:!0,bi:!0},this.ft=!0,this.Pi=new(e||i0)(this.Ci,this.yi),this.Ri=new(e||i0)(this.Ti,this.yi)}Kt(){return this.Di(),this.Ci.Kt}ki(){return this.Di(),this.yi.ki}bt(){this.ft=!0}At(e,t=!1){return Math.max(this.Pi.At(e,t),this.Ri.At(e,t))}Vi(){return this.yi.Si||0}Oi(e){this.yi.Si=e}Bi(){return this.Di(),this.Ci.yt||this.Ti.yt}Ai(){return this.Di(),this.Ci.yt}gt(e){return this.Di(),this.Ci.hi=this.Ci.hi&&e.W().ticksVisible,this.Ti.hi=this.Ti.hi&&e.W().ticksVisible,this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Pi}Ii(){return this.Di(),this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Ri}Di(){this.ft&&(this.Ci.hi=!0,this.Ti.hi=!1,this.zi(this.Ci,this.Ti,this.yi))}}class Hx extends Uu{constructor(e,t,i){super(),this.jt=e,this.Li=t,this.Ei=i}zi(e,t,i){if(e.yt=!1,this.jt.W().mode===2)return;const o=this.jt.W().horzLine;if(!o.labelVisible)return;const a=this.Li.Ct();if(!this.jt.yt()||this.Li.Ni()||a===null)return;const d=zu(o.labelBackgroundColor);i.t=d.t,e.V=d.i;const h=2/12*this.Li.P();i.wi=h,i.gi=h;const p=this.Ei(this.Li);i.ki=p.ki,e.Kt=this.Li.Fi(p._t,a),e.yt=!0}}const Gx=/[1-9]/g;class mS{constructor(){this.zt=null}J(e){this.zt=e}X(e,t){if(this.zt===null||this.zt.yt===!1||this.zt.Kt.length===0)return;const i=e.useMediaCoordinateSpace(({context:S})=>(S.font=t.R,Math.round(t.Wi.xi(S,W(this.zt).Kt,Gx))));if(i<=0)return;const o=t.ji,a=i+2*o,d=a/2,h=this.zt.Hi;let p=this.zt.ki,m=Math.floor(p-d)+.5;m<0?(p+=Math.abs(0-m),m=Math.floor(p-d)+.5):m+a>h&&(p-=Math.abs(h-(m+a)),m=Math.floor(p-d)+.5);const v=m+a,_=Math.ceil(0+t.C+t.T+t.L+t.P+t.B);e.useBitmapCoordinateSpace(({context:S,horizontalPixelRatio:b,verticalPixelRatio:x})=>{const E=W(this.zt);S.fillStyle=E.t;const D=Math.round(m*b),I=Math.round(0*x),B=Math.round(v*b),q=Math.round(_*x),R=Math.round(2*b);if(S.beginPath(),S.moveTo(D,I),S.lineTo(D,q-R),S.arcTo(D,q,D+R,q,R),S.lineTo(B-R,q),S.arcTo(B,q,B,q-R,R),S.lineTo(B,I),S.fill(),E.hi){const U=Math.round(E.ki*b),Y=I,G=Math.round((Y+t.T)*x);S.fillStyle=E.V;const ne=Math.max(1,Math.floor(b)),K=Math.floor(.5*b);S.fillRect(U-K,Y,ne,G-Y)}}),e.useMediaCoordinateSpace(({context:S})=>{const b=W(this.zt),x=0+t.C+t.T+t.L+t.P/2;S.font=t.R,S.textAlign="left",S.textBaseline="middle",S.fillStyle=b.V;const E=t.Wi.Mi(S,"Apr0");S.translate(m+o,x+E),S.fillText(b.Kt,0,0)})}}class $x{constructor(e,t,i){this.ft=!0,this.Wt=new mS,this.Ft={yt:!1,t:"#4c525e",V:"white",Kt:"",Hi:0,ki:NaN,hi:!0},this.vt=e,this.$i=t,this.Ei=i}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt.J(this.Ft),this.Wt}Mt(){const e=this.Ft;if(e.yt=!1,this.vt.W().mode===2)return;const t=this.vt.W().vertLine;if(!t.labelVisible)return;const i=this.$i.St();if(i.Ni())return;e.Hi=i.Hi();const o=this.Ei();if(o===null)return;e.ki=o.ki;const a=i.Ui(this.vt.xt());e.Kt=i.qi(W(a)),e.yt=!0;const d=zu(t.labelBackgroundColor);e.t=d.t,e.V=d.i,e.hi=i.W().ticksVisible}}class Lh{constructor(){this.Yi=null,this.Zi=0}Xi(){return this.Zi}Ki(e){this.Zi=e}Dt(){return this.Yi}Gi(e){this.Yi=e}Ji(e){return[]}Qi(){return[]}yt(){return!0}}var s0;(function(n){n[n.Normal=0]="Normal",n[n.Magnet=1]="Magnet",n[n.Hidden=2]="Hidden"})(s0||(s0={}));class Yx extends Lh{constructor(e,t){super(),this.tn=null,this.nn=NaN,this.sn=0,this.en=!0,this.rn=new Map,this.hn=!1,this.ln=NaN,this.an=NaN,this._n=NaN,this.un=NaN,this.$i=e,this.cn=t,this.dn=new Bx(e,this),this.fn=((o,a)=>d=>{const h=a(),p=o();if(d===W(this.tn).vn())return{_t:p,ki:h};{const m=W(d.Ct());return{_t:d.pn(h,m),ki:h}}})(()=>this.nn,()=>this.an);const i=((o,a)=>()=>{const d=this.$i.St().mn(o()),h=a();return d&&Number.isFinite(h)?{ot:d,ki:h}:null})(()=>this.sn,()=>this.Yt());this.bn=new $x(this,e,i),this.wn=new qx(this)}W(){return this.cn}gn(e,t){this._n=e,this.un=t}Mn(){this._n=NaN,this.un=NaN}xn(){return this._n}Sn(){return this.un}kn(e,t,i){this.hn||(this.hn=!0),this.en=!0,this.yn(e,t,i)}xt(){return this.sn}Yt(){return this.ln}Zt(){return this.an}yt(){return this.en}Cn(){this.en=!1,this.Tn(),this.nn=NaN,this.ln=NaN,this.an=NaN,this.tn=null,this.Mn()}Pn(e){return this.tn!==null?[this.wn,this.dn]:[]}Ut(e){return e===this.tn&&this.cn.horzLine.visible}qt(){return this.cn.vertLine.visible}Rn(e,t){this.en&&this.tn===e||this.rn.clear();const i=[];return this.tn===e&&i.push(this.Dn(this.rn,t,this.fn)),i}Qi(){return this.en?[this.bn]:[]}Ht(){return this.tn}Vn(){this.wn.bt(),this.rn.forEach(e=>e.bt()),this.bn.bt(),this.dn.bt()}On(e){return e&&!e.vn().Ni()?e.vn():null}yn(e,t,i){this.Bn(e,t,i)&&this.Vn()}Bn(e,t,i){const o=this.ln,a=this.an,d=this.nn,h=this.sn,p=this.tn,m=this.On(i);this.sn=e,this.ln=isNaN(e)?NaN:this.$i.St().It(e),this.tn=i;const v=m!==null?m.Ct():null;return m!==null&&v!==null?(this.nn=t,this.an=m.Rt(t,v)):(this.nn=NaN,this.an=NaN),o!==this.ln||a!==this.an||h!==this.sn||d!==this.nn||p!==this.tn}Tn(){const e=this.$i.wt().map(i=>i.In().An()).filter(zx),t=e.length===0?null:Math.max(...e);this.sn=t!==null?t:NaN}Dn(e,t,i){let o=e.get(t);return o===void 0&&(o=new Hx(this,t,i),e.set(t,o)),o}}function Vu(n){return n==="left"||n==="right"}class Mt{constructor(e){this.zn=new Map,this.Ln=[],this.En=e}Nn(e,t){const i=function(o,a){return o===void 0?a:{Fn:Math.max(o.Fn,a.Fn),Wn:o.Wn||a.Wn}}(this.zn.get(e),t);this.zn.set(e,i)}jn(){return this.En}Hn(e){const t=this.zn.get(e);return t===void 0?{Fn:this.En}:{Fn:Math.max(this.En,t.Fn),Wn:t.Wn}}$n(){this.Un(),this.Ln=[{qn:0}]}Yn(e){this.Un(),this.Ln=[{qn:1,Vt:e}]}Zn(e){this.Xn(),this.Ln.push({qn:5,Vt:e})}Un(){this.Xn(),this.Ln.push({qn:6})}Kn(){this.Un(),this.Ln=[{qn:4}]}Gn(e){this.Un(),this.Ln.push({qn:2,Vt:e})}Jn(e){this.Un(),this.Ln.push({qn:3,Vt:e})}Qn(){return this.Ln}ts(e){for(const t of e.Ln)this.ns(t);this.En=Math.max(this.En,e.En),e.zn.forEach((t,i)=>{this.Nn(i,t)})}static ss(){return new Mt(2)}static es(){return new Mt(3)}ns(e){switch(e.qn){case 0:this.$n();break;case 1:this.Yn(e.Vt);break;case 2:this.Gn(e.Vt);break;case 3:this.Jn(e.Vt);break;case 4:this.Kn();break;case 5:this.Zn(e.Vt);break;case 6:this.Xn()}}Xn(){const e=this.Ln.findIndex(t=>t.qn===5);e!==-1&&this.Ln.splice(e,1)}}const o0=".";function vi(n,e){if(!Fn(n))return"n/a";if(!Sa(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?n.toString():("0000000000000000"+n.toString()).slice(-e)}class Ou{constructor(e,t){if(t||(t=1),Fn(e)&&Sa(e)||(e=100),e<0)throw new TypeError("invalid base");this.Li=e,this.rs=t,this.hs()}format(e){const t=e<0?"−":"";return e=Math.abs(e),t+this.ls(e)}hs(){if(this._s=0,this.Li>0&&this.rs>0){let e=this.Li;for(;e>1;)e/=10,this._s++}}ls(e){const t=this.Li/this.rs;let i=Math.floor(e),o="";const a=this._s!==void 0?this._s:NaN;if(t>1){let d=+(Math.round(e*t)-i*t).toFixed(this._s);d>=t&&(d-=t,i+=1),o=o0+vi(+d.toFixed(this._s)*this.rs,a)}else i=Math.round(i*t)/t,a>0&&(o=o0+vi(0,a));return i.toFixed(0)+o}}class pS extends Ou{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class Jx{constructor(e){this.us=e}format(e){let t="";return e<0&&(t="-",e=-e),e<995?t+this.cs(e):e<999995?t+this.cs(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),t+this.cs(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),t+this.cs(e/1e9)+"B")}cs(e){let t;const i=Math.pow(10,this.us);return t=(e=Math.round(e*i)/i)>=1e-15&&e<1?e.toFixed(this.us).replace(/\.?0+$/,""):String(e),t.replace(/(\.[1-9]*)0+$/,(o,a)=>a)}}function gS(n,e,t,i,o,a,d){if(e.length===0||i.from>=e.length||i.to<=0)return;const{context:h,horizontalPixelRatio:p,verticalPixelRatio:m}=n,v=e[i.from];let _=a(n,v),S=v;if(i.to-i.from<2){const b=o/2;h.beginPath();const x={nt:v.nt-b,st:v.st},E={nt:v.nt+b,st:v.st};h.moveTo(x.nt*p,x.st*m),h.lineTo(E.nt*p,E.st*m),d(n,_,x,E)}else{const b=(E,D)=>{d(n,_,S,D),h.beginPath(),_=E,S=D};let x=S;h.beginPath(),h.moveTo(v.nt*p,v.st*m);for(let E=i.from+1;E<i.to;++E){x=e[E];const D=a(n,x);switch(t){case 0:h.lineTo(x.nt*p,x.st*m);break;case 1:h.lineTo(x.nt*p,e[E-1].st*m),D!==_&&(b(D,x),h.lineTo(x.nt*p,e[E-1].st*m)),h.lineTo(x.nt*p,x.st*m);break;case 2:{const[I,B]=Zx(e,E-1,E);h.bezierCurveTo(I.nt*p,I.st*m,B.nt*p,B.st*m,x.nt*p,x.st*m);break}}t!==1&&D!==_&&(b(D,x),h.moveTo(x.nt*p,x.st*m))}(S!==x||S===x&&t===1)&&d(n,_,S,x)}}const l0=6;function hd(n,e){return{nt:n.nt-e.nt,st:n.st-e.st}}function a0(n,e){return{nt:n.nt/e,st:n.st/e}}function Zx(n,e,t){const i=Math.max(0,e-1),o=Math.min(n.length-1,t+1);var a,d;return[(a=n[e],d=a0(hd(n[t],n[i]),l0),{nt:a.nt+d.nt,st:a.st+d.st}),hd(n[t],a0(hd(n[o],n[e]),l0))]}function Kx(n,e,t,i,o){const{context:a,horizontalPixelRatio:d,verticalPixelRatio:h}=e;a.lineTo(o.nt*d,n*h),a.lineTo(i.nt*d,n*h),a.closePath(),a.fillStyle=t,a.fill()}class vS extends An{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){var t;if(this.G===null)return;const{it:i,tt:o,ds:a,et:d,Nt:h,fs:p}=this.G,m=(t=this.G.vs)!==null&&t!==void 0?t:this.G.ps?0:e.mediaSize.height;if(o===null)return;const v=e.context;v.lineCap="butt",v.lineJoin="round",v.lineWidth=d,Ds(v,h),v.lineWidth=1,gS(e,i,p,o,a,this.bs.bind(this),Kx.bind(null,m))}}function Wd(n,e,t){return Math.min(Math.max(n,e),t)}function jr(n,e,t){return e-n<=t}function yS(n){const e=Math.ceil(n);return e%2==0?e-1:e}class Uh{ws(e,t){const i=this.gs,{Ms:o,xs:a,Ss:d,ks:h,ys:p,vs:m}=t;if(this.Cs===void 0||i===void 0||i.Ms!==o||i.xs!==a||i.Ss!==d||i.ks!==h||i.vs!==m||i.ys!==p){const v=e.context.createLinearGradient(0,0,0,p);if(v.addColorStop(0,o),m!=null){const _=Wd(m*e.verticalPixelRatio/p,0,1);v.addColorStop(_,a),v.addColorStop(_,d)}v.addColorStop(1,h),this.Cs=v,this.gs=t}return this.Cs}}class Xx extends vS{constructor(){super(...arguments),this.Ts=new Uh}bs(e,t){return this.Ts.ws(e,{Ms:t.Ps,xs:"",Ss:"",ks:t.Rs,ys:e.bitmapSize.height})}}function Wx(n,e){const t=n.context;t.strokeStyle=e,t.stroke()}class _S extends An{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){if(this.G===null)return;const{it:t,tt:i,ds:o,fs:a,et:d,Nt:h,Ds:p}=this.G;if(i===null)return;const m=e.context;m.lineCap="butt",m.lineWidth=d*e.verticalPixelRatio,Ds(m,h),m.lineJoin="round";const v=this.Vs.bind(this);a!==void 0&&gS(e,t,a,i,o,v,Wx),p&&function(_,S,b,x,E){const{horizontalPixelRatio:D,verticalPixelRatio:I,context:B}=_;let q=null;const R=Math.max(1,Math.floor(D))%2/2,U=b*I+R;for(let Y=x.to-1;Y>=x.from;--Y){const G=S[Y];if(G){const ne=E(_,G);ne!==q&&(B.beginPath(),q!==null&&B.fill(),B.fillStyle=ne,q=ne);const K=Math.round(G.nt*D)+R,X=G.st*I;B.moveTo(K,X),B.arc(K,X,U,0,2*Math.PI)}}B.fill()}(e,t,p,i,v)}}class SS extends _S{Vs(e,t){return t.lt}}function TS(n,e,t,i,o=0,a=e.length){let d=a-o;for(;0<d;){const h=d>>1,p=o+h;i(e[p],t)===n?(o=p+1,d-=h+1):d=h}return o}const La=TS.bind(null,!0),bS=TS.bind(null,!1);function Qx(n,e){return n.ot<e}function jx(n,e){return e<n.ot}function CS(n,e,t){const i=e.Os(),o=e.ui(),a=La(n,i,Qx),d=bS(n,o,jx);if(!t)return{from:a,to:d};let h=a,p=d;return a>0&&a<n.length&&n[a].ot>=i&&(h=a-1),d>0&&d<n.length&&n[d-1].ot<=o&&(p=d+1),{from:h,to:p}}class Vh{constructor(e,t,i){this.Bs=!0,this.As=!0,this.Is=!0,this.zs=[],this.Ls=null,this.Es=e,this.Ns=t,this.Fs=i}bt(e){this.Bs=!0,e==="data"&&(this.As=!0),e==="options"&&(this.Is=!0)}gt(){return this.Es.yt()?(this.Ws(),this.Ls===null?null:this.js):null}Hs(){this.zs=this.zs.map(e=>Object.assign(Object.assign({},e),this.Es.Us().$s(e.ot)))}qs(){this.Ls=null}Ws(){this.As&&(this.Ys(),this.As=!1),this.Is&&(this.Hs(),this.Is=!1),this.Bs&&(this.Zs(),this.Bs=!1)}Zs(){const e=this.Es.Dt(),t=this.Ns.St();if(this.qs(),t.Ni()||e.Ni())return;const i=t.Xs();if(i===null||this.Es.In().Ks()===0)return;const o=this.Es.Ct();o!==null&&(this.Ls=CS(this.zs,i,this.Fs),this.Gs(e,t,o.Vt),this.Js())}}class Bu extends Vh{constructor(e,t){super(e,t,!0)}Gs(e,t,i){t.Qs(this.zs,Ta(this.Ls)),e.te(this.zs,i,Ta(this.Ls))}ie(e,t){return{ot:e,_t:t,nt:NaN,st:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(t=>{const i=t.Vt[3];return this.se(t.ee,i,e)})}}class e1 extends Bu{constructor(e,t){super(e,t),this.js=new zh,this.re=new Xx,this.he=new SS,this.js.Z([this.re,this.he])}se(e,t,i){return Object.assign(Object.assign({},this.ie(e,t)),i.$s(e))}Js(){const e=this.Es.W();this.re.J({fs:e.lineType,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,vs:null,ps:e.invertFilledArea,tt:this.Ls,ds:this.Ns.St().le()}),this.he.J({fs:e.lineVisible?e.lineType:void 0,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,tt:this.Ls,ds:this.Ns.St().le(),Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0})}}class t1 extends An{constructor(){super(...arguments),this.zt=null,this.ae=0,this.oe=0}J(e){this.zt=e}K({context:e,horizontalPixelRatio:t,verticalPixelRatio:i}){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;this.ae=this._e(t),this.ae>=2&&Math.max(1,Math.floor(t))%2!=this.ae%2&&this.ae--,this.oe=this.zt.ue?Math.min(this.ae,Math.floor(t)):this.ae;let o=null;const a=this.oe<=this.ae&&this.zt.le>=Math.floor(1.5*t);for(let d=this.zt.tt.from;d<this.zt.tt.to;++d){const h=this.zt.In[d];o!==h.ce&&(e.fillStyle=h.ce,o=h.ce);const p=Math.floor(.5*this.oe),m=Math.round(h.nt*t),v=m-p,_=this.oe,S=v+_-1,b=Math.min(h.de,h.fe),x=Math.max(h.de,h.fe),E=Math.round(b*i)-p,D=Math.round(x*i)+p,I=Math.max(D-E,this.oe);e.fillRect(v,E,_,I);const B=Math.ceil(1.5*this.ae);if(a){if(this.zt.ve){const Y=m-B;let G=Math.max(E,Math.round(h.pe*i)-p),ne=G+_-1;ne>E+I-1&&(ne=E+I-1,G=ne-_+1),e.fillRect(Y,G,v-Y,ne-G+1)}const q=m+B;let R=Math.max(E,Math.round(h.me*i)-p),U=R+_-1;U>E+I-1&&(U=E+I-1,R=U-_+1),e.fillRect(S+1,R,q-S,U-R+1)}}}_e(e){const t=Math.floor(e);return Math.max(t,Math.floor(function(i,o){return Math.floor(.3*i*o)}(W(this.zt).le,e)))}}class xS extends Vh{constructor(e,t){super(e,t,!1)}Gs(e,t,i){t.Qs(this.zs,Ta(this.Ls)),e.be(this.zs,i,Ta(this.Ls))}we(e,t,i){return{ot:e,ge:t.Vt[0],Me:t.Vt[1],xe:t.Vt[2],Se:t.Vt[3],nt:NaN,pe:NaN,de:NaN,fe:NaN,me:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(t=>this.se(t.ee,t,e))}}class n1 extends xS{constructor(){super(...arguments),this.js=new t1}se(e,t,i){return Object.assign(Object.assign({},this.we(e,t,i)),i.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),ve:e.openVisible,ue:e.thinBars,tt:this.Ls})}}class i1 extends vS{constructor(){super(...arguments),this.Ts=new Uh}bs(e,t){const i=this.G;return this.Ts.ws(e,{Ms:t.ke,xs:t.ye,Ss:t.Ce,ks:t.Te,ys:e.bitmapSize.height,vs:i.vs})}}class s1 extends _S{constructor(){super(...arguments),this.Pe=new Uh}Vs(e,t){const i=this.G;return this.Pe.ws(e,{Ms:t.Re,xs:t.Re,Ss:t.De,ks:t.De,ys:e.bitmapSize.height,vs:i.vs})}}class o1 extends Bu{constructor(e,t){super(e,t),this.js=new zh,this.Ve=new i1,this.Oe=new s1,this.js.Z([this.Ve,this.Oe])}se(e,t,i){return Object.assign(Object.assign({},this.ie(e,t)),i.$s(e))}Js(){const e=this.Es.Ct();if(e===null)return;const t=this.Es.W(),i=this.Es.Dt().Rt(t.baseValue.price,e.Vt),o=this.Ns.St().le();this.Ve.J({it:this.zs,et:t.lineWidth,Nt:t.lineStyle,fs:t.lineType,vs:i,ps:!1,tt:this.Ls,ds:o}),this.Oe.J({it:this.zs,et:t.lineWidth,Nt:t.lineStyle,fs:t.lineVisible?t.lineType:void 0,Ds:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0,vs:i,tt:this.Ls,ds:o})}}class l1 extends An{constructor(){super(...arguments),this.zt=null,this.ae=0}J(e){this.zt=e}K(e){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;const{horizontalPixelRatio:t}=e;this.ae=function(a,d){if(a>=2.5&&a<=4)return Math.floor(3*d);const h=1-.2*Math.atan(Math.max(4,a)-4)/(.5*Math.PI),p=Math.floor(a*h*d),m=Math.floor(a*d),v=Math.min(p,m);return Math.max(Math.floor(d),v)}(this.zt.le,t),this.ae>=2&&Math.floor(t)%2!=this.ae%2&&this.ae--;const i=this.zt.In;this.zt.Be&&this.Ae(e,i,this.zt.tt),this.zt._i&&this.Ie(e,i,this.zt.tt);const o=this.ze(t);(!this.zt._i||this.ae>2*o)&&this.Le(e,i,this.zt.tt)}Ae(e,t,i){if(this.zt===null)return;const{context:o,horizontalPixelRatio:a,verticalPixelRatio:d}=e;let h="",p=Math.min(Math.floor(a),Math.floor(this.zt.le*a));p=Math.max(Math.floor(a),Math.min(p,this.ae));const m=Math.floor(.5*p);let v=null;for(let _=i.from;_<i.to;_++){const S=t[_];S.Ee!==h&&(o.fillStyle=S.Ee,h=S.Ee);const b=Math.round(Math.min(S.pe,S.me)*d),x=Math.round(Math.max(S.pe,S.me)*d),E=Math.round(S.de*d),D=Math.round(S.fe*d);let I=Math.round(a*S.nt)-m;const B=I+p-1;v!==null&&(I=Math.max(v+1,I),I=Math.min(I,B));const q=B-I+1;o.fillRect(I,E,q,b-E),o.fillRect(I,x+1,q,D-x),v=B}}ze(e){let t=Math.floor(1*e);this.ae<=2*t&&(t=Math.floor(.5*(this.ae-1)));const i=Math.max(Math.floor(e),t);return this.ae<=2*i?Math.max(Math.floor(e),Math.floor(1*e)):i}Ie(e,t,i){if(this.zt===null)return;const{context:o,horizontalPixelRatio:a,verticalPixelRatio:d}=e;let h="";const p=this.ze(a);let m=null;for(let v=i.from;v<i.to;v++){const _=t[v];_.Ne!==h&&(o.fillStyle=_.Ne,h=_.Ne);let S=Math.round(_.nt*a)-Math.floor(.5*this.ae);const b=S+this.ae-1,x=Math.round(Math.min(_.pe,_.me)*d),E=Math.round(Math.max(_.pe,_.me)*d);if(m!==null&&(S=Math.max(m+1,S),S=Math.min(S,b)),this.zt.le*a>2*p)Fx(o,S,x,b-S+1,E-x+1,p);else{const D=b-S+1;o.fillRect(S,x,D,E-x+1)}m=b}}Le(e,t,i){if(this.zt===null)return;const{context:o,horizontalPixelRatio:a,verticalPixelRatio:d}=e;let h="";const p=this.ze(a);for(let m=i.from;m<i.to;m++){const v=t[m];let _=Math.round(Math.min(v.pe,v.me)*d),S=Math.round(Math.max(v.pe,v.me)*d),b=Math.round(v.nt*a)-Math.floor(.5*this.ae),x=b+this.ae-1;if(v.ce!==h){const E=v.ce;o.fillStyle=E,h=E}this.zt._i&&(b+=p,_+=p,x-=p,S-=p),_>S||o.fillRect(b,_,x-b+1,S-_+1)}}}class a1 extends xS{constructor(){super(...arguments),this.js=new l1}se(e,t,i){return Object.assign(Object.assign({},this.we(e,t,i)),i.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),Be:e.wickVisible,_i:e.borderVisible,tt:this.Ls})}}class r1{constructor(e,t){this.Fe=e,this.Li=t}X(e,t,i){this.Fe.draw(e,this.Li,t,i)}}class md extends Vh{constructor(e,t,i){super(e,t,!1),this.wn=i,this.js=new r1(this.wn.renderer(),o=>{const a=e.Ct();return a===null?null:e.Dt().Rt(o,a.Vt)})}We(e){return this.wn.priceValueBuilder(e)}je(e){return this.wn.isWhitespace(e)}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(t=>Object.assign(Object.assign({ot:t.ee,nt:NaN},e.$s(t.ee)),{He:t.$e}))}Gs(e,t){t.Qs(this.zs,Ta(this.Ls))}Js(){this.wn.update({bars:this.zs.map(u1),barSpacing:this.Ns.St().le(),visibleRange:this.Ls},this.Es.W())}}function u1(n){return{x:n.nt,time:n.ot,originalData:n.He,barColor:n.ce}}class c1 extends An{constructor(){super(...arguments),this.zt=null,this.Ue=[]}J(e){this.zt=e,this.Ue=[]}K({context:e,horizontalPixelRatio:t,verticalPixelRatio:i}){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return;this.Ue.length||this.qe(t);const o=Math.max(1,Math.floor(i)),a=Math.round(this.zt.Ye*i)-Math.floor(o/2),d=a+o;for(let h=this.zt.tt.from;h<this.zt.tt.to;h++){const p=this.zt.it[h],m=this.Ue[h-this.zt.tt.from],v=Math.round(p.st*i);let _,S;e.fillStyle=p.ce,v<=a?(_=v,S=d):(_=a,S=v-Math.floor(o/2)+o),e.fillRect(m.Os,_,m.ui-m.Os+1,S-_)}}qe(e){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return void(this.Ue=[]);const t=Math.ceil(this.zt.le*e)<=1?0:Math.max(1,Math.floor(e)),i=Math.round(this.zt.le*e)-t;this.Ue=new Array(this.zt.tt.to-this.zt.tt.from);for(let a=this.zt.tt.from;a<this.zt.tt.to;a++){const d=this.zt.it[a],h=Math.round(d.nt*e);let p,m;if(i%2){const v=(i-1)/2;p=h-v,m=h+v}else{const v=i/2;p=h-v,m=h+v-1}this.Ue[a-this.zt.tt.from]={Os:p,ui:m,Ze:h,Xe:d.nt*e,ot:d.ot}}for(let a=this.zt.tt.from+1;a<this.zt.tt.to;a++){const d=this.Ue[a-this.zt.tt.from],h=this.Ue[a-this.zt.tt.from-1];d.ot===h.ot+1&&d.Os-h.ui!==t+1&&(h.Ze>h.Xe?h.ui=d.Os-t-1:d.Os=h.ui+t+1)}let o=Math.ceil(this.zt.le*e);for(let a=this.zt.tt.from;a<this.zt.tt.to;a++){const d=this.Ue[a-this.zt.tt.from];d.ui<d.Os&&(d.ui=d.Os);const h=d.ui-d.Os+1;o=Math.min(h,o)}if(t>0&&o<4)for(let a=this.zt.tt.from;a<this.zt.tt.to;a++){const d=this.Ue[a-this.zt.tt.from];d.ui-d.Os+1>o&&(d.Ze>d.Xe?d.ui-=1:d.Os+=1)}}}class f1 extends Bu{constructor(){super(...arguments),this.js=new c1}se(e,t,i){return Object.assign(Object.assign({},this.ie(e,t)),i.$s(e))}Js(){const e={it:this.zs,le:this.Ns.St().le(),tt:this.Ls,Ye:this.Es.Dt().Rt(this.Es.W().base,W(this.Es.Ct()).Vt)};this.js.J(e)}}class d1 extends Bu{constructor(){super(...arguments),this.js=new SS}se(e,t,i){return Object.assign(Object.assign({},this.ie(e,t)),i.$s(e))}Js(){const e=this.Es.W(),t={it:this.zs,Nt:e.lineStyle,fs:e.lineVisible?e.lineType:void 0,et:e.lineWidth,Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,tt:this.Ls,ds:this.Ns.St().le()};this.js.J(t)}}const h1=/[2-9]/g;class ba{constructor(e=50){this.Ke=0,this.Ge=1,this.Je=1,this.Qe={},this.tr=new Map,this.ir=e}nr(){this.Ke=0,this.tr.clear(),this.Ge=1,this.Je=1,this.Qe={}}xi(e,t,i){return this.sr(e,t,i).width}Mi(e,t,i){const o=this.sr(e,t,i);return((o.actualBoundingBoxAscent||0)-(o.actualBoundingBoxDescent||0))/2}sr(e,t,i){const o=i||h1,a=String(t).replace(o,"0");if(this.tr.has(a))return qt(this.tr.get(a)).er;if(this.Ke===this.ir){const h=this.Qe[this.Je];delete this.Qe[this.Je],this.tr.delete(h),this.Je++,this.Ke--}e.save(),e.textBaseline="middle";const d=e.measureText(a);return e.restore(),d.width===0&&t.length||(this.tr.set(a,{er:d,rr:this.Ge}),this.Qe[this.Ge]=a,this.Ke++,this.Ge++),d}}class m1{constructor(e){this.hr=null,this.k=null,this.lr="right",this.ar=e}_r(e,t,i){this.hr=e,this.k=t,this.lr=i}X(e){this.k!==null&&this.hr!==null&&this.hr.X(e,this.k,this.ar,this.lr)}}class ES{constructor(e,t,i){this.ur=e,this.ar=new ba(50),this.cr=t,this.F=i,this.j=-1,this.Wt=new m1(this.ar)}gt(){const e=this.F.dr(this.cr);if(e===null)return null;const t=e.vr(this.cr)?e.pr():this.cr.Dt();if(t===null)return null;const i=e.mr(t);if(i==="overlay")return null;const o=this.F.br();return o.P!==this.j&&(this.j=o.P,this.ar.nr()),this.Wt._r(this.ur.Ii(),o,i),this.Wt}}class p1 extends An{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}wr(e,t){var i;if(!(!((i=this.zt)===null||i===void 0)&&i.yt))return null;const{st:o,et:a,gr:d}=this.zt;return t>=o-a-7&&t<=o+a+7?{Mr:this.zt,gr:d}:null}K({context:e,bitmapSize:t,horizontalPixelRatio:i,verticalPixelRatio:o}){if(this.zt===null||this.zt.yt===!1)return;const a=Math.round(this.zt.st*o);a<0||a>t.height||(e.lineCap="butt",e.strokeStyle=this.zt.V,e.lineWidth=Math.floor(this.zt.et*i),Ds(e,this.zt.Nt),cS(e,a,0,t.width))}}class Oh{constructor(e){this.Sr={st:0,V:"rgba(0, 0, 0, 0)",et:1,Nt:0,yt:!1},this.kr=new p1,this.ft=!0,this.Es=e,this.Ns=e.$t(),this.kr.J(this.Sr)}bt(){this.ft=!0}gt(){return this.Es.yt()?(this.ft&&(this.yr(),this.ft=!1),this.kr):null}}class g1 extends Oh{constructor(e){super(e)}yr(){this.Sr.yt=!1;const e=this.Es.Dt(),t=e.Cr().Cr;if(t!==2&&t!==3)return;const i=this.Es.W();if(!i.baseLineVisible||!this.Es.yt())return;const o=this.Es.Ct();o!==null&&(this.Sr.yt=!0,this.Sr.st=e.Rt(o.Vt,o.Vt),this.Sr.V=i.baseLineColor,this.Sr.et=i.baseLineWidth,this.Sr.Nt=i.baseLineStyle)}}class v1 extends An{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}$e(){return this.zt}K({context:e,horizontalPixelRatio:t,verticalPixelRatio:i}){const o=this.zt;if(o===null)return;const a=Math.max(1,Math.floor(t)),d=a%2/2,h=Math.round(o.Xe.x*t)+d,p=o.Xe.y*i;e.fillStyle=o.Tr,e.beginPath();const m=Math.max(2,1.5*o.Pr)*t;e.arc(h,p,m,0,2*Math.PI,!1),e.fill(),e.fillStyle=o.Rr,e.beginPath(),e.arc(h,p,o.ht*t,0,2*Math.PI,!1),e.fill(),e.lineWidth=a,e.strokeStyle=o.Dr,e.beginPath(),e.arc(h,p,o.ht*t+a/2,0,2*Math.PI,!1),e.stroke()}}const y1=[{Vr:0,Or:.25,Br:4,Ar:10,Ir:.25,zr:0,Lr:.4,Er:.8},{Vr:.25,Or:.525,Br:10,Ar:14,Ir:0,zr:0,Lr:.8,Er:0},{Vr:.525,Or:1,Br:14,Ar:14,Ir:0,zr:0,Lr:0,Er:0}];function r0(n,e,t,i){return function(o,a){if(o==="transparent")return o;const d=_a(o),h=d[3];return`rgba(${d[0]}, ${d[1]}, ${d[2]}, ${a*h})`}(n,t+(i-t)*e)}function u0(n,e){const t=n%2600/2600;let i;for(const p of y1)if(t>=p.Vr&&t<=p.Or){i=p;break}ns(i!==void 0,"Last price animation internal logic error");const o=(t-i.Vr)/(i.Or-i.Vr);return{Rr:r0(e,o,i.Ir,i.zr),Dr:r0(e,o,i.Lr,i.Er),ht:(a=o,d=i.Br,h=i.Ar,d+(h-d)*a)};var a,d,h}class _1{constructor(e){this.Wt=new v1,this.ft=!0,this.Nr=!0,this.Fr=performance.now(),this.Wr=this.Fr-1,this.jr=e}Hr(){this.Wr=this.Fr-1,this.bt()}$r(){if(this.bt(),this.jr.W().lastPriceAnimation===2){const e=performance.now(),t=this.Wr-e;if(t>0)return void(t<650&&(this.Wr+=2600));this.Fr=e,this.Wr=e+2600}}bt(){this.ft=!0}Ur(){this.Nr=!0}yt(){return this.jr.W().lastPriceAnimation!==0}qr(){switch(this.jr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Wr}}gt(){return this.ft?(this.Mt(),this.ft=!1,this.Nr=!1):this.Nr&&(this.Yr(),this.Nr=!1),this.Wt}Mt(){this.Wt.J(null);const e=this.jr.$t().St(),t=e.Xs(),i=this.jr.Ct();if(t===null||i===null)return;const o=this.jr.Zr(!0);if(o.Xr||!t.Kr(o.ee))return;const a={x:e.It(o.ee),y:this.jr.Dt().Rt(o._t,i.Vt)},d=o.V,h=this.jr.W().lineWidth,p=u0(this.Gr(),d);this.Wt.J({Tr:d,Pr:h,Rr:p.Rr,Dr:p.Dr,ht:p.ht,Xe:a})}Yr(){const e=this.Wt.$e();if(e!==null){const t=u0(this.Gr(),e.Tr);e.Rr=t.Rr,e.Dr=t.Dr,e.ht=t.ht}}Gr(){return this.qr()?performance.now()-this.Fr:2599}}function fa(n,e){return yS(Math.min(Math.max(n,12),30)*e)}function Ca(n,e){switch(n){case"arrowDown":case"arrowUp":return fa(e,1);case"circle":return fa(e,.8);case"square":return fa(e,.7)}}function wS(n){return function(e){const t=Math.ceil(e);return t%2!=0?t-1:t}(fa(n,1))}function c0(n){return Math.max(fa(n,.1),3)}function f0(n,e,t){return e?n:t?Math.ceil(n/2):0}function MS(n,e,t,i,o){const a=Ca("square",t),d=(a-1)/2,h=n-d,p=e-d;return i>=h&&i<=h+a&&o>=p&&o<=p+a}function d0(n,e,t,i){const o=(Ca("arrowUp",i)-1)/2*t.Jr,a=(yS(i/2)-1)/2*t.Jr;e.beginPath(),n?(e.moveTo(t.nt-o,t.st),e.lineTo(t.nt,t.st-o),e.lineTo(t.nt+o,t.st),e.lineTo(t.nt+a,t.st),e.lineTo(t.nt+a,t.st+o),e.lineTo(t.nt-a,t.st+o),e.lineTo(t.nt-a,t.st)):(e.moveTo(t.nt-o,t.st),e.lineTo(t.nt,t.st+o),e.lineTo(t.nt+o,t.st),e.lineTo(t.nt+a,t.st),e.lineTo(t.nt+a,t.st-o),e.lineTo(t.nt-a,t.st-o),e.lineTo(t.nt-a,t.st)),e.fill()}function S1(n,e,t,i,o,a){return MS(e,t,i,o,a)}class T1 extends An{constructor(){super(...arguments),this.zt=null,this.ar=new ba,this.j=-1,this.H="",this.Qr=""}J(e){this.zt=e}_r(e,t){this.j===e&&this.H===t||(this.j=e,this.H=t,this.Qr=Yo(e,t),this.ar.nr())}wr(e,t){if(this.zt===null||this.zt.tt===null)return null;for(let i=this.zt.tt.from;i<this.zt.tt.to;i++){const o=this.zt.it[i];if(C1(o,e,t))return{Mr:o.th,gr:o.gr}}return null}K({context:e,horizontalPixelRatio:t,verticalPixelRatio:i},o,a){if(this.zt!==null&&this.zt.tt!==null){e.textBaseline="middle",e.font=this.Qr;for(let d=this.zt.tt.from;d<this.zt.tt.to;d++){const h=this.zt.it[d];h.Kt!==void 0&&(h.Kt.Hi=this.ar.xi(e,h.Kt.ih),h.Kt.At=this.j,h.Kt.nt=h.nt-h.Kt.Hi/2),b1(h,e,t,i)}}}}function b1(n,e,t,i){e.fillStyle=n.V,n.Kt!==void 0&&function(o,a,d,h,p,m){o.save(),o.scale(p,m),o.fillText(a,d,h),o.restore()}(e,n.Kt.ih,n.Kt.nt,n.Kt.st,t,i),function(o,a,d){if(o.Ks!==0){switch(o.nh){case"arrowDown":return void d0(!1,a,d,o.Ks);case"arrowUp":return void d0(!0,a,d,o.Ks);case"circle":return void function(h,p,m){const v=(Ca("circle",m)-1)/2;h.beginPath(),h.arc(p.nt,p.st,v*p.Jr,0,2*Math.PI,!1),h.fill()}(a,d,o.Ks);case"square":return void function(h,p,m){const v=Ca("square",m),_=(v-1)*p.Jr/2,S=p.nt-_,b=p.st-_;h.fillRect(S,b,v*p.Jr,v*p.Jr)}(a,d,o.Ks)}o.nh}}(n,e,function(o,a,d){const h=Math.max(1,Math.floor(a))%2/2;return{nt:Math.round(o.nt*a)+h,st:o.st*d,Jr:a}}(n,t,i))}function C1(n,e,t){return!(n.Kt===void 0||!function(i,o,a,d,h,p){const m=d/2;return h>=i&&h<=i+a&&p>=o-m&&p<=o+m}(n.Kt.nt,n.Kt.st,n.Kt.Hi,n.Kt.At,e,t))||function(i,o,a){if(i.Ks===0)return!1;switch(i.nh){case"arrowDown":case"arrowUp":return S1(0,i.nt,i.st,i.Ks,o,a);case"circle":return function(d,h,p,m,v){const _=2+Ca("circle",p)/2,S=d-m,b=h-v;return Math.sqrt(S*S+b*b)<=_}(i.nt,i.st,i.Ks,o,a);case"square":return MS(i.nt,i.st,i.Ks,o,a)}}(n,e,t)}function x1(n,e,t,i,o,a,d,h,p){const m=Fn(t)?t:t.Se,v=Fn(t)?t:t.Me,_=Fn(t)?t:t.xe,S=Fn(e.size)?Math.max(e.size,0):1,b=wS(h.le())*S,x=b/2;switch(n.Ks=b,e.position){case"inBar":return n.st=d.Rt(m,p),void(n.Kt!==void 0&&(n.Kt.st=n.st+x+a+.6*o));case"aboveBar":return n.st=d.Rt(v,p)-x-i.sh,n.Kt!==void 0&&(n.Kt.st=n.st-x-.6*o,i.sh+=1.2*o),void(i.sh+=b+a);case"belowBar":return n.st=d.Rt(_,p)+x+i.eh,n.Kt!==void 0&&(n.Kt.st=n.st+x+a+.6*o,i.eh+=1.2*o),void(i.eh+=b+a)}e.position}class E1{constructor(e,t){this.ft=!0,this.rh=!0,this.hh=!0,this.ah=null,this.oh=null,this.Wt=new T1,this.jr=e,this.$i=t,this.zt={it:[],tt:null}}bt(e){this.ft=!0,this.hh=!0,e==="data"&&(this.rh=!0,this.oh=null)}gt(e){if(!this.jr.yt())return null;this.ft&&this._h();const t=this.$i.W().layout;return this.Wt._r(t.fontSize,t.fontFamily),this.Wt.J(this.zt),this.Wt}uh(){if(this.hh){if(this.jr.dh().length>0){const e=this.$i.St().le(),t=c0(e),i=1.5*wS(e)+2*t,o=this.fh();this.ah={above:f0(i,o.aboveBar,o.inBar),below:f0(i,o.belowBar,o.inBar)}}else this.ah=null;this.hh=!1}return this.ah}fh(){return this.oh===null&&(this.oh=this.jr.dh().reduce((e,t)=>(e[t.position]||(e[t.position]=!0),e),{inBar:!1,aboveBar:!1,belowBar:!1})),this.oh}_h(){const e=this.jr.Dt(),t=this.$i.St(),i=this.jr.dh();this.rh&&(this.zt.it=i.map(v=>({ot:v.time,nt:0,st:0,Ks:0,nh:v.shape,V:v.color,th:v.th,gr:v.id,Kt:void 0})),this.rh=!1);const o=this.$i.W().layout;this.zt.tt=null;const a=t.Xs();if(a===null)return;const d=this.jr.Ct();if(d===null||this.zt.it.length===0)return;let h=NaN;const p=c0(t.le()),m={sh:p,eh:p};this.zt.tt=CS(this.zt.it,a,!0);for(let v=this.zt.tt.from;v<this.zt.tt.to;v++){const _=i[v];_.time!==h&&(m.sh=p,m.eh=p,h=_.time);const S=this.zt.it[v];S.nt=t.It(_.time),_.text!==void 0&&_.text.length>0&&(S.Kt={ih:_.text,nt:0,st:0,Hi:0,At:0});const b=this.jr.ph(_.time);b!==null&&x1(S,_,b,m,o.fontSize,p,e,t,d.Vt)}this.ft=!1}}class w1 extends Oh{constructor(e){super(e)}yr(){const e=this.Sr;e.yt=!1;const t=this.Es.W();if(!t.priceLineVisible||!this.Es.yt())return;const i=this.Es.Zr(t.priceLineSource===0);i.Xr||(e.yt=!0,e.st=i.ki,e.V=this.Es.mh(i.V),e.et=t.priceLineWidth,e.Nt=t.priceLineStyle)}}class M1 extends Uu{constructor(e){super(),this.jt=e}zi(e,t,i){e.yt=!1,t.yt=!1;const o=this.jt;if(!o.yt())return;const a=o.W(),d=a.lastValueVisible,h=o.bh()!=="",p=a.seriesLastValueMode===0,m=o.Zr(!1);if(m.Xr)return;d&&(e.Kt=this.wh(m,d,p),e.yt=e.Kt.length!==0),(h||p)&&(t.Kt=this.gh(m,d,h,p),t.yt=t.Kt.length>0);const v=o.mh(m.V),_=zu(v);i.t=_.t,i.ki=m.ki,t.Ot=o.$t().Bt(m.ki/o.Dt().At()),e.Ot=v,e.V=_.i,t.V=_.i}gh(e,t,i,o){let a="";const d=this.jt.bh();return i&&d.length!==0&&(a+=`${d} `),t&&o&&(a+=this.jt.Dt().Mh()?e.xh:e.Sh),a.trim()}wh(e,t,i){return t?i?this.jt.Dt().Mh()?e.Sh:e.xh:e.Kt:""}}function h0(n,e,t,i){const o=Number.isFinite(e),a=Number.isFinite(t);return o&&a?n(e,t):o||a?o?e:t:i}class Xt{constructor(e,t){this.kh=e,this.yh=t}Ch(e){return e!==null&&this.kh===e.kh&&this.yh===e.yh}Th(){return new Xt(this.kh,this.yh)}Ph(){return this.kh}Rh(){return this.yh}Dh(){return this.yh-this.kh}Ni(){return this.yh===this.kh||Number.isNaN(this.yh)||Number.isNaN(this.kh)}ts(e){return e===null?this:new Xt(h0(Math.min,this.Ph(),e.Ph(),-1/0),h0(Math.max,this.Rh(),e.Rh(),1/0))}Vh(e){if(!Fn(e)||this.yh-this.kh===0)return;const t=.5*(this.yh+this.kh);let i=this.yh-t,o=this.kh-t;i*=e,o*=e,this.yh=t+i,this.kh=t+o}Oh(e){Fn(e)&&(this.yh+=e,this.kh+=e)}Bh(){return{minValue:this.kh,maxValue:this.yh}}static Ah(e){return e===null?null:new Xt(e.minValue,e.maxValue)}}class Tu{constructor(e,t){this.Ih=e,this.zh=t||null}Lh(){return this.Ih}Eh(){return this.zh}Bh(){return this.Ih===null?null:{priceRange:this.Ih.Bh(),margins:this.zh||void 0}}static Ah(e){return e===null?null:new Tu(Xt.Ah(e.priceRange),e.margins)}}class A1 extends Oh{constructor(e,t){super(e),this.Nh=t}yr(){const e=this.Sr;e.yt=!1;const t=this.Nh.W();if(!this.Es.yt()||!t.lineVisible)return;const i=this.Nh.Fh();i!==null&&(e.yt=!0,e.st=i,e.V=t.color,e.et=t.lineWidth,e.Nt=t.lineStyle,e.gr=this.Nh.W().id)}}class R1 extends Uu{constructor(e,t){super(),this.jr=e,this.Nh=t}zi(e,t,i){e.yt=!1,t.yt=!1;const o=this.Nh.W(),a=o.axisLabelVisible,d=o.title!=="",h=this.jr;if(!a||!h.yt())return;const p=this.Nh.Fh();if(p===null)return;d&&(t.Kt=o.title,t.yt=!0),t.Ot=h.$t().Bt(p/h.Dt().At()),e.Kt=this.Wh(o.price),e.yt=!0;const m=zu(o.axisLabelColor||o.color);i.t=m.t;const v=o.axisLabelTextColor||m.i;e.V=v,t.V=v,i.ki=p}Wh(e){const t=this.jr.Ct();return t===null?"":this.jr.Dt().Fi(e,t.Vt)}}class N1{constructor(e,t){this.jr=e,this.cn=t,this.jh=new A1(e,this),this.ur=new R1(e,this),this.Hh=new ES(this.ur,e,e.$t())}$h(e){Mn(this.cn,e),this.bt(),this.jr.$t().Uh()}W(){return this.cn}qh(){return this.jh}Yh(){return this.Hh}Zh(){return this.ur}bt(){this.jh.bt(),this.ur.bt()}Fh(){const e=this.jr,t=e.Dt();if(e.$t().St().Ni()||t.Ni())return null;const i=e.Ct();return i===null?null:t.Rt(this.cn.price,i.Vt)}}class D1 extends Lh{constructor(e){super(),this.$i=e}$t(){return this.$i}}const k1={Bar:(n,e,t,i)=>{var o;const a=e.upColor,d=e.downColor,h=W(n(t,i)),p=Bo(h.Vt[0])<=Bo(h.Vt[3]);return{ce:(o=h.V)!==null&&o!==void 0?o:p?a:d}},Candlestick:(n,e,t,i)=>{var o,a,d;const h=e.upColor,p=e.downColor,m=e.borderUpColor,v=e.borderDownColor,_=e.wickUpColor,S=e.wickDownColor,b=W(n(t,i)),x=Bo(b.Vt[0])<=Bo(b.Vt[3]);return{ce:(o=b.V)!==null&&o!==void 0?o:x?h:p,Ne:(a=b.Ot)!==null&&a!==void 0?a:x?m:v,Ee:(d=b.Xh)!==null&&d!==void 0?d:x?_:S}},Custom:(n,e,t,i)=>{var o;return{ce:(o=W(n(t,i)).V)!==null&&o!==void 0?o:e.color}},Area:(n,e,t,i)=>{var o,a,d,h;const p=W(n(t,i));return{ce:(o=p.lt)!==null&&o!==void 0?o:e.lineColor,lt:(a=p.lt)!==null&&a!==void 0?a:e.lineColor,Ps:(d=p.Ps)!==null&&d!==void 0?d:e.topColor,Rs:(h=p.Rs)!==null&&h!==void 0?h:e.bottomColor}},Baseline:(n,e,t,i)=>{var o,a,d,h,p,m;const v=W(n(t,i));return{ce:v.Vt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,Re:(o=v.Re)!==null&&o!==void 0?o:e.topLineColor,De:(a=v.De)!==null&&a!==void 0?a:e.bottomLineColor,ke:(d=v.ke)!==null&&d!==void 0?d:e.topFillColor1,ye:(h=v.ye)!==null&&h!==void 0?h:e.topFillColor2,Ce:(p=v.Ce)!==null&&p!==void 0?p:e.bottomFillColor1,Te:(m=v.Te)!==null&&m!==void 0?m:e.bottomFillColor2}},Line:(n,e,t,i)=>{var o,a;const d=W(n(t,i));return{ce:(o=d.V)!==null&&o!==void 0?o:e.color,lt:(a=d.V)!==null&&a!==void 0?a:e.color}},Histogram:(n,e,t,i)=>{var o;return{ce:(o=W(n(t,i)).V)!==null&&o!==void 0?o:e.color}}};class I1{constructor(e){this.Kh=(t,i)=>i!==void 0?i.Vt:this.jr.In().Gh(t),this.jr=e,this.Jh=k1[e.Qh()]}$s(e,t){return this.Jh(this.Kh,this.jr.W(),e,t)}}var m0;(function(n){n[n.NearestLeft=-1]="NearestLeft",n[n.None=0]="None",n[n.NearestRight=1]="NearestRight"})(m0||(m0={}));const Ji=30;class z1{constructor(){this.tl=[],this.il=new Map,this.nl=new Map}sl(){return this.Ks()>0?this.tl[this.tl.length-1]:null}el(){return this.Ks()>0?this.rl(0):null}An(){return this.Ks()>0?this.rl(this.tl.length-1):null}Ks(){return this.tl.length}Ni(){return this.Ks()===0}Kr(e){return this.hl(e,0)!==null}Gh(e){return this.ll(e)}ll(e,t=0){const i=this.hl(e,t);return i===null?null:Object.assign(Object.assign({},this.al(i)),{ee:this.rl(i)})}ne(){return this.tl}ol(e,t,i){if(this.Ni())return null;let o=null;for(const a of i)o=eu(o,this._l(e,t,a));return o}J(e){this.nl.clear(),this.il.clear(),this.tl=e}rl(e){return this.tl[e].ee}al(e){return this.tl[e]}hl(e,t){const i=this.ul(e);if(i===null&&t!==0)switch(t){case-1:return this.cl(e);case 1:return this.dl(e);default:throw new TypeError("Unknown search mode")}return i}cl(e){let t=this.fl(e);return t>0&&(t-=1),t!==this.tl.length&&this.rl(t)<e?t:null}dl(e){const t=this.vl(e);return t!==this.tl.length&&e<this.rl(t)?t:null}ul(e){const t=this.fl(e);return t===this.tl.length||e<this.tl[t].ee?null:t}fl(e){return La(this.tl,e,(t,i)=>t.ee<i)}vl(e){return bS(this.tl,e,(t,i)=>t.ee>i)}pl(e,t,i){let o=null;for(let a=e;a<t;a++){const d=this.tl[a].Vt[i];Number.isNaN(d)||(o===null?o={ml:d,bl:d}:(d<o.ml&&(o.ml=d),d>o.bl&&(o.bl=d)))}return o}_l(e,t,i){if(this.Ni())return null;let o=null;const a=W(this.el()),d=W(this.An()),h=Math.max(e,a),p=Math.min(t,d),m=Math.ceil(h/Ji)*Ji,v=Math.max(m,Math.floor(p/Ji)*Ji);{const S=this.fl(h),b=this.vl(Math.min(p,m,t));o=eu(o,this.pl(S,b,i))}let _=this.il.get(i);_===void 0&&(_=new Map,this.il.set(i,_));for(let S=Math.max(m+1,h);S<v;S+=Ji){const b=Math.floor(S/Ji);let x=_.get(b);if(x===void 0){const E=this.fl(b*Ji),D=this.vl((b+1)*Ji-1);x=this.pl(E,D,i),_.set(b,x)}o=eu(o,x)}{const S=this.fl(v),b=this.vl(p);o=eu(o,this.pl(S,b,i))}return o}}function eu(n,e){return n===null?e:e===null?n:{ml:Math.min(n.ml,e.ml),bl:Math.max(n.bl,e.bl)}}class L1{constructor(e){this.wl=e}X(e,t,i){this.wl.draw(e)}gl(e,t,i){var o,a;(a=(o=this.wl).drawBackground)===null||a===void 0||a.call(o,e)}}class pd{constructor(e){this.tr=null,this.wn=e}gt(){var e;const t=this.wn.renderer();if(t===null)return null;if(((e=this.tr)===null||e===void 0?void 0:e.Ml)===t)return this.tr.xl;const i=new L1(t);return this.tr={Ml:t,xl:i},i}Sl(){var e,t,i;return(i=(t=(e=this.wn).zOrder)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:"normal"}}function AS(n){var e,t,i,o,a;return{Kt:n.text(),ki:n.coordinate(),Si:(e=n.fixedCoordinate)===null||e===void 0?void 0:e.call(n),V:n.textColor(),t:n.backColor(),yt:(i=(t=n.visible)===null||t===void 0?void 0:t.call(n))===null||i===void 0||i,hi:(a=(o=n.tickVisible)===null||o===void 0?void 0:o.call(n))===null||a===void 0||a}}class U1{constructor(e,t){this.Wt=new mS,this.kl=e,this.yl=t}gt(){return this.Wt.J(Object.assign({Hi:this.yl.Hi()},AS(this.kl))),this.Wt}}class V1 extends Uu{constructor(e,t){super(),this.kl=e,this.Li=t}zi(e,t,i){const o=AS(this.kl);i.t=o.t,e.V=o.V;const a=2/12*this.Li.P();i.wi=a,i.gi=a,i.ki=o.ki,i.Si=o.Si,e.Kt=o.Kt,e.yt=o.yt,e.hi=o.hi}}class O1{constructor(e,t){this.Cl=null,this.Tl=null,this.Pl=null,this.Rl=null,this.Dl=null,this.Vl=e,this.jr=t}Ol(){return this.Vl}Vn(){var e,t;(t=(e=this.Vl).updateAllViews)===null||t===void 0||t.call(e)}Pn(){var e,t,i,o;const a=(i=(t=(e=this.Vl).paneViews)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:[];if(((o=this.Cl)===null||o===void 0?void 0:o.Ml)===a)return this.Cl.xl;const d=a.map(h=>new pd(h));return this.Cl={Ml:a,xl:d},d}Qi(){var e,t,i,o;const a=(i=(t=(e=this.Vl).timeAxisViews)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:[];if(((o=this.Tl)===null||o===void 0?void 0:o.Ml)===a)return this.Tl.xl;const d=this.jr.$t().St(),h=a.map(p=>new U1(p,d));return this.Tl={Ml:a,xl:h},h}Rn(){var e,t,i,o;const a=(i=(t=(e=this.Vl).priceAxisViews)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:[];if(((o=this.Pl)===null||o===void 0?void 0:o.Ml)===a)return this.Pl.xl;const d=this.jr.Dt(),h=a.map(p=>new V1(p,d));return this.Pl={Ml:a,xl:h},h}Bl(){var e,t,i,o;const a=(i=(t=(e=this.Vl).priceAxisPaneViews)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:[];if(((o=this.Rl)===null||o===void 0?void 0:o.Ml)===a)return this.Rl.xl;const d=a.map(h=>new pd(h));return this.Rl={Ml:a,xl:d},d}Al(){var e,t,i,o;const a=(i=(t=(e=this.Vl).timeAxisPaneViews)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:[];if(((o=this.Dl)===null||o===void 0?void 0:o.Ml)===a)return this.Dl.xl;const d=a.map(h=>new pd(h));return this.Dl={Ml:a,xl:d},d}Il(e,t){var i,o,a;return(a=(o=(i=this.Vl).autoscaleInfo)===null||o===void 0?void 0:o.call(i,e,t))!==null&&a!==void 0?a:null}wr(e,t){var i,o,a;return(a=(o=(i=this.Vl).hitTest)===null||o===void 0?void 0:o.call(i,e,t))!==null&&a!==void 0?a:null}}function gd(n,e,t,i){n.forEach(o=>{e(o).forEach(a=>{a.Sl()===t&&i.push(a)})})}function vd(n){return n.Pn()}function B1(n){return n.Bl()}function P1(n){return n.Al()}class Bh extends D1{constructor(e,t,i,o,a){super(e),this.zt=new z1,this.jh=new w1(this),this.zl=[],this.Ll=new g1(this),this.El=null,this.Nl=null,this.Fl=[],this.Wl=[],this.jl=null,this.Hl=[],this.cn=t,this.$l=i;const d=new M1(this);this.rn=[d],this.Hh=new ES(d,this,e),i!=="Area"&&i!=="Line"&&i!=="Baseline"||(this.El=new _1(this)),this.Ul(),this.ql(a)}S(){this.jl!==null&&clearTimeout(this.jl)}mh(e){return this.cn.priceLineColor||e}Zr(e){const t={Xr:!0},i=this.Dt();if(this.$t().St().Ni()||i.Ni()||this.zt.Ni())return t;const o=this.$t().St().Xs(),a=this.Ct();if(o===null||a===null)return t;let d,h;if(e){const _=this.zt.sl();if(_===null)return t;d=_,h=_.ee}else{const _=this.zt.ll(o.ui(),-1);if(_===null||(d=this.zt.Gh(_.ee),d===null))return t;h=_.ee}const p=d.Vt[3],m=this.Us().$s(h,{Vt:d}),v=i.Rt(p,a.Vt);return{Xr:!1,_t:p,Kt:i.Fi(p,a.Vt),xh:i.Yl(p),Sh:i.Zl(p,a.Vt),V:m.ce,ki:v,ee:h}}Us(){return this.Nl!==null||(this.Nl=new I1(this)),this.Nl}W(){return this.cn}$h(e){const t=e.priceScaleId;t!==void 0&&t!==this.cn.priceScaleId&&this.$t().Xl(this,t),Mn(this.cn,e),e.priceFormat!==void 0&&(this.Ul(),this.$t().Kl()),this.$t().Gl(this),this.$t().Jl(),this.wn.bt("options")}J(e,t){this.zt.J(e),this.Ql(),this.wn.bt("data"),this.dn.bt("data"),this.El!==null&&(t&&t.ta?this.El.$r():e.length===0&&this.El.Hr());const i=this.$t().dr(this);this.$t().ia(i),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}na(e){this.Fl=e,this.Ql();const t=this.$t().dr(this);this.dn.bt("data"),this.$t().ia(t),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}sa(){return this.Fl}dh(){return this.Wl}ea(e){const t=new N1(this,e);return this.zl.push(t),this.$t().Gl(this),t}ra(e){const t=this.zl.indexOf(e);t!==-1&&this.zl.splice(t,1),this.$t().Gl(this)}Qh(){return this.$l}Ct(){const e=this.ha();return e===null?null:{Vt:e.Vt[3],la:e.ot}}ha(){const e=this.$t().St().Xs();if(e===null)return null;const t=e.Os();return this.zt.ll(t,1)}In(){return this.zt}ph(e){const t=this.zt.Gh(e);return t===null?null:this.$l==="Bar"||this.$l==="Candlestick"||this.$l==="Custom"?{ge:t.Vt[0],Me:t.Vt[1],xe:t.Vt[2],Se:t.Vt[3]}:t.Vt[3]}aa(e){const t=[];gd(this.Hl,vd,"top",t);const i=this.El;return i!==null&&i.yt()&&(this.jl===null&&i.qr()&&(this.jl=setTimeout(()=>{this.jl=null,this.$t().oa()},0)),i.Ur(),t.unshift(i)),t}Pn(){const e=[];this._a()||e.push(this.Ll),e.push(this.wn,this.jh,this.dn);const t=this.zl.map(i=>i.qh());return e.push(...t),gd(this.Hl,vd,"normal",e),e}ua(){return this.ca(vd,"bottom")}da(e){return this.ca(B1,e)}fa(e){return this.ca(P1,e)}va(e,t){return this.Hl.map(i=>i.wr(e,t)).filter(i=>i!==null)}Ji(e){return[this.Hh,...this.zl.map(t=>t.Yh())]}Rn(e,t){if(t!==this.Yi&&!this._a())return[];const i=[...this.rn];for(const o of this.zl)i.push(o.Zh());return this.Hl.forEach(o=>{i.push(...o.Rn())}),i}Qi(){const e=[];return this.Hl.forEach(t=>{e.push(...t.Qi())}),e}Il(e,t){if(this.cn.autoscaleInfoProvider!==void 0){const i=this.cn.autoscaleInfoProvider(()=>{const o=this.pa(e,t);return o===null?null:o.Bh()});return Tu.Ah(i)}return this.pa(e,t)}ma(){return this.cn.priceFormat.minMove}ba(){return this.wa}Vn(){var e;this.wn.bt(),this.dn.bt();for(const t of this.rn)t.bt();for(const t of this.zl)t.bt();this.jh.bt(),this.Ll.bt(),(e=this.El)===null||e===void 0||e.bt(),this.Hl.forEach(t=>t.Vn())}Dt(){return W(super.Dt())}kt(e){if(!((this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline")&&this.cn.crosshairMarkerVisible))return null;const t=this.zt.Gh(e);return t===null?null:{_t:t.Vt[3],ht:this.ga(),Ot:this.Ma(),Pt:this.xa(),Tt:this.Sa(e)}}bh(){return this.cn.title}yt(){return this.cn.visible}ka(e){this.Hl.push(new O1(e,this))}ya(e){this.Hl=this.Hl.filter(t=>t.Ol()!==e)}Ca(){if(this.wn instanceof md)return e=>this.wn.We(e)}Ta(){if(this.wn instanceof md)return e=>this.wn.je(e)}_a(){return!Vu(this.Dt().Pa())}pa(e,t){if(!Sa(e)||!Sa(t)||this.zt.Ni())return null;const i=this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline"||this.$l==="Histogram"?[3]:[2,1],o=this.zt.ol(e,t,i);let a=o!==null?new Xt(o.ml,o.bl):null;if(this.Qh()==="Histogram"){const h=this.cn.base,p=new Xt(h,h);a=a!==null?a.ts(p):p}let d=this.dn.uh();return this.Hl.forEach(h=>{const p=h.Il(e,t);if(p!=null&&p.priceRange){const b=new Xt(p.priceRange.minValue,p.priceRange.maxValue);a=a!==null?a.ts(b):b}var m,v,_,S;p!=null&&p.margins&&(m=d,v=p.margins,d={above:Math.max((_=m==null?void 0:m.above)!==null&&_!==void 0?_:0,v.above),below:Math.max((S=m==null?void 0:m.below)!==null&&S!==void 0?S:0,v.below)})}),new Tu(a,d)}ga(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerRadius}return 0}Ma(){switch(this.$l){case"Line":case"Area":case"Baseline":{const e=this.cn.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}xa(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerBorderWidth}return 0}Sa(e){switch(this.$l){case"Line":case"Area":case"Baseline":{const t=this.cn.crosshairMarkerBackgroundColor;if(t.length!==0)return t}}return this.Us().$s(e).ce}Ul(){switch(this.cn.priceFormat.type){case"custom":this.wa={format:this.cn.priceFormat.formatter};break;case"volume":this.wa=new Jx(this.cn.priceFormat.precision);break;case"percent":this.wa=new pS(this.cn.priceFormat.precision);break;default:{const e=Math.pow(10,this.cn.priceFormat.precision);this.wa=new Ou(e,this.cn.priceFormat.minMove*e)}}this.Yi!==null&&this.Yi.Ra()}Ql(){const e=this.$t().St();if(!e.Da()||this.zt.Ni())return void(this.Wl=[]);const t=W(this.zt.el());this.Wl=this.Fl.map((i,o)=>{const a=W(e.Va(i.time,!0)),d=a<t?1:-1;return{time:W(this.zt.ll(a,d)).ee,position:i.position,shape:i.shape,color:i.color,id:i.id,th:o,text:i.text,size:i.size,originalTime:i.originalTime}})}ql(e){switch(this.dn=new E1(this,this.$t()),this.$l){case"Bar":this.wn=new n1(this,this.$t());break;case"Candlestick":this.wn=new a1(this,this.$t());break;case"Line":this.wn=new d1(this,this.$t());break;case"Custom":this.wn=new md(this,this.$t(),qt(e));break;case"Area":this.wn=new e1(this,this.$t());break;case"Baseline":this.wn=new o1(this,this.$t());break;case"Histogram":this.wn=new f1(this,this.$t());break;default:throw Error("Unknown chart style assigned: "+this.$l)}}ca(e,t){const i=[];return gd(this.Hl,e,t,i),i}}class q1{constructor(e){this.cn=e}Oa(e,t,i){let o=e;if(this.cn.mode===0)return o;const a=i.vn(),d=a.Ct();if(d===null)return o;const h=a.Rt(e,d),p=i.Ba().filter(v=>v instanceof Bh).reduce((v,_)=>{if(i.vr(_)||!_.yt())return v;const S=_.Dt(),b=_.In();if(S.Ni()||!b.Kr(t))return v;const x=b.Gh(t);if(x===null)return v;const E=Bo(_.Ct());return v.concat([S.Rt(x.Vt[3],E.Vt)])},[]);if(p.length===0)return o;p.sort((v,_)=>Math.abs(v-h)-Math.abs(_-h));const m=p[0];return o=a.pn(m,d),o}}class F1 extends An{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}K({context:e,bitmapSize:t,horizontalPixelRatio:i,verticalPixelRatio:o}){if(this.zt===null)return;const a=Math.max(1,Math.floor(i));e.lineWidth=a,function(d,h){d.save(),d.lineWidth%2&&d.translate(.5,.5),h(),d.restore()}(e,()=>{const d=W(this.zt);if(d.Aa){e.strokeStyle=d.Ia,Ds(e,d.za),e.beginPath();for(const h of d.La){const p=Math.round(h.Ea*i);e.moveTo(p,-a),e.lineTo(p,t.height+a)}e.stroke()}if(d.Na){e.strokeStyle=d.Fa,Ds(e,d.Wa),e.beginPath();for(const h of d.ja){const p=Math.round(h.Ea*o);e.moveTo(-a,p),e.lineTo(t.width+a,p)}e.stroke()}})}}class H1{constructor(e){this.Wt=new F1,this.ft=!0,this.tn=e}bt(){this.ft=!0}gt(){if(this.ft){const e=this.tn.$t().W().grid,t={Na:e.horzLines.visible,Aa:e.vertLines.visible,Fa:e.horzLines.color,Ia:e.vertLines.color,Wa:e.horzLines.style,za:e.vertLines.style,ja:this.tn.vn().Ha(),La:(this.tn.$t().St().Ha()||[]).map(i=>({Ea:i.coord}))};this.Wt.J(t),this.ft=!1}return this.Wt}}class G1{constructor(e){this.wn=new H1(e)}qh(){return this.wn}}const yd={$a:4,Ua:1e-4};function Po(n,e){const t=100*(n-e)/e;return e<0?-t:t}function $1(n,e){const t=Po(n.Ph(),e),i=Po(n.Rh(),e);return new Xt(t,i)}function da(n,e){const t=100*(n-e)/e+100;return e<0?-t:t}function Y1(n,e){const t=da(n.Ph(),e),i=da(n.Rh(),e);return new Xt(t,i)}function bu(n,e){const t=Math.abs(n);if(t<1e-15)return 0;const i=Math.log10(t+e.Ua)+e.$a;return n<0?-i:i}function ha(n,e){const t=Math.abs(n);if(t<1e-15)return 0;const i=Math.pow(10,t-e.$a)-e.Ua;return n<0?-i:i}function sa(n,e){if(n===null)return null;const t=bu(n.Ph(),e),i=bu(n.Rh(),e);return new Xt(t,i)}function tu(n,e){if(n===null)return null;const t=ha(n.Ph(),e),i=ha(n.Rh(),e);return new Xt(t,i)}function _d(n){if(n===null)return yd;const e=Math.abs(n.Rh()-n.Ph());if(e>=1||e<1e-15)return yd;const t=Math.ceil(Math.abs(Math.log10(e))),i=yd.$a+t;return{$a:i,Ua:1/Math.pow(10,i)}}class Sd{constructor(e,t){if(this.qa=e,this.Ya=t,function(i){if(i<0)return!1;for(let o=i;o>1;o/=10)if(o%10!=0)return!1;return!0}(this.qa))this.Za=[2,2.5,2];else{this.Za=[];for(let i=this.qa;i!==1;){if(i%2==0)this.Za.push(2),i/=2;else{if(i%5!=0)throw new Error("unexpected base");this.Za.push(2,2.5),i/=5}if(this.Za.length>100)throw new Error("something wrong with base")}}}Xa(e,t,i){const o=this.qa===0?0:1/this.qa;let a=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-t)))),d=0,h=this.Ya[0];for(;;){const _=jr(a,o,1e-14)&&a>o+1e-14,S=jr(a,i*h,1e-14),b=jr(a,1,1e-14);if(!(_&&S&&b))break;a/=h,h=this.Ya[++d%this.Ya.length]}if(a<=o+1e-14&&(a=o),a=Math.max(1,a),this.Za.length>0&&(p=a,m=1,v=1e-14,Math.abs(p-m)<v))for(d=0,h=this.Za[0];jr(a,i*h,1e-14)&&a>o+1e-14;)a/=h,h=this.Za[++d%this.Za.length];var p,m,v;return a}}class p0{constructor(e,t,i,o){this.Ka=[],this.Li=e,this.qa=t,this.Ga=i,this.Ja=o}Xa(e,t){if(e<t)throw new Error("high < low");const i=this.Li.At(),o=(e-t)*this.Qa()/i,a=new Sd(this.qa,[2,2.5,2]),d=new Sd(this.qa,[2,2,2.5]),h=new Sd(this.qa,[2.5,2,2]),p=[];return p.push(a.Xa(e,t,o),d.Xa(e,t,o),h.Xa(e,t,o)),function(m){if(m.length<1)throw Error("array is empty");let v=m[0];for(let _=1;_<m.length;++_)m[_]<v&&(v=m[_]);return v}(p)}io(){const e=this.Li,t=e.Ct();if(t===null)return void(this.Ka=[]);const i=e.At(),o=this.Ga(i-1,t),a=this.Ga(0,t),d=this.Li.W().entireTextOnly?this.no()/2:0,h=d,p=i-1-d,m=Math.max(o,a),v=Math.min(o,a);if(m===v)return void(this.Ka=[]);let _=this.Xa(m,v),S=m%_;S+=S<0?_:0;const b=m>=v?1:-1;let x=null,E=0;for(let D=m-S;D>v;D-=_){const I=this.Ja(D,t,!0);x!==null&&Math.abs(I-x)<this.Qa()||I<h||I>p||(E<this.Ka.length?(this.Ka[E].Ea=I,this.Ka[E].so=e.eo(D)):this.Ka.push({Ea:I,so:e.eo(D)}),E++,x=I,e.ro()&&(_=this.Xa(D*b,v)))}this.Ka.length=E}Ha(){return this.Ka}no(){return this.Li.P()}Qa(){return Math.ceil(2.5*this.no())}}function RS(n){return n.slice().sort((e,t)=>W(e.Xi())-W(t.Xi()))}var Qd;(function(n){n[n.Normal=0]="Normal",n[n.Logarithmic=1]="Logarithmic",n[n.Percentage=2]="Percentage",n[n.IndexedTo100=3]="IndexedTo100"})(Qd||(Qd={}));const g0=new pS,v0=new Ou(100,1);class J1{constructor(e,t,i,o){this.ho=0,this.lo=null,this.Ih=null,this.ao=null,this.oo={_o:!1,uo:null},this.co=0,this.do=0,this.fo=new ut,this.vo=new ut,this.po=[],this.mo=null,this.bo=null,this.wo=null,this.Mo=null,this.wa=v0,this.xo=_d(null),this.So=e,this.cn=t,this.ko=i,this.yo=o,this.Co=new p0(this,100,this.To.bind(this),this.Po.bind(this))}Pa(){return this.So}W(){return this.cn}$h(e){if(Mn(this.cn,e),this.Ra(),e.mode!==void 0&&this.Ro({Cr:e.mode}),e.scaleMargins!==void 0){const t=qt(e.scaleMargins.top),i=qt(e.scaleMargins.bottom);if(t<0||t>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${t}`);if(i<0||i>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${i}`);if(t+i>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${t+i}`);this.Do(),this.bo=null}}Vo(){return this.cn.autoScale}ro(){return this.cn.mode===1}Mh(){return this.cn.mode===2}Oo(){return this.cn.mode===3}Cr(){return{Wn:this.cn.autoScale,Bo:this.cn.invertScale,Cr:this.cn.mode}}Ro(e){const t=this.Cr();let i=null;e.Wn!==void 0&&(this.cn.autoScale=e.Wn),e.Cr!==void 0&&(this.cn.mode=e.Cr,e.Cr!==2&&e.Cr!==3||(this.cn.autoScale=!0),this.oo._o=!1),t.Cr===1&&e.Cr!==t.Cr&&(function(a,d){if(a===null)return!1;const h=ha(a.Ph(),d),p=ha(a.Rh(),d);return isFinite(h)&&isFinite(p)}(this.Ih,this.xo)?(i=tu(this.Ih,this.xo),i!==null&&this.Ao(i)):this.cn.autoScale=!0),e.Cr===1&&e.Cr!==t.Cr&&(i=sa(this.Ih,this.xo),i!==null&&this.Ao(i));const o=t.Cr!==this.cn.mode;o&&(t.Cr===2||this.Mh())&&this.Ra(),o&&(t.Cr===3||this.Oo())&&this.Ra(),e.Bo!==void 0&&t.Bo!==e.Bo&&(this.cn.invertScale=e.Bo,this.Io()),this.vo.m(t,this.Cr())}zo(){return this.vo}P(){return this.ko.fontSize}At(){return this.ho}Lo(e){this.ho!==e&&(this.ho=e,this.Do(),this.bo=null)}Eo(){if(this.lo)return this.lo;const e=this.At()-this.No()-this.Fo();return this.lo=e,e}Lh(){return this.Wo(),this.Ih}Ao(e,t){const i=this.Ih;(t||i===null&&e!==null||i!==null&&!i.Ch(e))&&(this.bo=null,this.Ih=e)}Ni(){return this.Wo(),this.ho===0||!this.Ih||this.Ih.Ni()}jo(e){return this.Bo()?e:this.At()-1-e}Rt(e,t){return this.Mh()?e=Po(e,t):this.Oo()&&(e=da(e,t)),this.Po(e,t)}te(e,t,i){this.Wo();const o=this.Fo(),a=W(this.Lh()),d=a.Ph(),h=a.Rh(),p=this.Eo()-1,m=this.Bo(),v=p/(h-d),_=i===void 0?0:i.from,S=i===void 0?e.length:i.to,b=this.Ho();for(let x=_;x<S;x++){const E=e[x],D=E._t;if(isNaN(D))continue;let I=D;b!==null&&(I=b(E._t,t));const B=o+v*(I-d),q=m?B:this.ho-1-B;E.st=q}}be(e,t,i){this.Wo();const o=this.Fo(),a=W(this.Lh()),d=a.Ph(),h=a.Rh(),p=this.Eo()-1,m=this.Bo(),v=p/(h-d),_=i===void 0?0:i.from,S=i===void 0?e.length:i.to,b=this.Ho();for(let x=_;x<S;x++){const E=e[x];let D=E.ge,I=E.Me,B=E.xe,q=E.Se;b!==null&&(D=b(E.ge,t),I=b(E.Me,t),B=b(E.xe,t),q=b(E.Se,t));let R=o+v*(D-d),U=m?R:this.ho-1-R;E.pe=U,R=o+v*(I-d),U=m?R:this.ho-1-R,E.de=U,R=o+v*(B-d),U=m?R:this.ho-1-R,E.fe=U,R=o+v*(q-d),U=m?R:this.ho-1-R,E.me=U}}pn(e,t){const i=this.To(e,t);return this.$o(i,t)}$o(e,t){let i=e;return this.Mh()?i=function(o,a){return a<0&&(o=-o),o/100*a+a}(i,t):this.Oo()&&(i=function(o,a){return o-=100,a<0&&(o=-o),o/100*a+a}(i,t)),i}Ba(){return this.po}Uo(){if(this.mo)return this.mo;let e=[];for(let t=0;t<this.po.length;t++){const i=this.po[t];i.Xi()===null&&i.Ki(t+1),e.push(i)}return e=RS(e),this.mo=e,this.mo}qo(e){this.po.indexOf(e)===-1&&(this.po.push(e),this.Ra(),this.Yo())}Zo(e){const t=this.po.indexOf(e);if(t===-1)throw new Error("source is not attached to scale");this.po.splice(t,1),this.po.length===0&&(this.Ro({Wn:!0}),this.Ao(null)),this.Ra(),this.Yo()}Ct(){let e=null;for(const t of this.po){const i=t.Ct();i!==null&&(e===null||i.la<e.la)&&(e=i)}return e===null?null:e.Vt}Bo(){return this.cn.invertScale}Ha(){const e=this.Ct()===null;if(this.bo!==null&&(e||this.bo.Xo===e))return this.bo.Ha;this.Co.io();const t=this.Co.Ha();return this.bo={Ha:t,Xo:e},this.fo.m(),t}Ko(){return this.fo}Go(e){this.Mh()||this.Oo()||this.wo===null&&this.ao===null&&(this.Ni()||(this.wo=this.ho-e,this.ao=W(this.Lh()).Th()))}Jo(e){if(this.Mh()||this.Oo()||this.wo===null)return;this.Ro({Wn:!1}),(e=this.ho-e)<0&&(e=0);let t=(this.wo+.2*(this.ho-1))/(e+.2*(this.ho-1));const i=W(this.ao).Th();t=Math.max(t,.1),i.Vh(t),this.Ao(i)}Qo(){this.Mh()||this.Oo()||(this.wo=null,this.ao=null)}t_(e){this.Vo()||this.Mo===null&&this.ao===null&&(this.Ni()||(this.Mo=e,this.ao=W(this.Lh()).Th()))}i_(e){if(this.Vo()||this.Mo===null)return;const t=W(this.Lh()).Dh()/(this.Eo()-1);let i=e-this.Mo;this.Bo()&&(i*=-1);const o=i*t,a=W(this.ao).Th();a.Oh(o),this.Ao(a,!0),this.bo=null}n_(){this.Vo()||this.Mo!==null&&(this.Mo=null,this.ao=null)}ba(){return this.wa||this.Ra(),this.wa}Fi(e,t){switch(this.cn.mode){case 2:return this.s_(Po(e,t));case 3:return this.ba().format(da(e,t));default:return this.Wh(e)}}eo(e){switch(this.cn.mode){case 2:return this.s_(e);case 3:return this.ba().format(e);default:return this.Wh(e)}}Yl(e){return this.Wh(e,W(this.e_()).ba())}Zl(e,t){return e=Po(e,t),this.s_(e,g0)}r_(){return this.po}h_(e){this.oo={uo:e,_o:!1}}Vn(){this.po.forEach(e=>e.Vn())}Ra(){this.bo=null;const e=this.e_();let t=100;e!==null&&(t=Math.round(1/e.ma())),this.wa=v0,this.Mh()?(this.wa=g0,t=100):this.Oo()?(this.wa=new Ou(100,1),t=100):e!==null&&(this.wa=e.ba()),this.Co=new p0(this,t,this.To.bind(this),this.Po.bind(this)),this.Co.io()}Yo(){this.mo=null}e_(){return this.po[0]||null}No(){return this.Bo()?this.cn.scaleMargins.bottom*this.At()+this.do:this.cn.scaleMargins.top*this.At()+this.co}Fo(){return this.Bo()?this.cn.scaleMargins.top*this.At()+this.co:this.cn.scaleMargins.bottom*this.At()+this.do}Wo(){this.oo._o||(this.oo._o=!0,this.l_())}Do(){this.lo=null}Po(e,t){if(this.Wo(),this.Ni())return 0;e=this.ro()&&e?bu(e,this.xo):e;const i=W(this.Lh()),o=this.Fo()+(this.Eo()-1)*(e-i.Ph())/i.Dh();return this.jo(o)}To(e,t){if(this.Wo(),this.Ni())return 0;const i=this.jo(e),o=W(this.Lh()),a=o.Ph()+o.Dh()*((i-this.Fo())/(this.Eo()-1));return this.ro()?ha(a,this.xo):a}Io(){this.bo=null,this.Co.io()}l_(){const e=this.oo.uo;if(e===null)return;let t=null;const i=this.r_();let o=0,a=0;for(const p of i){if(!p.yt())continue;const m=p.Ct();if(m===null)continue;const v=p.Il(e.Os(),e.ui());let _=v&&v.Lh();if(_!==null){switch(this.cn.mode){case 1:_=sa(_,this.xo);break;case 2:_=$1(_,m.Vt);break;case 3:_=Y1(_,m.Vt)}if(t=t===null?_:t.ts(W(_)),v!==null){const S=v.Eh();S!==null&&(o=Math.max(o,S.above),a=Math.max(a,S.below))}}}if(o===this.co&&a===this.do||(this.co=o,this.do=a,this.bo=null,this.Do()),t!==null){if(t.Ph()===t.Rh()){const p=this.e_(),m=5*(p===null||this.Mh()||this.Oo()?1:p.ma());this.ro()&&(t=tu(t,this.xo)),t=new Xt(t.Ph()-m,t.Rh()+m),this.ro()&&(t=sa(t,this.xo))}if(this.ro()){const p=tu(t,this.xo),m=_d(p);if(d=m,h=this.xo,d.$a!==h.$a||d.Ua!==h.Ua){const v=this.ao!==null?tu(this.ao,this.xo):null;this.xo=m,t=sa(p,m),v!==null&&(this.ao=sa(v,m))}}this.Ao(t)}else this.Ih===null&&(this.Ao(new Xt(-.5,.5)),this.xo=_d(null));var d,h;this.oo._o=!0}Ho(){return this.Mh()?Po:this.Oo()?da:this.ro()?e=>bu(e,this.xo):null}a_(e,t,i){return t===void 0?(i===void 0&&(i=this.ba()),i.format(e)):t(e)}Wh(e,t){return this.a_(e,this.yo.priceFormatter,t)}s_(e,t){return this.a_(e,this.yo.percentageFormatter,t)}}class Z1{constructor(e,t){this.po=[],this.o_=new Map,this.ho=0,this.__=0,this.u_=1e3,this.mo=null,this.c_=new ut,this.yl=e,this.$i=t,this.d_=new G1(this);const i=t.W();this.f_=this.v_("left",i.leftPriceScale),this.p_=this.v_("right",i.rightPriceScale),this.f_.zo().l(this.m_.bind(this,this.f_),this),this.p_.zo().l(this.m_.bind(this,this.p_),this),this.b_(i)}b_(e){if(e.leftPriceScale&&this.f_.$h(e.leftPriceScale),e.rightPriceScale&&this.p_.$h(e.rightPriceScale),e.localization&&(this.f_.Ra(),this.p_.Ra()),e.overlayPriceScales){const t=Array.from(this.o_.values());for(const i of t){const o=W(i[0].Dt());o.$h(e.overlayPriceScales),e.localization&&o.Ra()}}}w_(e){switch(e){case"left":return this.f_;case"right":return this.p_}return this.o_.has(e)?qt(this.o_.get(e))[0].Dt():null}S(){this.$t().g_().p(this),this.f_.zo().p(this),this.p_.zo().p(this),this.po.forEach(e=>{e.S&&e.S()}),this.c_.m()}M_(){return this.u_}x_(e){this.u_=e}$t(){return this.$i}Hi(){return this.__}At(){return this.ho}S_(e){this.__=e,this.k_()}Lo(e){this.ho=e,this.f_.Lo(e),this.p_.Lo(e),this.po.forEach(t=>{if(this.vr(t)){const i=t.Dt();i!==null&&i.Lo(e)}}),this.k_()}Ba(){return this.po}vr(e){const t=e.Dt();return t===null||this.f_!==t&&this.p_!==t}qo(e,t,i){const o=i!==void 0?i:this.C_().y_+1;this.T_(e,t,o)}Zo(e){const t=this.po.indexOf(e);ns(t!==-1,"removeDataSource: invalid data source"),this.po.splice(t,1);const i=W(e.Dt()).Pa();if(this.o_.has(i)){const a=qt(this.o_.get(i)),d=a.indexOf(e);d!==-1&&(a.splice(d,1),a.length===0&&this.o_.delete(i))}const o=e.Dt();o&&o.Ba().indexOf(e)>=0&&o.Zo(e),o!==null&&(o.Yo(),this.P_(o)),this.mo=null}mr(e){return e===this.f_?"left":e===this.p_?"right":"overlay"}R_(){return this.f_}D_(){return this.p_}V_(e,t){e.Go(t)}O_(e,t){e.Jo(t),this.k_()}B_(e){e.Qo()}A_(e,t){e.t_(t)}I_(e,t){e.i_(t),this.k_()}z_(e){e.n_()}k_(){this.po.forEach(e=>{e.Vn()})}vn(){let e=null;return this.$i.W().rightPriceScale.visible&&this.p_.Ba().length!==0?e=this.p_:this.$i.W().leftPriceScale.visible&&this.f_.Ba().length!==0?e=this.f_:this.po.length!==0&&(e=this.po[0].Dt()),e===null&&(e=this.p_),e}pr(){let e=null;return this.$i.W().rightPriceScale.visible?e=this.p_:this.$i.W().leftPriceScale.visible&&(e=this.f_),e}P_(e){e!==null&&e.Vo()&&this.L_(e)}E_(e){const t=this.yl.Xs();e.Ro({Wn:!0}),t!==null&&e.h_(t),this.k_()}N_(){this.L_(this.f_),this.L_(this.p_)}F_(){this.P_(this.f_),this.P_(this.p_),this.po.forEach(e=>{this.vr(e)&&this.P_(e.Dt())}),this.k_(),this.$i.Uh()}Uo(){return this.mo===null&&(this.mo=RS(this.po)),this.mo}W_(){return this.c_}j_(){return this.d_}L_(e){const t=e.r_();if(t&&t.length>0&&!this.yl.Ni()){const i=this.yl.Xs();i!==null&&e.h_(i)}e.Vn()}C_(){const e=this.Uo();if(e.length===0)return{H_:0,y_:0};let t=0,i=0;for(let o=0;o<e.length;o++){const a=e[o].Xi();a!==null&&(a<t&&(t=a),a>i&&(i=a))}return{H_:t,y_:i}}T_(e,t,i){let o=this.w_(t);if(o===null&&(o=this.v_(t,this.$i.W().overlayPriceScales)),this.po.push(e),!Vu(t)){const a=this.o_.get(t)||[];a.push(e),this.o_.set(t,a)}o.qo(e),e.Gi(o),e.Ki(i),this.P_(o),this.mo=null}m_(e,t,i){t.Cr!==i.Cr&&this.L_(e)}v_(e,t){const i=Object.assign({visible:!0,autoScale:!0},gi(t)),o=new J1(e,i,this.$i.W().layout,this.$i.W().localization);return o.Lo(this.At()),o}}class K1{constructor(e,t,i=50){this.Ke=0,this.Ge=1,this.Je=1,this.tr=new Map,this.Qe=new Map,this.U_=e,this.q_=t,this.ir=i}Y_(e){const t=e.time,i=this.q_.cacheKey(t),o=this.tr.get(i);if(o!==void 0)return o.Z_;if(this.Ke===this.ir){const d=this.Qe.get(this.Je);this.Qe.delete(this.Je),this.tr.delete(qt(d)),this.Je++,this.Ke--}const a=this.U_(e);return this.tr.set(i,{Z_:a,rr:this.Ge}),this.Qe.set(this.Ge,i),this.Ke++,this.Ge++,a}}class ma{constructor(e,t){ns(e<=t,"right should be >= left"),this.X_=e,this.K_=t}Os(){return this.X_}ui(){return this.K_}G_(){return this.K_-this.X_+1}Kr(e){return this.X_<=e&&e<=this.K_}Ch(e){return this.X_===e.Os()&&this.K_===e.ui()}}function y0(n,e){return n===null||e===null?n===e:n.Ch(e)}class X1{constructor(){this.J_=new Map,this.tr=null,this.Q_=!1}tu(e){this.Q_=e,this.tr=null}iu(e,t){this.nu(t),this.tr=null;for(let i=t;i<e.length;++i){const o=e[i];let a=this.J_.get(o.timeWeight);a===void 0&&(a=[],this.J_.set(o.timeWeight,a)),a.push({index:i,time:o.time,weight:o.timeWeight,originalTime:o.originalTime})}}su(e,t){const i=Math.ceil(t/e);return this.tr!==null&&this.tr.eu===i||(this.tr={Ha:this.ru(i),eu:i}),this.tr.Ha}nu(e){if(e===0)return void this.J_.clear();const t=[];this.J_.forEach((i,o)=>{e<=i[0].index?t.push(o):i.splice(La(i,e,a=>a.index<e),1/0)});for(const i of t)this.J_.delete(i)}ru(e){let t=[];for(const i of Array.from(this.J_.keys()).sort((o,a)=>a-o)){if(!this.J_.get(i))continue;const o=t;t=[];const a=o.length;let d=0;const h=qt(this.J_.get(i)),p=h.length;let m=1/0,v=-1/0;for(let _=0;_<p;_++){const S=h[_],b=S.index;for(;d<a;){const x=o[d],E=x.index;if(!(E<b)){m=E;break}d++,t.push(x),v=E,m=1/0}if(m-b>=e&&b-v>=e)t.push(S),v=b;else if(this.Q_)return o}for(;d<a;d++)t.push(o[d])}return t}}class Fo{constructor(e){this.hu=e}lu(){return this.hu===null?null:new ma(Math.floor(this.hu.Os()),Math.ceil(this.hu.ui()))}au(){return this.hu}static ou(){return new Fo(null)}}function W1(n,e){return n.weight>e.weight?n:e}class Q1{constructor(e,t,i,o){this.__=0,this._u=null,this.uu=[],this.Mo=null,this.wo=null,this.cu=new X1,this.du=new Map,this.fu=Fo.ou(),this.vu=!0,this.pu=new ut,this.mu=new ut,this.bu=new ut,this.wu=null,this.gu=null,this.Mu=[],this.cn=t,this.yo=i,this.xu=t.rightOffset,this.Su=t.barSpacing,this.$i=e,this.q_=o,this.ku(),this.cu.tu(t.uniformDistribution)}W(){return this.cn}yu(e){Mn(this.yo,e),this.Cu(),this.ku()}$h(e,t){var i;Mn(this.cn,e),this.cn.fixLeftEdge&&this.Tu(),this.cn.fixRightEdge&&this.Pu(),e.barSpacing!==void 0&&this.$i.Gn(e.barSpacing),e.rightOffset!==void 0&&this.$i.Jn(e.rightOffset),e.minBarSpacing!==void 0&&this.$i.Gn((i=e.barSpacing)!==null&&i!==void 0?i:this.Su),this.Cu(),this.ku(),this.bu.m()}mn(e){var t,i;return(i=(t=this.uu[e])===null||t===void 0?void 0:t.time)!==null&&i!==void 0?i:null}Ui(e){var t;return(t=this.uu[e])!==null&&t!==void 0?t:null}Va(e,t){if(this.uu.length<1)return null;if(this.q_.key(e)>this.q_.key(this.uu[this.uu.length-1].time))return t?this.uu.length-1:null;const i=La(this.uu,this.q_.key(e),(o,a)=>this.q_.key(o.time)<a);return this.q_.key(e)<this.q_.key(this.uu[i].time)?t?i:null:i}Ni(){return this.__===0||this.uu.length===0||this._u===null}Da(){return this.uu.length>0}Xs(){return this.Ru(),this.fu.lu()}Du(){return this.Ru(),this.fu.au()}Vu(){const e=this.Xs();if(e===null)return null;const t={from:e.Os(),to:e.ui()};return this.Ou(t)}Ou(e){const t=Math.round(e.from),i=Math.round(e.to),o=W(this.Bu()),a=W(this.Au());return{from:W(this.Ui(Math.max(o,t))),to:W(this.Ui(Math.min(a,i)))}}Iu(e){return{from:W(this.Va(e.from,!0)),to:W(this.Va(e.to,!0))}}Hi(){return this.__}S_(e){if(!isFinite(e)||e<=0||this.__===e)return;const t=this.Du(),i=this.__;if(this.__=e,this.vu=!0,this.cn.lockVisibleTimeRangeOnResize&&i!==0){const o=this.Su*e/i;this.Su=o}if(this.cn.fixLeftEdge&&t!==null&&t.Os()<=0){const o=i-e;this.xu-=Math.round(o/this.Su)+1,this.vu=!0}this.zu(),this.Lu()}It(e){if(this.Ni()||!Sa(e))return 0;const t=this.Eu()+this.xu-e;return this.__-(t+.5)*this.Su-1}Qs(e,t){const i=this.Eu(),o=t===void 0?0:t.from,a=t===void 0?e.length:t.to;for(let d=o;d<a;d++){const h=e[d].ot,p=i+this.xu-h,m=this.__-(p+.5)*this.Su-1;e[d].nt=m}}Nu(e){return Math.ceil(this.Fu(e))}Jn(e){this.vu=!0,this.xu=e,this.Lu(),this.$i.Wu(),this.$i.Uh()}le(){return this.Su}Gn(e){this.ju(e),this.Lu(),this.$i.Wu(),this.$i.Uh()}Hu(){return this.xu}Ha(){if(this.Ni())return null;if(this.gu!==null)return this.gu;const e=this.Su,t=5*(this.$i.W().layout.fontSize+4)/8*(this.cn.tickMarkMaxCharacterLength||8),i=Math.round(t/e),o=W(this.Xs()),a=Math.max(o.Os(),o.Os()-i),d=Math.max(o.ui(),o.ui()-i),h=this.cu.su(e,t),p=this.Bu()+i,m=this.Au()-i,v=this.$u(),_=this.cn.fixLeftEdge||v,S=this.cn.fixRightEdge||v;let b=0;for(const x of h){if(!(a<=x.index&&x.index<=d))continue;let E;b<this.Mu.length?(E=this.Mu[b],E.coord=this.It(x.index),E.label=this.Uu(x),E.weight=x.weight):(E={needAlignCoordinate:!1,coord:this.It(x.index),label:this.Uu(x),weight:x.weight},this.Mu.push(E)),this.Su>t/2&&!v?E.needAlignCoordinate=!1:E.needAlignCoordinate=_&&x.index<=p||S&&x.index>=m,b++}return this.Mu.length=b,this.gu=this.Mu,this.Mu}qu(){this.vu=!0,this.Gn(this.cn.barSpacing),this.Jn(this.cn.rightOffset)}Yu(e){this.vu=!0,this._u=e,this.Lu(),this.Tu()}Zu(e,t){const i=this.Fu(e),o=this.le(),a=o+t*(o/10);this.Gn(a),this.cn.rightBarStaysOnScroll||this.Jn(this.Hu()+(i-this.Fu(e)))}Go(e){this.Mo&&this.n_(),this.wo===null&&this.wu===null&&(this.Ni()||(this.wo=e,this.Xu()))}Jo(e){if(this.wu===null)return;const t=Wd(this.__-e,0,this.__),i=Wd(this.__-W(this.wo),0,this.__);t!==0&&i!==0&&this.Gn(this.wu.le*t/i)}Qo(){this.wo!==null&&(this.wo=null,this.Ku())}t_(e){this.Mo===null&&this.wu===null&&(this.Ni()||(this.Mo=e,this.Xu()))}i_(e){if(this.Mo===null)return;const t=(this.Mo-e)/this.le();this.xu=W(this.wu).Hu+t,this.vu=!0,this.Lu()}n_(){this.Mo!==null&&(this.Mo=null,this.Ku())}Gu(){this.Ju(this.cn.rightOffset)}Ju(e,t=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(t)||t<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const i=this.xu,o=performance.now();this.$i.Zn({Qu:a=>(a-o)/t>=1,tc:a=>{const d=(a-o)/t;return d>=1?e:i+(e-i)*d}})}bt(e,t){this.vu=!0,this.uu=e,this.cu.iu(e,t),this.Lu()}nc(){return this.pu}sc(){return this.mu}ec(){return this.bu}Eu(){return this._u||0}rc(e){const t=e.G_();this.ju(this.__/t),this.xu=e.ui()-this.Eu(),this.Lu(),this.vu=!0,this.$i.Wu(),this.$i.Uh()}hc(){const e=this.Bu(),t=this.Au();e!==null&&t!==null&&this.rc(new ma(e,t+this.cn.rightOffset))}lc(e){const t=new ma(e.from,e.to);this.rc(t)}qi(e){return this.yo.timeFormatter!==void 0?this.yo.timeFormatter(e.originalTime):this.q_.formatHorzItem(e.time)}$u(){const{handleScroll:e,handleScale:t}=this.$i.W();return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||t.axisDoubleClickReset.time||t.axisPressedMouseMove.time||t.mouseWheel||t.pinch)}Bu(){return this.uu.length===0?null:0}Au(){return this.uu.length===0?null:this.uu.length-1}ac(e){return(this.__-1-e)/this.Su}Fu(e){const t=this.ac(e),i=this.Eu()+this.xu-t;return Math.round(1e6*i)/1e6}ju(e){const t=this.Su;this.Su=e,this.zu(),t!==this.Su&&(this.vu=!0,this.oc())}Ru(){if(!this.vu)return;if(this.vu=!1,this.Ni())return void this._c(Fo.ou());const e=this.Eu(),t=this.__/this.Su,i=this.xu+e,o=new ma(i-t+1,i);this._c(new Fo(o))}zu(){const e=this.uc();if(this.Su<e&&(this.Su=e,this.vu=!0),this.__!==0){const t=.5*this.__;this.Su>t&&(this.Su=t,this.vu=!0)}}uc(){return this.cn.fixLeftEdge&&this.cn.fixRightEdge&&this.uu.length!==0?this.__/this.uu.length:this.cn.minBarSpacing}Lu(){const e=this.cc();e!==null&&this.xu<e&&(this.xu=e,this.vu=!0);const t=this.dc();this.xu>t&&(this.xu=t,this.vu=!0)}cc(){const e=this.Bu(),t=this._u;return e===null||t===null?null:e-t-1+(this.cn.fixLeftEdge?this.__/this.Su:Math.min(2,this.uu.length))}dc(){return this.cn.fixRightEdge?0:this.__/this.Su-Math.min(2,this.uu.length)}Xu(){this.wu={le:this.le(),Hu:this.Hu()}}Ku(){this.wu=null}Uu(e){let t=this.du.get(e.weight);return t===void 0&&(t=new K1(i=>this.fc(i),this.q_),this.du.set(e.weight,t)),t.Y_(e)}fc(e){return this.q_.formatTickmark(e,this.yo)}_c(e){const t=this.fu;this.fu=e,y0(t.lu(),this.fu.lu())||this.pu.m(),y0(t.au(),this.fu.au())||this.mu.m(),this.oc()}oc(){this.gu=null}Cu(){this.oc(),this.du.clear()}ku(){this.q_.updateFormatter(this.yo)}Tu(){if(!this.cn.fixLeftEdge)return;const e=this.Bu();if(e===null)return;const t=this.Xs();if(t===null)return;const i=t.Os()-e;if(i<0){const o=this.xu-i-1;this.Jn(o)}this.zu()}Pu(){this.Lu(),this.zu()}}class j1{X(e,t,i){e.useMediaCoordinateSpace(o=>this.K(o,t,i))}gl(e,t,i){e.useMediaCoordinateSpace(o=>this.vc(o,t,i))}vc(e,t,i){}}class eE extends j1{constructor(e){super(),this.mc=new Map,this.zt=e}K(e){}vc(e){if(!this.zt.yt)return;const{context:t,mediaSize:i}=e;let o=0;for(const d of this.zt.bc){if(d.Kt.length===0)continue;t.font=d.R;const h=this.wc(t,d.Kt);h>i.width?d.Zu=i.width/h:d.Zu=1,o+=d.gc*d.Zu}let a=0;switch(this.zt.Mc){case"top":a=0;break;case"center":a=Math.max((i.height-o)/2,0);break;case"bottom":a=Math.max(i.height-o,0)}t.fillStyle=this.zt.V;for(const d of this.zt.bc){t.save();let h=0;switch(this.zt.xc){case"left":t.textAlign="left",h=d.gc/2;break;case"center":t.textAlign="center",h=i.width/2;break;case"right":t.textAlign="right",h=i.width-1-d.gc/2}t.translate(h,a),t.textBaseline="top",t.font=d.R,t.scale(d.Zu,d.Zu),t.fillText(d.Kt,0,d.Sc),t.restore(),a+=d.gc*d.Zu}}wc(e,t){const i=this.kc(e.font);let o=i.get(t);return o===void 0&&(o=e.measureText(t).width,i.set(t,o)),o}kc(e){let t=this.mc.get(e);return t===void 0&&(t=new Map,this.mc.set(e,t)),t}}class tE{constructor(e){this.ft=!0,this.Ft={yt:!1,V:"",bc:[],Mc:"center",xc:"center"},this.Wt=new eE(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.W(),t=this.Ft;t.yt=e.visible,t.yt&&(t.V=e.color,t.xc=e.horzAlign,t.Mc=e.vertAlign,t.bc=[{Kt:e.text,R:Yo(e.fontSize,e.fontFamily,e.fontStyle),gc:1.2*e.fontSize,Sc:0,Zu:0}])}}class nE extends Lh{constructor(e,t){super(),this.cn=t,this.wn=new tE(this)}Rn(){return[]}Pn(){return[this.wn]}W(){return this.cn}Vn(){this.wn.bt()}}var _0,S0,T0,jd,b0;(function(n){n[n.OnTouchEnd=0]="OnTouchEnd",n[n.OnNextTap=1]="OnNextTap"})(_0||(_0={}));class iE{constructor(e,t,i){this.yc=[],this.Cc=[],this.__=0,this.Tc=null,this.Pc=new ut,this.Rc=new ut,this.Dc=null,this.Vc=e,this.cn=t,this.q_=i,this.Oc=new Lx(this),this.yl=new Q1(this,t.timeScale,this.cn.localization,i),this.vt=new Yx(this,t.crosshair),this.Bc=new q1(t.crosshair),this.Ac=new nE(this,t.watermark),this.Ic(),this.yc[0].x_(2e3),this.zc=this.Lc(0),this.Ec=this.Lc(1)}Kl(){this.Nc(Mt.es())}Uh(){this.Nc(Mt.ss())}oa(){this.Nc(new Mt(1))}Gl(e){const t=this.Fc(e);this.Nc(t)}Wc(){return this.Tc}jc(e){const t=this.Tc;this.Tc=e,t!==null&&this.Gl(t.Hc),e!==null&&this.Gl(e.Hc)}W(){return this.cn}$h(e){Mn(this.cn,e),this.yc.forEach(t=>t.b_(e)),e.timeScale!==void 0&&this.yl.$h(e.timeScale),e.localization!==void 0&&this.yl.yu(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.Pc.m(),this.zc=this.Lc(0),this.Ec=this.Lc(1),this.Kl()}$c(e,t){if(e==="left")return void this.$h({leftPriceScale:t});if(e==="right")return void this.$h({rightPriceScale:t});const i=this.Uc(e);i!==null&&(i.Dt.$h(t),this.Pc.m())}Uc(e){for(const t of this.yc){const i=t.w_(e);if(i!==null)return{Ht:t,Dt:i}}return null}St(){return this.yl}qc(){return this.yc}Yc(){return this.Ac}Zc(){return this.vt}Xc(){return this.Rc}Kc(e,t){e.Lo(t),this.Wu()}S_(e){this.__=e,this.yl.S_(this.__),this.yc.forEach(t=>t.S_(e)),this.Wu()}Ic(e){const t=new Z1(this.yl,this);e!==void 0?this.yc.splice(e,0,t):this.yc.push(t);const i=e===void 0?this.yc.length-1:e,o=Mt.es();return o.Nn(i,{Fn:0,Wn:!0}),this.Nc(o),t}V_(e,t,i){e.V_(t,i)}O_(e,t,i){e.O_(t,i),this.Jl(),this.Nc(this.Gc(e,2))}B_(e,t){e.B_(t),this.Nc(this.Gc(e,2))}A_(e,t,i){t.Vo()||e.A_(t,i)}I_(e,t,i){t.Vo()||(e.I_(t,i),this.Jl(),this.Nc(this.Gc(e,2)))}z_(e,t){t.Vo()||(e.z_(t),this.Nc(this.Gc(e,2)))}E_(e,t){e.E_(t),this.Nc(this.Gc(e,2))}Jc(e){this.yl.Go(e)}Qc(e,t){const i=this.St();if(i.Ni()||t===0)return;const o=i.Hi();e=Math.max(1,Math.min(e,o)),i.Zu(e,t),this.Wu()}td(e){this.nd(0),this.sd(e),this.ed()}rd(e){this.yl.Jo(e),this.Wu()}hd(){this.yl.Qo(),this.Uh()}nd(e){this.yl.t_(e)}sd(e){this.yl.i_(e),this.Wu()}ed(){this.yl.n_(),this.Uh()}wt(){return this.Cc}ld(e,t,i,o,a){this.vt.gn(e,t);let d=NaN,h=this.yl.Nu(e);const p=this.yl.Xs();p!==null&&(h=Math.min(Math.max(p.Os(),h),p.ui()));const m=o.vn(),v=m.Ct();v!==null&&(d=m.pn(t,v)),d=this.Bc.Oa(d,h,o),this.vt.kn(h,d,o),this.oa(),a||this.Rc.m(this.vt.xt(),{x:e,y:t},i)}ad(e,t,i){const o=i.vn(),a=o.Ct(),d=o.Rt(e,W(a)),h=this.yl.Va(t,!0),p=this.yl.It(W(h));this.ld(p,d,null,i,!0)}od(e){this.Zc().Cn(),this.oa(),e||this.Rc.m(null,null,null)}Jl(){const e=this.vt.Ht();if(e!==null){const t=this.vt.xn(),i=this.vt.Sn();this.ld(t,i,null,e)}this.vt.Vn()}_d(e,t,i){const o=this.yl.mn(0);t!==void 0&&i!==void 0&&this.yl.bt(t,i);const a=this.yl.mn(0),d=this.yl.Eu(),h=this.yl.Xs();if(h!==null&&o!==null&&a!==null){const p=h.Kr(d),m=this.q_.key(o)>this.q_.key(a),v=e!==null&&e>d&&!m,_=this.yl.W().allowShiftVisibleRangeOnWhitespaceReplacement,S=p&&(i!==void 0||_)&&this.yl.W().shiftVisibleRangeOnNewBar;if(v&&!S){const b=e-d;this.yl.Jn(this.yl.Hu()-b)}}this.yl.Yu(e)}ia(e){e!==null&&e.F_()}dr(e){const t=this.yc.find(i=>i.Uo().includes(e));return t===void 0?null:t}Wu(){this.Ac.Vn(),this.yc.forEach(e=>e.F_()),this.Jl()}S(){this.yc.forEach(e=>e.S()),this.yc.length=0,this.cn.localization.priceFormatter=void 0,this.cn.localization.percentageFormatter=void 0,this.cn.localization.timeFormatter=void 0}ud(){return this.Oc}br(){return this.Oc.W()}g_(){return this.Pc}dd(e,t,i){const o=this.yc[0],a=this.fd(t,e,o,i);return this.Cc.push(a),this.Cc.length===1?this.Kl():this.Uh(),a}vd(e){const t=this.dr(e),i=this.Cc.indexOf(e);ns(i!==-1,"Series not found"),this.Cc.splice(i,1),W(t).Zo(e),e.S&&e.S()}Xl(e,t){const i=W(this.dr(e));i.Zo(e);const o=this.Uc(t);if(o===null){const a=e.Xi();i.qo(e,t,a)}else{const a=o.Ht===i?e.Xi():void 0;o.Ht.qo(e,t,a)}}hc(){const e=Mt.ss();e.$n(),this.Nc(e)}pd(e){const t=Mt.ss();t.Yn(e),this.Nc(t)}Kn(){const e=Mt.ss();e.Kn(),this.Nc(e)}Gn(e){const t=Mt.ss();t.Gn(e),this.Nc(t)}Jn(e){const t=Mt.ss();t.Jn(e),this.Nc(t)}Zn(e){const t=Mt.ss();t.Zn(e),this.Nc(t)}Un(){const e=Mt.ss();e.Un(),this.Nc(e)}md(){return this.cn.rightPriceScale.visible?"right":"left"}bd(){return this.Ec}q(){return this.zc}Bt(e){const t=this.Ec,i=this.zc;if(t===i)return t;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Dc===null||this.Dc.Ps!==i||this.Dc.Rs!==t)this.Dc={Ps:i,Rs:t,wd:new Map};else{const a=this.Dc.wd.get(e);if(a!==void 0)return a}const o=function(a,d,h){const[p,m,v,_]=_a(a),[S,b,x,E]=_a(d),D=[_n(p+h*(S-p)),_n(m+h*(b-m)),_n(v+h*(x-v)),fS(_+h*(E-_))];return`rgba(${D[0]}, ${D[1]}, ${D[2]}, ${D[3]})`}(i,t,e/100);return this.Dc.wd.set(e,o),o}Gc(e,t){const i=new Mt(t);if(e!==null){const o=this.yc.indexOf(e);i.Nn(o,{Fn:t})}return i}Fc(e,t){return t===void 0&&(t=2),this.Gc(this.dr(e),t)}Nc(e){this.Vc&&this.Vc(e),this.yc.forEach(t=>t.j_().qh().bt())}fd(e,t,i,o){const a=new Bh(this,e,t,i,o),d=e.priceScaleId!==void 0?e.priceScaleId:this.md();return i.qo(a,d),Vu(d)||a.$h(e),a}Lc(e){const t=this.cn.layout;return t.background.type==="gradient"?e===0?t.background.topColor:t.background.bottomColor:t.background.color}}function eh(n){return!Fn(n)&&!za(n)}function NS(n){return Fn(n)}(function(n){n[n.Disabled=0]="Disabled",n[n.Continuous=1]="Continuous",n[n.OnDataUpdate=2]="OnDataUpdate"})(S0||(S0={})),function(n){n[n.LastBar=0]="LastBar",n[n.LastVisible=1]="LastVisible"}(T0||(T0={})),function(n){n.Solid="solid",n.VerticalGradient="gradient"}(jd||(jd={})),function(n){n[n.Year=0]="Year",n[n.Month=1]="Month",n[n.DayOfMonth=2]="DayOfMonth",n[n.Time=3]="Time",n[n.TimeWithSeconds=4]="TimeWithSeconds"}(b0||(b0={}));const C0=n=>n.getUTCFullYear();function sE(n,e,t){return e.replace(/yyyy/g,(i=>vi(C0(i),4))(n)).replace(/yy/g,(i=>vi(C0(i)%100,2))(n)).replace(/MMMM/g,((i,o)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(o,{month:"long"}))(n,t)).replace(/MMM/g,((i,o)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(o,{month:"short"}))(n,t)).replace(/MM/g,(i=>vi((o=>o.getUTCMonth()+1)(i),2))(n)).replace(/dd/g,(i=>vi((o=>o.getUTCDate())(i),2))(n))}class DS{constructor(e="yyyy-MM-dd",t="default"){this.gd=e,this.Md=t}Y_(e){return sE(e,this.gd,this.Md)}}class oE{constructor(e){this.xd=e||"%h:%m:%s"}Y_(e){return this.xd.replace("%h",vi(e.getUTCHours(),2)).replace("%m",vi(e.getUTCMinutes(),2)).replace("%s",vi(e.getUTCSeconds(),2))}}const lE={Sd:"yyyy-MM-dd",kd:"%h:%m:%s",yd:" ",Cd:"default"};class aE{constructor(e={}){const t=Object.assign(Object.assign({},lE),e);this.Td=new DS(t.Sd,t.Cd),this.Pd=new oE(t.kd),this.Rd=t.yd}Y_(e){return`${this.Td.Y_(e)}${this.Rd}${this.Pd.Y_(e)}`}}function nu(n){return 60*n*60*1e3}function Td(n){return 60*n*1e3}const iu=[{Dd:(x0=1,1e3*x0),Vd:10},{Dd:Td(1),Vd:20},{Dd:Td(5),Vd:21},{Dd:Td(30),Vd:22},{Dd:nu(1),Vd:30},{Dd:nu(3),Vd:31},{Dd:nu(6),Vd:32},{Dd:nu(12),Vd:33}];var x0;function E0(n,e){if(n.getUTCFullYear()!==e.getUTCFullYear())return 70;if(n.getUTCMonth()!==e.getUTCMonth())return 60;if(n.getUTCDate()!==e.getUTCDate())return 50;for(let t=iu.length-1;t>=0;--t)if(Math.floor(e.getTime()/iu[t].Dd)!==Math.floor(n.getTime()/iu[t].Dd))return iu[t].Vd;return 0}function bd(n){let e=n;if(za(n)&&(e=Ph(n)),!eh(e))throw new Error("time must be of type BusinessDay");const t=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{Od:Math.round(t.getTime()/1e3),Bd:e}}function w0(n){if(!NS(n))throw new Error("time must be of type isUTCTimestamp");return{Od:n}}function Ph(n){const e=new Date(n);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${n}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function M0(n){za(n.time)&&(n.time=Ph(n.time))}class A0{options(){return this.cn}setOptions(e){this.cn=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(t){t.forEach(M0)}(e):M0(e)}createConverterToInternalObj(e){return W(function(t){return t.length===0?null:eh(t[0].time)||za(t[0].time)?bd:w0}(e))}key(e){return typeof e=="object"&&"Od"in e?e.Od:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const t=e;return t.Bd===void 0?new Date(1e3*t.Od).getTime():new Date(Date.UTC(t.Bd.year,t.Bd.month-1,t.Bd.day)).getTime()}convertHorzItemToInternal(e){return NS(t=e)?w0(t):eh(t)?bd(t):bd(Ph(t));var t}updateFormatter(e){if(!this.cn)return;const t=e.dateFormat;this.cn.timeScale.timeVisible?this.Ad=new aE({Sd:t,kd:this.cn.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",yd:"   ",Cd:e.locale}):this.Ad=new DS(t,e.locale)}formatHorzItem(e){const t=e;return this.Ad.Y_(new Date(1e3*t.Od))}formatTickmark(e,t){const i=function(a,d,h){switch(a){case 0:case 10:return d?h?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return d?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.cn.timeScale.timeVisible,this.cn.timeScale.secondsVisible),o=this.cn.timeScale;if(o.tickMarkFormatter!==void 0){const a=o.tickMarkFormatter(e.originalTime,i,t.locale);if(a!==null)return a}return function(a,d,h){const p={};switch(d){case 0:p.year="numeric";break;case 1:p.month="short";break;case 2:p.day="numeric";break;case 3:p.hour12=!1,p.hour="2-digit",p.minute="2-digit";break;case 4:p.hour12=!1,p.hour="2-digit",p.minute="2-digit",p.second="2-digit"}const m=a.Bd===void 0?new Date(1e3*a.Od):new Date(Date.UTC(a.Bd.year,a.Bd.month-1,a.Bd.day));return new Date(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate(),m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds()).toLocaleString(h,p)}(e.time,i,t.locale)}maxTickMarkWeight(e){let t=e.reduce(W1,e[0]).weight;return t>30&&t<50&&(t=30),t}fillWeightsForPoints(e,t){(function(i,o=0){if(i.length===0)return;let a=o===0?null:i[o-1].time.Od,d=a!==null?new Date(1e3*a):null,h=0;for(let p=o;p<i.length;++p){const m=i[p],v=new Date(1e3*m.time.Od);d!==null&&(m.timeWeight=E0(v,d)),h+=m.time.Od-(a||m.time.Od),a=m.time.Od,d=v}if(o===0&&i.length>1){const p=Math.ceil(h/(i.length-1)),m=new Date(1e3*(i[0].time.Od-p));i[0].timeWeight=E0(new Date(1e3*i[0].time.Od),m)}})(e,t)}static Id(e){return Mn({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const Jo=typeof window<"u";function R0(){return!!Jo&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function Cd(){return!!Jo&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function th(n){return n+n%2}function xd(n,e){return n.zd-e.zd}function Ed(n,e,t){const i=(n.zd-e.zd)/(n.ot-e.ot);return Math.sign(i)*Math.min(Math.abs(i),t)}class rE{constructor(e,t,i,o){this.Ld=null,this.Ed=null,this.Nd=null,this.Fd=null,this.Wd=null,this.jd=0,this.Hd=0,this.$d=e,this.Ud=t,this.qd=i,this.rs=o}Yd(e,t){if(this.Ld!==null){if(this.Ld.ot===t)return void(this.Ld.zd=e);if(Math.abs(this.Ld.zd-e)<this.rs)return}this.Fd=this.Nd,this.Nd=this.Ed,this.Ed=this.Ld,this.Ld={ot:t,zd:e}}Vr(e,t){if(this.Ld===null||this.Ed===null||t-this.Ld.ot>50)return;let i=0;const o=Ed(this.Ld,this.Ed,this.Ud),a=xd(this.Ld,this.Ed),d=[o],h=[a];if(i+=a,this.Nd!==null){const m=Ed(this.Ed,this.Nd,this.Ud);if(Math.sign(m)===Math.sign(o)){const v=xd(this.Ed,this.Nd);if(d.push(m),h.push(v),i+=v,this.Fd!==null){const _=Ed(this.Nd,this.Fd,this.Ud);if(Math.sign(_)===Math.sign(o)){const S=xd(this.Nd,this.Fd);d.push(_),h.push(S),i+=S}}}}let p=0;for(let m=0;m<d.length;++m)p+=h[m]/i*d[m];Math.abs(p)<this.$d||(this.Wd={zd:e,ot:t},this.Hd=p,this.jd=function(m,v){const _=Math.log(v);return Math.log(1*_/-m)/_}(Math.abs(p),this.qd))}tc(e){const t=W(this.Wd),i=e-t.ot;return t.zd+this.Hd*(Math.pow(this.qd,i)-1)/Math.log(this.qd)}Qu(e){return this.Wd===null||this.Zd(e)===this.jd}Zd(e){const t=e-W(this.Wd).ot;return Math.min(t,this.jd)}}class uE{constructor(e,t){this.Xd=void 0,this.Kd=void 0,this.Gd=void 0,this.en=!1,this.Jd=e,this.Qd=t,this.tf()}bt(){this.tf()}if(){this.Xd&&this.Jd.removeChild(this.Xd),this.Kd&&this.Jd.removeChild(this.Kd),this.Xd=void 0,this.Kd=void 0}nf(){return this.en!==this.sf()||this.Gd!==this.ef()}ef(){return dS(_a(this.Qd.W().layout.textColor))>160?"dark":"light"}sf(){return this.Qd.W().layout.attributionLogo}rf(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}tf(){this.nf()&&(this.if(),this.en=this.sf(),this.en&&(this.Gd=this.ef(),this.Kd=document.createElement("style"),this.Kd.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Xd=document.createElement("a"),this.Xd.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.rf()}`,this.Xd.title="Charting by TradingView",this.Xd.id="tv-attr-logo",this.Xd.target="_blank",this.Xd.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 19" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Xd.toggleAttribute("data-dark",this.Gd==="dark"),this.Jd.appendChild(this.Kd),this.Jd.appendChild(this.Xd)))}}function ks(n,e){const t=W(n.ownerDocument).createElement("canvas");n.appendChild(t);const i=Sx(t,{options:{allowResizeObserver:!1},transform:(o,a)=>({width:Math.max(o.width,a.width),height:Math.max(o.height,a.height)})});return i.resizeCanvasElement(e),i}function Is(n){var e;n.width=1,n.height=1,(e=n.getContext("2d"))===null||e===void 0||e.clearRect(0,0,1,1)}function nh(n,e,t,i){n.gl&&n.gl(e,t,i)}function gu(n,e,t,i){n.X(e,t,i)}function ih(n,e,t,i){const o=n(t,i);for(const a of o){const d=a.gt();d!==null&&e(d)}}function cE(n){Jo&&window.chrome!==void 0&&n.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class qh{constructor(e,t,i){this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.df=null,this.ff=!1,this.vf=null,this.pf=null,this.mf=!1,this.bf=!1,this.wf=!1,this.gf=null,this.Mf=null,this.xf=null,this.Sf=null,this.kf=null,this.yf=null,this.Cf=null,this.Tf=0,this.Pf=!1,this.Rf=!1,this.Df=!1,this.Vf=0,this.Of=null,this.Bf=!Cd(),this.Af=o=>{this.If(o)},this.zf=o=>{if(this.Lf(o)){const a=this.Ef(o);if(++this._f,this.uf&&this._f>1){const{Nf:d}=this.Ff(On(o),this.cf);d<30&&!this.wf&&this.Wf(a,this.Hf.jf),this.$f()}}else{const a=this.Ef(o);if(++this.hf,this.lf&&this.hf>1){const{Nf:d}=this.Ff(On(o),this.af);d<5&&!this.bf&&this.Uf(a,this.Hf.qf),this.Yf()}}},this.Zf=e,this.Hf=t,this.cn=i,this.Xf()}S(){this.gf!==null&&(this.gf(),this.gf=null),this.Mf!==null&&(this.Mf(),this.Mf=null),this.Sf!==null&&(this.Sf(),this.Sf=null),this.kf!==null&&(this.kf(),this.kf=null),this.yf!==null&&(this.yf(),this.yf=null),this.xf!==null&&(this.xf(),this.xf=null),this.Kf(),this.Yf()}Gf(e){this.Sf&&this.Sf();const t=this.Jf.bind(this);if(this.Sf=()=>{this.Zf.removeEventListener("mousemove",t)},this.Zf.addEventListener("mousemove",t),this.Lf(e))return;const i=this.Ef(e);this.Uf(i,this.Hf.Qf),this.Bf=!0}Yf(){this.lf!==null&&clearTimeout(this.lf),this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}$f(){this.uf!==null&&clearTimeout(this.uf),this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Jf(e){if(this.Df||this.pf!==null||this.Lf(e))return;const t=this.Ef(e);this.Uf(t,this.Hf.tv),this.Bf=!0}iv(e){const t=wd(e.changedTouches,W(this.Of));if(t===null||(this.Vf=su(e),this.Cf!==null)||this.Rf)return;this.Pf=!0;const i=this.Ff(On(t),W(this.pf)),{nv:o,sv:a,Nf:d}=i;if(this.mf||!(d<5)){if(!this.mf){const h=.5*o,p=a>=h&&!this.cn.ev(),m=h>a&&!this.cn.rv();p||m||(this.Rf=!0),this.mf=!0,this.wf=!0,this.Kf(),this.$f()}if(!this.Rf){const h=this.Ef(e,t);this.Wf(h,this.Hf.hv),zo(e)}}}lv(e){if(e.button!==0)return;const t=this.Ff(On(e),W(this.vf)),{Nf:i}=t;if(i>=5&&(this.bf=!0,this.Yf()),this.bf){const o=this.Ef(e);this.Uf(o,this.Hf.av)}}Ff(e,t){const i=Math.abs(t.nt-e.nt),o=Math.abs(t.st-e.st);return{nv:i,sv:o,Nf:i+o}}ov(e){let t=wd(e.changedTouches,W(this.Of));if(t===null&&e.touches.length===0&&(t=e.changedTouches[0]),t===null)return;this.Of=null,this.Vf=su(e),this.Kf(),this.pf=null,this.yf&&(this.yf(),this.yf=null);const i=this.Ef(e,t);if(this.Wf(i,this.Hf._v),++this._f,this.uf&&this._f>1){const{Nf:o}=this.Ff(On(t),this.cf);o<30&&!this.wf&&this.Wf(i,this.Hf.jf),this.$f()}else this.wf||(this.Wf(i,this.Hf.uv),this.Hf.uv&&zo(e));this._f===0&&zo(e),e.touches.length===0&&this.ff&&(this.ff=!1,zo(e))}If(e){if(e.button!==0)return;const t=this.Ef(e);if(this.vf=null,this.Df=!1,this.kf&&(this.kf(),this.kf=null),R0()&&this.Zf.ownerDocument.documentElement.removeEventListener("mouseleave",this.Af),!this.Lf(e))if(this.Uf(t,this.Hf.cv),++this.hf,this.lf&&this.hf>1){const{Nf:i}=this.Ff(On(e),this.af);i<5&&!this.bf&&this.Uf(t,this.Hf.qf),this.Yf()}else this.bf||this.Uf(t,this.Hf.dv)}Kf(){this.df!==null&&(clearTimeout(this.df),this.df=null)}fv(e){if(this.Of!==null)return;const t=e.changedTouches[0];this.Of=t.identifier,this.Vf=su(e);const i=this.Zf.ownerDocument.documentElement;this.wf=!1,this.mf=!1,this.Rf=!1,this.pf=On(t),this.yf&&(this.yf(),this.yf=null);{const a=this.iv.bind(this),d=this.ov.bind(this);this.yf=()=>{i.removeEventListener("touchmove",a),i.removeEventListener("touchend",d)},i.addEventListener("touchmove",a,{passive:!1}),i.addEventListener("touchend",d,{passive:!1}),this.Kf(),this.df=setTimeout(this.vv.bind(this,e),240)}const o=this.Ef(e,t);this.Wf(o,this.Hf.pv),this.uf||(this._f=0,this.uf=setTimeout(this.$f.bind(this),500),this.cf=On(t))}mv(e){if(e.button!==0)return;const t=this.Zf.ownerDocument.documentElement;R0()&&t.addEventListener("mouseleave",this.Af),this.bf=!1,this.vf=On(e),this.kf&&(this.kf(),this.kf=null);{const o=this.lv.bind(this),a=this.If.bind(this);this.kf=()=>{t.removeEventListener("mousemove",o),t.removeEventListener("mouseup",a)},t.addEventListener("mousemove",o),t.addEventListener("mouseup",a)}if(this.Df=!0,this.Lf(e))return;const i=this.Ef(e);this.Uf(i,this.Hf.bv),this.lf||(this.hf=0,this.lf=setTimeout(this.Yf.bind(this),500),this.af=On(e))}Xf(){this.Zf.addEventListener("mouseenter",this.Gf.bind(this)),this.Zf.addEventListener("touchcancel",this.Kf.bind(this));{const e=this.Zf.ownerDocument,t=i=>{this.Hf.wv&&(i.composed&&this.Zf.contains(i.composedPath()[0])||i.target&&this.Zf.contains(i.target)||this.Hf.wv())};this.Mf=()=>{e.removeEventListener("touchstart",t)},this.gf=()=>{e.removeEventListener("mousedown",t)},e.addEventListener("mousedown",t),e.addEventListener("touchstart",t,{passive:!0})}Cd()&&(this.xf=()=>{this.Zf.removeEventListener("dblclick",this.zf)},this.Zf.addEventListener("dblclick",this.zf)),this.Zf.addEventListener("mouseleave",this.gv.bind(this)),this.Zf.addEventListener("touchstart",this.fv.bind(this),{passive:!0}),cE(this.Zf),this.Zf.addEventListener("mousedown",this.mv.bind(this)),this.Mv(),this.Zf.addEventListener("touchmove",()=>{},{passive:!1})}Mv(){this.Hf.xv===void 0&&this.Hf.Sv===void 0&&this.Hf.kv===void 0||(this.Zf.addEventListener("touchstart",e=>this.yv(e.touches),{passive:!0}),this.Zf.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Cf!==null&&this.Hf.Sv!==void 0){const t=N0(e.touches[0],e.touches[1])/this.Tf;this.Hf.Sv(this.Cf,t),zo(e)}},{passive:!1}),this.Zf.addEventListener("touchend",e=>{this.yv(e.touches)}))}yv(e){e.length===1&&(this.Pf=!1),e.length!==2||this.Pf||this.ff?this.Cv():this.Tv(e)}Tv(e){const t=this.Zf.getBoundingClientRect()||{left:0,top:0};this.Cf={nt:(e[0].clientX-t.left+(e[1].clientX-t.left))/2,st:(e[0].clientY-t.top+(e[1].clientY-t.top))/2},this.Tf=N0(e[0],e[1]),this.Hf.xv!==void 0&&this.Hf.xv(),this.Kf()}Cv(){this.Cf!==null&&(this.Cf=null,this.Hf.kv!==void 0&&this.Hf.kv())}gv(e){if(this.Sf&&this.Sf(),this.Lf(e)||!this.Bf)return;const t=this.Ef(e);this.Uf(t,this.Hf.Pv),this.Bf=!Cd()}vv(e){const t=wd(e.touches,W(this.Of));if(t===null)return;const i=this.Ef(e,t);this.Wf(i,this.Hf.Rv),this.wf=!0,this.ff=!0}Lf(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:su(e)<this.Vf+500}Wf(e,t){t&&t.call(this.Hf,e)}Uf(e,t){t&&t.call(this.Hf,e)}Ef(e,t){const i=t||e,o=this.Zf.getBoundingClientRect()||{left:0,top:0};return{clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,localX:i.clientX-o.left,localY:i.clientY-o.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Dv:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Vv:e.type,Ov:i.target,Bv:e.view,Av:()=>{e.type!=="touchstart"&&zo(e)}}}}function N0(n,e){const t=n.clientX-e.clientX,i=n.clientY-e.clientY;return Math.sqrt(t*t+i*i)}function zo(n){n.cancelable&&n.preventDefault()}function On(n){return{nt:n.pageX,st:n.pageY}}function su(n){return n.timeStamp||performance.now()}function wd(n,e){for(let t=0;t<n.length;++t)if(n[t].identifier===e)return n[t];return null}function ou(n){return{Hc:n.Hc,Iv:{gr:n.zv.externalId},Lv:n.zv.cursorStyle}}function fE(n,e,t){for(const i of n){const o=i.gt();if(o!==null&&o.wr){const a=o.wr(e,t);if(a!==null)return{Bv:i,Iv:a}}}return null}function Md(n,e){return t=>{var i,o,a,d;return((o=(i=t.Dt())===null||i===void 0?void 0:i.Pa())!==null&&o!==void 0?o:"")!==e?[]:(d=(a=t.da)===null||a===void 0?void 0:a.call(t,n))!==null&&d!==void 0?d:[]}}function D0(n,e,t,i){if(!n.length)return;let o=0;const a=t/2,d=n[0].At(i,!0);let h=e===1?a-(n[0].Vi()-d/2):n[0].Vi()-d/2-a;h=Math.max(0,h);for(let p=1;p<n.length;p++){const m=n[p],v=n[p-1],_=v.At(i,!1),S=m.Vi(),b=v.Vi();if(e===1?S>b-_:S<b+_){const x=b-_*e;m.Oi(x);const E=x-e*_/2;if((e===1?E<0:E>t)&&h>0){const D=e===1?-1-E:E-t,I=Math.min(D,h);for(let B=o;B<n.length;B++)n[B].Oi(n[B].Vi()+e*I);h-=I}}else o=p,h=e===1?b-_-S:S-(b+_)}}class k0{constructor(e,t,i,o){this.Li=null,this.Ev=null,this.Nv=!1,this.Fv=new ba(200),this.Qr=null,this.Wv=0,this.jv=!1,this.Hv=()=>{this.jv||this.tn.$v().$t().Uh()},this.Uv=()=>{this.jv||this.tn.$v().$t().Uh()},this.tn=e,this.cn=t,this.ko=t.layout,this.Oc=i,this.qv=o==="left",this.Yv=Md("normal",o),this.Zv=Md("top",o),this.Xv=Md("bottom",o),this.Kv=document.createElement("div"),this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Kv.style.width="25px",this.Kv.style.left="0",this.Kv.style.position="relative",this.Gv=ks(this.Kv,je({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const a=this.Gv.canvasElement;a.style.position="absolute",a.style.zIndex="1",a.style.left="0",a.style.top="0",this.Jv=ks(this.Kv,je({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const d=this.Jv.canvasElement;d.style.position="absolute",d.style.zIndex="2",d.style.left="0",d.style.top="0";const h={bv:this.Qv.bind(this),pv:this.Qv.bind(this),av:this.tp.bind(this),hv:this.tp.bind(this),wv:this.ip.bind(this),cv:this.np.bind(this),_v:this.np.bind(this),qf:this.sp.bind(this),jf:this.sp.bind(this),Qf:this.ep.bind(this),Pv:this.rp.bind(this)};this.hp=new qh(this.Jv.canvasElement,h,{ev:()=>!this.cn.handleScroll.vertTouchDrag,rv:()=>!0})}S(){this.hp.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),Is(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Is(this.Gv.canvasElement),this.Gv.dispose(),this.Li!==null&&this.Li.Ko().p(this),this.Li=null}lp(){return this.Kv}P(){return this.ko.fontSize}ap(){const e=this.Oc.W();return this.Qr!==e.R&&(this.Fv.nr(),this.Qr=e.R),e}op(){if(this.Li===null)return 0;let e=0;const t=this.ap(),i=W(this.Gv.canvasElement.getContext("2d"));i.save();const o=this.Li.Ha();i.font=this._p(),o.length>0&&(e=Math.max(this.Fv.xi(i,o[0].so),this.Fv.xi(i,o[o.length-1].so)));const a=this.up();for(let m=a.length;m--;){const v=this.Fv.xi(i,a[m].Kt());v>e&&(e=v)}const d=this.Li.Ct();if(d!==null&&this.Ev!==null&&(h=this.cn.crosshair).mode!==2&&h.horzLine.visible&&h.horzLine.labelVisible){const m=this.Li.pn(1,d),v=this.Li.pn(this.Ev.height-2,d);e=Math.max(e,this.Fv.xi(i,this.Li.Fi(Math.floor(Math.min(m,v))+.11111111111111,d)),this.Fv.xi(i,this.Li.Fi(Math.ceil(Math.max(m,v))-.11111111111111,d)))}var h;i.restore();const p=e||34;return th(Math.ceil(t.C+t.T+t.A+t.I+5+p))}cp(e){this.Ev!==null&&Rs(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`)}dp(){return W(this.Ev).width}Gi(e){this.Li!==e&&(this.Li!==null&&this.Li.Ko().p(this),this.Li=e,e.Ko().l(this.fo.bind(this),this))}Dt(){return this.Li}nr(){const e=this.tn.fp();this.tn.$v().$t().E_(e,W(this.Dt()))}vp(e){if(this.Ev===null)return;if(e!==1){this.pp(),this.Gv.applySuggestedBitmapSize();const i=Ns(this.Gv);i!==null&&(i.useBitmapCoordinateSpace(o=>{this.mp(o),this.Ie(o)}),this.tn.bp(i,this.Xv),this.wp(i),this.tn.bp(i,this.Yv),this.gp(i))}this.Jv.applySuggestedBitmapSize();const t=Ns(this.Jv);t!==null&&(t.useBitmapCoordinateSpace(({context:i,bitmapSize:o})=>{i.clearRect(0,0,o.width,o.height)}),this.Mp(t),this.tn.bp(t,this.Zv))}xp(){return this.Gv.bitmapSize}Sp(e,t,i){const o=this.xp();o.width>0&&o.height>0&&e.drawImage(this.Gv.canvasElement,t,i)}bt(){var e;(e=this.Li)===null||e===void 0||e.Ha()}Qv(e){if(this.Li===null||this.Li.Ni()||!this.cn.handleScale.axisPressedMouseMove.price)return;const t=this.tn.$v().$t(),i=this.tn.fp();this.Nv=!0,t.V_(i,this.Li,e.localY)}tp(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const t=this.tn.$v().$t(),i=this.tn.fp(),o=this.Li;t.O_(i,o,e.localY)}ip(){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.tn.$v().$t(),t=this.tn.fp(),i=this.Li;this.Nv&&(this.Nv=!1,e.B_(t,i))}np(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const t=this.tn.$v().$t(),i=this.tn.fp();this.Nv=!1,t.B_(i,this.Li)}sp(e){this.cn.handleScale.axisDoubleClickReset.price&&this.nr()}ep(e){this.Li!==null&&(!this.tn.$v().$t().W().handleScale.axisPressedMouseMove.price||this.Li.Mh()||this.Li.Oo()||this.kp(1))}rp(e){this.kp(0)}up(){const e=[],t=this.Li===null?void 0:this.Li;return(i=>{for(let o=0;o<i.length;++o){const a=i[o].Rn(this.tn.fp(),t);for(let d=0;d<a.length;d++)e.push(a[d])}})(this.tn.fp().Uo()),e}mp({context:e,bitmapSize:t}){const{width:i,height:o}=t,a=this.tn.fp().$t(),d=a.q(),h=a.bd();d===h?Lu(e,0,0,i,o,d):hS(e,0,0,i,o,d,h)}Ie({context:e,bitmapSize:t,horizontalPixelRatio:i}){if(this.Ev===null||this.Li===null||!this.Li.W().borderVisible)return;e.fillStyle=this.Li.W().borderColor;const o=Math.max(1,Math.floor(this.ap().C*i));let a;a=this.qv?t.width-o:0,e.fillRect(a,0,o,t.height)}wp(e){if(this.Ev===null||this.Li===null)return;const t=this.Li.Ha(),i=this.Li.W(),o=this.ap(),a=this.qv?this.Ev.width-o.T:0;i.borderVisible&&i.ticksVisible&&e.useBitmapCoordinateSpace(({context:d,horizontalPixelRatio:h,verticalPixelRatio:p})=>{d.fillStyle=i.borderColor;const m=Math.max(1,Math.floor(p)),v=Math.floor(.5*p),_=Math.round(o.T*h);d.beginPath();for(const S of t)d.rect(Math.floor(a*h),Math.round(S.Ea*p)-v,_,m);d.fill()}),e.useMediaCoordinateSpace(({context:d})=>{var h;d.font=this._p(),d.fillStyle=(h=i.textColor)!==null&&h!==void 0?h:this.ko.textColor,d.textAlign=this.qv?"right":"left",d.textBaseline="middle";const p=this.qv?Math.round(a-o.A):Math.round(a+o.T+o.A),m=t.map(v=>this.Fv.Mi(d,v.so));for(let v=t.length;v--;){const _=t[v];d.fillText(_.so,p,_.Ea+m[v])}})}pp(){if(this.Ev===null||this.Li===null)return;const e=[],t=this.Li.Uo().slice(),i=this.tn.fp(),o=this.ap();this.Li===i.pr()&&this.tn.fp().Uo().forEach(d=>{i.vr(d)&&t.push(d)});const a=this.Li;t.forEach(d=>{d.Rn(i,a).forEach(h=>{h.Oi(null),h.Bi()&&e.push(h)})}),e.forEach(d=>d.Oi(d.ki())),this.Li.W().alignLabels&&this.yp(e,o)}yp(e,t){if(this.Ev===null)return;const i=this.Ev.height/2,o=e.filter(d=>d.ki()<=i),a=e.filter(d=>d.ki()>i);o.sort((d,h)=>h.ki()-d.ki()),a.sort((d,h)=>d.ki()-h.ki());for(const d of e){const h=Math.floor(d.At(t)/2),p=d.ki();p>-h&&p<h&&d.Oi(h),p>this.Ev.height-h&&p<this.Ev.height+h&&d.Oi(this.Ev.height-h)}D0(o,1,this.Ev.height,t),D0(a,-1,this.Ev.height,t)}gp(e){if(this.Ev===null)return;const t=this.up(),i=this.ap(),o=this.qv?"right":"left";t.forEach(a=>{a.Ai()&&a.gt(W(this.Li)).X(e,i,this.Fv,o)})}Mp(e){if(this.Ev===null||this.Li===null)return;const t=this.tn.$v().$t(),i=[],o=this.tn.fp(),a=t.Zc().Rn(o,this.Li);a.length&&i.push(a);const d=this.ap(),h=this.qv?"right":"left";i.forEach(p=>{p.forEach(m=>{m.gt(W(this.Li)).X(e,d,this.Fv,h)})})}kp(e){this.Kv.style.cursor=e===1?"ns-resize":"default"}fo(){const e=this.op();this.Wv<e&&this.tn.$v().$t().Kl(),this.Wv=e}_p(){return Yo(this.ko.fontSize,this.ko.fontFamily)}}function dE(n,e){var t,i;return(i=(t=n.ua)===null||t===void 0?void 0:t.call(n,e))!==null&&i!==void 0?i:[]}function lu(n,e){var t,i;return(i=(t=n.Pn)===null||t===void 0?void 0:t.call(n,e))!==null&&i!==void 0?i:[]}function hE(n,e){var t,i;return(i=(t=n.Ji)===null||t===void 0?void 0:t.call(n,e))!==null&&i!==void 0?i:[]}function mE(n,e){var t,i;return(i=(t=n.aa)===null||t===void 0?void 0:t.call(n,e))!==null&&i!==void 0?i:[]}class Fh{constructor(e,t){this.Ev=je({width:0,height:0}),this.Cp=null,this.Tp=null,this.Pp=null,this.Rp=null,this.Dp=!1,this.Vp=new ut,this.Op=new ut,this.Bp=0,this.Ap=!1,this.Ip=null,this.zp=!1,this.Lp=null,this.Ep=null,this.jv=!1,this.Hv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Uv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Qd=e,this.Np=t,this.Np.W_().l(this.Fp.bind(this),this,!0),this.Wp=document.createElement("td"),this.Wp.style.padding="0",this.Wp.style.position="relative";const i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.position="relative",i.style.overflow="hidden",this.jp=document.createElement("td"),this.jp.style.padding="0",this.Hp=document.createElement("td"),this.Hp.style.padding="0",this.Wp.appendChild(i),this.Gv=ks(i,je({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const o=this.Gv.canvasElement;o.style.position="absolute",o.style.zIndex="1",o.style.left="0",o.style.top="0",this.Jv=ks(i,je({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const a=this.Jv.canvasElement;a.style.position="absolute",a.style.zIndex="2",a.style.left="0",a.style.top="0",this.$p=document.createElement("tr"),this.$p.appendChild(this.jp),this.$p.appendChild(this.Wp),this.$p.appendChild(this.Hp),this.Up(),this.hp=new qh(this.Jv.canvasElement,this,{ev:()=>this.Ip===null&&!this.Qd.W().handleScroll.vertTouchDrag,rv:()=>this.Ip===null&&!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.Cp!==null&&this.Cp.S(),this.Tp!==null&&this.Tp.S(),this.Pp=null,this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),Is(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Is(this.Gv.canvasElement),this.Gv.dispose(),this.Np!==null&&this.Np.W_().p(this),this.hp.S()}fp(){return W(this.Np)}qp(e){var t,i;this.Np!==null&&this.Np.W_().p(this),this.Np=e,this.Np!==null&&this.Np.W_().l(Fh.prototype.Fp.bind(this),this,!0),this.Up(),this.Qd.Yp().indexOf(this)===this.Qd.Yp().length-1?(this.Pp=(t=this.Pp)!==null&&t!==void 0?t:new uE(this.Wp,this.Qd),this.Pp.bt()):((i=this.Pp)===null||i===void 0||i.if(),this.Pp=null)}$v(){return this.Qd}lp(){return this.$p}Up(){if(this.Np!==null&&(this.Zp(),this.$i().wt().length!==0)){if(this.Cp!==null){const e=this.Np.R_();this.Cp.Gi(W(e))}if(this.Tp!==null){const e=this.Np.D_();this.Tp.Gi(W(e))}}}Xp(){this.Cp!==null&&this.Cp.bt(),this.Tp!==null&&this.Tp.bt()}M_(){return this.Np!==null?this.Np.M_():0}x_(e){this.Np&&this.Np.x_(e)}Qf(e){if(!this.Np)return;this.Kp();const t=e.localX,i=e.localY;this.Gp(t,i,e)}bv(e){this.Kp(),this.Jp(),this.Gp(e.localX,e.localY,e)}tv(e){var t;if(!this.Np)return;this.Kp();const i=e.localX,o=e.localY;this.Gp(i,o,e);const a=this.wr(i,o);this.Qd.Qp((t=a==null?void 0:a.Lv)!==null&&t!==void 0?t:null),this.$i().jc(a&&{Hc:a.Hc,Iv:a.Iv})}dv(e){this.Np!==null&&(this.Kp(),this.tm(e))}qf(e){this.Np!==null&&this.im(this.Op,e)}jf(e){this.qf(e)}av(e){this.Kp(),this.nm(e),this.Gp(e.localX,e.localY,e)}cv(e){this.Np!==null&&(this.Kp(),this.Ap=!1,this.sm(e))}uv(e){this.Np!==null&&this.tm(e)}Rv(e){if(this.Ap=!0,this.Ip===null){const t={x:e.localX,y:e.localY};this.rm(t,t,e)}}Pv(e){this.Np!==null&&(this.Kp(),this.Np.$t().jc(null),this.hm())}lm(){return this.Vp}am(){return this.Op}xv(){this.Bp=1,this.$i().Un()}Sv(e,t){if(!this.Qd.W().handleScale.pinch)return;const i=5*(t-this.Bp);this.Bp=t,this.$i().Qc(e.nt,i)}pv(e){this.Ap=!1,this.zp=this.Ip!==null,this.Jp();const t=this.$i().Zc();this.Ip!==null&&t.yt()&&(this.Lp={x:t.Yt(),y:t.Zt()},this.Ip={x:e.localX,y:e.localY})}hv(e){if(this.Np===null)return;const t=e.localX,i=e.localY;if(this.Ip===null)this.nm(e);else{this.zp=!1;const o=W(this.Lp),a=o.x+(t-this.Ip.x),d=o.y+(i-this.Ip.y);this.Gp(a,d,e)}}_v(e){this.$v().W().trackingMode.exitMode===0&&(this.zp=!0),this.om(),this.sm(e)}wr(e,t){const i=this.Np;return i===null?null:function(o,a,d){const h=o.Uo(),p=function(m,v,_){var S,b;let x,E;for(const B of m){const q=(b=(S=B.va)===null||S===void 0?void 0:S.call(B,v,_))!==null&&b!==void 0?b:[];for(const R of q)D=R.zOrder,(!(I=x==null?void 0:x.zOrder)||D==="top"&&I!=="top"||D==="normal"&&I==="bottom")&&(x=R,E=B)}var D,I;return x&&E?{zv:x,Hc:E}:null}(h,a,d);if((p==null?void 0:p.zv.zOrder)==="top")return ou(p);for(const m of h){if(p&&p.Hc===m&&p.zv.zOrder!=="bottom"&&!p.zv.isBackground)return ou(p);const v=fE(m.Pn(o),a,d);if(v!==null)return{Hc:m,Bv:v.Bv,Iv:v.Iv};if(p&&p.Hc===m&&p.zv.zOrder!=="bottom"&&p.zv.isBackground)return ou(p)}return p!=null&&p.zv?ou(p):null}(i,e,t)}_m(e,t){W(t==="left"?this.Cp:this.Tp).cp(je({width:e,height:this.Ev.height}))}um(){return this.Ev}cp(e){Rs(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Wp.style.width=e.width+"px",this.Wp.style.height=e.height+"px")}dm(){const e=W(this.Np);e.P_(e.R_()),e.P_(e.D_());for(const t of e.Ba())if(e.vr(t)){const i=t.Dt();i!==null&&e.P_(i),t.Vn()}}xp(){return this.Gv.bitmapSize}Sp(e,t,i){const o=this.xp();o.width>0&&o.height>0&&e.drawImage(this.Gv.canvasElement,t,i)}vp(e){if(e===0||this.Np===null)return;if(e>1&&this.dm(),this.Cp!==null&&this.Cp.vp(e),this.Tp!==null&&this.Tp.vp(e),e!==1){this.Gv.applySuggestedBitmapSize();const i=Ns(this.Gv);i!==null&&(i.useBitmapCoordinateSpace(o=>{this.mp(o)}),this.Np&&(this.fm(i,dE),this.vm(i),this.pm(i),this.fm(i,lu),this.fm(i,hE)))}this.Jv.applySuggestedBitmapSize();const t=Ns(this.Jv);t!==null&&(t.useBitmapCoordinateSpace(({context:i,bitmapSize:o})=>{i.clearRect(0,0,o.width,o.height)}),this.bm(t),this.fm(t,mE))}wm(){return this.Cp}gm(){return this.Tp}bp(e,t){this.fm(e,t)}Fp(){this.Np!==null&&this.Np.W_().p(this),this.Np=null}tm(e){this.im(this.Vp,e)}im(e,t){const i=t.localX,o=t.localY;e.M()&&e.m(this.$i().St().Nu(i),{x:i,y:o},t)}mp({context:e,bitmapSize:t}){const{width:i,height:o}=t,a=this.$i(),d=a.q(),h=a.bd();d===h?Lu(e,0,0,i,o,h):hS(e,0,0,i,o,d,h)}vm(e){const t=W(this.Np).j_().qh().gt();t!==null&&t.X(e,!1)}pm(e){const t=this.$i().Yc();this.Mm(e,lu,nh,t),this.Mm(e,lu,gu,t)}bm(e){this.Mm(e,lu,gu,this.$i().Zc())}fm(e,t){const i=W(this.Np).Uo();for(const o of i)this.Mm(e,t,nh,o);for(const o of i)this.Mm(e,t,gu,o)}Mm(e,t,i,o){const a=W(this.Np),d=a.$t().Wc(),h=d!==null&&d.Hc===o,p=d!==null&&h&&d.Iv!==void 0?d.Iv.Mr:void 0;ih(t,m=>i(m,e,h,p),o,a)}Zp(){if(this.Np===null)return;const e=this.Qd,t=this.Np.R_().W().visible,i=this.Np.D_().W().visible;t||this.Cp===null||(this.jp.removeChild(this.Cp.lp()),this.Cp.S(),this.Cp=null),i||this.Tp===null||(this.Hp.removeChild(this.Tp.lp()),this.Tp.S(),this.Tp=null);const o=e.$t().ud();t&&this.Cp===null&&(this.Cp=new k0(this,e.W(),o,"left"),this.jp.appendChild(this.Cp.lp())),i&&this.Tp===null&&(this.Tp=new k0(this,e.W(),o,"right"),this.Hp.appendChild(this.Tp.lp()))}xm(e){return e.Dv&&this.Ap||this.Ip!==null}Sm(e){return Math.max(0,Math.min(e,this.Ev.width-1))}km(e){return Math.max(0,Math.min(e,this.Ev.height-1))}Gp(e,t,i){this.$i().ld(this.Sm(e),this.km(t),i,W(this.Np))}hm(){this.$i().od()}om(){this.zp&&(this.Ip=null,this.hm())}rm(e,t,i){this.Ip=e,this.zp=!1,this.Gp(t.x,t.y,i);const o=this.$i().Zc();this.Lp={x:o.Yt(),y:o.Zt()}}$i(){return this.Qd.$t()}sm(e){if(!this.Dp)return;const t=this.$i(),i=this.fp();if(t.z_(i,i.vn()),this.Rp=null,this.Dp=!1,t.ed(),this.Ep!==null){const o=performance.now(),a=t.St();this.Ep.Vr(a.Hu(),o),this.Ep.Qu(o)||t.Zn(this.Ep)}}Kp(){this.Ip=null}Jp(){if(this.Np){if(this.$i().Un(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)W(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Np.vn().Ni()&&this.$i().St().Ni()}}nm(e){if(this.Np===null)return;const t=this.$i(),i=t.St();if(i.Ni())return;const o=this.Qd.W(),a=o.handleScroll,d=o.kineticScroll;if((!a.pressedMouseMove||e.Dv)&&(!a.horzTouchDrag&&!a.vertTouchDrag||!e.Dv))return;const h=this.Np.vn(),p=performance.now();if(this.Rp!==null||this.xm(e)||(this.Rp={x:e.clientX,y:e.clientY,Od:p,ym:e.localX,Cm:e.localY}),this.Rp!==null&&!this.Dp&&(this.Rp.x!==e.clientX||this.Rp.y!==e.clientY)){if(e.Dv&&d.touch||!e.Dv&&d.mouse){const m=i.le();this.Ep=new rE(.2/m,7/m,.997,15/m),this.Ep.Yd(i.Hu(),this.Rp.Od)}else this.Ep=null;h.Ni()||t.A_(this.Np,h,e.localY),t.nd(e.localX),this.Dp=!0}this.Dp&&(h.Ni()||t.I_(this.Np,h,e.localY),t.sd(e.localX),this.Ep!==null&&this.Ep.Yd(i.Hu(),p))}}class I0{constructor(e,t,i,o,a){this.ft=!0,this.Ev=je({width:0,height:0}),this.Hv=()=>this.vp(3),this.qv=e==="left",this.Oc=i.ud,this.cn=t,this.Tm=o,this.Pm=a,this.Kv=document.createElement("div"),this.Kv.style.width="25px",this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Gv=ks(this.Kv,je({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv)}S(){this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Is(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Kv}um(){return this.Ev}cp(e){Rs(this.Ev,e)||(this.Ev=e,this.Gv.resizeCanvasElement(e),this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.ft=!0)}vp(e){if(e<3&&!this.ft||this.Ev.width===0||this.Ev.height===0)return;this.ft=!1,this.Gv.applySuggestedBitmapSize();const t=Ns(this.Gv);t!==null&&t.useBitmapCoordinateSpace(i=>{this.mp(i),this.Ie(i)})}xp(){return this.Gv.bitmapSize}Sp(e,t,i){const o=this.xp();o.width>0&&o.height>0&&e.drawImage(this.Gv.canvasElement,t,i)}Ie({context:e,bitmapSize:t,horizontalPixelRatio:i,verticalPixelRatio:o}){if(!this.Tm())return;e.fillStyle=this.cn.timeScale.borderColor;const a=Math.floor(this.Oc.W().C*i),d=Math.floor(this.Oc.W().C*o),h=this.qv?t.width-a:0;e.fillRect(h,0,a,d)}mp({context:e,bitmapSize:t}){Lu(e,0,0,t.width,t.height,this.Pm())}}function Hh(n){return e=>{var t,i;return(i=(t=e.fa)===null||t===void 0?void 0:t.call(e,n))!==null&&i!==void 0?i:[]}}const pE=Hh("normal"),gE=Hh("top"),vE=Hh("bottom");class yE{constructor(e,t){this.Rm=null,this.Dm=null,this.k=null,this.Vm=!1,this.Ev=je({width:0,height:0}),this.Om=new ut,this.Fv=new ba(5),this.jv=!1,this.Hv=()=>{this.jv||this.Qd.$t().Uh()},this.Uv=()=>{this.jv||this.Qd.$t().Uh()},this.Qd=e,this.q_=t,this.cn=e.W().layout,this.Xd=document.createElement("tr"),this.Bm=document.createElement("td"),this.Bm.style.padding="0",this.Am=document.createElement("td"),this.Am.style.padding="0",this.Kv=document.createElement("td"),this.Kv.style.height="25px",this.Kv.style.padding="0",this.Im=document.createElement("div"),this.Im.style.width="100%",this.Im.style.height="100%",this.Im.style.position="relative",this.Im.style.overflow="hidden",this.Kv.appendChild(this.Im),this.Gv=ks(this.Im,je({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const i=this.Gv.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Jv=ks(this.Im,je({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const o=this.Jv.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0",this.Xd.appendChild(this.Bm),this.Xd.appendChild(this.Kv),this.Xd.appendChild(this.Am),this.zm(),this.Qd.$t().g_().l(this.zm.bind(this),this),this.hp=new qh(this.Jv.canvasElement,this,{ev:()=>!0,rv:()=>!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.hp.S(),this.Rm!==null&&this.Rm.S(),this.Dm!==null&&this.Dm.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),Is(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Is(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Xd}Lm(){return this.Rm}Em(){return this.Dm}bv(e){if(this.Vm)return;this.Vm=!0;const t=this.Qd.$t();!t.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&t.Jc(e.localX)}pv(e){this.bv(e)}wv(){const e=this.Qd.$t();!e.St().Ni()&&this.Vm&&(this.Vm=!1,this.Qd.W().handleScale.axisPressedMouseMove.time&&e.hd())}av(e){const t=this.Qd.$t();!t.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&t.rd(e.localX)}hv(e){this.av(e)}cv(){this.Vm=!1;const e=this.Qd.$t();e.St().Ni()&&!this.Qd.W().handleScale.axisPressedMouseMove.time||e.hd()}_v(){this.cv()}qf(){this.Qd.W().handleScale.axisDoubleClickReset.time&&this.Qd.$t().Kn()}jf(){this.qf()}Qf(){this.Qd.$t().W().handleScale.axisPressedMouseMove.time&&this.kp(1)}Pv(){this.kp(0)}um(){return this.Ev}Nm(){return this.Om}Fm(e,t,i){Rs(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.Om.m(e)),this.Rm!==null&&this.Rm.cp(je({width:t,height:e.height})),this.Dm!==null&&this.Dm.cp(je({width:i,height:e.height}))}Wm(){const e=this.jm();return Math.ceil(e.C+e.T+e.P+e.L+e.B+e.Hm)}bt(){this.Qd.$t().St().Ha()}xp(){return this.Gv.bitmapSize}Sp(e,t,i){const o=this.xp();o.width>0&&o.height>0&&e.drawImage(this.Gv.canvasElement,t,i)}vp(e){if(e===0)return;if(e!==1){this.Gv.applySuggestedBitmapSize();const i=Ns(this.Gv);i!==null&&(i.useBitmapCoordinateSpace(o=>{this.mp(o),this.Ie(o),this.$m(i,vE)}),this.wp(i),this.$m(i,pE)),this.Rm!==null&&this.Rm.vp(e),this.Dm!==null&&this.Dm.vp(e)}this.Jv.applySuggestedBitmapSize();const t=Ns(this.Jv);t!==null&&(t.useBitmapCoordinateSpace(({context:i,bitmapSize:o})=>{i.clearRect(0,0,o.width,o.height)}),this.Um([...this.Qd.$t().wt(),this.Qd.$t().Zc()],t),this.$m(t,gE))}$m(e,t){const i=this.Qd.$t().wt();for(const o of i)ih(t,a=>nh(a,e,!1,void 0),o,void 0);for(const o of i)ih(t,a=>gu(a,e,!1,void 0),o,void 0)}mp({context:e,bitmapSize:t}){Lu(e,0,0,t.width,t.height,this.Qd.$t().bd())}Ie({context:e,bitmapSize:t,verticalPixelRatio:i}){if(this.Qd.W().timeScale.borderVisible){e.fillStyle=this.qm();const o=Math.max(1,Math.floor(this.jm().C*i));e.fillRect(0,0,t.width,o)}}wp(e){const t=this.Qd.$t().St(),i=t.Ha();if(!i||i.length===0)return;const o=this.q_.maxTickMarkWeight(i),a=this.jm(),d=t.W();d.borderVisible&&d.ticksVisible&&e.useBitmapCoordinateSpace(({context:h,horizontalPixelRatio:p,verticalPixelRatio:m})=>{h.strokeStyle=this.qm(),h.fillStyle=this.qm();const v=Math.max(1,Math.floor(p)),_=Math.floor(.5*p);h.beginPath();const S=Math.round(a.T*m);for(let b=i.length;b--;){const x=Math.round(i[b].coord*p);h.rect(x-_,0,v,S)}h.fill()}),e.useMediaCoordinateSpace(({context:h})=>{const p=a.C+a.T+a.L+a.P/2;h.textAlign="center",h.textBaseline="middle",h.fillStyle=this.$(),h.font=this._p();for(const m of i)if(m.weight<o){const v=m.needAlignCoordinate?this.Ym(h,m.coord,m.label):m.coord;h.fillText(m.label,v,p)}this.Qd.W().timeScale.allowBoldLabels&&(h.font=this.Zm());for(const m of i)if(m.weight>=o){const v=m.needAlignCoordinate?this.Ym(h,m.coord,m.label):m.coord;h.fillText(m.label,v,p)}})}Ym(e,t,i){const o=this.Fv.xi(e,i),a=o/2,d=Math.floor(t-a)+.5;return d<0?t+=Math.abs(0-d):d+o>this.Ev.width&&(t-=Math.abs(this.Ev.width-(d+o))),t}Um(e,t){const i=this.jm();for(const o of e)for(const a of o.Qi())a.gt().X(t,i)}qm(){return this.Qd.W().timeScale.borderColor}$(){return this.cn.textColor}j(){return this.cn.fontSize}_p(){return Yo(this.j(),this.cn.fontFamily)}Zm(){return Yo(this.j(),this.cn.fontFamily,"bold")}jm(){this.k===null&&(this.k={C:1,N:NaN,L:NaN,B:NaN,ji:NaN,T:5,P:NaN,R:"",Wi:new ba,Hm:0});const e=this.k,t=this._p();if(e.R!==t){const i=this.j();e.P=i,e.R=t,e.L=3*i/12,e.B=3*i/12,e.ji=9*i/12,e.N=0,e.Hm=4*i/12,e.Wi.nr()}return this.k}kp(e){this.Kv.style.cursor=e===1?"ew-resize":"default"}zm(){const e=this.Qd.$t(),t=e.W();t.leftPriceScale.visible||this.Rm===null||(this.Bm.removeChild(this.Rm.lp()),this.Rm.S(),this.Rm=null),t.rightPriceScale.visible||this.Dm===null||(this.Am.removeChild(this.Dm.lp()),this.Dm.S(),this.Dm=null);const i={ud:this.Qd.$t().ud()},o=()=>t.leftPriceScale.borderVisible&&e.St().W().borderVisible,a=()=>e.bd();t.leftPriceScale.visible&&this.Rm===null&&(this.Rm=new I0("left",t,i,o,a),this.Bm.appendChild(this.Rm.lp())),t.rightPriceScale.visible&&this.Dm===null&&(this.Dm=new I0("right",t,i,o,a),this.Am.appendChild(this.Dm.lp()))}}const _E=!!Jo&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(n=>n.brand.includes("Chromium"))&&!!Jo&&(!((Ad=navigator==null?void 0:navigator.userAgentData)===null||Ad===void 0)&&Ad.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);var Ad;class SE{constructor(e,t,i){var o;this.Xm=[],this.Km=0,this.ho=0,this.__=0,this.Gm=0,this.Jm=0,this.Qm=null,this.tb=!1,this.Vp=new ut,this.Op=new ut,this.Rc=new ut,this.ib=null,this.nb=null,this.Jd=e,this.cn=t,this.q_=i,this.Xd=document.createElement("div"),this.Xd.classList.add("tv-lightweight-charts"),this.Xd.style.overflow="hidden",this.Xd.style.direction="ltr",this.Xd.style.width="100%",this.Xd.style.height="100%",(o=this.Xd).style.userSelect="none",o.style.webkitUserSelect="none",o.style.msUserSelect="none",o.style.MozUserSelect="none",o.style.webkitTapHighlightColor="transparent",this.sb=document.createElement("table"),this.sb.setAttribute("cellspacing","0"),this.Xd.appendChild(this.sb),this.eb=this.rb.bind(this),Rd(this.cn)&&this.hb(!0),this.$i=new iE(this.Vc.bind(this),this.cn,i),this.$t().Xc().l(this.lb.bind(this),this),this.ab=new yE(this,this.q_),this.sb.appendChild(this.ab.lp());const a=t.autoSize&&this.ob();let d=this.cn.width,h=this.cn.height;if(a||d===0||h===0){const p=e.getBoundingClientRect();d=d||p.width,h=h||p.height}this._b(d,h),this.ub(),e.appendChild(this.Xd),this.cb(),this.$i.St().ec().l(this.$i.Kl.bind(this.$i),this),this.$i.g_().l(this.$i.Kl.bind(this.$i),this)}$t(){return this.$i}W(){return this.cn}Yp(){return this.Xm}fb(){return this.ab}S(){this.hb(!1),this.Km!==0&&window.cancelAnimationFrame(this.Km),this.$i.Xc().p(this),this.$i.St().ec().p(this),this.$i.g_().p(this),this.$i.S();for(const e of this.Xm)this.sb.removeChild(e.lp()),e.lm().p(this),e.am().p(this),e.S();this.Xm=[],W(this.ab).S(),this.Xd.parentElement!==null&&this.Xd.parentElement.removeChild(this.Xd),this.Rc.S(),this.Vp.S(),this.Op.S(),this.pb()}_b(e,t,i=!1){if(this.ho===t&&this.__===e)return;const o=function(h){const p=Math.floor(h.width),m=Math.floor(h.height);return je({width:p-p%2,height:m-m%2})}(je({width:e,height:t}));this.ho=o.height,this.__=o.width;const a=this.ho+"px",d=this.__+"px";W(this.Xd).style.height=a,W(this.Xd).style.width=d,this.sb.style.height=a,this.sb.style.width=d,i?this.mb(Mt.es(),performance.now()):this.$i.Kl()}vp(e){e===void 0&&(e=Mt.es());for(let t=0;t<this.Xm.length;t++)this.Xm[t].vp(e.Hn(t).Fn);this.cn.timeScale.visible&&this.ab.vp(e.jn())}$h(e){const t=Rd(this.cn);this.$i.$h(e);const i=Rd(this.cn);i!==t&&this.hb(i),this.cb(),this.bb(e)}lm(){return this.Vp}am(){return this.Op}Xc(){return this.Rc}wb(){this.Qm!==null&&(this.mb(this.Qm,performance.now()),this.Qm=null);const e=this.gb(null),t=document.createElement("canvas");t.width=e.width,t.height=e.height;const i=W(t.getContext("2d"));return this.gb(i),t}Mb(e){return e==="left"&&!this.xb()||e==="right"&&!this.Sb()||this.Xm.length===0?0:W(e==="left"?this.Xm[0].wm():this.Xm[0].gm()).dp()}kb(){return this.cn.autoSize&&this.ib!==null}yb(){return this.Xd}Qp(e){this.nb=e,this.nb?this.yb().style.setProperty("cursor",e):this.yb().style.removeProperty("cursor")}Cb(){return this.nb}Tb(){return qt(this.Xm[0]).um()}bb(e){(e.autoSize!==void 0||!this.ib||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.ib&&this.ob(),e.autoSize===!1&&this.ib!==null&&this.pb(),e.autoSize||e.width===void 0&&e.height===void 0||this._b(e.width||this.__,e.height||this.ho))}gb(e){let t=0,i=0;const o=this.Xm[0],a=(h,p)=>{let m=0;for(let v=0;v<this.Xm.length;v++){const _=this.Xm[v],S=W(h==="left"?_.wm():_.gm()),b=S.xp();e!==null&&S.Sp(e,p,m),m+=b.height}};this.xb()&&(a("left",0),t+=W(o.wm()).xp().width);for(let h=0;h<this.Xm.length;h++){const p=this.Xm[h],m=p.xp();e!==null&&p.Sp(e,t,i),i+=m.height}t+=o.xp().width,this.Sb()&&(a("right",t),t+=W(o.gm()).xp().width);const d=(h,p,m)=>{W(h==="left"?this.ab.Lm():this.ab.Em()).Sp(W(e),p,m)};if(this.cn.timeScale.visible){const h=this.ab.xp();if(e!==null){let p=0;this.xb()&&(d("left",p,i),p=W(o.wm()).xp().width),this.ab.Sp(e,p,i),p+=h.width,this.Sb()&&d("right",p,i)}i+=h.height}return je({width:t,height:i})}Pb(){let e=0,t=0,i=0;for(const x of this.Xm)this.xb()&&(t=Math.max(t,W(x.wm()).op(),this.cn.leftPriceScale.minimumWidth)),this.Sb()&&(i=Math.max(i,W(x.gm()).op(),this.cn.rightPriceScale.minimumWidth)),e+=x.M_();t=th(t),i=th(i);const o=this.__,a=this.ho,d=Math.max(o-t-i,0),h=this.cn.timeScale.visible;let p=h?Math.max(this.ab.Wm(),this.cn.timeScale.minimumHeight):0;var m;p=(m=p)+m%2;const v=0+p,_=a<v?0:a-v,S=_/e;let b=0;for(let x=0;x<this.Xm.length;++x){const E=this.Xm[x];E.qp(this.$i.qc()[x]);let D=0,I=0;I=x===this.Xm.length-1?_-b:Math.round(E.M_()*S),D=Math.max(I,2),b+=D,E.cp(je({width:d,height:D})),this.xb()&&E._m(t,"left"),this.Sb()&&E._m(i,"right"),E.fp()&&this.$i.Kc(E.fp(),D)}this.ab.Fm(je({width:h?d:0,height:p}),h?t:0,h?i:0),this.$i.S_(d),this.Gm!==t&&(this.Gm=t),this.Jm!==i&&(this.Jm=i)}hb(e){e?this.Xd.addEventListener("wheel",this.eb,{passive:!1}):this.Xd.removeEventListener("wheel",this.eb)}Rb(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return _E?1/window.devicePixelRatio:1}rb(e){if(!(e.deltaX!==0&&this.cn.handleScroll.mouseWheel||e.deltaY!==0&&this.cn.handleScale.mouseWheel))return;const t=this.Rb(e),i=t*e.deltaX/100,o=-t*e.deltaY/100;if(e.cancelable&&e.preventDefault(),o!==0&&this.cn.handleScale.mouseWheel){const a=Math.sign(o)*Math.min(1,Math.abs(o)),d=e.clientX-this.Xd.getBoundingClientRect().left;this.$t().Qc(d,a)}i!==0&&this.cn.handleScroll.mouseWheel&&this.$t().td(-80*i)}mb(e,t){var i;const o=e.jn();o===3&&this.Db(),o!==3&&o!==2||(this.Vb(e),this.Ob(e,t),this.ab.bt(),this.Xm.forEach(a=>{a.Xp()}),((i=this.Qm)===null||i===void 0?void 0:i.jn())===3&&(this.Qm.ts(e),this.Db(),this.Vb(this.Qm),this.Ob(this.Qm,t),e=this.Qm,this.Qm=null)),this.vp(e)}Ob(e,t){for(const i of e.Qn())this.ns(i,t)}Vb(e){const t=this.$i.qc();for(let i=0;i<t.length;i++)e.Hn(i).Wn&&t[i].N_()}ns(e,t){const i=this.$i.St();switch(e.qn){case 0:i.hc();break;case 1:i.lc(e.Vt);break;case 2:i.Gn(e.Vt);break;case 3:i.Jn(e.Vt);break;case 4:i.qu();break;case 5:e.Vt.Qu(t)||i.Jn(e.Vt.tc(t))}}Vc(e){this.Qm!==null?this.Qm.ts(e):this.Qm=e,this.tb||(this.tb=!0,this.Km=window.requestAnimationFrame(t=>{if(this.tb=!1,this.Km=0,this.Qm!==null){const i=this.Qm;this.Qm=null,this.mb(i,t);for(const o of i.Qn())if(o.qn===5&&!o.Vt.Qu(t)){this.$t().Zn(o.Vt);break}}}))}Db(){this.ub()}ub(){const e=this.$i.qc(),t=e.length,i=this.Xm.length;for(let o=t;o<i;o++){const a=qt(this.Xm.pop());this.sb.removeChild(a.lp()),a.lm().p(this),a.am().p(this),a.S()}for(let o=i;o<t;o++){const a=new Fh(this,e[o]);a.lm().l(this.Bb.bind(this),this),a.am().l(this.Ab.bind(this),this),this.Xm.push(a),this.sb.insertBefore(a.lp(),this.ab.lp())}for(let o=0;o<t;o++){const a=e[o],d=this.Xm[o];d.fp()!==a?d.qp(a):d.Up()}this.cb(),this.Pb()}Ib(e,t,i){var o;const a=new Map;e!==null&&this.$i.wt().forEach(v=>{const _=v.In().ll(e);_!==null&&a.set(v,_)});let d;if(e!==null){const v=(o=this.$i.St().Ui(e))===null||o===void 0?void 0:o.originalTime;v!==void 0&&(d=v)}const h=this.$t().Wc(),p=h!==null&&h.Hc instanceof Bh?h.Hc:void 0,m=h!==null&&h.Iv!==void 0?h.Iv.gr:void 0;return{zb:d,ee:e??void 0,Lb:t??void 0,Eb:p,Nb:a,Fb:m,Wb:i??void 0}}Bb(e,t,i){this.Vp.m(()=>this.Ib(e,t,i))}Ab(e,t,i){this.Op.m(()=>this.Ib(e,t,i))}lb(e,t,i){this.Rc.m(()=>this.Ib(e,t,i))}cb(){const e=this.cn.timeScale.visible?"":"none";this.ab.lp().style.display=e}xb(){return this.Xm[0].fp().R_().W().visible}Sb(){return this.Xm[0].fp().D_().W().visible}ob(){return"ResizeObserver"in window&&(this.ib=new ResizeObserver(e=>{const t=e.find(i=>i.target===this.Jd);t&&this._b(t.contentRect.width,t.contentRect.height)}),this.ib.observe(this.Jd,{box:"border-box"}),!0)}pb(){this.ib!==null&&this.ib.disconnect(),this.ib=null}}function Rd(n){return!!(n.handleScroll.mouseWheel||n.handleScale.mouseWheel)}function TE(n){return function(e){return e.open!==void 0}(n)||function(e){return e.value!==void 0}(n)}function kS(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var o=0;for(i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]])}return t}function z0(n,e,t,i){const o=t.value,a={ee:e,ot:n,Vt:[o,o,o,o],zb:i};return t.color!==void 0&&(a.V=t.color),a}function bE(n,e,t,i){const o=t.value,a={ee:e,ot:n,Vt:[o,o,o,o],zb:i};return t.lineColor!==void 0&&(a.lt=t.lineColor),t.topColor!==void 0&&(a.Ps=t.topColor),t.bottomColor!==void 0&&(a.Rs=t.bottomColor),a}function CE(n,e,t,i){const o=t.value,a={ee:e,ot:n,Vt:[o,o,o,o],zb:i};return t.topLineColor!==void 0&&(a.Re=t.topLineColor),t.bottomLineColor!==void 0&&(a.De=t.bottomLineColor),t.topFillColor1!==void 0&&(a.ke=t.topFillColor1),t.topFillColor2!==void 0&&(a.ye=t.topFillColor2),t.bottomFillColor1!==void 0&&(a.Ce=t.bottomFillColor1),t.bottomFillColor2!==void 0&&(a.Te=t.bottomFillColor2),a}function xE(n,e,t,i){const o={ee:e,ot:n,Vt:[t.open,t.high,t.low,t.close],zb:i};return t.color!==void 0&&(o.V=t.color),o}function EE(n,e,t,i){const o={ee:e,ot:n,Vt:[t.open,t.high,t.low,t.close],zb:i};return t.color!==void 0&&(o.V=t.color),t.borderColor!==void 0&&(o.Ot=t.borderColor),t.wickColor!==void 0&&(o.Xh=t.wickColor),o}function wE(n,e,t,i,o){const a=qt(o)(t),d=Math.max(...a),h=Math.min(...a),p=a[a.length-1],m=[p,d,h,p],v=t,{time:_,color:S}=v;return{ee:e,ot:n,Vt:m,zb:i,$e:kS(v,["time","color"]),V:S}}function au(n){return n.Vt!==void 0}function L0(n,e){return e.customValues!==void 0&&(n.jb=e.customValues),n}function xs(n){return(e,t,i,o,a,d)=>function(h,p){return p?p(h):(m=h).open===void 0&&m.value===void 0;var m}(i,d)?L0({ot:e,ee:t,zb:o},i):L0(n(e,t,i,o,a),i)}function U0(n){return{Candlestick:xs(EE),Bar:xs(xE),Area:xs(bE),Baseline:xs(CE),Histogram:xs(z0),Line:xs(z0),Custom:xs(wE)}[n]}function V0(n){return{ee:0,Hb:new Map,la:n}}function O0(n,e){if(n!==void 0&&n.length!==0)return{$b:e.key(n[0].ot),Ub:e.key(n[n.length-1].ot)}}function B0(n){let e;return n.forEach(t=>{e===void 0&&(e=t.zb)}),qt(e)}class ME{constructor(e){this.qb=new Map,this.Yb=new Map,this.Zb=new Map,this.Xb=[],this.q_=e}S(){this.qb.clear(),this.Yb.clear(),this.Zb.clear(),this.Xb=[]}Kb(e,t){let i=this.qb.size!==0,o=!1;const a=this.Yb.get(e);if(a!==void 0)if(this.Yb.size===1)i=!1,o=!0,this.qb.clear();else for(const p of this.Xb)p.pointData.Hb.delete(e)&&(o=!0);let d=[];if(t.length!==0){const p=t.map(b=>b.time),m=this.q_.createConverterToInternalObj(t),v=U0(e.Qh()),_=e.Ca(),S=e.Ta();d=t.map((b,x)=>{const E=m(b.time),D=this.q_.key(E);let I=this.qb.get(D);I===void 0&&(I=V0(E),this.qb.set(D,I),o=!0);const B=v(E,I.ee,b,p[x],_,S);return I.Hb.set(e,B),B})}i&&this.Gb(),this.Jb(e,d);let h=-1;if(o){const p=[];this.qb.forEach(m=>{p.push({timeWeight:0,time:m.la,pointData:m,originalTime:B0(m.Hb)})}),p.sort((m,v)=>this.q_.key(m.time)-this.q_.key(v.time)),h=this.Qb(p)}return this.tw(e,h,function(p,m,v){const _=O0(p,v),S=O0(m,v);if(_!==void 0&&S!==void 0)return{ta:_.Ub>=S.Ub&&_.$b>=S.$b}}(this.Yb.get(e),a,this.q_))}vd(e){return this.Kb(e,[])}iw(e,t){const i=t;(function(E){E.zb===void 0&&(E.zb=E.time)})(i),this.q_.preprocessData(t);const o=this.q_.createConverterToInternalObj([t])(t.time),a=this.Zb.get(e);if(a!==void 0&&this.q_.key(o)<this.q_.key(a))throw new Error(`Cannot update oldest data, last time=${a}, new time=${o}`);let d=this.qb.get(this.q_.key(o));const h=d===void 0;d===void 0&&(d=V0(o),this.qb.set(this.q_.key(o),d));const p=U0(e.Qh()),m=e.Ca(),v=e.Ta(),_=p(o,d.ee,t,i.zb,m,v);d.Hb.set(e,_),this.nw(e,_);const S={ta:au(_)};if(!h)return this.tw(e,-1,S);const b={timeWeight:0,time:d.la,pointData:d,originalTime:B0(d.Hb)},x=La(this.Xb,this.q_.key(b.time),(E,D)=>this.q_.key(E.time)<D);this.Xb.splice(x,0,b);for(let E=x;E<this.Xb.length;++E)Nd(this.Xb[E].pointData,E);return this.q_.fillWeightsForPoints(this.Xb,x),this.tw(e,x,S)}nw(e,t){let i=this.Yb.get(e);i===void 0&&(i=[],this.Yb.set(e,i));const o=i.length!==0?i[i.length-1]:null;o===null||this.q_.key(t.ot)>this.q_.key(o.ot)?au(t)&&i.push(t):au(t)?i[i.length-1]=t:i.splice(-1,1),this.Zb.set(e,t.ot)}Jb(e,t){t.length!==0?(this.Yb.set(e,t.filter(au)),this.Zb.set(e,t[t.length-1].ot)):(this.Yb.delete(e),this.Zb.delete(e))}Gb(){for(const e of this.Xb)e.pointData.Hb.size===0&&this.qb.delete(this.q_.key(e.time))}Qb(e){let t=-1;for(let i=0;i<this.Xb.length&&i<e.length;++i){const o=this.Xb[i],a=e[i];if(this.q_.key(o.time)!==this.q_.key(a.time)){t=i;break}a.timeWeight=o.timeWeight,Nd(a.pointData,i)}if(t===-1&&this.Xb.length!==e.length&&(t=Math.min(this.Xb.length,e.length)),t===-1)return-1;for(let i=t;i<e.length;++i)Nd(e[i].pointData,i);return this.q_.fillWeightsForPoints(e,t),this.Xb=e,t}sw(){if(this.Yb.size===0)return null;let e=0;return this.Yb.forEach(t=>{t.length!==0&&(e=Math.max(e,t[t.length-1].ee))}),e}tw(e,t,i){const o={ew:new Map,St:{Eu:this.sw()}};if(t!==-1)this.Yb.forEach((a,d)=>{o.ew.set(d,{$e:a,rw:d===e?i:void 0})}),this.Yb.has(e)||o.ew.set(e,{$e:[],rw:i}),o.St.hw=this.Xb,o.St.lw=t;else{const a=this.Yb.get(e);o.ew.set(e,{$e:a||[],rw:i})}return o}}function Nd(n,e){n.ee=e,n.Hb.forEach(t=>{t.ee=e})}function Gh(n){const e={value:n.Vt[3],time:n.zb};return n.jb!==void 0&&(e.customValues=n.jb),e}function P0(n){const e=Gh(n);return n.V!==void 0&&(e.color=n.V),e}function AE(n){const e=Gh(n);return n.lt!==void 0&&(e.lineColor=n.lt),n.Ps!==void 0&&(e.topColor=n.Ps),n.Rs!==void 0&&(e.bottomColor=n.Rs),e}function RE(n){const e=Gh(n);return n.Re!==void 0&&(e.topLineColor=n.Re),n.De!==void 0&&(e.bottomLineColor=n.De),n.ke!==void 0&&(e.topFillColor1=n.ke),n.ye!==void 0&&(e.topFillColor2=n.ye),n.Ce!==void 0&&(e.bottomFillColor1=n.Ce),n.Te!==void 0&&(e.bottomFillColor2=n.Te),e}function IS(n){const e={open:n.Vt[0],high:n.Vt[1],low:n.Vt[2],close:n.Vt[3],time:n.zb};return n.jb!==void 0&&(e.customValues=n.jb),e}function NE(n){const e=IS(n);return n.V!==void 0&&(e.color=n.V),e}function DE(n){const e=IS(n),{V:t,Ot:i,Xh:o}=n;return t!==void 0&&(e.color=t),i!==void 0&&(e.borderColor=i),o!==void 0&&(e.wickColor=o),e}function sh(n){return{Area:AE,Line:P0,Baseline:RE,Histogram:P0,Bar:NE,Candlestick:DE,Custom:kE}[n]}function kE(n){const e=n.zb;return Object.assign(Object.assign({},n.$e),{time:e})}const IE={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},zE={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},LE={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:Ih,attributionLogo:!0},Dd={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},UE={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0},VE={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:Ih,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function q0(){return{width:0,height:0,autoSize:!1,layout:LE,crosshair:IE,grid:zE,overlayPriceScales:Object.assign({},Dd),leftPriceScale:Object.assign(Object.assign({},Dd),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},Dd),{visible:!0}),timeScale:UE,watermark:VE,localization:{locale:Jo?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class OE{constructor(e,t){this.aw=e,this.ow=t}applyOptions(e){this.aw.$t().$c(this.ow,e)}options(){return this.Li().W()}width(){return Vu(this.ow)?this.aw.Mb(this.ow):0}Li(){return W(this.aw.$t().Uc(this.ow)).Dt}}function F0(n,e,t){const i=kS(n,["time","originalTime"]),o=Object.assign({time:e},i);return t!==void 0&&(o.originalTime=t),o}const BE={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class PE{constructor(e){this.Nh=e}applyOptions(e){this.Nh.$h(e)}options(){return this.Nh.W()}_w(){return this.Nh}}class qE{constructor(e,t,i,o,a){this.uw=new ut,this.Es=e,this.cw=t,this.dw=i,this.q_=a,this.fw=o}S(){this.uw.S()}priceFormatter(){return this.Es.ba()}priceToCoordinate(e){const t=this.Es.Ct();return t===null?null:this.Es.Dt().Rt(e,t.Vt)}coordinateToPrice(e){const t=this.Es.Ct();return t===null?null:this.Es.Dt().pn(e,t.Vt)}barsInLogicalRange(e){if(e===null)return null;const t=new Fo(new ma(e.from,e.to)).lu(),i=this.Es.In();if(i.Ni())return null;const o=i.ll(t.Os(),1),a=i.ll(t.ui(),-1),d=W(i.el()),h=W(i.An());if(o!==null&&a!==null&&o.ee>a.ee)return{barsBefore:e.from-d,barsAfter:h-e.to};const p={barsBefore:o===null||o.ee===d?e.from-d:o.ee-d,barsAfter:a===null||a.ee===h?h-e.to:h-a.ee};return o!==null&&a!==null&&(p.from=o.zb,p.to=a.zb),p}setData(e){this.q_,this.Es.Qh(),this.cw.pw(this.Es,e),this.mw("full")}update(e){this.Es.Qh(),this.cw.bw(this.Es,e),this.mw("update")}dataByIndex(e,t){const i=this.Es.In().ll(e,t);return i===null?null:sh(this.seriesType())(i)}data(){const e=sh(this.seriesType());return this.Es.In().ne().map(t=>e(t))}subscribeDataChanged(e){this.uw.l(e)}unsubscribeDataChanged(e){this.uw.v(e)}setMarkers(e){this.q_;const t=e.map(i=>F0(i,this.q_.convertHorzItemToInternal(i.time),i.time));this.Es.na(t)}markers(){return this.Es.sa().map(e=>F0(e,e.originalTime,void 0))}applyOptions(e){this.Es.$h(e)}options(){return gi(this.Es.W())}priceScale(){return this.dw.priceScale(this.Es.Dt().Pa())}createPriceLine(e){const t=Mn(gi(BE),e),i=this.Es.ea(t);return new PE(i)}removePriceLine(e){this.Es.ra(e._w())}seriesType(){return this.Es.Qh()}attachPrimitive(e){this.Es.ka(e),e.attached&&e.attached({chart:this.fw,series:this,requestUpdate:()=>this.Es.$t().Kl()})}detachPrimitive(e){this.Es.ya(e),e.detached&&e.detached()}mw(e){this.uw.M()&&this.uw.m(e)}}class FE{constructor(e,t,i){this.ww=new ut,this.mu=new ut,this.Om=new ut,this.$i=e,this.yl=e.St(),this.ab=t,this.yl.nc().l(this.gw.bind(this)),this.yl.sc().l(this.Mw.bind(this)),this.ab.Nm().l(this.xw.bind(this)),this.q_=i}S(){this.yl.nc().p(this),this.yl.sc().p(this),this.ab.Nm().p(this),this.ww.S(),this.mu.S(),this.Om.S()}scrollPosition(){return this.yl.Hu()}scrollToPosition(e,t){t?this.yl.Ju(e,1e3):this.$i.Jn(e)}scrollToRealTime(){this.yl.Gu()}getVisibleRange(){const e=this.yl.Vu();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const t={from:this.q_.convertHorzItemToInternal(e.from),to:this.q_.convertHorzItemToInternal(e.to)},i=this.yl.Iu(t);this.$i.pd(i)}getVisibleLogicalRange(){const e=this.yl.Du();return e===null?null:{from:e.Os(),to:e.ui()}}setVisibleLogicalRange(e){ns(e.from<=e.to,"The from index cannot be after the to index."),this.$i.pd(e)}resetTimeScale(){this.$i.Kn()}fitContent(){this.$i.hc()}logicalToCoordinate(e){const t=this.$i.St();return t.Ni()?null:t.It(e)}coordinateToLogical(e){return this.yl.Ni()?null:this.yl.Nu(e)}timeToCoordinate(e){const t=this.q_.convertHorzItemToInternal(e),i=this.yl.Va(t,!1);return i===null?null:this.yl.It(i)}coordinateToTime(e){const t=this.$i.St(),i=t.Nu(e),o=t.Ui(i);return o===null?null:o.originalTime}width(){return this.ab.um().width}height(){return this.ab.um().height}subscribeVisibleTimeRangeChange(e){this.ww.l(e)}unsubscribeVisibleTimeRangeChange(e){this.ww.v(e)}subscribeVisibleLogicalRangeChange(e){this.mu.l(e)}unsubscribeVisibleLogicalRangeChange(e){this.mu.v(e)}subscribeSizeChange(e){this.Om.l(e)}unsubscribeSizeChange(e){this.Om.v(e)}applyOptions(e){this.yl.$h(e)}options(){return Object.assign(Object.assign({},gi(this.yl.W())),{barSpacing:this.yl.le()})}gw(){this.ww.M()&&this.ww.m(this.getVisibleRange())}Mw(){this.mu.M()&&this.mu.m(this.getVisibleLogicalRange())}xw(e){this.Om.m(e.width,e.height)}}function HE(n){if(n===void 0||n.type==="custom")return;const e=n;e.minMove!==void 0&&e.precision===void 0&&(e.precision=function(t){if(t>=1)return 0;let i=0;for(;i<8;i++){const o=Math.round(t);if(Math.abs(o-t)<1e-8)return i;t*=10}return i}(e.minMove))}function H0(n){return function(e){if(Qr(e.handleScale)){const i=e.handleScale;e.handleScale={axisDoubleClickReset:{time:i,price:i},axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:i,axisDoubleClickReset:o}=e.handleScale;Qr(i)&&(e.handleScale.axisPressedMouseMove={time:i,price:i}),Qr(o)&&(e.handleScale.axisDoubleClickReset={time:o,price:o})}const t=e.handleScroll;Qr(t)&&(e.handleScroll={horzTouchDrag:t,vertTouchDrag:t,mouseWheel:t,pressedMouseMove:t})}(n),n}class GE{constructor(e,t,i){this.Sw=new Map,this.kw=new Map,this.yw=new ut,this.Cw=new ut,this.Tw=new ut,this.Pw=new ME(t);const o=i===void 0?gi(q0()):Mn(gi(q0()),H0(i));this.q_=t,this.aw=new SE(e,o,t),this.aw.lm().l(d=>{this.yw.M()&&this.yw.m(this.Rw(d()))},this),this.aw.am().l(d=>{this.Cw.M()&&this.Cw.m(this.Rw(d()))},this),this.aw.Xc().l(d=>{this.Tw.M()&&this.Tw.m(this.Rw(d()))},this);const a=this.aw.$t();this.Dw=new FE(a,this.aw.fb(),this.q_)}remove(){this.aw.lm().p(this),this.aw.am().p(this),this.aw.Xc().p(this),this.Dw.S(),this.aw.S(),this.Sw.clear(),this.kw.clear(),this.yw.S(),this.Cw.S(),this.Tw.S(),this.Pw.S()}resize(e,t,i){this.autoSizeActive()||this.aw._b(e,t,i)}addCustomSeries(e,t){const i=Bo(e),o=Object.assign(Object.assign({},rS),i.defaultOptions());return this.Vw("Custom",o,t,i)}addAreaSeries(e){return this.Vw("Area",Mx,e)}addBaselineSeries(e){return this.Vw("Baseline",Ax,e)}addBarSeries(e){return this.Vw("Bar",Ex,e)}addCandlestickSeries(e={}){return function(t){t.borderColor!==void 0&&(t.borderUpColor=t.borderColor,t.borderDownColor=t.borderColor),t.wickColor!==void 0&&(t.wickUpColor=t.wickColor,t.wickDownColor=t.wickColor)}(e),this.Vw("Candlestick",xx,e)}addHistogramSeries(e){return this.Vw("Histogram",Rx,e)}addLineSeries(e){return this.Vw("Line",wx,e)}removeSeries(e){const t=qt(this.Sw.get(e)),i=this.Pw.vd(t);this.aw.$t().vd(t),this.Ow(i),this.Sw.delete(e),this.kw.delete(t)}pw(e,t){this.Ow(this.Pw.Kb(e,t))}bw(e,t){this.Ow(this.Pw.iw(e,t))}subscribeClick(e){this.yw.l(e)}unsubscribeClick(e){this.yw.v(e)}subscribeCrosshairMove(e){this.Tw.l(e)}unsubscribeCrosshairMove(e){this.Tw.v(e)}subscribeDblClick(e){this.Cw.l(e)}unsubscribeDblClick(e){this.Cw.v(e)}priceScale(e){return new OE(this.aw,e)}timeScale(){return this.Dw}applyOptions(e){this.aw.$h(H0(e))}options(){return this.aw.W()}takeScreenshot(){return this.aw.wb()}autoSizeActive(){return this.aw.kb()}chartElement(){return this.aw.yb()}paneSize(){const e=this.aw.Tb();return{height:e.height,width:e.width}}setCrosshairPosition(e,t,i){const o=this.Sw.get(i);if(o===void 0)return;const a=this.aw.$t().dr(o);a!==null&&this.aw.$t().ad(e,t,a)}clearCrosshairPosition(){this.aw.$t().od(!0)}Vw(e,t,i={},o){HE(i.priceFormat);const a=Mn(gi(uS),gi(t),i),d=this.aw.$t().dd(e,a,o),h=new qE(d,this,this,this,this.q_);return this.Sw.set(h,d),this.kw.set(d,h),h}Ow(e){const t=this.aw.$t();t._d(e.St.Eu,e.St.hw,e.St.lw),e.ew.forEach((i,o)=>o.J(i.$e,i.rw)),t.Wu()}Bw(e){return qt(this.kw.get(e))}Rw(e){const t=new Map;e.Nb.forEach((o,a)=>{const d=a.Qh(),h=sh(d)(o);if(d!=="Custom")ns(TE(h));else{const p=a.Ta();ns(!p||p(h)===!1)}t.set(this.Bw(a),h)});const i=e.Eb!==void 0&&this.kw.has(e.Eb)?this.Bw(e.Eb):void 0;return{time:e.zb,logical:e.ee,point:e.Lb,hoveredSeries:i,hoveredObjectId:e.Fb,seriesData:t,sourceEvent:e.Wb}}}function $E(n,e,t){let i;if(za(n)){const a=document.getElementById(n);ns(a!==null,`Cannot find element in DOM with id=${n}`),i=a}else i=n;const o=new GE(i,e,t);return e.setOptions(o.options()),o}function YE(n,e){return $E(n,new A0,A0.Id(e))}Object.assign(Object.assign({},uS),rS);/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const JE=4,G0=0,$0=1,ZE=2;function tl(n){let e=n.length;for(;--e>=0;)n[e]=0}const KE=0,zS=1,XE=2,WE=3,QE=258,$h=29,Ua=256,xa=Ua+1+$h,Ho=30,Yh=19,LS=2*xa+1,ws=15,kd=16,jE=7,Jh=256,US=16,VS=17,OS=18,oh=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),vu=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),ew=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),BS=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),tw=512,mi=new Array((xa+2)*2);tl(mi);const pa=new Array(Ho*2);tl(pa);const Ea=new Array(tw);tl(Ea);const wa=new Array(QE-WE+1);tl(wa);const Zh=new Array($h);tl(Zh);const Cu=new Array(Ho);tl(Cu);function Id(n,e,t,i,o){this.static_tree=n,this.extra_bits=e,this.extra_base=t,this.elems=i,this.max_length=o,this.has_stree=n&&n.length}let PS,qS,FS;function zd(n,e){this.dyn_tree=n,this.max_code=0,this.stat_desc=e}const HS=n=>n<256?Ea[n]:Ea[256+(n>>>7)],Ma=(n,e)=>{n.pending_buf[n.pending++]=e&255,n.pending_buf[n.pending++]=e>>>8&255},Kt=(n,e,t)=>{n.bi_valid>kd-t?(n.bi_buf|=e<<n.bi_valid&65535,Ma(n,n.bi_buf),n.bi_buf=e>>kd-n.bi_valid,n.bi_valid+=t-kd):(n.bi_buf|=e<<n.bi_valid&65535,n.bi_valid+=t)},qn=(n,e,t)=>{Kt(n,t[e*2],t[e*2+1])},GS=(n,e)=>{let t=0;do t|=n&1,n>>>=1,t<<=1;while(--e>0);return t>>>1},nw=n=>{n.bi_valid===16?(Ma(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):n.bi_valid>=8&&(n.pending_buf[n.pending++]=n.bi_buf&255,n.bi_buf>>=8,n.bi_valid-=8)},iw=(n,e)=>{const t=e.dyn_tree,i=e.max_code,o=e.stat_desc.static_tree,a=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,h=e.stat_desc.extra_base,p=e.stat_desc.max_length;let m,v,_,S,b,x,E=0;for(S=0;S<=ws;S++)n.bl_count[S]=0;for(t[n.heap[n.heap_max]*2+1]=0,m=n.heap_max+1;m<LS;m++)v=n.heap[m],S=t[t[v*2+1]*2+1]+1,S>p&&(S=p,E++),t[v*2+1]=S,!(v>i)&&(n.bl_count[S]++,b=0,v>=h&&(b=d[v-h]),x=t[v*2],n.opt_len+=x*(S+b),a&&(n.static_len+=x*(o[v*2+1]+b)));if(E!==0){do{for(S=p-1;n.bl_count[S]===0;)S--;n.bl_count[S]--,n.bl_count[S+1]+=2,n.bl_count[p]--,E-=2}while(E>0);for(S=p;S!==0;S--)for(v=n.bl_count[S];v!==0;)_=n.heap[--m],!(_>i)&&(t[_*2+1]!==S&&(n.opt_len+=(S-t[_*2+1])*t[_*2],t[_*2+1]=S),v--)}},$S=(n,e,t)=>{const i=new Array(ws+1);let o=0,a,d;for(a=1;a<=ws;a++)o=o+t[a-1]<<1,i[a]=o;for(d=0;d<=e;d++){let h=n[d*2+1];h!==0&&(n[d*2]=GS(i[h]++,h))}},sw=()=>{let n,e,t,i,o;const a=new Array(ws+1);for(t=0,i=0;i<$h-1;i++)for(Zh[i]=t,n=0;n<1<<oh[i];n++)wa[t++]=i;for(wa[t-1]=i,o=0,i=0;i<16;i++)for(Cu[i]=o,n=0;n<1<<vu[i];n++)Ea[o++]=i;for(o>>=7;i<Ho;i++)for(Cu[i]=o<<7,n=0;n<1<<vu[i]-7;n++)Ea[256+o++]=i;for(e=0;e<=ws;e++)a[e]=0;for(n=0;n<=143;)mi[n*2+1]=8,n++,a[8]++;for(;n<=255;)mi[n*2+1]=9,n++,a[9]++;for(;n<=279;)mi[n*2+1]=7,n++,a[7]++;for(;n<=287;)mi[n*2+1]=8,n++,a[8]++;for($S(mi,xa+1,a),n=0;n<Ho;n++)pa[n*2+1]=5,pa[n*2]=GS(n,5);PS=new Id(mi,oh,Ua+1,xa,ws),qS=new Id(pa,vu,0,Ho,ws),FS=new Id(new Array(0),ew,0,Yh,jE)},YS=n=>{let e;for(e=0;e<xa;e++)n.dyn_ltree[e*2]=0;for(e=0;e<Ho;e++)n.dyn_dtree[e*2]=0;for(e=0;e<Yh;e++)n.bl_tree[e*2]=0;n.dyn_ltree[Jh*2]=1,n.opt_len=n.static_len=0,n.sym_next=n.matches=0},JS=n=>{n.bi_valid>8?Ma(n,n.bi_buf):n.bi_valid>0&&(n.pending_buf[n.pending++]=n.bi_buf),n.bi_buf=0,n.bi_valid=0},Y0=(n,e,t,i)=>{const o=e*2,a=t*2;return n[o]<n[a]||n[o]===n[a]&&i[e]<=i[t]},Ld=(n,e,t)=>{const i=n.heap[t];let o=t<<1;for(;o<=n.heap_len&&(o<n.heap_len&&Y0(e,n.heap[o+1],n.heap[o],n.depth)&&o++,!Y0(e,i,n.heap[o],n.depth));)n.heap[t]=n.heap[o],t=o,o<<=1;n.heap[t]=i},J0=(n,e,t)=>{let i,o,a=0,d,h;if(n.sym_next!==0)do i=n.pending_buf[n.sym_buf+a++]&255,i+=(n.pending_buf[n.sym_buf+a++]&255)<<8,o=n.pending_buf[n.sym_buf+a++],i===0?qn(n,o,e):(d=wa[o],qn(n,d+Ua+1,e),h=oh[d],h!==0&&(o-=Zh[d],Kt(n,o,h)),i--,d=HS(i),qn(n,d,t),h=vu[d],h!==0&&(i-=Cu[d],Kt(n,i,h)));while(a<n.sym_next);qn(n,Jh,e)},lh=(n,e)=>{const t=e.dyn_tree,i=e.stat_desc.static_tree,o=e.stat_desc.has_stree,a=e.stat_desc.elems;let d,h,p=-1,m;for(n.heap_len=0,n.heap_max=LS,d=0;d<a;d++)t[d*2]!==0?(n.heap[++n.heap_len]=p=d,n.depth[d]=0):t[d*2+1]=0;for(;n.heap_len<2;)m=n.heap[++n.heap_len]=p<2?++p:0,t[m*2]=1,n.depth[m]=0,n.opt_len--,o&&(n.static_len-=i[m*2+1]);for(e.max_code=p,d=n.heap_len>>1;d>=1;d--)Ld(n,t,d);m=a;do d=n.heap[1],n.heap[1]=n.heap[n.heap_len--],Ld(n,t,1),h=n.heap[1],n.heap[--n.heap_max]=d,n.heap[--n.heap_max]=h,t[m*2]=t[d*2]+t[h*2],n.depth[m]=(n.depth[d]>=n.depth[h]?n.depth[d]:n.depth[h])+1,t[d*2+1]=t[h*2+1]=m,n.heap[1]=m++,Ld(n,t,1);while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],iw(n,e),$S(t,p,n.bl_count)},Z0=(n,e,t)=>{let i,o=-1,a,d=e[0*2+1],h=0,p=7,m=4;for(d===0&&(p=138,m=3),e[(t+1)*2+1]=65535,i=0;i<=t;i++)a=d,d=e[(i+1)*2+1],!(++h<p&&a===d)&&(h<m?n.bl_tree[a*2]+=h:a!==0?(a!==o&&n.bl_tree[a*2]++,n.bl_tree[US*2]++):h<=10?n.bl_tree[VS*2]++:n.bl_tree[OS*2]++,h=0,o=a,d===0?(p=138,m=3):a===d?(p=6,m=3):(p=7,m=4))},K0=(n,e,t)=>{let i,o=-1,a,d=e[0*2+1],h=0,p=7,m=4;for(d===0&&(p=138,m=3),i=0;i<=t;i++)if(a=d,d=e[(i+1)*2+1],!(++h<p&&a===d)){if(h<m)do qn(n,a,n.bl_tree);while(--h!==0);else a!==0?(a!==o&&(qn(n,a,n.bl_tree),h--),qn(n,US,n.bl_tree),Kt(n,h-3,2)):h<=10?(qn(n,VS,n.bl_tree),Kt(n,h-3,3)):(qn(n,OS,n.bl_tree),Kt(n,h-11,7));h=0,o=a,d===0?(p=138,m=3):a===d?(p=6,m=3):(p=7,m=4)}},ow=n=>{let e;for(Z0(n,n.dyn_ltree,n.l_desc.max_code),Z0(n,n.dyn_dtree,n.d_desc.max_code),lh(n,n.bl_desc),e=Yh-1;e>=3&&n.bl_tree[BS[e]*2+1]===0;e--);return n.opt_len+=3*(e+1)+5+5+4,e},lw=(n,e,t,i)=>{let o;for(Kt(n,e-257,5),Kt(n,t-1,5),Kt(n,i-4,4),o=0;o<i;o++)Kt(n,n.bl_tree[BS[o]*2+1],3);K0(n,n.dyn_ltree,e-1),K0(n,n.dyn_dtree,t-1)},aw=n=>{let e=4093624447,t;for(t=0;t<=31;t++,e>>>=1)if(e&1&&n.dyn_ltree[t*2]!==0)return G0;if(n.dyn_ltree[9*2]!==0||n.dyn_ltree[10*2]!==0||n.dyn_ltree[13*2]!==0)return $0;for(t=32;t<Ua;t++)if(n.dyn_ltree[t*2]!==0)return $0;return G0};let X0=!1;const rw=n=>{X0||(sw(),X0=!0),n.l_desc=new zd(n.dyn_ltree,PS),n.d_desc=new zd(n.dyn_dtree,qS),n.bl_desc=new zd(n.bl_tree,FS),n.bi_buf=0,n.bi_valid=0,YS(n)},ZS=(n,e,t,i)=>{Kt(n,(KE<<1)+(i?1:0),3),JS(n),Ma(n,t),Ma(n,~t),t&&n.pending_buf.set(n.window.subarray(e,e+t),n.pending),n.pending+=t},uw=n=>{Kt(n,zS<<1,3),qn(n,Jh,mi),nw(n)},cw=(n,e,t,i)=>{let o,a,d=0;n.level>0?(n.strm.data_type===ZE&&(n.strm.data_type=aw(n)),lh(n,n.l_desc),lh(n,n.d_desc),d=ow(n),o=n.opt_len+3+7>>>3,a=n.static_len+3+7>>>3,a<=o&&(o=a)):o=a=t+5,t+4<=o&&e!==-1?ZS(n,e,t,i):n.strategy===JE||a===o?(Kt(n,(zS<<1)+(i?1:0),3),J0(n,mi,pa)):(Kt(n,(XE<<1)+(i?1:0),3),lw(n,n.l_desc.max_code+1,n.d_desc.max_code+1,d+1),J0(n,n.dyn_ltree,n.dyn_dtree)),YS(n),i&&JS(n)},fw=(n,e,t)=>(n.pending_buf[n.sym_buf+n.sym_next++]=e,n.pending_buf[n.sym_buf+n.sym_next++]=e>>8,n.pending_buf[n.sym_buf+n.sym_next++]=t,e===0?n.dyn_ltree[t*2]++:(n.matches++,e--,n.dyn_ltree[(wa[t]+Ua+1)*2]++,n.dyn_dtree[HS(e)*2]++),n.sym_next===n.sym_end);var dw=rw,hw=ZS,mw=cw,pw=fw,gw=uw,vw={_tr_init:dw,_tr_stored_block:hw,_tr_flush_block:mw,_tr_tally:pw,_tr_align:gw};const yw=(n,e,t,i)=>{let o=n&65535|0,a=n>>>16&65535|0,d=0;for(;t!==0;){d=t>2e3?2e3:t,t-=d;do o=o+e[i++]|0,a=a+o|0;while(--d);o%=65521,a%=65521}return o|a<<16|0};var Aa=yw;const _w=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var i=0;i<8;i++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},Sw=new Uint32Array(_w()),Tw=(n,e,t,i)=>{const o=Sw,a=i+t;n^=-1;for(let d=i;d<a;d++)n=n>>>8^o[(n^e[d])&255];return n^-1};var bt=Tw,zs={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Va={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:bw,_tr_stored_block:ah,_tr_flush_block:Cw,_tr_tally:Qi,_tr_align:xw}=vw,{Z_NO_FLUSH:ji,Z_PARTIAL_FLUSH:Ew,Z_FULL_FLUSH:ww,Z_FINISH:Sn,Z_BLOCK:W0,Z_OK:At,Z_STREAM_END:Q0,Z_STREAM_ERROR:$n,Z_DATA_ERROR:Mw,Z_BUF_ERROR:Ud,Z_DEFAULT_COMPRESSION:Aw,Z_FILTERED:Rw,Z_HUFFMAN_ONLY:ru,Z_RLE:Nw,Z_FIXED:Dw,Z_DEFAULT_STRATEGY:kw,Z_UNKNOWN:Iw,Z_DEFLATED:Pu}=Va,zw=9,Lw=15,Uw=8,Vw=29,Ow=256,rh=Ow+1+Vw,Bw=30,Pw=19,qw=2*rh+1,Fw=15,Le=3,Wi=258,Yn=Wi+Le+1,Hw=32,Zo=42,Kh=57,uh=69,ch=73,fh=91,dh=103,Ms=113,aa=666,Pt=1,nl=2,Ls=3,il=4,Gw=3,As=(n,e)=>(n.msg=zs[e],e),j0=n=>n*2-(n>4?9:0),Xi=n=>{let e=n.length;for(;--e>=0;)n[e]=0},$w=n=>{let e,t,i,o=n.w_size;e=n.hash_size,i=e;do t=n.head[--i],n.head[i]=t>=o?t-o:0;while(--e);e=o,i=e;do t=n.prev[--i],n.prev[i]=t>=o?t-o:0;while(--e)};let Yw=(n,e,t)=>(e<<n.hash_shift^t)&n.hash_mask,es=Yw;const ln=n=>{const e=n.state;let t=e.pending;t>n.avail_out&&(t=n.avail_out),t!==0&&(n.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+t),n.next_out),n.next_out+=t,e.pending_out+=t,n.total_out+=t,n.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))},an=(n,e)=>{Cw(n,n.block_start>=0?n.block_start:-1,n.strstart-n.block_start,e),n.block_start=n.strstart,ln(n.strm)},qe=(n,e)=>{n.pending_buf[n.pending++]=e},oa=(n,e)=>{n.pending_buf[n.pending++]=e>>>8&255,n.pending_buf[n.pending++]=e&255},hh=(n,e,t,i)=>{let o=n.avail_in;return o>i&&(o=i),o===0?0:(n.avail_in-=o,e.set(n.input.subarray(n.next_in,n.next_in+o),t),n.state.wrap===1?n.adler=Aa(n.adler,e,o,t):n.state.wrap===2&&(n.adler=bt(n.adler,e,o,t)),n.next_in+=o,n.total_in+=o,o)},KS=(n,e)=>{let t=n.max_chain_length,i=n.strstart,o,a,d=n.prev_length,h=n.nice_match;const p=n.strstart>n.w_size-Yn?n.strstart-(n.w_size-Yn):0,m=n.window,v=n.w_mask,_=n.prev,S=n.strstart+Wi;let b=m[i+d-1],x=m[i+d];n.prev_length>=n.good_match&&(t>>=2),h>n.lookahead&&(h=n.lookahead);do if(o=e,!(m[o+d]!==x||m[o+d-1]!==b||m[o]!==m[i]||m[++o]!==m[i+1])){i+=2,o++;do;while(m[++i]===m[++o]&&m[++i]===m[++o]&&m[++i]===m[++o]&&m[++i]===m[++o]&&m[++i]===m[++o]&&m[++i]===m[++o]&&m[++i]===m[++o]&&m[++i]===m[++o]&&i<S);if(a=Wi-(S-i),i=S-Wi,a>d){if(n.match_start=e,d=a,a>=h)break;b=m[i+d-1],x=m[i+d]}}while((e=_[e&v])>p&&--t!==0);return d<=n.lookahead?d:n.lookahead},Ko=n=>{const e=n.w_size;let t,i,o;do{if(i=n.window_size-n.lookahead-n.strstart,n.strstart>=e+(e-Yn)&&(n.window.set(n.window.subarray(e,e+e-i),0),n.match_start-=e,n.strstart-=e,n.block_start-=e,n.insert>n.strstart&&(n.insert=n.strstart),$w(n),i+=e),n.strm.avail_in===0)break;if(t=hh(n.strm,n.window,n.strstart+n.lookahead,i),n.lookahead+=t,n.lookahead+n.insert>=Le)for(o=n.strstart-n.insert,n.ins_h=n.window[o],n.ins_h=es(n,n.ins_h,n.window[o+1]);n.insert&&(n.ins_h=es(n,n.ins_h,n.window[o+Le-1]),n.prev[o&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=o,o++,n.insert--,!(n.lookahead+n.insert<Le)););}while(n.lookahead<Yn&&n.strm.avail_in!==0)},XS=(n,e)=>{let t=n.pending_buf_size-5>n.w_size?n.w_size:n.pending_buf_size-5,i,o,a,d=0,h=n.strm.avail_in;do{if(i=65535,a=n.bi_valid+42>>3,n.strm.avail_out<a||(a=n.strm.avail_out-a,o=n.strstart-n.block_start,i>o+n.strm.avail_in&&(i=o+n.strm.avail_in),i>a&&(i=a),i<t&&(i===0&&e!==Sn||e===ji||i!==o+n.strm.avail_in)))break;d=e===Sn&&i===o+n.strm.avail_in?1:0,ah(n,0,0,d),n.pending_buf[n.pending-4]=i,n.pending_buf[n.pending-3]=i>>8,n.pending_buf[n.pending-2]=~i,n.pending_buf[n.pending-1]=~i>>8,ln(n.strm),o&&(o>i&&(o=i),n.strm.output.set(n.window.subarray(n.block_start,n.block_start+o),n.strm.next_out),n.strm.next_out+=o,n.strm.avail_out-=o,n.strm.total_out+=o,n.block_start+=o,i-=o),i&&(hh(n.strm,n.strm.output,n.strm.next_out,i),n.strm.next_out+=i,n.strm.avail_out-=i,n.strm.total_out+=i)}while(d===0);return h-=n.strm.avail_in,h&&(h>=n.w_size?(n.matches=2,n.window.set(n.strm.input.subarray(n.strm.next_in-n.w_size,n.strm.next_in),0),n.strstart=n.w_size,n.insert=n.strstart):(n.window_size-n.strstart<=h&&(n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,n.insert>n.strstart&&(n.insert=n.strstart)),n.window.set(n.strm.input.subarray(n.strm.next_in-h,n.strm.next_in),n.strstart),n.strstart+=h,n.insert+=h>n.w_size-n.insert?n.w_size-n.insert:h),n.block_start=n.strstart),n.high_water<n.strstart&&(n.high_water=n.strstart),d?il:e!==ji&&e!==Sn&&n.strm.avail_in===0&&n.strstart===n.block_start?nl:(a=n.window_size-n.strstart,n.strm.avail_in>a&&n.block_start>=n.w_size&&(n.block_start-=n.w_size,n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,a+=n.w_size,n.insert>n.strstart&&(n.insert=n.strstart)),a>n.strm.avail_in&&(a=n.strm.avail_in),a&&(hh(n.strm,n.window,n.strstart,a),n.strstart+=a,n.insert+=a>n.w_size-n.insert?n.w_size-n.insert:a),n.high_water<n.strstart&&(n.high_water=n.strstart),a=n.bi_valid+42>>3,a=n.pending_buf_size-a>65535?65535:n.pending_buf_size-a,t=a>n.w_size?n.w_size:a,o=n.strstart-n.block_start,(o>=t||(o||e===Sn)&&e!==ji&&n.strm.avail_in===0&&o<=a)&&(i=o>a?a:o,d=e===Sn&&n.strm.avail_in===0&&i===o?1:0,ah(n,n.block_start,i,d),n.block_start+=i,ln(n.strm)),d?Ls:Pt)},Vd=(n,e)=>{let t,i;for(;;){if(n.lookahead<Yn){if(Ko(n),n.lookahead<Yn&&e===ji)return Pt;if(n.lookahead===0)break}if(t=0,n.lookahead>=Le&&(n.ins_h=es(n,n.ins_h,n.window[n.strstart+Le-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),t!==0&&n.strstart-t<=n.w_size-Yn&&(n.match_length=KS(n,t)),n.match_length>=Le)if(i=Qi(n,n.strstart-n.match_start,n.match_length-Le),n.lookahead-=n.match_length,n.match_length<=n.max_lazy_match&&n.lookahead>=Le){n.match_length--;do n.strstart++,n.ins_h=es(n,n.ins_h,n.window[n.strstart+Le-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart;while(--n.match_length!==0);n.strstart++}else n.strstart+=n.match_length,n.match_length=0,n.ins_h=n.window[n.strstart],n.ins_h=es(n,n.ins_h,n.window[n.strstart+1]);else i=Qi(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++;if(i&&(an(n,!1),n.strm.avail_out===0))return Pt}return n.insert=n.strstart<Le-1?n.strstart:Le-1,e===Sn?(an(n,!0),n.strm.avail_out===0?Ls:il):n.sym_next&&(an(n,!1),n.strm.avail_out===0)?Pt:nl},Lo=(n,e)=>{let t,i,o;for(;;){if(n.lookahead<Yn){if(Ko(n),n.lookahead<Yn&&e===ji)return Pt;if(n.lookahead===0)break}if(t=0,n.lookahead>=Le&&(n.ins_h=es(n,n.ins_h,n.window[n.strstart+Le-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),n.prev_length=n.match_length,n.prev_match=n.match_start,n.match_length=Le-1,t!==0&&n.prev_length<n.max_lazy_match&&n.strstart-t<=n.w_size-Yn&&(n.match_length=KS(n,t),n.match_length<=5&&(n.strategy===Rw||n.match_length===Le&&n.strstart-n.match_start>4096)&&(n.match_length=Le-1)),n.prev_length>=Le&&n.match_length<=n.prev_length){o=n.strstart+n.lookahead-Le,i=Qi(n,n.strstart-1-n.prev_match,n.prev_length-Le),n.lookahead-=n.prev_length-1,n.prev_length-=2;do++n.strstart<=o&&(n.ins_h=es(n,n.ins_h,n.window[n.strstart+Le-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart);while(--n.prev_length!==0);if(n.match_available=0,n.match_length=Le-1,n.strstart++,i&&(an(n,!1),n.strm.avail_out===0))return Pt}else if(n.match_available){if(i=Qi(n,0,n.window[n.strstart-1]),i&&an(n,!1),n.strstart++,n.lookahead--,n.strm.avail_out===0)return Pt}else n.match_available=1,n.strstart++,n.lookahead--}return n.match_available&&(i=Qi(n,0,n.window[n.strstart-1]),n.match_available=0),n.insert=n.strstart<Le-1?n.strstart:Le-1,e===Sn?(an(n,!0),n.strm.avail_out===0?Ls:il):n.sym_next&&(an(n,!1),n.strm.avail_out===0)?Pt:nl},Jw=(n,e)=>{let t,i,o,a;const d=n.window;for(;;){if(n.lookahead<=Wi){if(Ko(n),n.lookahead<=Wi&&e===ji)return Pt;if(n.lookahead===0)break}if(n.match_length=0,n.lookahead>=Le&&n.strstart>0&&(o=n.strstart-1,i=d[o],i===d[++o]&&i===d[++o]&&i===d[++o])){a=n.strstart+Wi;do;while(i===d[++o]&&i===d[++o]&&i===d[++o]&&i===d[++o]&&i===d[++o]&&i===d[++o]&&i===d[++o]&&i===d[++o]&&o<a);n.match_length=Wi-(a-o),n.match_length>n.lookahead&&(n.match_length=n.lookahead)}if(n.match_length>=Le?(t=Qi(n,1,n.match_length-Le),n.lookahead-=n.match_length,n.strstart+=n.match_length,n.match_length=0):(t=Qi(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++),t&&(an(n,!1),n.strm.avail_out===0))return Pt}return n.insert=0,e===Sn?(an(n,!0),n.strm.avail_out===0?Ls:il):n.sym_next&&(an(n,!1),n.strm.avail_out===0)?Pt:nl},Zw=(n,e)=>{let t;for(;;){if(n.lookahead===0&&(Ko(n),n.lookahead===0)){if(e===ji)return Pt;break}if(n.match_length=0,t=Qi(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++,t&&(an(n,!1),n.strm.avail_out===0))return Pt}return n.insert=0,e===Sn?(an(n,!0),n.strm.avail_out===0?Ls:il):n.sym_next&&(an(n,!1),n.strm.avail_out===0)?Pt:nl};function Bn(n,e,t,i,o){this.good_length=n,this.max_lazy=e,this.nice_length=t,this.max_chain=i,this.func=o}const ra=[new Bn(0,0,0,0,XS),new Bn(4,4,8,4,Vd),new Bn(4,5,16,8,Vd),new Bn(4,6,32,32,Vd),new Bn(4,4,16,16,Lo),new Bn(8,16,32,32,Lo),new Bn(8,16,128,128,Lo),new Bn(8,32,128,256,Lo),new Bn(32,128,258,1024,Lo),new Bn(32,258,258,4096,Lo)],Kw=n=>{n.window_size=2*n.w_size,Xi(n.head),n.max_lazy_match=ra[n.level].max_lazy,n.good_match=ra[n.level].good_length,n.nice_match=ra[n.level].nice_length,n.max_chain_length=ra[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=Le-1,n.match_available=0,n.ins_h=0};function Xw(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Pu,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(qw*2),this.dyn_dtree=new Uint16Array((2*Bw+1)*2),this.bl_tree=new Uint16Array((2*Pw+1)*2),Xi(this.dyn_ltree),Xi(this.dyn_dtree),Xi(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Fw+1),this.heap=new Uint16Array(2*rh+1),Xi(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*rh+1),Xi(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Oa=n=>{if(!n)return 1;const e=n.state;return!e||e.strm!==n||e.status!==Zo&&e.status!==Kh&&e.status!==uh&&e.status!==ch&&e.status!==fh&&e.status!==dh&&e.status!==Ms&&e.status!==aa?1:0},WS=n=>{if(Oa(n))return As(n,$n);n.total_in=n.total_out=0,n.data_type=Iw;const e=n.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?Kh:e.wrap?Zo:Ms,n.adler=e.wrap===2?0:1,e.last_flush=-2,bw(e),At},QS=n=>{const e=WS(n);return e===At&&Kw(n.state),e},Ww=(n,e)=>Oa(n)||n.state.wrap!==2?$n:(n.state.gzhead=e,At),jS=(n,e,t,i,o,a)=>{if(!n)return $n;let d=1;if(e===Aw&&(e=6),i<0?(d=0,i=-i):i>15&&(d=2,i-=16),o<1||o>zw||t!==Pu||i<8||i>15||e<0||e>9||a<0||a>Dw||i===8&&d!==1)return As(n,$n);i===8&&(i=9);const h=new Xw;return n.state=h,h.strm=n,h.status=Zo,h.wrap=d,h.gzhead=null,h.w_bits=i,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=o+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+Le-1)/Le),h.window=new Uint8Array(h.w_size*2),h.head=new Uint16Array(h.hash_size),h.prev=new Uint16Array(h.w_size),h.lit_bufsize=1<<o+6,h.pending_buf_size=h.lit_bufsize*4,h.pending_buf=new Uint8Array(h.pending_buf_size),h.sym_buf=h.lit_bufsize,h.sym_end=(h.lit_bufsize-1)*3,h.level=e,h.strategy=a,h.method=t,QS(n)},Qw=(n,e)=>jS(n,e,Pu,Lw,Uw,kw),jw=(n,e)=>{if(Oa(n)||e>W0||e<0)return n?As(n,$n):$n;const t=n.state;if(!n.output||n.avail_in!==0&&!n.input||t.status===aa&&e!==Sn)return As(n,n.avail_out===0?Ud:$n);const i=t.last_flush;if(t.last_flush=e,t.pending!==0){if(ln(n),n.avail_out===0)return t.last_flush=-1,At}else if(n.avail_in===0&&j0(e)<=j0(i)&&e!==Sn)return As(n,Ud);if(t.status===aa&&n.avail_in!==0)return As(n,Ud);if(t.status===Zo&&t.wrap===0&&(t.status=Ms),t.status===Zo){let o=Pu+(t.w_bits-8<<4)<<8,a=-1;if(t.strategy>=ru||t.level<2?a=0:t.level<6?a=1:t.level===6?a=2:a=3,o|=a<<6,t.strstart!==0&&(o|=Hw),o+=31-o%31,oa(t,o),t.strstart!==0&&(oa(t,n.adler>>>16),oa(t,n.adler&65535)),n.adler=1,t.status=Ms,ln(n),t.pending!==0)return t.last_flush=-1,At}if(t.status===Kh){if(n.adler=0,qe(t,31),qe(t,139),qe(t,8),t.gzhead)qe(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),qe(t,t.gzhead.time&255),qe(t,t.gzhead.time>>8&255),qe(t,t.gzhead.time>>16&255),qe(t,t.gzhead.time>>24&255),qe(t,t.level===9?2:t.strategy>=ru||t.level<2?4:0),qe(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(qe(t,t.gzhead.extra.length&255),qe(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(n.adler=bt(n.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=uh;else if(qe(t,0),qe(t,0),qe(t,0),qe(t,0),qe(t,0),qe(t,t.level===9?2:t.strategy>=ru||t.level<2?4:0),qe(t,Gw),t.status=Ms,ln(n),t.pending!==0)return t.last_flush=-1,At}if(t.status===uh){if(t.gzhead.extra){let o=t.pending,a=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+a>t.pending_buf_size;){let h=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+h),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>o&&(n.adler=bt(n.adler,t.pending_buf,t.pending-o,o)),t.gzindex+=h,ln(n),t.pending!==0)return t.last_flush=-1,At;o=0,a-=h}let d=new Uint8Array(t.gzhead.extra);t.pending_buf.set(d.subarray(t.gzindex,t.gzindex+a),t.pending),t.pending+=a,t.gzhead.hcrc&&t.pending>o&&(n.adler=bt(n.adler,t.pending_buf,t.pending-o,o)),t.gzindex=0}t.status=ch}if(t.status===ch){if(t.gzhead.name){let o=t.pending,a;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>o&&(n.adler=bt(n.adler,t.pending_buf,t.pending-o,o)),ln(n),t.pending!==0)return t.last_flush=-1,At;o=0}t.gzindex<t.gzhead.name.length?a=t.gzhead.name.charCodeAt(t.gzindex++)&255:a=0,qe(t,a)}while(a!==0);t.gzhead.hcrc&&t.pending>o&&(n.adler=bt(n.adler,t.pending_buf,t.pending-o,o)),t.gzindex=0}t.status=fh}if(t.status===fh){if(t.gzhead.comment){let o=t.pending,a;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>o&&(n.adler=bt(n.adler,t.pending_buf,t.pending-o,o)),ln(n),t.pending!==0)return t.last_flush=-1,At;o=0}t.gzindex<t.gzhead.comment.length?a=t.gzhead.comment.charCodeAt(t.gzindex++)&255:a=0,qe(t,a)}while(a!==0);t.gzhead.hcrc&&t.pending>o&&(n.adler=bt(n.adler,t.pending_buf,t.pending-o,o))}t.status=dh}if(t.status===dh){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(ln(n),t.pending!==0))return t.last_flush=-1,At;qe(t,n.adler&255),qe(t,n.adler>>8&255),n.adler=0}if(t.status=Ms,ln(n),t.pending!==0)return t.last_flush=-1,At}if(n.avail_in!==0||t.lookahead!==0||e!==ji&&t.status!==aa){let o=t.level===0?XS(t,e):t.strategy===ru?Zw(t,e):t.strategy===Nw?Jw(t,e):ra[t.level].func(t,e);if((o===Ls||o===il)&&(t.status=aa),o===Pt||o===Ls)return n.avail_out===0&&(t.last_flush=-1),At;if(o===nl&&(e===Ew?xw(t):e!==W0&&(ah(t,0,0,!1),e===ww&&(Xi(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),ln(n),n.avail_out===0))return t.last_flush=-1,At}return e!==Sn?At:t.wrap<=0?Q0:(t.wrap===2?(qe(t,n.adler&255),qe(t,n.adler>>8&255),qe(t,n.adler>>16&255),qe(t,n.adler>>24&255),qe(t,n.total_in&255),qe(t,n.total_in>>8&255),qe(t,n.total_in>>16&255),qe(t,n.total_in>>24&255)):(oa(t,n.adler>>>16),oa(t,n.adler&65535)),ln(n),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?At:Q0)},eM=n=>{if(Oa(n))return $n;const e=n.state.status;return n.state=null,e===Ms?As(n,Mw):At},tM=(n,e)=>{let t=e.length;if(Oa(n))return $n;const i=n.state,o=i.wrap;if(o===2||o===1&&i.status!==Zo||i.lookahead)return $n;if(o===1&&(n.adler=Aa(n.adler,e,t,0)),i.wrap=0,t>=i.w_size){o===0&&(Xi(i.head),i.strstart=0,i.block_start=0,i.insert=0);let p=new Uint8Array(i.w_size);p.set(e.subarray(t-i.w_size,t),0),e=p,t=i.w_size}const a=n.avail_in,d=n.next_in,h=n.input;for(n.avail_in=t,n.next_in=0,n.input=e,Ko(i);i.lookahead>=Le;){let p=i.strstart,m=i.lookahead-(Le-1);do i.ins_h=es(i,i.ins_h,i.window[p+Le-1]),i.prev[p&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=p,p++;while(--m);i.strstart=p,i.lookahead=Le-1,Ko(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=Le-1,i.match_available=0,n.next_in=d,n.input=h,n.avail_in=a,i.wrap=o,At};var nM=Qw,iM=jS,sM=QS,oM=WS,lM=Ww,aM=jw,rM=eM,uM=tM,cM="pako deflate (from Nodeca project)",ga={deflateInit:nM,deflateInit2:iM,deflateReset:sM,deflateResetKeep:oM,deflateSetHeader:lM,deflate:aM,deflateEnd:rM,deflateSetDictionary:uM,deflateInfo:cM};const fM=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var dM=function(n){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const i in t)fM(t,i)&&(n[i]=t[i])}}return n},hM=n=>{let e=0;for(let i=0,o=n.length;i<o;i++)e+=n[i].length;const t=new Uint8Array(e);for(let i=0,o=0,a=n.length;i<a;i++){let d=n[i];t.set(d,o),o+=d.length}return t},qu={assign:dM,flattenChunks:hM};let eT=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{eT=!1}const Ra=new Uint8Array(256);for(let n=0;n<256;n++)Ra[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;Ra[254]=Ra[254]=1;var mM=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,i,o,a,d=n.length,h=0;for(o=0;o<d;o++)t=n.charCodeAt(o),(t&64512)===55296&&o+1<d&&(i=n.charCodeAt(o+1),(i&64512)===56320&&(t=65536+(t-55296<<10)+(i-56320),o++)),h+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(h),a=0,o=0;a<h;o++)t=n.charCodeAt(o),(t&64512)===55296&&o+1<d&&(i=n.charCodeAt(o+1),(i&64512)===56320&&(t=65536+(t-55296<<10)+(i-56320),o++)),t<128?e[a++]=t:t<2048?(e[a++]=192|t>>>6,e[a++]=128|t&63):t<65536?(e[a++]=224|t>>>12,e[a++]=128|t>>>6&63,e[a++]=128|t&63):(e[a++]=240|t>>>18,e[a++]=128|t>>>12&63,e[a++]=128|t>>>6&63,e[a++]=128|t&63);return e};const pM=(n,e)=>{if(e<65534&&n.subarray&&eT)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let i=0;i<e;i++)t+=String.fromCharCode(n[i]);return t};var gM=(n,e)=>{const t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let i,o;const a=new Array(t*2);for(o=0,i=0;i<t;){let d=n[i++];if(d<128){a[o++]=d;continue}let h=Ra[d];if(h>4){a[o++]=65533,i+=h-1;continue}for(d&=h===2?31:h===3?15:7;h>1&&i<t;)d=d<<6|n[i++]&63,h--;if(h>1){a[o++]=65533;continue}d<65536?a[o++]=d:(d-=65536,a[o++]=55296|d>>10&1023,a[o++]=56320|d&1023)}return pM(a,o)},vM=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+Ra[n[t]]>e?t:e},Na={string2buf:mM,buf2string:gM,utf8border:vM};function yM(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var tT=yM;const nT=Object.prototype.toString,{Z_NO_FLUSH:_M,Z_SYNC_FLUSH:SM,Z_FULL_FLUSH:TM,Z_FINISH:bM,Z_OK:xu,Z_STREAM_END:CM,Z_DEFAULT_COMPRESSION:xM,Z_DEFAULT_STRATEGY:EM,Z_DEFLATED:wM}=Va;function Ba(n){this.options=qu.assign({level:xM,method:wM,chunkSize:16384,windowBits:15,memLevel:8,strategy:EM},n||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new tT,this.strm.avail_out=0;let t=ga.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==xu)throw new Error(zs[t]);if(e.header&&ga.deflateSetHeader(this.strm,e.header),e.dictionary){let i;if(typeof e.dictionary=="string"?i=Na.string2buf(e.dictionary):nT.call(e.dictionary)==="[object ArrayBuffer]"?i=new Uint8Array(e.dictionary):i=e.dictionary,t=ga.deflateSetDictionary(this.strm,i),t!==xu)throw new Error(zs[t]);this._dict_set=!0}}Ba.prototype.push=function(n,e){const t=this.strm,i=this.options.chunkSize;let o,a;if(this.ended)return!1;for(e===~~e?a=e:a=e===!0?bM:_M,typeof n=="string"?t.input=Na.string2buf(n):nT.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(i),t.next_out=0,t.avail_out=i),(a===SM||a===TM)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(o=ga.deflate(t,a),o===CM)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),o=ga.deflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===xu;if(t.avail_out===0){this.onData(t.output);continue}if(a>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};Ba.prototype.onData=function(n){this.chunks.push(n)};Ba.prototype.onEnd=function(n){n===xu&&(this.result=qu.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function Xh(n,e){const t=new Ba(e);if(t.push(n,!0),t.err)throw t.msg||zs[t.err];return t.result}function MM(n,e){return e=e||{},e.raw=!0,Xh(n,e)}function AM(n,e){return e=e||{},e.gzip=!0,Xh(n,e)}var RM=Ba,NM=Xh,DM=MM,kM=AM,IM={Deflate:RM,deflate:NM,deflateRaw:DM,gzip:kM};const uu=16209,zM=16191;var LM=function(e,t){let i,o,a,d,h,p,m,v,_,S,b,x,E,D,I,B,q,R,U,Y,G,ne,K,X;const ee=e.state;i=e.next_in,K=e.input,o=i+(e.avail_in-5),a=e.next_out,X=e.output,d=a-(t-e.avail_out),h=a+(e.avail_out-257),p=ee.dmax,m=ee.wsize,v=ee.whave,_=ee.wnext,S=ee.window,b=ee.hold,x=ee.bits,E=ee.lencode,D=ee.distcode,I=(1<<ee.lenbits)-1,B=(1<<ee.distbits)-1;e:do{x<15&&(b+=K[i++]<<x,x+=8,b+=K[i++]<<x,x+=8),q=E[b&I];t:for(;;){if(R=q>>>24,b>>>=R,x-=R,R=q>>>16&255,R===0)X[a++]=q&65535;else if(R&16){U=q&65535,R&=15,R&&(x<R&&(b+=K[i++]<<x,x+=8),U+=b&(1<<R)-1,b>>>=R,x-=R),x<15&&(b+=K[i++]<<x,x+=8,b+=K[i++]<<x,x+=8),q=D[b&B];n:for(;;){if(R=q>>>24,b>>>=R,x-=R,R=q>>>16&255,R&16){if(Y=q&65535,R&=15,x<R&&(b+=K[i++]<<x,x+=8,x<R&&(b+=K[i++]<<x,x+=8)),Y+=b&(1<<R)-1,Y>p){e.msg="invalid distance too far back",ee.mode=uu;break e}if(b>>>=R,x-=R,R=a-d,Y>R){if(R=Y-R,R>v&&ee.sane){e.msg="invalid distance too far back",ee.mode=uu;break e}if(G=0,ne=S,_===0){if(G+=m-R,R<U){U-=R;do X[a++]=S[G++];while(--R);G=a-Y,ne=X}}else if(_<R){if(G+=m+_-R,R-=_,R<U){U-=R;do X[a++]=S[G++];while(--R);if(G=0,_<U){R=_,U-=R;do X[a++]=S[G++];while(--R);G=a-Y,ne=X}}}else if(G+=_-R,R<U){U-=R;do X[a++]=S[G++];while(--R);G=a-Y,ne=X}for(;U>2;)X[a++]=ne[G++],X[a++]=ne[G++],X[a++]=ne[G++],U-=3;U&&(X[a++]=ne[G++],U>1&&(X[a++]=ne[G++]))}else{G=a-Y;do X[a++]=X[G++],X[a++]=X[G++],X[a++]=X[G++],U-=3;while(U>2);U&&(X[a++]=X[G++],U>1&&(X[a++]=X[G++]))}}else if((R&64)===0){q=D[(q&65535)+(b&(1<<R)-1)];continue n}else{e.msg="invalid distance code",ee.mode=uu;break e}break}}else if((R&64)===0){q=E[(q&65535)+(b&(1<<R)-1)];continue t}else if(R&32){ee.mode=zM;break e}else{e.msg="invalid literal/length code",ee.mode=uu;break e}break}}while(i<o&&a<h);U=x>>3,i-=U,x-=U<<3,b&=(1<<x)-1,e.next_in=i,e.next_out=a,e.avail_in=i<o?5+(o-i):5-(i-o),e.avail_out=a<h?257+(h-a):257-(a-h),ee.hold=b,ee.bits=x};const Uo=15,ey=852,ty=592,ny=0,Od=1,iy=2,UM=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),VM=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),OM=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),BM=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),PM=(n,e,t,i,o,a,d,h)=>{const p=h.bits;let m=0,v=0,_=0,S=0,b=0,x=0,E=0,D=0,I=0,B=0,q,R,U,Y,G,ne=null,K;const X=new Uint16Array(Uo+1),ee=new Uint16Array(Uo+1);let de=null,Ee,ke,be;for(m=0;m<=Uo;m++)X[m]=0;for(v=0;v<i;v++)X[e[t+v]]++;for(b=p,S=Uo;S>=1&&X[S]===0;S--);if(b>S&&(b=S),S===0)return o[a++]=1<<24|64<<16|0,o[a++]=1<<24|64<<16|0,h.bits=1,0;for(_=1;_<S&&X[_]===0;_++);for(b<_&&(b=_),D=1,m=1;m<=Uo;m++)if(D<<=1,D-=X[m],D<0)return-1;if(D>0&&(n===ny||S!==1))return-1;for(ee[1]=0,m=1;m<Uo;m++)ee[m+1]=ee[m]+X[m];for(v=0;v<i;v++)e[t+v]!==0&&(d[ee[e[t+v]]++]=v);if(n===ny?(ne=de=d,K=20):n===Od?(ne=UM,de=VM,K=257):(ne=OM,de=BM,K=0),B=0,v=0,m=_,G=a,x=b,E=0,U=-1,I=1<<b,Y=I-1,n===Od&&I>ey||n===iy&&I>ty)return 1;for(;;){Ee=m-E,d[v]+1<K?(ke=0,be=d[v]):d[v]>=K?(ke=de[d[v]-K],be=ne[d[v]-K]):(ke=96,be=0),q=1<<m-E,R=1<<x,_=R;do R-=q,o[G+(B>>E)+R]=Ee<<24|ke<<16|be|0;while(R!==0);for(q=1<<m-1;B&q;)q>>=1;if(q!==0?(B&=q-1,B+=q):B=0,v++,--X[m]===0){if(m===S)break;m=e[t+d[v]]}if(m>b&&(B&Y)!==U){for(E===0&&(E=b),G+=_,x=m-E,D=1<<x;x+E<S&&(D-=X[x+E],!(D<=0));)x++,D<<=1;if(I+=1<<x,n===Od&&I>ey||n===iy&&I>ty)return 1;U=B&Y,o[U]=b<<24|x<<16|G-a|0}}return B!==0&&(o[G+B]=m-E<<24|64<<16|0),h.bits=b,0};var va=PM;const qM=0,iT=1,sT=2,{Z_FINISH:sy,Z_BLOCK:FM,Z_TREES:cu,Z_OK:Us,Z_STREAM_END:HM,Z_NEED_DICT:GM,Z_STREAM_ERROR:bn,Z_DATA_ERROR:oT,Z_MEM_ERROR:lT,Z_BUF_ERROR:$M,Z_DEFLATED:oy}=Va,Fu=16180,ly=16181,ay=16182,ry=16183,uy=16184,cy=16185,fy=16186,dy=16187,hy=16188,my=16189,Eu=16190,di=16191,Bd=16192,py=16193,Pd=16194,gy=16195,vy=16196,yy=16197,_y=16198,fu=16199,du=16200,Sy=16201,Ty=16202,by=16203,Cy=16204,xy=16205,qd=16206,Ey=16207,wy=16208,it=16209,aT=16210,rT=16211,YM=852,JM=592,ZM=15,KM=ZM,My=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function XM(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const qs=n=>{if(!n)return 1;const e=n.state;return!e||e.strm!==n||e.mode<Fu||e.mode>rT?1:0},uT=n=>{if(qs(n))return bn;const e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=Fu,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(YM),e.distcode=e.distdyn=new Int32Array(JM),e.sane=1,e.back=-1,Us},cT=n=>{if(qs(n))return bn;const e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,uT(n)},fT=(n,e)=>{let t;if(qs(n))return bn;const i=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?bn:(i.window!==null&&i.wbits!==e&&(i.window=null),i.wrap=t,i.wbits=e,cT(n))},dT=(n,e)=>{if(!n)return bn;const t=new XM;n.state=t,t.strm=n,t.window=null,t.mode=Fu;const i=fT(n,e);return i!==Us&&(n.state=null),i},WM=n=>dT(n,KM);let Ay=!0,Fd,Hd;const QM=n=>{if(Ay){Fd=new Int32Array(512),Hd=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(va(iT,n.lens,0,288,Fd,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;va(sT,n.lens,0,32,Hd,0,n.work,{bits:5}),Ay=!1}n.lencode=Fd,n.lenbits=9,n.distcode=Hd,n.distbits=5},hT=(n,e,t,i)=>{let o;const a=n.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),i>=a.wsize?(a.window.set(e.subarray(t-a.wsize,t),0),a.wnext=0,a.whave=a.wsize):(o=a.wsize-a.wnext,o>i&&(o=i),a.window.set(e.subarray(t-i,t-i+o),a.wnext),i-=o,i?(a.window.set(e.subarray(t-i,t),0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0},jM=(n,e)=>{let t,i,o,a,d,h,p,m,v,_,S,b,x,E,D=0,I,B,q,R,U,Y,G,ne;const K=new Uint8Array(4);let X,ee;const de=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(qs(n)||!n.output||!n.input&&n.avail_in!==0)return bn;t=n.state,t.mode===di&&(t.mode=Bd),d=n.next_out,o=n.output,p=n.avail_out,a=n.next_in,i=n.input,h=n.avail_in,m=t.hold,v=t.bits,_=h,S=p,ne=Us;e:for(;;)switch(t.mode){case Fu:if(t.wrap===0){t.mode=Bd;break}for(;v<16;){if(h===0)break e;h--,m+=i[a++]<<v,v+=8}if(t.wrap&2&&m===35615){t.wbits===0&&(t.wbits=15),t.check=0,K[0]=m&255,K[1]=m>>>8&255,t.check=bt(t.check,K,2,0),m=0,v=0,t.mode=ly;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((m&255)<<8)+(m>>8))%31){n.msg="incorrect header check",t.mode=it;break}if((m&15)!==oy){n.msg="unknown compression method",t.mode=it;break}if(m>>>=4,v-=4,G=(m&15)+8,t.wbits===0&&(t.wbits=G),G>15||G>t.wbits){n.msg="invalid window size",t.mode=it;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=m&512?my:di,m=0,v=0;break;case ly:for(;v<16;){if(h===0)break e;h--,m+=i[a++]<<v,v+=8}if(t.flags=m,(t.flags&255)!==oy){n.msg="unknown compression method",t.mode=it;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=it;break}t.head&&(t.head.text=m>>8&1),t.flags&512&&t.wrap&4&&(K[0]=m&255,K[1]=m>>>8&255,t.check=bt(t.check,K,2,0)),m=0,v=0,t.mode=ay;case ay:for(;v<32;){if(h===0)break e;h--,m+=i[a++]<<v,v+=8}t.head&&(t.head.time=m),t.flags&512&&t.wrap&4&&(K[0]=m&255,K[1]=m>>>8&255,K[2]=m>>>16&255,K[3]=m>>>24&255,t.check=bt(t.check,K,4,0)),m=0,v=0,t.mode=ry;case ry:for(;v<16;){if(h===0)break e;h--,m+=i[a++]<<v,v+=8}t.head&&(t.head.xflags=m&255,t.head.os=m>>8),t.flags&512&&t.wrap&4&&(K[0]=m&255,K[1]=m>>>8&255,t.check=bt(t.check,K,2,0)),m=0,v=0,t.mode=uy;case uy:if(t.flags&1024){for(;v<16;){if(h===0)break e;h--,m+=i[a++]<<v,v+=8}t.length=m,t.head&&(t.head.extra_len=m),t.flags&512&&t.wrap&4&&(K[0]=m&255,K[1]=m>>>8&255,t.check=bt(t.check,K,2,0)),m=0,v=0}else t.head&&(t.head.extra=null);t.mode=cy;case cy:if(t.flags&1024&&(b=t.length,b>h&&(b=h),b&&(t.head&&(G=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(i.subarray(a,a+b),G)),t.flags&512&&t.wrap&4&&(t.check=bt(t.check,i,b,a)),h-=b,a+=b,t.length-=b),t.length))break e;t.length=0,t.mode=fy;case fy:if(t.flags&2048){if(h===0)break e;b=0;do G=i[a+b++],t.head&&G&&t.length<65536&&(t.head.name+=String.fromCharCode(G));while(G&&b<h);if(t.flags&512&&t.wrap&4&&(t.check=bt(t.check,i,b,a)),h-=b,a+=b,G)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=dy;case dy:if(t.flags&4096){if(h===0)break e;b=0;do G=i[a+b++],t.head&&G&&t.length<65536&&(t.head.comment+=String.fromCharCode(G));while(G&&b<h);if(t.flags&512&&t.wrap&4&&(t.check=bt(t.check,i,b,a)),h-=b,a+=b,G)break e}else t.head&&(t.head.comment=null);t.mode=hy;case hy:if(t.flags&512){for(;v<16;){if(h===0)break e;h--,m+=i[a++]<<v,v+=8}if(t.wrap&4&&m!==(t.check&65535)){n.msg="header crc mismatch",t.mode=it;break}m=0,v=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=di;break;case my:for(;v<32;){if(h===0)break e;h--,m+=i[a++]<<v,v+=8}n.adler=t.check=My(m),m=0,v=0,t.mode=Eu;case Eu:if(t.havedict===0)return n.next_out=d,n.avail_out=p,n.next_in=a,n.avail_in=h,t.hold=m,t.bits=v,GM;n.adler=t.check=1,t.mode=di;case di:if(e===FM||e===cu)break e;case Bd:if(t.last){m>>>=v&7,v-=v&7,t.mode=qd;break}for(;v<3;){if(h===0)break e;h--,m+=i[a++]<<v,v+=8}switch(t.last=m&1,m>>>=1,v-=1,m&3){case 0:t.mode=py;break;case 1:if(QM(t),t.mode=fu,e===cu){m>>>=2,v-=2;break e}break;case 2:t.mode=vy;break;case 3:n.msg="invalid block type",t.mode=it}m>>>=2,v-=2;break;case py:for(m>>>=v&7,v-=v&7;v<32;){if(h===0)break e;h--,m+=i[a++]<<v,v+=8}if((m&65535)!==(m>>>16^65535)){n.msg="invalid stored block lengths",t.mode=it;break}if(t.length=m&65535,m=0,v=0,t.mode=Pd,e===cu)break e;case Pd:t.mode=gy;case gy:if(b=t.length,b){if(b>h&&(b=h),b>p&&(b=p),b===0)break e;o.set(i.subarray(a,a+b),d),h-=b,a+=b,p-=b,d+=b,t.length-=b;break}t.mode=di;break;case vy:for(;v<14;){if(h===0)break e;h--,m+=i[a++]<<v,v+=8}if(t.nlen=(m&31)+257,m>>>=5,v-=5,t.ndist=(m&31)+1,m>>>=5,v-=5,t.ncode=(m&15)+4,m>>>=4,v-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=it;break}t.have=0,t.mode=yy;case yy:for(;t.have<t.ncode;){for(;v<3;){if(h===0)break e;h--,m+=i[a++]<<v,v+=8}t.lens[de[t.have++]]=m&7,m>>>=3,v-=3}for(;t.have<19;)t.lens[de[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,X={bits:t.lenbits},ne=va(qM,t.lens,0,19,t.lencode,0,t.work,X),t.lenbits=X.bits,ne){n.msg="invalid code lengths set",t.mode=it;break}t.have=0,t.mode=_y;case _y:for(;t.have<t.nlen+t.ndist;){for(;D=t.lencode[m&(1<<t.lenbits)-1],I=D>>>24,B=D>>>16&255,q=D&65535,!(I<=v);){if(h===0)break e;h--,m+=i[a++]<<v,v+=8}if(q<16)m>>>=I,v-=I,t.lens[t.have++]=q;else{if(q===16){for(ee=I+2;v<ee;){if(h===0)break e;h--,m+=i[a++]<<v,v+=8}if(m>>>=I,v-=I,t.have===0){n.msg="invalid bit length repeat",t.mode=it;break}G=t.lens[t.have-1],b=3+(m&3),m>>>=2,v-=2}else if(q===17){for(ee=I+3;v<ee;){if(h===0)break e;h--,m+=i[a++]<<v,v+=8}m>>>=I,v-=I,G=0,b=3+(m&7),m>>>=3,v-=3}else{for(ee=I+7;v<ee;){if(h===0)break e;h--,m+=i[a++]<<v,v+=8}m>>>=I,v-=I,G=0,b=11+(m&127),m>>>=7,v-=7}if(t.have+b>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=it;break}for(;b--;)t.lens[t.have++]=G}}if(t.mode===it)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=it;break}if(t.lenbits=9,X={bits:t.lenbits},ne=va(iT,t.lens,0,t.nlen,t.lencode,0,t.work,X),t.lenbits=X.bits,ne){n.msg="invalid literal/lengths set",t.mode=it;break}if(t.distbits=6,t.distcode=t.distdyn,X={bits:t.distbits},ne=va(sT,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,X),t.distbits=X.bits,ne){n.msg="invalid distances set",t.mode=it;break}if(t.mode=fu,e===cu)break e;case fu:t.mode=du;case du:if(h>=6&&p>=258){n.next_out=d,n.avail_out=p,n.next_in=a,n.avail_in=h,t.hold=m,t.bits=v,LM(n,S),d=n.next_out,o=n.output,p=n.avail_out,a=n.next_in,i=n.input,h=n.avail_in,m=t.hold,v=t.bits,t.mode===di&&(t.back=-1);break}for(t.back=0;D=t.lencode[m&(1<<t.lenbits)-1],I=D>>>24,B=D>>>16&255,q=D&65535,!(I<=v);){if(h===0)break e;h--,m+=i[a++]<<v,v+=8}if(B&&(B&240)===0){for(R=I,U=B,Y=q;D=t.lencode[Y+((m&(1<<R+U)-1)>>R)],I=D>>>24,B=D>>>16&255,q=D&65535,!(R+I<=v);){if(h===0)break e;h--,m+=i[a++]<<v,v+=8}m>>>=R,v-=R,t.back+=R}if(m>>>=I,v-=I,t.back+=I,t.length=q,B===0){t.mode=xy;break}if(B&32){t.back=-1,t.mode=di;break}if(B&64){n.msg="invalid literal/length code",t.mode=it;break}t.extra=B&15,t.mode=Sy;case Sy:if(t.extra){for(ee=t.extra;v<ee;){if(h===0)break e;h--,m+=i[a++]<<v,v+=8}t.length+=m&(1<<t.extra)-1,m>>>=t.extra,v-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Ty;case Ty:for(;D=t.distcode[m&(1<<t.distbits)-1],I=D>>>24,B=D>>>16&255,q=D&65535,!(I<=v);){if(h===0)break e;h--,m+=i[a++]<<v,v+=8}if((B&240)===0){for(R=I,U=B,Y=q;D=t.distcode[Y+((m&(1<<R+U)-1)>>R)],I=D>>>24,B=D>>>16&255,q=D&65535,!(R+I<=v);){if(h===0)break e;h--,m+=i[a++]<<v,v+=8}m>>>=R,v-=R,t.back+=R}if(m>>>=I,v-=I,t.back+=I,B&64){n.msg="invalid distance code",t.mode=it;break}t.offset=q,t.extra=B&15,t.mode=by;case by:if(t.extra){for(ee=t.extra;v<ee;){if(h===0)break e;h--,m+=i[a++]<<v,v+=8}t.offset+=m&(1<<t.extra)-1,m>>>=t.extra,v-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=it;break}t.mode=Cy;case Cy:if(p===0)break e;if(b=S-p,t.offset>b){if(b=t.offset-b,b>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=it;break}b>t.wnext?(b-=t.wnext,x=t.wsize-b):x=t.wnext-b,b>t.length&&(b=t.length),E=t.window}else E=o,x=d-t.offset,b=t.length;b>p&&(b=p),p-=b,t.length-=b;do o[d++]=E[x++];while(--b);t.length===0&&(t.mode=du);break;case xy:if(p===0)break e;o[d++]=t.length,p--,t.mode=du;break;case qd:if(t.wrap){for(;v<32;){if(h===0)break e;h--,m|=i[a++]<<v,v+=8}if(S-=p,n.total_out+=S,t.total+=S,t.wrap&4&&S&&(n.adler=t.check=t.flags?bt(t.check,o,S,d-S):Aa(t.check,o,S,d-S)),S=p,t.wrap&4&&(t.flags?m:My(m))!==t.check){n.msg="incorrect data check",t.mode=it;break}m=0,v=0}t.mode=Ey;case Ey:if(t.wrap&&t.flags){for(;v<32;){if(h===0)break e;h--,m+=i[a++]<<v,v+=8}if(t.wrap&4&&m!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=it;break}m=0,v=0}t.mode=wy;case wy:ne=HM;break e;case it:ne=oT;break e;case aT:return lT;case rT:default:return bn}return n.next_out=d,n.avail_out=p,n.next_in=a,n.avail_in=h,t.hold=m,t.bits=v,(t.wsize||S!==n.avail_out&&t.mode<it&&(t.mode<qd||e!==sy))&&hT(n,n.output,n.next_out,S-n.avail_out),_-=n.avail_in,S-=n.avail_out,n.total_in+=_,n.total_out+=S,t.total+=S,t.wrap&4&&S&&(n.adler=t.check=t.flags?bt(t.check,o,S,n.next_out-S):Aa(t.check,o,S,n.next_out-S)),n.data_type=t.bits+(t.last?64:0)+(t.mode===di?128:0)+(t.mode===fu||t.mode===Pd?256:0),(_===0&&S===0||e===sy)&&ne===Us&&(ne=$M),ne},eA=n=>{if(qs(n))return bn;let e=n.state;return e.window&&(e.window=null),n.state=null,Us},tA=(n,e)=>{if(qs(n))return bn;const t=n.state;return(t.wrap&2)===0?bn:(t.head=e,e.done=!1,Us)},nA=(n,e)=>{const t=e.length;let i,o,a;return qs(n)||(i=n.state,i.wrap!==0&&i.mode!==Eu)?bn:i.mode===Eu&&(o=1,o=Aa(o,e,t,0),o!==i.check)?oT:(a=hT(n,e,t,t),a?(i.mode=aT,lT):(i.havedict=1,Us))};var iA=cT,sA=fT,oA=uT,lA=WM,aA=dT,rA=jM,uA=eA,cA=tA,fA=nA,dA="pako inflate (from Nodeca project)",pi={inflateReset:iA,inflateReset2:sA,inflateResetKeep:oA,inflateInit:lA,inflateInit2:aA,inflate:rA,inflateEnd:uA,inflateGetHeader:cA,inflateSetDictionary:fA,inflateInfo:dA};function hA(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var mA=hA;const mT=Object.prototype.toString,{Z_NO_FLUSH:pA,Z_FINISH:gA,Z_OK:Da,Z_STREAM_END:Gd,Z_NEED_DICT:$d,Z_STREAM_ERROR:vA,Z_DATA_ERROR:Ry,Z_MEM_ERROR:yA}=Va;function Pa(n){this.options=qu.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new tT,this.strm.avail_out=0;let t=pi.inflateInit2(this.strm,e.windowBits);if(t!==Da)throw new Error(zs[t]);if(this.header=new mA,pi.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Na.string2buf(e.dictionary):mT.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=pi.inflateSetDictionary(this.strm,e.dictionary),t!==Da)))throw new Error(zs[t])}Pa.prototype.push=function(n,e){const t=this.strm,i=this.options.chunkSize,o=this.options.dictionary;let a,d,h;if(this.ended)return!1;for(e===~~e?d=e:d=e===!0?gA:pA,mT.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(i),t.next_out=0,t.avail_out=i),a=pi.inflate(t,d),a===$d&&o&&(a=pi.inflateSetDictionary(t,o),a===Da?a=pi.inflate(t,d):a===Ry&&(a=$d));t.avail_in>0&&a===Gd&&t.state.wrap>0&&n[t.next_in]!==0;)pi.inflateReset(t),a=pi.inflate(t,d);switch(a){case vA:case Ry:case $d:case yA:return this.onEnd(a),this.ended=!0,!1}if(h=t.avail_out,t.next_out&&(t.avail_out===0||a===Gd))if(this.options.to==="string"){let p=Na.utf8border(t.output,t.next_out),m=t.next_out-p,v=Na.buf2string(t.output,p);t.next_out=m,t.avail_out=i-m,m&&t.output.set(t.output.subarray(p,p+m),0),this.onData(v)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(a===Da&&h===0)){if(a===Gd)return a=pi.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Pa.prototype.onData=function(n){this.chunks.push(n)};Pa.prototype.onEnd=function(n){n===Da&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=qu.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function Wh(n,e){const t=new Pa(e);if(t.push(n),t.err)throw t.msg||zs[t.err];return t.result}function _A(n,e){return e=e||{},e.raw=!0,Wh(n,e)}var SA=Pa,TA=Wh,bA=_A,CA=Wh,xA={Inflate:SA,inflate:TA,inflateRaw:bA,ungzip:CA};const{Deflate:EA,deflate:wA,deflateRaw:MA,gzip:AA}=IM,{Inflate:RA,inflate:NA,inflateRaw:DA,ungzip:kA}=xA;var IA=EA,zA=wA,LA=MA,UA=AA,VA=RA,OA=NA,BA=DA,PA=kA,qA=Va,FA={Deflate:IA,deflate:zA,deflateRaw:LA,gzip:UA,Inflate:VA,inflate:OA,inflateRaw:BA,ungzip:PA,constants:qA},dt=(n=>(n.POI_OFERTA="poi_oferta",n.POI_DEMANDA="poi_demanda",n.LIQUIDEZ_VENDEDORA="liquidez_vendedora",n.LIQUIDEZ_COMPRADORA="liquidez_compradora",n.FVG_BAJISTA="fvg_bajista",n.FVG_ALCISTA="fvg_alcista",n.BOS_ALCISTA="bos_alcista",n.BOS_BAJISTA="bos_bajista",n.CHOCH_ALCISTA="choch_alcista",n.CHOCH_BAJISTA="choch_bajista",n.SWEEP_LIQUIDEZ="sweep_liquidez",n.EQUILIBRIUM="equilibrium",n.WEAK_HIGH="weak_high",n.WEAK_LOW="weak_low",n.STRONG_HIGH="strong_high",n.STRONG_LOW="strong_low",n.ENTRADA_LARGO="entrada_largo",n.ENTRADA_CORTO="entrada_corto",n.STOP_LOSS="stop_loss",n.TAKE_PROFIT="take_profit",n.RANGO_OPERATIVO="rango_operativo",n.NOTA_GENERAL="nota_general",n.AI_W_SIGNAL_BULLISH="ai_w_signal_bullish",n.AI_W_SIGNAL_BEARISH="ai_w_signal_bearish",n))(dt||{});const HA="ETHUSDT",GA=["BTCUSDT","ETHUSDT","SOLUSDT","ADAUSDT","LINKUSDT"],$A=["BTC-USDT","ETH-USDT","XAUUSD","EURUSD","USOIL"],YA="1h",JA=["1m","3m","5m","15m","30m","1h","2h","4h","6h","8h","12h","1d","3d","1w","1M"],pT="gemini-2.5-flash-preview-04-17",ZA=`
Tu rol es el de un analista experto en trading de criptomonedas, especializado en Smart Money Concepts (SMC) y la metodología Wyckoff. Debes realizar un análisis técnico exhaustivo.

Principios Clave de Análisis:
1.  Estructura de Mercado Jerárquica (Market Structure):
    * Temporalidades Mayores (HTF - Semanal, Diario): Identificar la tendencia macro y zonas de control.
    * Temporalidades Medias (MTF - 4H): Confirmar o contradecir el sesgo HTF, buscar formación de rangos o impulsos.
    * Temporalidades Menores (LTF - 1H, 15M): Identificar puntos de entrada precisos, ChoCh, BOS.
    * Conceptos: Higher Highs (HH), Higher Lows (HL), Lower Lows (LL), Lower Highs (LH). Break of Structure (BOS) confirma continuación. Change of Character (ChoCh) sugiere posible reversión. Distinguir entre Strong/Weak Highs/Lows.
2.  Liquidez (Liquidity):
    * Identificar pools de liquidez (Buy-Side y Sell-Side) sobre/bajo máximos/mínimos clave (Swing Highs/Lows, Equal Highs/Lows).
    * Reconocer manipulaciones (Stop Hunts, Sweeps) y su significado. Inducement (IDM).
3.  Zonas de Interés (Points of Interest - POIs):
    * Order Blocks (OBs): Velas significativas (última vela contraria antes de impulso) que rompen estructura o barren liquidez. Bearish OBs (Oferta) y Bullish OBs (Demanda). Evaluar si están mitigados o no. Considerar el origen del movimiento (Origin OB, Decisional OB).
    * Fair Value Gaps (FVGs) / Imbalances: Ineficiencias que el precio tiende a rellenar. Notar si son FVG alcistas o bajistas.
    * Breaker Blocks: Order blocks fallidos que se convierten en POIs opuestos.
    * Equilibrium (50%): Nivel de descuento/premium en un rango.
    * Señales Tipo "W" (Reacción a POI con Marcador en Gráfico): Presta especial atención a cómo reacciona el precio al mitigar POIs. Una señal tipo "W" se caracteriza por un testeo de un POI de demanda, seguido por una vela de rechazo fuerte con volumen, que confirma la zona y sugiere una potencial continuación alcista. Su contraparte bajista sería un testeo de un POI de oferta, seguido de rechazo bajista fuerte con volumen.
        * Si identificas una señal "W" alcista, incluye un objeto en 'puntos_clave_grafico' con:
            * "tipo": "ai_w_signal_bullish"
            * "label": "W Bullish Confirmation"
            * "descripcion": "Descripción de la confirmación: POI testeado, vela de rechazo, volumen."
            * "nivel": El precio del low de la vela de confirmación (o el nivel del POI).
            * "marker_time": El timestamp Unix (en segundos) de la VELA DE CONFIRMACIÓN de la señal 'W'. Este timestamp DEBE corresponder a una vela real y reciente que estés analizando, preferiblemente la que confirma el patrón.
            * "marker_position": "belowBar"
            * "marker_shape": "arrowUp"
            * "marker_text": "W"
        * Si identificas la contraparte bajista de una señal "W", incluye un objeto en 'puntos_clave_grafico' con:
            * "tipo": "ai_w_signal_bearish"
            * "label": "W Bearish Confirmation"
            * "descripcion": "Descripción de la confirmación: POI testeado, vela de rechazo, volumen."
            * "nivel": El precio del high de la vela de confirmación (o el nivel del POI).
            * "marker_time": El timestamp Unix (en segundos) de la VELA DE CONFIRMACIÓN de la señal 'W'. Este timestamp DEBE corresponder a una vela real y reciente que estés analizando, preferiblemente la que confirma el patrón.
            * "marker_position": "aboveBar"
            * "marker_shape": "arrowDown"
            * "marker_text": "W"
4.  Metodología Wyckoff:
    * Identificar fases del mercado: Acumulación, Reacumulación, Distribución, Redistribución.
    * Eventos Wyckoff: Preliminary Support/Supply (PS/PSY), Selling/Buying Climax (SC/BC), Automatic Rally/Reaction (AR), Secondary Test (ST), Spring/Upthrust, Sign of Strength/Weakness (SOS/SOW), Last Point of Support/Supply (LPS/LPSY).
5.  Indicadores (Uso Confirmatorio):
    * Volumen: Analiza patrones de volumen de forma exhaustiva. Busca volumen alto confirmando rupturas de estructura (BOS), bajo volumen en retrocesos saludables, picos de volumen en zonas de liquidez o POIs indicando absorción o clímax. Comenta sobre la fuerza de la presión compradora vs. vendedora indicada por el volumen en movimientos alcistas y bajistas. Evalúa si el volumen disminuye antes de una reversión o si se expande con la tendencia. (Se proveerán datos de volumen, úsalos para tu análisis).
    * RSI: (No se proveerán datos de RSI. Basa tu análisis en precio, estructura, volumen y otros conceptos SMC/Wyckoff).
6.  Análisis de Sesiones (Conceptual): Considerar cómo las sesiones (Asia, Londres, Nueva York) pueden generar liquidez o iniciar movimientos. (No se proveerán datos de sesión explícitos).
7.  Mitigación de POIs:
    * Para todas las Zonas de Interés (POIs) identificadas (Order Blocks, FVGs, etc.), indica explícitamente en el campo 'mitigado' (con true/false) si han sido mitigadas (ya testeadas por el precio) o no. Asegúrate de incluir este estado para todos los POIs relevantes en 'puntos_clave_grafico' y 'zonas_criticas_oferta_demanda'.
8.  Análisis Fibonacci:
    * En el campo 'analisis_fibonacci':
        * **descripcion_impulso**: Identifica el impulso (onda de movimiento) más significativo y reciente en la temporalidad principal de análisis o una temporalidad relevante (ej. 1H, 4H). Este impulso puede ser el que generó el último BOS/ChoCh importante, o un movimiento dominante actual. Justifica brevemente tu elección del impulso (ej. "Impulso alcista tras BOS en 1H", "Impulso bajista dominante actual en 4H desde el último máximo relevante").
        * **precio_inicio_impulso**: Proporciona el precio de inicio (Punto A) del impulso seleccionado.
        * **precio_fin_impulso**: Proporciona el precio de fin (Punto B) del impulso seleccionado.
        * **precio_fin_retroceso**: Si aplica y es claramente identificable, proporciona el precio de fin del retroceso desde B (Punto C). Este punto es crucial para calcular las extensiones. Si no hay un retroceso claro o relevante aún para extensiones, puedes omitir este campo y el campo 'niveles_extension'.
        * **Instrucciones de Cálculo Estrictas:**
            * Para un **impulso alcista** (A < B), el precio de un nivel de retroceso se calcula como: $Precio = B - ((B - A) * nivel\\_retroceso)$.
            * Para un **impulso bajista** (A > B), el precio de un nivel de retroceso se calcula como: $Precio = B + ((A - B) * nivel\\_retroceso)$.
            * Para las **extensiones de un impulso alcista** (movimiento A-B-C), el precio de un nivel de extensión se calcula como: $Precio = C + ((B - A) * nivel\\_extension)$.
            * Para las **extensiones de un impulso bajista** (movimiento A-B-C), el precio de un nivel de extensión se calcula como: $Precio = C - ((A - B) * nivel\\_extension)$.
        * **niveles_retroceso**: Calcula y proporciona los 3 niveles de Retroceso de Fibonacci más importantes basados en el impulso A-B usando la fórmula especificada. Comúnmente estos son 0.382, 0.500 (50%), y 0.618. Para cada nivel, incluye:
            * 'level': El nivel de Fibonacci como decimal (ej. 0.618).
            * 'price': El precio correspondiente a ese nivel.
            * 'label': Una etiqueta descriptiva (ej. "Retracement 61.8%", "Retracement 50.0%").
        * **niveles_extension**: Si se identificó un Punto C (precio_fin_retroceso), calcula y proporciona los 3 niveles de Extensión de Fibonacci más importantes basados en el movimiento A-B-C usando la fórmula especificada. Comúnmente estos son 1.272, 1.618, y 2.618 (o -0.272, -0.618 si se miden desde B). Para cada nivel, incluye:
            * 'level': El nivel de Fibonacci como decimal (ej. 1.618).
            * 'price': El precio correspondiente a ese nivel.
            * 'label': Una etiqueta descriptiva (ej. "Extension 1.618%", "Extension -61.8%").
9.  Análisis de Funding Rate y Open Interest para {{SYMBOL}}:
    1.  Conceptos Clave para Entender el Análisis
        * Open Interest (Interés Abierto - OI): Es el valor total en dólares (o en {{SYMBOL}}) de todos los contratos de futuros perpetuos que están abiertos y aún no se han cerrado.
            * OI subiendo: Entra nuevo capital al mercado. Confirma la fuerza de la tendencia actual (sea alcista o bajista).
            * OI bajando: El capital está saliendo. Indica que los traders están cerrando posiciones, lo que puede señalar un agotamiento de la tendencia.
        * Funding Rate (Tasa de Financiación): Es un pago periódico que se realiza entre traders con posiciones largas (compradores) y cortas (vendedores) para mantener el precio del contrato perpetuo anclado al precio del activo al contado (spot).
            * Funding Positivo: El precio del futuro es más alto que el spot. Los largos pagan a los cortos. Indica que el sentimiento es mayoritariamente alcista y hay más gente comprando con apalancamiento. Un funding muy alto puede ser una señal de sobrecalentamiento y posible reversión.
            * Funding Negativo: El precio del futuro es más bajo que el spot. Los cortos pagan a los largos. Indica un sentimiento bajista predominante.
    2.  Evaluación de la Situación Actual (Debes inferir y adaptar esta sección según los datos de mercado implícitos y el contexto de {{SYMBOL}} que estés analizando, el siguiente es un ejemplo ilustrativo, pero debes generalizarlo para {{SYMBOL}})
        * Basándome en los datos de sentimiento y derivados más recientes, esta es la situación:
        * Open Interest (OI): (Ejemplo: El Interés Abierto ha estado marcando niveles históricamente altos durante la subida de precio hasta una zona clave. En las últimas horas, a medida que el precio ha comenzado a retroceder desde un máximo reciente, el OI se ha mantenido relativamente estable o incluso ha mostrado ligeros incrementos. Debes adaptar esto a {{SYMBOL}} y al contexto actual).
        * Funding Rate: (Ejemplo: Las tasas de financiación fueron marcadamente positivas durante el impulso alcista, indicando euforia. Tras la reversión desde el máximo, estas tasas han comenzado a disminuir, pero aún se mantienen en territorio positivo, aunque de forma más moderada. Debes adaptar esto a {{SYMBOL}} y al contexto actual).
    3.  Interpretación y Confluencia con el Análisis Técnico
        * La combinación de estos tres factores (Precio, OI y Funding Rate) nos ofrece una visión muy poderosa:
        * Precio a la baja + OI estable/subiendo: Esta es una combinación muy bajista. Nos dice que mientras el precio cae (o se estanca en una resistencia), no solo no están entrando nuevos compradores, sino que se están abriendo de forma agresiva nuevas posiciones en corto. El capital que entra al mercado (OI subiendo) está apostando por una continuación de la caída.
        * Precio a la baja + Funding Rate aún positivo: Esta es la clave. Que los largos sigan pagando a los cortos mientras el precio cae, crea una situación de gran presión. Los traders que compraron en la parte alta están ahora en pérdidas, atrapados en sus posiciones y, además, "sangrando" dinero cada pocas horas a través del funding. Esto los hace mucho más propensos a capitular y cerrar sus posiciones (vender), lo que añadiría más presión bajista y podría desencadenar una cascada de liquidaciones (Long Squeeze).
    4.  Impacto en los Escenarios Previamente Planteados
        * Esta capa de análisis de sentimiento refuerza significativamente la convicción del escenario bajista y nos ayuda a refinar la estrategia.
        * Para el Escenario Bajista (Short):
            * La confluencia del análisis técnico con el análisis de derivados eleva la calidad de la configuración.
            * La probabilidad de que el precio busque la liquidez inferior aumenta, ya que el mercado necesita liquidar a esos largos atrapados para poder revertir con fuerza.
            * Estrategia Refinada: Ser agresivo en las entradas en corto en los POIs de oferta identificados se vuelve una estrategia de mayor probabilidad. El objetivo no es solo un mínimo local, sino una potencial cascada de liquidaciones.
        * Para el Escenario Alcista (Long):
            * Este análisis hace que una entrada en largo sea aún más arriesgada a corto plazo.
            * Indica que cualquier rebote probablemente será débil y utilizado por traders más grandes para abrir más posiciones en corto a mejores precios (LPSY).
            * Estrategia Refinada: Antes de considerar cualquier largo, sería prudente esperar no solo un ChoCh alcista en LTF, sino también ver un cambio en los datos de derivados: una caída significativa en el Open Interest (indicando que los cortos están cerrando y tomando beneficios) y que el Funding Rate se neutralice o incluso se vuelva negativo. Sin estas señales, un largo estaría nadando contra una corriente muy fuerte.
    * En resumen, el análisis del Open Interest y el Funding Rate actúa como un potente filtro de confirmación. Basándote en tu inferencia de la situación actual del OI y FR para {{SYMBOL}}, indica cómo estos factores apuntan a la continuación de un movimiento o a una posible reversión.
    * Incluye tu análisis detallado en 'analisis_general.comentario_funding_rate_oi' en el JSON de salida.
10. Identificación de Señales de Reentrada (Conceptuales):
    * Busca oportunidades de reentrada a favor de la tendencia predominante (identificada en tu análisis de estructura).
    * Estas pueden ocurrir tras retrocesos a niveles clave (POIs mitigados que ahora actúan como soporte/resistencia, medias móviles importantes si estuvieran visibles, o niveles de Fibonacci relevantes) donde el precio muestra signos de querer continuar la tendencia (ej. una vela de confirmación con volumen).
    * Describe estas posibles oportunidades en 'conclusion_recomendacion.oportunidades_reentrada_detectadas'.
11. Identificación de Señales de Salida (Conceptuales):
    * Evalúa cuándo un movimiento podría estar agotándose o cuándo sería prudente considerar una salida (parcial o total) o ajustar un Stop Loss a Break Even.
    * Factores a considerar: alcance de zonas de liquidez importantes, POIs opuestos de alta temporalidad, velas de clímax con volumen extremo, divergencias de momentum (conceptuales, basadas en la acción del precio y volumen), o una extensión significativa del precio según Fibonacci.
    * Describe estas consideraciones en 'conclusion_recomendacion.consideraciones_salida_trade'.
12. Identificación de Señales "Amarillas" (Confluencia Avanzada - Conceptual):
    * Una señal "Amarilla" representa una alta confluencia de factores alcistas o bajistas.
    * Conceptualmente, esto podría incluir: un barrido de liquidez (sweep), seguido de un BOS/ChoCh, una reacción en un POI de alta calidad, y volumen confirmando el movimiento. La idea es que múltiples elementos de tu análisis SMC/Wyckoff se alinean.
    * Describe si observas este tipo de configuraciones de alta confluencia en 'conclusion_recomendacion.senales_confluencia_avanzada'.

Instrucción de Análisis para {{SYMBOL}} en temporalidad de referencia {{TIMEFRAME}}:
Considera el precio actual de {{SYMBOL}} en {{CURRENT_PRICE}} (datos de entrada y precios referidos a la temporalidad {{TIMEFRAME}}).
Analiza el contexto del mercado basándote en los datos históricos implícitos (velas de {{TIMEFRAME}}), el volumen y los principios clave de SMC/Wyckoff.
Proporciona una evaluación detallada. Tu análisis general de la estructura del mercado y el sesgo direccional debe considerar múltiples temporalidades (ej. 15M, 1H, 4H, 1D, 1W), informando el campo 'estructura_mercado_resumen' para cada una de ellas. La 'temporalidad_principal_analisis' en la respuesta JSON será {{TIMEFRAME}}.
`,KA=`
Información Adicional de Contexto (Ejemplificativa - Debes inferir la situación actual basada en tu conocimiento y el precio actual):
-   Precio Actual de {{SYMBOL}}: {{CURRENT_PRICE}} en temporalidad {{TIMEFRAME}}.
-   Últimos datos de Volumen: (Ej: El volumen en la última vela de {{TIMEFRAME}} fue significativo/bajo/promedio, indicando X)
-   Valor Actual de RSI (14 periodos) en {{TIMEFRAME}}: (Información de RSI no disponible)
-   Sentimiento General Reciente: (Ej: El mercado ha estado consolidando después de un fuerte impulso alcista la semana pasada, o mostrando debilidad tras un rechazo en una zona clave).
-   Niveles Psicológicos Cercanos: (Ej: Resistencia en un número redondo significativo, Soporte en un mínimo anterior importante).
-   Noticias Relevantes (si conoces alguna de impacto general, de lo contrario ignorar): (Ej: Próxima actualización importante de la red, o un evento macroeconómico de impacto).

Estos son ejemplos de cómo podrías pensar sobre el contexto. Tu análisis debe basarse en los principios de Wyckoff/SMC.
`,XA=`
### FORMATO DE SALIDA ESTRICTO (JSON):
Genera la salida EXCLUSIVAMENTE en el siguiente formato JSON. No añadas texto o explicaciones fuera de este objeto JSON.
Asegúrate que todos los strings estén correctamente escapados. Si un campo no es aplicable o no hay información suficiente, puedes omitirlo o usar null donde sea apropiado (pero intenta ser lo más completo posible). Los precios deben ser números. El campo 'marker_time' debe ser un timestamp Unix en segundos.

{
  "analisis_general": {
    "simbolo": "{{SYMBOL}}",
    "temporalidad_principal_analisis": "{{TIMEFRAME}}",
    "fecha_analisis": "AUTO_GENERATED_TIMESTAMP_ISO8601",
    "estructura_mercado_resumen": {
      "htf_1W": "Ej: Tendencia macro bajista, pero formando base sobre zona de demanda semanal.",
      "htf_1D": "Ej: Alcista tras BOS reciente, ahora en retroceso buscando HL.",
      "mtf_4H": "Ej: Bajista, con LL y LH. Respetando POI de oferta en $2600.",
      "ltf_1H": "Ej: Bajista, buscando mitigar FVG en $2550 antes de posible continuación.",
      "ltf_15M": "Ej: ChoCh alcista reciente en 15M, podría indicar retroceso LTF a zona de oferta mayor."
    },
    "fase_wyckoff_actual": "Ej: Posible fase de Reacumulación en 4H, o Distribución si falla en superar X nivel.",
    "sesgo_direccional_general": "alcista" / "bajista" / "lateral" / "indefinido",
    "comentario_volumen": "Ej: El volumen ({VOLUME_VALUE}) ha disminuido durante la corrección, sugiriendo agotamiento vendedor. (Inferido y con datos provistos)",
    "interpretacion_volumen_detallada": "Ej: Se observa un incremento significativo de volumen en la reciente ruptura alcista en 1H, sugiriendo convicción compradora. Sin embargo, el volumen en el retroceso actual en 15M es bajo, lo que podría indicar una pausa antes de la continuación.",
    "comentario_funding_rate_oi": "Ej: El análisis de FR y OI sugiere presión sobre los largos debido a un funding aún positivo mientras el precio cae y el OI se mantiene o sube, indicando apertura de nuevos cortos. Esto podría llevar a una cascada de liquidaciones si los largos capitulan. (Análisis adaptado al contexto de {{SYMBOL}})."
  },
  "puntos_clave_grafico": [
    { "tipo": "poi_oferta", "zona": [2650.0, 2680.0], "label": "Bearish OB 4H + FVG", "temporalidad": "4H", "importancia": "alta", "descripcion": "Bloque que originó el último BOS bajista.", "mitigado": false },
    { "tipo": "poi_demanda", "zona": [2400.0, 2430.0], "label": "Bullish OB 1D (Origen)", "temporalidad": "1D", "mitigado": false, "importancia": "alta" },
    { "tipo": "liquidez_compradora", "nivel": 2700.0, "label": "BSL (Viejo High Diario)", "temporalidad": "1D" },
    { "tipo": "liquidez_vendedora", "nivel": 2380.0, "label": "SSL (Mínimos Iguales 4H)", "temporalidad": "4H" },
    { "tipo": "fvg_bajista", "zona": [2600.0, 2620.0], "label": "FVG 1H (Ineficiencia)", "temporalidad": "1H", "mitigado": false },
    { "tipo": "bos_bajista", "nivel": 2500.0, "label": "BOS 4H", "temporalidad": "4H" },
    { "tipo": "choch_alcista", "nivel": 2450.0, "label": "ChoCh 15M", "temporalidad": "15M" },
    { "tipo": "equilibrium", "nivel": 2550.0, "label": "EQ Rango Diario", "temporalidad": "1D"},
    { "tipo": "weak_low", "nivel": 2420.0, "label": "Weak Low 4H", "temporalidad": "4H" },
    { 
      "tipo": "ai_w_signal_bullish", 
      "label": "W Bullish Confirmed", 
      "descripcion": "POI Demanda en 2400-2430 (1D) testeado, vela de rechazo alcista en 1H con volumen incrementado.",
      "nivel": 2425.0, 
      "temporalidad": "1H",
      "marker_time": 1678886400, // EJEMPLO: Reemplazar con el timestamp REAL de la vela de confirmación (segundos Unix). Debe ser un número.
      "marker_position": "belowBar", 
      "marker_shape": "arrowUp",
      "marker_text": "W"
    }
  ],
  "liquidez_importante": {
    "buy_side": [
      { "tipo": "liquidez_compradora", "nivel": 2800.0, "label": "EQH Diario (Target BSL)", "temporalidad": "1D", "importancia": "alta" }
    ],
    "sell_side": [
      { "tipo": "liquidez_vendedora", "nivel": 2350.0, "label": "EQL Semanal (Target SSL Macro)", "temporalidad": "1W", "importancia": "alta" }
    ]
  },
  "zonas_criticas_oferta_demanda": {
    "oferta_clave": [
      { "tipo": "poi_oferta", "zona": [2750.0, 2780.0], "label": "Supply Zone HTF (No Mitigada)", "temporalidad": "1D", "importancia": "alta", "mitigado": false }
    ],
    "demanda_clave": [
      { "tipo": "poi_demanda", "zona": [2300.0, 2330.0], "label": "Demand Zone HTF (Testeada)", "temporalidad": "1D", "mitigado": true, "importancia": "media" }
    ],
    "fvg_importantes": [
      { "tipo": "fvg_alcista", "zona": [2450.0, 2465.0], "label": "Bullish FVG 4H (Confluencia con Demanda)", "temporalidad": "4H", "mitigado": false }
    ]
  },
  "analisis_fibonacci": {
    "descripcion_impulso": "Impulso alcista desde $2400 (mínimo de la semana pasada) hasta $2800 (máximo reciente tras BOS diario).",
    "precio_inicio_impulso": 2400.0,
    "precio_fin_impulso": 2800.0,
    "precio_fin_retroceso": 2550.0,
    "niveles_retroceso": [
      { "level": 0.382, "price": 2647.2, "label": "Retracement 38.2%" },
      { "level": 0.5, "price": 2600.0, "label": "Retracement 50.0%" },
      { "level": 0.618, "price": 2552.8, "label": "Retracement 61.8%" }
    ],
    "niveles_extension": [
      { "level": 1.272, "price": 2908.8, "label": "Extension 127.2%" },
      { "level": 1.618, "price": 3047.2, "label": "Extension 1.618%" },
      { "level": 2.618, "price": 3447.2, "label": "Extension 2.618%" }
    ]
  },
  "escenarios_probables": [
    {
      "nombre_escenario": "Escenario Principal: Bajista hacia Liquidez Inferior",
      "probabilidad": "alta",
      "descripcion_detallada": "El precio está en un retroceso dentro de una estructura bajista de 4H. Se espera que mitigue el POI de Oferta en $2650-$2680 y luego continúe hacia la liquidez por debajo de $2380.",
      "trade_setup_asociado": {
        "tipo": "corto",
        "descripcion_entrada": "Entrar en corto al testear el Bearish OB 4H ($2650-$2680), idealmente con confirmación de ChoCh bajista en 15M.",
        "zona_entrada": [2650.0, 2680.0],
        "punto_entrada_ideal": 2665.0,
        "stop_loss": 2710.0,
        "take_profit_1": 2500.0,
        "take_profit_2": 2380.0,
        "razon_fundamental": "Alineación con estructura 4H bajista, POI de oferta de alta probabilidad, objetivo de liquidez claro.",
        "confirmaciones_adicionales": ["Divergencia RSI bajista en 1H al alcanzar la zona"],
        "ratio_riesgo_beneficio": "Aprox. 1:4 a TP2",
        "calificacion_confianza": "alta"
      },
      "niveles_clave_de_invalidacion": "Cierre de vela de 4H por encima de $2715 invalidaría este escenario."
    },
    {
      "nombre_escenario": "Escenario Alternativo: Ruptura Alcista por Toma de BSL",
      "probabilidad": "media",
      "descripcion_detallada": "Si el precio rompe con fuerza la zona de oferta actual ($2650-$2680), podría indicar una toma de BSL en $2700 y buscar niveles superiores, invalidando el sesgo bajista de corto plazo.",
      "trade_setup_asociado": {
        "tipo": "largo",
        "descripcion_entrada": "Esperar ruptura y cierre de 1H por encima de $2700. Buscar entrada en el retest de esta zona como soporte.",
        "punto_entrada_ideal": 2705.0,
        "stop_loss": 2640.0,
        "take_profit_1": 2800.0,
        "razon_fundamental": "Invalidación de zona de oferta clave y continuación de estructura alcista diaria.",
        "calificacion_confianza": "media"
      },
      "niveles_clave_de_invalidacion": "Fallo en mantener el soporte en $2700 tras la ruptura."
    }
  ],
  "conclusion_recomendacion": {
    "resumen_ejecutivo": "El análisis sugiere un sesgo bajista a corto/medio plazo con un POI de oferta clave cercano. El escenario principal es buscar una entrada en corto en esta zona.",
    "proximo_movimiento_esperado": "Retroceso al alza para mitigar zona de oferta entre $2650-$2680, seguido de un impulso bajista.",
    "mejor_oportunidad_actual": null,
    "advertencias_riesgos": "Alta volatilidad esperada. Gestionar el riesgo adecuadamente. El mercado puede cambiar rápidamente.",
    "oportunidades_reentrada_detectadas": "Ej: Si el precio retrocede a la zona de $2500-$2520 (anterior BOS ahora como soporte) y muestra rechazo alcista con volumen, podría ser una reentrada en largo.",
    "consideraciones_salida_trade": "Ej: Si se está en un trade corto desde $2665, considerar mover SL a BE tras alcanzar $2550 (primer FVG). TP1 en $2500 es razonable.",
    "senales_confluencia_avanzada": "Ej: Un barrido de liquidez por encima de $2700, seguido de un fuerte rechazo y BOS bajista en 1H, crearía una señal de 'Wyckoff Upthrust After Distribution' con alta confluencia para cortos."
  }
}
`,WA=(n,e,t,i)=>{const o=ZA,a=KA,d=XA;let h=o;h=h.replace(/{{SYMBOL}}/g,n),h=h.replace(/{{TIMEFRAME}}/g,e),h=h.replace(/{{CURRENT_PRICE}}/g,t.toString());let p=a;p=p.replace("{{SYMBOL}}",n),p=p.replace("{{CURRENT_PRICE}}",t.toString()),p=p.replace("{{TIMEFRAME}}",e),p=p.replace("Información de RSI no disponible.",""),p=p.replace("(Ej: El volumen en la última vela de {{TIMEFRAME}} fue significativo/bajo/promedio, indicando X)",i!=null?`El volumen de la última vela fue ${i.toLocaleString()}`:"Información de volumen no disponible para la última vela."),p=p.replace("{VOLUME_VALUE}",i!=null?i.toLocaleString():"N/A");let m=d;return m=m.replace(/{{SYMBOL}}/g,n),m=m.replace(/{{TIMEFRAME}}/g,e),m=m.replace(/{{CURRENT_PRICE}}/g,t.toString()),m=m.replace("{VOLUME_VALUE}",i!=null?i.toLocaleString():"N/A"),`${h}

${p}

${m}`},QA=n=>n.toLowerCase(),jA="binance",eR=[{value:"binance",label:"Binance"},{value:"bingx",label:"BingX"},{value:"twelve_data",label:"Twelve Data"},{value:"fmp",label:"Financial Modeling Prep"},{value:"marketstack",label:"MarketStack"}],tR=`
Actúa siempre como 'Trader Análisis', un experto en Wyckoff, Smart Money Concepts (SMC), Footprint, Funding Rate y Open Interest y especializado en el análisis del activo Ethereum (ETH).

Tu principal función es recibir gráficos de ETH (proporcionados por el usuario) y, basándote en ellos y en las directrices detalladas a continuación, generar un análisis técnico exhaustivo.

Utiliza un tono profesional, analítico y educativo.

Cuando te proporcionen gráficos, asume que son para el análisis de ETH, a menos que se especifique lo contrario.

Asegúrate de solicitar los gráficos si el usuario inicia la conversación pidiendo un análisis sin haberlos adjuntado todavía.

Evita ofrecer asesoramiento financiero directo. Enfatiza que tus análisis son informativos y para la toma de decisiones estratégicas y la gestión de riesgos.

Adapta la complejidad de tus explicaciones: sé claro para principiantes pero ofrece profundidad para traders experimentados.

Siempre sigue la estructura de análisis detallada a continuación.

--- INICIO DE DIRECTRICES DETALLADAS DEL ANÁLISIS (VERSIÓN MEJORADA) ---

Metodologías Principales:

Metodología Wyckoff.

Smart Money Concepts (SMC).

Componentes del Análisis (Por favor, detalla cada uno con la profundidad solicitada):

Contexto General y Estructura de Mercado:

Análisis jerárquico de temporalidades (Diario, 4H, 1H, 15M, 5M – o las que consideres más relevantes según los gráficos proporcionados).

Identificación de la tendencia principal, intermedia y menor.

Estado actual del precio: ¿impulso, retroceso, consolidación?

Análisis Wyckoff Detallado:

Identificación de la fase actual del mercado (Acumulación, Reacumulación, Distribución, Redistribución) en las temporalidades pertinentes.

Si es posible, identificación explícita de eventos Wyckoff clave (ej: PS, SC, AR, ST, Spring/Shakeout, UT/UTAD, SOS/SOW, LPS/LPSY, JAC/ICE, Test). Si un evento se infiere en lugar de observarse claramente dentro de un rango bien definido en los gráficos, señala explícitamente esta naturaleza interpretativa y el grado de certeza.

Evaluación de la posible formación de esquemas de acumulación o distribución, detallando las características observadas que apoyan dicha hipótesis.

Análisis Profundo de Smart Money Concepts (SMC):

Liquidez:Identificación precisa y, si es posible, con rangos de precios aproximados, de zonas de liquidez clave (máximos/mínimos de sesiones anteriores, máximos/mínimos semanales/diarios, equal highs/lows, trendline liquidity).

Análisis de dónde es más probable que el precio tome liquidez (buy-side y sell-side liquidity), justificando la selección.

Bloques de Órdenes (Order Blocks - OBs):Identificación de Bullish OBs y Bearish OBs relevantes en diferentes temporalidades. Señala, si es posible, rangos de precios o características que los hacen significativos (ej. causaron un barrido de liquidez previo, generaron un BOS/ChoCh, no están mitigados, tamaño del imbalance asociado).

Refinamiento de OBs, indicando cuáles tienen mayor probabilidad de reacción y por qué (ej. confluencia con FVG, liquidez tomada, origen de un movimiento fuerte).

Imbalances / Fair Value Gaps (FVGs):Señalar FVGs significativos en distintas temporalidades, indicando su ubicación aproximada (rango de precios) y por qué se consideran importantes (ej. tamaño, origen de un impulso, no mitigado). Analizar su potencial como imanes de precio o zonas de reacción/entrada.

Estructura de Mercado Detallada (SMC):Identificación clara de Cambios de Carácter (ChoCh) y Rupturas de Estructura (BOS) en temporalidades relevantes para confirmar cambios de intención o continuación. Detallar qué implicaciones tienen estos eventos en el contexto actual.

Análisis de Indicadores y Herramientas Visuales (si los gráficos proporcionados los incluyen):

RSI (Relative Strength Index):Análisis de divergencias (regulares, ocultas, exageradas) en múltiples temporalidades, explicando su implicación y posible impacto en la acción del precio.

Comportamiento del RSI en niveles clave (70/30, 50) y si opera en rangos específicos que sugieran un régimen de mercado.

Volumen:Perfil de Volumen (VPVR o Fixed Range): Si es visible, analizar el Punto de Control (POC), Nodos de Alto Volumen (HVN) y Nodos de Bajo Volumen (LVN) como S/R dinámicos y zonas de posible reacción.

Análisis de Volumen Tradicional y VSA (Volume Spread Analysis): Relación entre spread de velas, cierre y volumen. Identificar Esfuerzo vs. Resultado, barras de No Demanda/No Oferta, clímax de volumen, y signos de absorción o distribución en puntos clave del gráfico.

Medias Móviles (MAs/EMAs): (Ej. 20, 50, 200 o las que consideres relevantes). Uso como soporte/resistencia dinámica, identificación de cruces y, crucialmente, su confluencia con otras zonas clave identificadas por SMC o Wyckoff.

Retrocesos y Extensiones de Fibonacci:Identificación de niveles clave de retroceso (ej. 0.50, 0.618, Golden Pocket 0.618-0.66, 0.786 Optimal Trade Entry - OTE). Analizar si estos niveles presentan confluencia con OBs, FVGs, o zonas de liquidez para fortalecer la relevancia de un Punto de Interés (POI).

Proyección de objetivos de precio usando extensiones, justificando su uso.

Análisis Contextual y de Sentimiento (si es posible inferir o si se proporciona información externa):

Correlaciones: Breve análisis de la correlación con Bitcoin (BTC) (incluyendo fuerza relativa ETH/BTC si es pertinente), Índice del Dólar (DXY) y principales índices bursátiles (ej. S&P 500).

Análisis de Sesiones de Trading: Considerar la influencia de las sesiones de Asia, Londres y Nueva York (ej. toma de liquidez de la sesión anterior, "Killzones" o ventanas de alta probabilidad para entradas).

(Opcional): Mención breve del sentimiento del mercado si hay indicadores externos (ej. Fear & Greed Index) o si la propia acción del precio sugiere un sentimiento extremo.

Identificación de Trampas para Retail Traders (Inducements):

Señalar posibles falsas rupturas, inducciones de liquidez (ej. un mínimo/máximo atractivo que probablemente sea barrido antes de un movimiento real), o patrones que suelen engañar a traders menos experimentados.

Evaluación de Volúmenes de Compra y Venta:

Determinar la actividad predominante en el mercado (compradores o vendedores en control) y la posible intención institucional detrás de los movimientos de volumen, especialmente en relación con los eventos Wyckoff y las zonas SMC.

Escenarios Probables y Estrategias Detalladas:

Presentar al menos dos escenarios principales (ej. alcista y bajista) detallando las confirmaciones narrativas y estructurales necesarias para cada uno.

Puntos de Entrada Potenciales (POIs):Ofrecer zonas específicas para entradas en largo y en corto, detallando los criterios claros para la selección de estos Puntos de Interés (POIs) (ej. "el Bullish OB en 1H entre $precioA y $precioB porque barrió liquidez y generó el último BOS, y aún no ha sido mitigado").

Describir modelos de entrada detallados, incluyendo el tipo de confirmación esperada en temporalidades menores (ej. "Esperar un ChoCh alcista en 5M dentro del FVG de 4H antes de buscar una entrada en largo") y el posible mecanismo de ejecución.

Gestión de la Operación:Sugerir pautas para la colocación lógica del Stop Loss en relación con el POI seleccionado o la estructura de entrada confirmada (ej. "SL por debajo del mínimo del OB más X pips" o "SL por debajo del mínimo del patrón de confirmación en LTF").

Sugerir métodos para la identificación de objetivos de Take Profit (ej. "TP1 en el próximo máximo de liquidez en $precioX", "TP2 en el relleno del FVG de HTF en $precioY", "Considerar extensiones de Fibonacci del impulso de entrada").

Evaluación de la Configuración (Calidad y Convicción):No asignar probabilidades porcentuales (%). Enfatizar la naturaleza subjetiva de la probabilidad en el trading.

Calificar la "fortaleza" o "calidad" de cada configuración operativa propuesta (ej. Calificación A, B, C; o Convicción Alta, Media, Baja).

Justificar esta calificación basándose en un sistema explícito de confluencias técnicas. Detallar qué factores se consideran y cuántos se cumplen (ej. alineación estructural HTF, calidad del POI –barrido de liquidez, no mitigado–, confluencia con Fibonacci, confirmación en LTF, contexto Wyckoff, etc.).

Ejemplo de justificación: "Esta configuración alcista se califica como 'A' (Alta Convicción) debido a: 1. Estructura alcista en 4H (BOS reciente). 2. El POI es un Bullish OB en 1H no mitigado que barrió liquidez. 3. Confluye con el nivel 0.618 de Fibonacci del último impulso. 4. Se esperará confirmación con ChoCh en 5M."

Incorporar la evaluación del Ratio Riesgo/Beneficio (R:R) potencial como un factor crucial para la viabilidad de la operación, independientemente de la calificación de convicción. Indicar si el R:R esperado es favorable (ej. >1:2 o 1:3).

Niveles de Invalidación del Escenario General: Definir claramente los niveles de precio o cambios estructurales que invalidarían cada escenario macro propuesto.

Adaptación del Lenguaje:

Proporcionar explicaciones claras para traders principiantes (definiendo términos técnicos la primera vez que se usan), pero sin omitir el análisis técnico avanzado y la terminología correcta para traders experimentados.
`,nR={binance:{name:"Binance Futures",historicalApi:(n,e,t=500)=>`/api/proxy/binance/fapi/v1/klines?symbol=${n}&interval=${e}&limit=${t}`,ws:"wss://stream.binance.com:9443/ws",formatSymbol:n=>n.replace(/[-/]/g,"").toUpperCase(),parseHistorical:n=>n.map(e=>({time:e[0]/1e3,open:parseFloat(e[1]),high:parseFloat(e[2]),low:parseFloat(e[3]),close:parseFloat(e[4]),volume:parseFloat(e[5])})),parseKline:n=>({time:n.k.t/1e3,open:parseFloat(n.k.o),high:parseFloat(n.k.h),low:parseFloat(n.k.l),close:parseFloat(n.k.c),volume:parseFloat(n.k.v)}),parseTicker:(n,e,t)=>({price:parseFloat(n.c),changePercent:parseFloat(n.P),volume:parseFloat(n.v),quoteVolume:parseFloat(n.q),symbol:e,provider:t})},bingx:{name:"BingX Futures",historicalApi:(n,e,t=500)=>`/api/proxy/bingx/openApi/swap/v2/quote/klines?symbol=${n}&interval=${e}&limit=${t}`,ws:"wss://open-api-swap.bingx.com/swap-market",formatSymbol:n=>n.replace(/[-/]/g,"-").toUpperCase(),parseHistorical:n=>n&&n.code===0&&Array.isArray(n.data)?n.data.map(e=>({time:e.time/1e3,open:parseFloat(e.open),high:parseFloat(e.high),low:parseFloat(e.low),close:parseFloat(e.close),volume:parseFloat(e.volume)})):(console.error("Invalid response structure from BingX proxy:",n),[])}},iR=(n,e)=>{if(n.length<e)return[];const t=[];for(let i=e-1;i<n.length;i++){let o=0;for(let a=0;a<e;a++)o+=n[i-a].close;t.push({time:n[i].time,value:o/e})}return t},sR=(n,e)=>{if(n.length<e)return[];const t=[],i=2/(e+1);let o=0;for(let d=0;d<e;d++)o+=n[d].close;let a=o/e;t.push({time:n[e-1].time,value:a});for(let d=e;d<n.length;d++)a=(n[d].close-a)*i+a,t.push({time:n[d].time,value:a});return t},oR=n=>{const e=n.startsWith("#")?n.slice(1):n;if(e.length!==6&&e.length!==3)return!0;let t,i,o;return e.length===3?(t=parseInt(e[0]+e[0],16),i=parseInt(e[1]+e[1],16),o=parseInt(e[2]+e[2],16)):(t=parseInt(e.substring(0,2),16),i=parseInt(e.substring(2,4),16),o=parseInt(e.substring(4,6),16)),(.299*t+.587*i+.114*o)/255>.5},Pn={light:{background:"#FFFFFF",text:"#000000",grid:"#e5e7eb",border:"#d1d5db",fiboRetracement:"rgba(59, 130, 246, 0.7)",fiboExtension:"rgba(249, 115, 22, 0.7)"},dark:{background:"#0f172a",text:"#FFFFFF",grid:"#1e293b",border:"#334155",fiboRetracement:"rgba(96, 165, 250, 0.7)",fiboExtension:"rgba(251, 146, 60, 0.7)"}},lR=(n,e,t,i)=>({layout:{background:{type:jd.Solid,color:n},textColor:e},grid:{vertLines:{color:t},horzLines:{color:t}}}),aR=({dataSource:n,symbol:e,timeframe:t,analysisResult:i,onLatestChartInfoUpdate:o,onChartLoadingStateChange:a,movingAverages:d,theme:h,chartPaneBackgroundColor:p,volumePaneHeight:m,showAiAnalysisDrawings:v,wSignalColor:_,wSignalOpacity:S,showWSignals:b})=>{const x=ue.useRef(null),E=ue.useRef(null),D=ue.useRef(null),I=ue.useRef(null),B=ue.useRef([]),q=ue.useRef({}),R=ue.useRef(null),[U,Y]=ue.useState([]),[G,ne]=ue.useState(null),[K,X]=ue.useState("connecting"),[ee,de]=ue.useState(3600),Ee=nR[n],ke=e&&Ee?Ee.formatSymbol(e):"",be=QA(t),P=(j,he=!1)=>{const w=he?"0.3":"0.7";switch(j){case dt.POI_OFERTA:case dt.FVG_BAJISTA:return`rgba(239, 68, 68, ${w})`;case dt.POI_DEMANDA:case dt.FVG_ALCISTA:return`rgba(34, 197, 94, ${w})`;case dt.LIQUIDEZ_COMPRADORA:return`rgba(59, 130, 246, ${w})`;case dt.LIQUIDEZ_VENDEDORA:return`rgba(249, 115, 22, ${w})`;case dt.BOS_ALCISTA:case dt.CHOCH_ALCISTA:return`rgba(16, 185, 129, ${w})`;case dt.BOS_BAJISTA:case dt.CHOCH_BAJISTA:return`rgba(220, 38, 38, ${w})`;case dt.EQUILIBRIUM:return`rgba(107, 114, 128, ${w})`;default:return`rgba(156, 163, 175, ${w})`}},ie=j=>{const he=parseInt(j.slice(0,-1)),w=j.slice(-1).toLowerCase();return w==="m"?he*60:w==="h"?he*3600:w==="d"?he*86400:w==="w"?he*604800:3600};return ue.useEffect(()=>{const j=x.current;if(!j||!ke||!Ee){a(!1);return}a(!0),ne(null),o({price:null,volume:null}),Y([]),q.current={},de(ie(be)),R.current=null;const he=p||(h==="dark"?Pn.dark.background:Pn.light.background),w=oR(he)?Pn.light.text:Pn.dark.text,F=w,Z=h==="dark"?Pn.dark.grid:Pn.light.grid,te=h==="dark"?Pn.dark.border:Pn.light.border,se={...lR(he,F,Z),autoSize:!0,timeScale:{timeVisible:!0,secondsVisible:be.includes("m")},rightPriceScale:{mode:Qd.Logarithmic,scaleMargins:{top:.1,bottom:.05}}};E.current&&(E.current.remove(),E.current=null),E.current=YE(j,se);const ge={upColor:"#22C55E",downColor:"#EF4444",borderDownColor:"#EF4444",borderUpColor:"#22C55E",wickDownColor:"#EF4444",wickUpColor:"#22C55E"};if(D.current=E.current.addCandlestickSeries(ge),I.current=null,E.current){const Ne="volume_ps_1";R.current=Ne;const et={priceFormat:{type:"volume"},priceScaleId:Ne};I.current=E.current.addHistogramSeries(et),E.current.priceScale(Ne).applyOptions({scaleMargins:{top:.8,bottom:0}})}const le=(Ne,et,me)=>{Ne.priceScale("right").applyOptions({textColor:et,borderColor:me}),Ne.timeScale().applyOptions({borderColor:me}),R.current&&Ne.priceScale(R.current).applyOptions({borderColor:me})};E.current&&le(E.current,w,te),(async()=>{const Ne=Ee.historicalApi(ke,be);try{console.log(`Fetching historical data from: ${Ne}`);const et=await fetch(Ne);if(!et.ok){const tt=await et.text();throw console.error(`HTTP error! status: ${et.status}, URL: ${Ne}, Response: ${tt}`),new Error(`HTTP error! status: ${et.status}, Response: ${tt}`)}const me=await et.json(),Me=Ee.parseHistorical(me);if(Me.sort((tt,We)=>tt.time-We.time),Y(Me),D.current&&D.current.setData(Me),I.current){const tt=Me.map(We=>({time:We.time,value:We.volume??0,color:We.close>We.open?"rgba(34, 197, 94, 0.5)":"rgba(239, 68, 68, 0.5)"}));I.current.setData(tt)}if(Me.length>0){const tt=Me[Me.length-1];o({price:tt.close,volume:tt.volume})}}catch(et){console.error(`Failed to fetch historical data from ${Ne}:`,et),X("error")}finally{a(!1)}})();let ye=null;return(()=>{Ee.type==="binance"?ye=new WebSocket(Ee.wsKline(ke,be)):Ee.type==="bingx"&&(ye=new WebSocket(Ee.wsBase),ye.onopen=()=>{ye==null||ye.send(Ee.getKlineSubMessage(ke,be))}),ye&&(ye.onopen=()=>{X("ok"),console.log(`${Ee.name} WebSocket connected for klines.`)},ye.onmessage=Ne=>{var et,me;try{let Me;if(Ee.type==="bingx"&&typeof Ne.data=="string"&&Ne.data.includes("ping")){ye==null||ye.send(Ne.data.replace("ping","pong"));return}else if(Ee.type==="bingx"&&Ne.data instanceof Blob){const tt=new FileReader;tt.onload=function(){var We,Wt,Rt;try{const ss=FA.inflate(new Uint8Array(tt.result),{to:"string"}),Nt=JSON.parse(ss);if(Nt&&Nt.dataType&&Nt.dataType.startsWith(`${ke}@kline_`)){const Dt=(We=Nt.data)==null?void 0:We[0];if(Dt){const Ct={time:Dt.T/1e3,open:parseFloat(Dt.o),high:parseFloat(Dt.h),low:parseFloat(Dt.l),close:parseFloat(Dt.c),volume:parseFloat(Dt.v)};(Wt=D.current)==null||Wt.update(Ct),(Rt=I.current)==null||Rt.update({time:Ct.time,value:Ct.volume??0,color:Ct.close>Ct.open?"rgba(34, 197, 94, 0.5)":"rgba(239, 68, 68, 0.5)"}),o({price:Ct.close,volume:Ct.volume}),Y(al=>{const rn=[...al],Rn=rn[rn.length-1];return Rn&&Rn.time===Ct.time?rn[rn.length-1]=Ct:rn.push(Ct),rn})}}}catch(ss){console.error("Error processing BingX binary message:",ss)}},tt.readAsArrayBuffer(Ne.data);return}else{const tt=JSON.parse(Ne.data);if(Ee.type==="binance"&&tt.e==="kline")Me=Ee.parseKline(tt);else return}Me&&((et=D.current)==null||et.update(Me),(me=I.current)==null||me.update({time:Me.time,value:Me.volume??0,color:Me.close>Me.open?"rgba(34, 197, 94, 0.5)":"rgba(239, 68, 68, 0.5)"}),o({price:Me.close,volume:Me.volume}),Y(tt=>{const We=[...tt],Wt=We[We.length-1];return Wt&&Wt.time===Me.time?We[We.length-1]=Me:We.push(Me),We}))}catch(Me){console.error("Error processing WebSocket kline message:",Me)}},ye.onerror=Ne=>{console.error(`${Ee.name} WebSocket error event type:`,Ne.type),console.error(`${Ee.name} WebSocket error object:`,Ne),X("error")},ye.onclose=Ne=>{console.log(`${Ee.name} WebSocket disconnected. Code: ${Ne.code}, Reason: "${Ne.reason}", Clean: ${Ne.wasClean}`),X("connecting")})})(),()=>{ye==null||ye.close(),E.current&&(E.current.remove(),E.current=null)}},[n,e,t,h,p]),ue.useEffect(()=>{!E.current||U.length===0||(Object.values(q.current).forEach(j=>{var he;return(he=E.current)==null?void 0:he.removeSeries(j)}),q.current={},d.forEach(j=>{if(j.visible&&U.length>=j.period){const he=j.type==="EMA"?sR(U,j.period):iR(U,j.period);if(E.current){const w={color:j.color,lineWidth:1,lastValueVisible:!1,priceLineVisible:!1},F=E.current.addLineSeries(w);F.setData(he),q.current[j.id]=F}}}))},[d,U]),ue.useEffect(()=>{if(E.current&&(B.current.forEach(j=>{var he;return(he=D.current)==null?void 0:he.removePriceLine(j)}),B.current=[],D.current&&D.current.setMarkers([]),i&&v&&D.current)){const{puntos_clave_grafico:j,analisis_fibonacci:he}=i,w=D.current,F=[];if(j==null||j.forEach(Z=>{const te=P(Z.tipo);if(Z.nivel!=null){const se=w.createPriceLine({price:Z.nivel,color:te,lineWidth:1,lineStyle:Zi.Dashed,axisLabelVisible:!0,title:Z.label});B.current.push(se)}else if(Z.zona){const[se,ge]=Z.zona,le=Z.tipo===dt.FVG_ALCISTA||Z.tipo===dt.FVG_BAJISTA,Ze=P(Z.tipo,le),ye=w.createPriceLine({price:ge,color:Ze,lineWidth:le?3:1,lineStyle:le?Zi.Solid:Zi.Dotted,axisLabelVisible:!0,title:`${Z.label} (H)`}),mt=w.createPriceLine({price:se,color:Ze,lineWidth:le?3:1,lineStyle:le?Zi.Solid:Zi.Dotted,axisLabelVisible:!0,title:`${Z.label} (L)`});B.current.push(ye,mt)}if(b&&(Z.tipo===dt.AI_W_SIGNAL_BULLISH||Z.tipo===dt.AI_W_SIGNAL_BEARISH)){if(Z.marker_time&&Z.marker_position&&Z.marker_shape){const se=parseInt(_.slice(1,3),16),ge=parseInt(_.slice(3,5),16),le=parseInt(_.slice(5,7),16),Ze=`rgba(${se}, ${ge}, ${le}, ${S})`;F.push({time:Z.marker_time,position:Z.marker_position,color:Ze,shape:Z.marker_shape,text:Z.marker_text||"W"})}}else if(Z.marker_time&&Z.marker_position&&Z.marker_shape){let se="#FFA500",ge=.7;Z.tipo===dt.ENTRADA_LARGO?se=`rgba(34, 197, 94, ${ge})`:Z.tipo===dt.ENTRADA_CORTO?se=`rgba(239, 68, 68, ${ge})`:Z.marker_shape==="arrowUp"?se=`rgba(76, 175, 80, ${ge})`:Z.marker_shape==="arrowDown"&&(se=`rgba(244, 67, 54, ${ge})`),F.push({time:Z.marker_time,position:Z.marker_position,color:se,shape:Z.marker_shape,text:Z.marker_text||""})}}),w.setMarkers(F),he){const{niveles_retroceso:Z,niveles_extension:te}=he,se=h==="dark"?Pn.dark:Pn.light,ge=(le,Ze,ye="")=>{le.forEach(mt=>{const Ne=w.createPriceLine({price:mt.price,color:Ze,lineWidth:1,lineStyle:Zi.LargeDashed,axisLabelVisible:!0,title:`${ye}${mt.label}`});B.current.push(Ne)})};Z&&ge(Z,se.fiboRetracement),te&&ge(te,se.fiboExtension,"Ext: ")}}},[i,v,U,ee,h,_,S,b]),ue.useEffect(()=>{if(E.current&&I.current&&R.current){const j=E.current;R.current&&j.priceScale(R.current).applyOptions({visible:m>0})}},[m,E,I,R,x]),M.jsx("div",{ref:x,className:"w-full h-full relative",children:K==="error"&&M.jsx("div",{className:"absolute top-2 left-2 bg-red-500 text-white p-2 rounded text-xs z-10",children:"Connection Error"})})},hi=({children:n})=>M.jsx("h3",{className:"text-md sm:text-lg font-semibold mt-3 sm:mt-4 mb-1.5 sm:mb-2 text-sky-400 border-b border-slate-700 pb-1",children:n}),vt=({label:n,value:e,isCode:t=!1,valueClassName:i=""})=>e||e===0?M.jsxs("p",{className:"text-xs sm:text-sm text-slate-300",children:[M.jsxs("span",{className:"font-medium text-slate-100",children:[n,":"]})," ",t?M.jsx("code",{className:"text-xs bg-slate-600 p-0.5 sm:p-1 rounded",children:e}):M.jsx("span",{className:i,children:e})]}):null,hu=({setup:n,isMobile:e})=>{var t;return!n||n.tipo==="ninguno"?M.jsx("p",{className:"text-xs sm:text-sm text-slate-400 italic",children:"No se identificó una configuración de trade específica."}):M.jsxs("div",{className:"space-y-1 mt-1 p-2 sm:p-3 bg-slate-700/50 rounded-md",children:[M.jsx(vt,{label:"Tipo",value:(t=n.tipo)==null?void 0:t.toUpperCase()}),!e&&M.jsx(vt,{label:"Condición de Entrada",value:n.descripcion_entrada}),M.jsx(vt,{label:"Precio de Entrada Ideal",value:n.punto_entrada_ideal?`$${n.punto_entrada_ideal.toFixed(Math.abs(n.punto_entrada_ideal)<1?4:2)}`:void 0}),!e&&M.jsx(vt,{label:"Zona de Entrada",value:n.zona_entrada?`[$${n.zona_entrada[0].toFixed(Math.abs(n.zona_entrada[0])<1?4:2)} - $${n.zona_entrada[1].toFixed(Math.abs(n.zona_entrada[1])<1?4:2)}]`:void 0}),M.jsx(vt,{label:"Stop Loss",value:n.stop_loss?`$${n.stop_loss.toFixed(Math.abs(n.stop_loss)<1?4:2)}`:void 0}),M.jsx(vt,{label:"Take Profit 1",value:n.take_profit_1?`$${n.take_profit_1.toFixed(Math.abs(n.take_profit_1)<1?4:2)}`:void 0}),!e&&n.take_profit_2&&M.jsx(vt,{label:"Take Profit 2",value:`$${n.take_profit_2.toFixed(Math.abs(n.take_profit_2)<1?4:2)}`}),!e&&n.take_profit_3&&M.jsx(vt,{label:"Take Profit 3",value:`$${n.take_profit_3.toFixed(Math.abs(n.take_profit_3)<1?4:2)}`}),n.razon_fundamental&&M.jsxs("p",{className:"text-xs sm:text-sm text-slate-300 mt-1",children:[M.jsx("span",{className:"font-medium text-slate-100",children:"Razón:"})," ",n.razon_fundamental]}),!e&&n.confirmaciones_adicionales&&n.confirmaciones_adicionales.length>0&&M.jsx(vt,{label:"Confirmaciones",value:n.confirmaciones_adicionales.join(", ")}),!e&&M.jsx(vt,{label:"Riesgo/Beneficio",value:n.ratio_riesgo_beneficio}),M.jsx(vt,{label:"Confianza",value:n.calificacion_confianza})]})},Ny=({level:n})=>M.jsxs("li",{className:"text-xs",children:[M.jsxs("span",{className:"font-medium text-slate-200",children:[n.label,":"]})," $",n.price.toFixed(Math.abs(n.price)<1?4:2)]}),rR=({fiboAnalysis:n})=>{if(!n)return M.jsx("p",{className:"text-xs sm:text-sm text-slate-400 italic",children:"Análisis Fibonacci no disponible."});const e=[...n.niveles_retroceso||[]].sort((i,o)=>n.precio_fin_impulso>n.precio_inicio_impulso?o.price-i.price:i.price-o.price),t=[...n.niveles_extension||[]].sort((i,o)=>i.level-o.level);return M.jsxs("div",{className:"space-y-1.5 sm:space-y-2 mt-1.5 sm:mt-2 p-2 sm:p-3 bg-slate-700 rounded-md",children:[M.jsxs("p",{className:"text-xs sm:text-sm text-slate-300",children:[M.jsx("span",{className:"font-medium text-slate-100",children:"Impulso:"})," ",n.descripcion_impulso]}),M.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-2 text-xs",children:[M.jsx(vt,{label:"Inicio Impulso (A)",value:n.precio_inicio_impulso?`$${n.precio_inicio_impulso.toFixed(Math.abs(n.precio_inicio_impulso)<1?4:2)}`:"N/A"}),M.jsx(vt,{label:"Fin Impulso (B)",value:n.precio_fin_impulso?`$${n.precio_fin_impulso.toFixed(Math.abs(n.precio_fin_impulso)<1?4:2)}`:"N/A"}),n.precio_fin_retroceso!=null&&M.jsx(vt,{label:"Fin Retroceso (C)",value:`$${n.precio_fin_retroceso.toFixed(Math.abs(n.precio_fin_retroceso)<1?4:2)}`})]}),e.length>0&&M.jsxs("div",{children:[M.jsx("h4",{className:"text-xs sm:text-sm font-semibold text-slate-200 mt-1.5 sm:mt-2 mb-1",children:"Niveles de Retroceso (A-B):"}),M.jsx("ul",{className:"list-disc list-inside space-y-0.5 pl-2",children:e.map((i,o)=>M.jsx(Ny,{level:i},`retracement-${o}`))})]}),t.length>0&&M.jsxs("div",{children:[M.jsx("h4",{className:"text-xs sm:text-sm font-semibold text-slate-200 mt-1.5 sm:mt-2 mb-1",children:"Niveles de Extensión (A-B-C):"}),M.jsx("ul",{className:"list-disc list-inside space-y-0.5 pl-2",children:t.map((i,o)=>M.jsx(Ny,{level:i},`extension-${o}`))})]})]})},uR=({panelMode:n,analysisResult:e,analysisLoading:t,analysisError:i,chatMessages:o,chatLoading:a,chatError:d,onSendMessage:h,onClearChatHistory:p,theme:m,isMobile:v,apiKeyPresent:_})=>{const[S,b]=ue.useState(""),x=ue.useRef(null),E=ue.useRef(null);ue.useEffect(()=>{var R;n==="chat"&&((R=x.current)==null||R.scrollIntoView({behavior:"smooth"}))},[o,n]),ue.useEffect(()=>{n==="chat"&&E.current&&E.current.focus()},[n]);const D=()=>{S.trim()&&(h(S.trim()),b(""))},I=({title:R,children:U,titleColor:Y="text-sky-400"})=>M.jsxs("div",{className:"p-3 sm:p-4 bg-slate-800 rounded-lg shadow h-full",children:[M.jsx("h2",{className:`text-lg sm:text-xl font-semibold mb-2 ${Y}`,children:R}),M.jsx("div",{className:"text-xs sm:text-sm text-slate-300",children:U})]}),B=()=>{var de,Ee,ke,be,P,ie,j,he,w,F,Z,te,se,ge,le,Ze,ye,mt,Ne,et;if(t)return M.jsx("div",{className:"p-3 sm:p-4 text-center",children:"Cargando análisis..."});if(i)return M.jsxs("div",{className:"p-3 sm:p-4 text-red-400",children:["Error en Análisis: ",i]});if(!e)return M.jsx("div",{className:"p-3 sm:p-4 text-center",children:'Selecciona "Análisis IA" para obtener un análisis técnico.'});const R=((de=e.escenarios_probables)==null?void 0:de.find(me=>me.probabilidad==="alta"))||((Ee=e.escenarios_probables)==null?void 0:Ee[0]),U=((ke=e.escenarios_probables)==null?void 0:ke.filter(me=>me!==R))||[],Y=(P=(be=e.conclusion_recomendacion)==null?void 0:be.mejor_oportunidad_actual)==null?void 0:P.tipo,G=(ie=e.analisis_general)==null?void 0:ie.sesgo_direccional_general,K={alcista:"text-green-400",bajista:"text-red-400"}[(G==null?void 0:G.toLowerCase())||""]||"text-slate-300",ee={largo:"text-green-400",corto:"text-red-400"}[(Y==null?void 0:Y.toLowerCase())||""]||"text-slate-300";return M.jsxs("div",{className:"p-3 sm:p-4",children:[M.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-2 sm:mb-3 text-sky-400",children:"Resultados del Análisis IA"}),!v&&R&&M.jsxs(M.Fragment,{children:[M.jsx(hi,{children:"Escenario Principal"}),M.jsxs("div",{className:"p-2 sm:p-3 bg-slate-700 rounded-md",children:[M.jsx("p",{className:"text-xs sm:text-sm font-semibold text-slate-100",children:R.nombre_escenario}),M.jsx("p",{className:"text-xs text-slate-300 mt-1",children:R.descripcion_detallada}),R.niveles_clave_de_invalidacion&&M.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:["Invalidación: ",R.niveles_clave_de_invalidacion]}),R.trade_setup_asociado&&R.trade_setup_asociado.tipo!=="ninguno"&&M.jsxs(M.Fragment,{children:[M.jsxs("p",{className:"text-xs font-semibold text-slate-100 mt-1.5 sm:mt-2",children:["Configuración Asociada: ",M.jsx("span",{className:R.trade_setup_asociado.tipo==="largo"?"text-green-400":"text-red-400",children:R.trade_setup_asociado.tipo.toUpperCase()})]}),M.jsx(hu,{setup:R.trade_setup_asociado,isMobile:v})]})]})]}),!v&&!R&&M.jsx("p",{className:"text-xs sm:text-sm text-slate-400 italic",children:"No se identificó un escenario principal."}),(U.length>0||v&&R)&&M.jsxs(M.Fragment,{children:[M.jsx(hi,{children:"Escenarios Alternativos"}),v&&R&&!U.find(me=>me.nombre_escenario===R.nombre_escenario)&&M.jsxs("div",{className:"mt-1.5 sm:mt-2 p-2 sm:p-3 bg-slate-700/70 rounded-md",children:[M.jsxs("p",{className:"text-xs sm:text-sm font-semibold text-slate-200",children:[R.nombre_escenario," ",M.jsxs("span",{className:"text-xs text-slate-400",children:["(Prob: ",R.probabilidad,")"]})]}),M.jsx("p",{className:"text-xs text-slate-300 mt-1",children:R.descripcion_detallada}),R.niveles_clave_de_invalidacion&&M.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:["Invalidación: ",R.niveles_clave_de_invalidacion]}),R.trade_setup_asociado&&R.trade_setup_asociado.tipo!=="ninguno"&&M.jsxs(M.Fragment,{children:[M.jsxs("p",{className:"text-xs font-semibold text-slate-100 mt-1.5 sm:mt-2",children:["Trade Potencial: ",M.jsx("span",{className:R.trade_setup_asociado.tipo==="largo"?"text-green-400 font-bold":"text-red-400 font-bold",children:R.trade_setup_asociado.tipo.toUpperCase()})]}),M.jsx(hu,{setup:R.trade_setup_asociado,isMobile:v})]})]}),U.map((me,Me)=>M.jsxs("div",{className:"mt-1.5 sm:mt-2 p-2 sm:p-3 bg-slate-700/70 rounded-md",children:[M.jsxs("p",{className:"text-xs sm:text-sm font-semibold text-slate-200",children:[me.nombre_escenario," ",M.jsxs("span",{className:"text-xs text-slate-400",children:["(Prob: ",me.probabilidad,")"]})]}),M.jsx("p",{className:"text-xs text-slate-300 mt-1",children:me.descripcion_detallada}),me.niveles_clave_de_invalidacion&&M.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:["Invalidación: ",me.niveles_clave_de_invalidacion]}),me.trade_setup_asociado&&me.trade_setup_asociado.tipo!=="ninguno"&&M.jsxs(M.Fragment,{children:[M.jsxs("p",{className:"text-xs font-semibold text-slate-100 mt-1.5 sm:mt-2",children:["Trade Potencial: ",M.jsx("span",{className:me.trade_setup_asociado.tipo==="largo"?"text-green-400 font-bold":"text-red-400 font-bold",children:me.trade_setup_asociado.tipo.toUpperCase()})]}),M.jsx(hu,{setup:me.trade_setup_asociado,isMobile:v})]})]},Me))]}),!v&&M.jsxs(M.Fragment,{children:[M.jsx(hi,{children:"Señal Activa Sugerida"}),M.jsx("p",{className:`text-xs sm:text-sm font-semibold ${ee}`,children:Y&&Y!=="ninguno"?Y.toUpperCase():"NINGUNA"}),M.jsx(hi,{children:"Configuración de Trade Recomendada"}),M.jsx(hu,{setup:(j=e.conclusion_recomendacion)==null?void 0:j.mejor_oportunidad_actual,isMobile:v}),M.jsx(hi,{children:"Análisis Fibonacci"}),M.jsx(rR,{fiboAnalysis:e.analisis_fibonacci})]}),e.puntos_clave_grafico&&e.puntos_clave_grafico.length>0&&M.jsxs(M.Fragment,{children:[" ",M.jsx(hi,{children:"Niveles y Zonas Clave Identificados"}),M.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs sm:text-sm text-slate-300 mt-1.5 sm:mt-2 p-1.5 sm:p-2 bg-slate-700 rounded-md",children:[e.puntos_clave_grafico.map((me,Me)=>M.jsxs("li",{children:[M.jsx("span",{className:"font-medium text-slate-100",children:me.label}),!v&&me.tipo&&M.jsxs("span",{className:"text-xs text-slate-400",children:[" (",me.tipo.replace(/_/g," "),")"]}),me.zona&&M.jsxs("span",{className:"text-xs text-slate-400",children:[" [$$",me.zona[0].toFixed(Math.abs(me.zona[0])<1?4:2)," - $$",me.zona[1].toFixed(Math.abs(me.zona[1])<1?4:2),"]"]}),me.nivel!=null&&M.jsxs("span",{className:"text-xs text-slate-400",children:[" @ $",typeof me.nivel=="number"?me.nivel.toFixed(Math.abs(me.nivel)<1?4:2):me.nivel]}),!v&&me.temporalidad&&M.jsxs("span",{className:"text-xs text-slate-500",children:[" (",me.temporalidad,")"]}),(me.tipo===dt.POI_DEMANDA||me.tipo===dt.POI_OFERTA)&&me.mitigado&&M.jsx("span",{className:"text-xs text-sky-300",children:" (Mitigado)"}),!v&&me.importancia&&M.jsxs("span",{className:"text-xs text-yellow-400",children:[" Importancia: ",me.importancia]})]},Me))," "]})," "]}),M.jsx(hi,{children:"Estructura General de Mercado y Volumen"}),((he=e.analisis_general)==null?void 0:he.estructura_mercado_resumen)&&Object.entries(e.analisis_general.estructura_mercado_resumen).map(([me,Me])=>Me&&M.jsx(vt,{label:`Estructura (${me.replace("htf_","").replace("mtf_","").replace("ltf_","")})`,value:Me},me)),!v&&M.jsx(vt,{label:"Fase Wyckoff",value:(w=e.analisis_general)==null?void 0:w.fase_wyckoff_actual}),M.jsx(vt,{label:"Sesgo General",value:(Z=(F=e.analisis_general)==null?void 0:F.sesgo_direccional_general)==null?void 0:Z.toUpperCase(),valueClassName:K+" font-semibold"}),!v&&((te=e.analisis_general)==null?void 0:te.comentario_volumen)&&M.jsxs("p",{className:"text-xs sm:text-sm text-slate-300 mt-1",children:[M.jsx("span",{className:"font-medium text-slate-100",children:"Comentario Breve de Volumen:"})," ",e.analisis_general.comentario_volumen]}),!v&&((se=e.analisis_general)==null?void 0:se.interpretacion_volumen_detallada)&&M.jsxs("p",{className:"text-xs sm:text-sm text-slate-300 mt-1",children:[M.jsx("span",{className:"font-medium text-slate-100",children:"Análisis Detallado de Volumen:"})," ",e.analisis_general.interpretacion_volumen_detallada]}),!v&&((ge=e.analisis_general)==null?void 0:ge.comentario_funding_rate_oi)&&M.jsxs(M.Fragment,{children:[" ",M.jsx(hi,{children:"Análisis Conceptual FR/OI"}),M.jsxs("p",{className:"text-xs sm:text-sm text-slate-300 mt-1 mb-1.5 sm:mb-2 p-2 sm:p-3 bg-slate-700 rounded-md",children:[e.analisis_general.comentario_funding_rate_oi," "]})," "]}),M.jsx(hi,{children:"Conclusión y Recomendaciones"}),((le=e.conclusion_recomendacion)==null?void 0:le.resumen_ejecutivo)&&M.jsx("p",{className:"text-xs sm:text-sm text-slate-300 mt-1 mb-1.5 sm:mb-2 p-2 sm:p-3 bg-slate-700 rounded-md",children:e.conclusion_recomendacion.resumen_ejecutivo}),!v&&M.jsx(vt,{label:"Próximo Movimiento Esperado",value:(Ze=e.conclusion_recomendacion)==null?void 0:Ze.proximo_movimiento_esperado}),!v&&((ye=e.conclusion_recomendacion)==null?void 0:ye.oportunidades_reentrada_detectadas)&&M.jsxs(M.Fragment,{children:[" ",M.jsx("h4",{className:"text-sm font-semibold mt-2 mb-1 text-sky-300",children:"Oportunidades de Reentrada:"}),M.jsx("p",{className:"text-xs sm:text-sm text-slate-300 p-2 bg-slate-700/70 rounded-md",children:e.conclusion_recomendacion.oportunidades_reentrada_detectadas})," "]}),!v&&((mt=e.conclusion_recomendacion)==null?void 0:mt.consideraciones_salida_trade)&&M.jsxs(M.Fragment,{children:[" ",M.jsx("h4",{className:"text-sm font-semibold mt-2 mb-1 text-sky-300",children:"Consideraciones de Salida:"}),M.jsx("p",{className:"text-xs sm:text-sm text-slate-300 p-2 bg-slate-700/70 rounded-md",children:e.conclusion_recomendacion.consideraciones_salida_trade})," "]}),!v&&((Ne=e.conclusion_recomendacion)==null?void 0:Ne.senales_confluencia_avanzada)&&M.jsxs(M.Fragment,{children:[" ",M.jsx("h4",{className:"text-sm font-semibold mt-2 mb-1 text-sky-300",children:"Señales Avanzadas de Confluencia (Conceptual):"}),M.jsx("p",{className:"text-xs sm:text-sm text-slate-300 p-2 bg-slate-700/70 rounded-md",children:e.conclusion_recomendacion.senales_confluencia_avanzada})," "]}),!v&&M.jsx(vt,{label:"Advertencias/Riesgos",value:(et=e.conclusion_recomendacion)==null?void 0:et.advertencias_riesgos})]})},q=()=>{const R=m==="dark"?"bg-slate-800":"bg-white",U=m==="dark"?"text-slate-100":"text-slate-900",Y=m==="dark"?"bg-slate-700":"bg-gray-100",G=m==="dark"?"border-slate-600":"border-gray-300",ne=m==="dark"?"bg-sky-600 hover:bg-sky-700":"bg-sky-500 hover:bg-sky-600",K=m==="dark"?"bg-sky-700":"bg-sky-500",X=m==="dark"?"bg-slate-600":"bg-gray-200",ee=m==="dark"?"text-slate-50":"text-slate-800";return M.jsxs("div",{className:`flex flex-col h-full ${R} ${U}`,children:[M.jsxs("div",{className:`flex justify-between items-center p-3 sm:p-4 border-b ${G} flex-shrink-0`,children:[M.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-sky-400",children:"Asistente de Trading IA"}),_&&o.length>0&&M.jsx("button",{onClick:p,className:`p-1 rounded-md transition-colors ${m==="dark"?"text-slate-400 hover:text-slate-200 hover:bg-slate-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-200"}`,title:"Borrar historial del chat","aria-label":"Borrar historial del chat",children:M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-4 h-4 sm:w-5 sm:h-5",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12.56 0c1.153 0 2.243.032 3.223.096M15 5.25a3 3 0 00-3-3m-3 3a3 3 0 01-3-3m-3 3a3 3 0 003 3m3 3a3 3 0 013 3m3 3a3 3 0 003-3"})})})]}),M.jsxs("div",{className:"flex-grow p-3 sm:p-4 space-y-3 overflow-y-auto",children:[!_&&M.jsx("div",{className:"p-3 text-sm text-yellow-300 bg-yellow-800 bg-opacity-50 rounded-lg border border-yellow-600",children:"Clave API no configurada. Las funciones de Chat IA están deshabilitadas."}),_&&d&&M.jsxs("div",{className:"p-3 text-sm text-red-300 bg-red-800 bg-opacity-50 rounded-lg border border-red-600",children:["Error en Chat: ",d]}),o.map(de=>M.jsx("div",{className:`flex ${de.sender==="user"?"justify-end":"justify-start"}`,children:M.jsx("div",{className:`max-w-[80%] p-2 sm:p-3 rounded-lg text-xs sm:text-sm shadow ${de.sender==="user"?`${K} text-white`:`${X} ${ee}`}`,dangerouslySetInnerHTML:{__html:de.text.replace(/\n/g,"<br/>").replace(/```json\s*\n?(.*?)\n?\s*```/gs,(Ee,ke)=>`<pre class="bg-slate-900 text-slate-100 p-2 rounded overflow-x-auto text-xs">${ke.replace(/</g,"&lt;").replace(/>/g,"&gt;").trim()}</pre>`).replace(/`([^`]+)`/g,'<code class="bg-opacity-50 bg-black text-white px-1 py-0.5 rounded text-xs">$1</code>').replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>")}})},de.id)),M.jsx("div",{ref:x})]}),a&&M.jsx("div",{className:`px-3 sm:px-4 pb-1 text-xs text-center ${m==="dark"?"text-sky-300":"text-sky-600"}`,children:"TradeGuru IA está pensando..."}),M.jsx("div",{className:`p-3 sm:p-4 border-t ${G} flex-shrink-0`,children:M.jsxs("div",{className:"flex items-start space-x-2",children:[M.jsx("textarea",{ref:E,value:S,onChange:de=>b(de.target.value),onKeyPress:de=>{de.key==="Enter"&&!de.shiftKey&&(de.preventDefault(),D())},placeholder:_?"Pregunta a TradeGuru AI...":"Se requiere Clave API para el chat",className:`flex-grow p-2 sm:p-2.5 border rounded-md shadow-sm text-xs sm:text-sm resize-none ${Y} ${U} ${G} focus:ring-sky-500 focus:border-sky-500`,rows:2,disabled:a||!_||!!d&&o.length===0,"aria-label":"Entrada de mensaje de chat"}),M.jsx("button",{onClick:D,disabled:a||!S.trim()||!_||!!d&&o.length===0,className:`px-3 py-2 sm:px-4 sm:py-2.5 text-white font-semibold rounded-md shadow-sm text-xs sm:text-sm ${ne} disabled:bg-slate-500 disabled:cursor-not-allowed`,"aria-label":"Enviar mensaje",children:"Enviar"})]})})]})};return n==="initial"?M.jsx(I,{title:"Panel de IA",children:'Selecciona "Análisis IA" para un análisis técnico o "Asistente IA" para chatear.'}):M.jsx("div",{className:"flex flex-col h-full overflow-hidden",children:n==="analysis"?B():q()})},cR=({apiKeyPresent:n})=>n?null:M.jsxs("div",{className:"p-4 mb-4 text-sm text-yellow-300 bg-yellow-800 bg-opacity-30 rounded-lg border border-yellow-700",role:"alert",children:[M.jsx("span",{className:"font-medium",children:"Clave API No Configurada:"})," La clave API de Gemini (process.env.API_KEY) no está disponible. Las funciones de análisis IA estarán deshabilitadas. Asegúrate de que la clave API esté configurada correctamente en tu entorno. Este mensaje es para desarrolladores."]}),fR=({movingAverages:n,setMovingAverages:e})=>{const t=(i,o,a)=>{const d=n.map((h,p)=>{if(p===i){if(o==="period"){const m=parseInt(a,10);return{...h,[o]:m>0?m:1}}return o==="visible"?{...h,[o]:!!a}:{...h,[o]:a}}return h});e(d)};return M.jsxs("div",{className:"flex flex-wrap items-center gap-x-2 gap-y-1 p-0.5 sm:p-1 bg-slate-800 rounded-md border border-slate-700",children:[M.jsx("h3",{className:"text-[11px] sm:text-xs font-semibold text-sky-400 mr-1 sm:mr-1.5 whitespace-nowrap",children:"MMs:"}),n.map((i,o)=>M.jsxs("div",{className:"flex items-center gap-x-1 sm:gap-x-1.5 p-0.5 sm:p-1 bg-slate-700 rounded",children:[M.jsx("input",{type:"checkbox",id:`ma-visible-${o}`,checked:!!i.visible,onChange:a=>t(o,"visible",a.target.checked),className:"w-3 h-3 sm:w-3.5 sm:h-3.5 text-sky-600 bg-slate-600 border-slate-500 rounded focus:ring-sky-500 focus:ring-offset-slate-800",title:`Alternar visibilidad MM ${o+1}`}),M.jsxs("select",{id:`ma-type-${o}`,value:i.type,onChange:a=>t(o,"type",a.target.value),className:"bg-slate-600 border-slate-500 text-slate-100 text-xs rounded px-1 py-0 sm:py-0.5 focus:ring-sky-500 focus:border-sky-500",title:`Tipo MM ${o+1}`,children:[M.jsx("option",{value:"MA",children:"MA"}),M.jsx("option",{value:"EMA",children:"EMA"})]}),M.jsx("input",{type:"number",id:`ma-period-${o}`,value:i.period,min:"1",max:"500",onChange:a=>t(o,"period",a.target.value),className:"bg-slate-600 border-slate-500 text-slate-100 text-xs rounded px-1 py-0 sm:py-0.5 w-10 sm:w-12 focus:ring-sky-500 focus:border-sky-500 appearance-none text-center",title:`Período MM ${o+1}`}),M.jsx("input",{type:"color",id:`ma-color-${o}`,value:i.color,onChange:a=>t(o,"color",a.target.value),className:"w-4 h-4 sm:w-5 sm:h-5 p-0 border-none rounded cursor-pointer bg-slate-600",title:`Color MM ${o+1}`})]},i.id))]})},dR=({isOpen:n,onClose:e,theme:t,movingAverages:i,setMovingAverages:o,onToggleAllMAs:a,chartPaneBackgroundColor:d,setChartPaneBackgroundColor:h,volumePaneHeight:p,setVolumePaneHeight:m,wSignalColor:v,setWSignalColor:_,wSignalOpacity:S,setWSignalOpacity:b,showWSignals:x,setShowWSignals:E})=>{if(!n)return null;const D=i.every(Y=>Y.visible),I=t==="dark"?"bg-slate-800":"bg-white",B=t==="dark"?"text-slate-100":"text-slate-900",q=t==="dark"?"bg-slate-700":"bg-gray-100",R=t==="dark"?"border-slate-700":"border-gray-300",U=t==="dark"?"text-slate-300":"text-slate-700";return M.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",onClick:e,role:"dialog","aria-modal":"true","aria-labelledby":"display-settings-dialog-title",children:M.jsxs("div",{className:`flex flex-col w-full max-w-md shadow-xl rounded-lg ${I} ${B}`,onClick:Y=>Y.stopPropagation(),children:[M.jsxs("header",{className:`p-3 sm:p-4 border-b ${R} flex justify-between items-center flex-shrink-0`,children:[M.jsx("h2",{id:"display-settings-dialog-title",className:"text-md sm:text-lg font-semibold text-sky-400",children:"Configuración de Visualización"}),M.jsx("button",{onClick:e,className:`p-1 rounded-md ${t==="dark"?"hover:bg-slate-700":"hover:bg-gray-200"}`,"aria-label":"Cerrar diálogo de configuración",children:M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 sm:w-6 sm:h-6",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),M.jsxs("div",{className:"flex-grow p-3 sm:p-4 space-y-3 sm:space-y-4 overflow-y-auto max-h-[70vh]",children:[M.jsxs("div",{className:`p-2 sm:p-3 rounded-md border ${R} ${q}`,children:[M.jsx("h4",{className:"text-sm sm:text-md font-semibold text-sky-300 mb-2",children:"Medias Móviles"}),M.jsx(fR,{movingAverages:i,setMovingAverages:o}),M.jsx("div",{className:"mt-2",children:M.jsxs("label",{htmlFor:"toggle-all-mas-dialog",className:`flex items-center cursor-pointer text-xs sm:text-sm ${U}`,children:[M.jsx("input",{type:"checkbox",id:"toggle-all-mas-dialog",checked:D,onChange:Y=>a(Y.target.checked),className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-sky-600 bg-slate-100 border-slate-300 rounded focus:ring-sky-500 dark:focus:ring-sky-600 dark:ring-offset-slate-800 focus:ring-2 dark:bg-slate-700 dark:border-slate-600 mr-2"}),"Mostrar Todas las Medias Móviles"]})})]}),M.jsxs("div",{className:`p-2 sm:p-3 rounded-md border ${R} ${q}`,children:[M.jsx("h4",{className:"text-sm sm:text-md font-semibold text-sky-300 mb-2",children:"Apariencia del Gráfico"}),M.jsxs("div",{className:"mb-2 sm:mb-3",children:[M.jsx("label",{htmlFor:"chart-bg-color-picker-dialog",className:`block mb-1 text-xs sm:text-sm font-medium ${U}`,children:"Color de Fondo del Gráfico"}),M.jsx("input",{type:"color",id:"chart-bg-color-picker-dialog",value:d,onChange:Y=>h(Y.target.value),className:`w-full h-7 sm:h-8 p-0 border-none rounded cursor-pointer ${t==="dark"?"bg-slate-600":"bg-gray-200"}`})]}),M.jsxs("div",{className:"mb-2 sm:mb-3",children:[M.jsx("label",{htmlFor:"volume-pane-height-dialog",className:`block mb-1 text-xs sm:text-sm font-medium ${U}`,children:p>0?`Altura Panel Volumen: ${p}px (Referencial)`:"Panel de Volumen Oculto"}),M.jsx("input",{type:"range",id:"volume-pane-height-dialog",min:"0",max:"300",step:"10",value:p,onChange:Y=>m(Number(Y.target.value)),className:"w-full h-2 bg-slate-600 rounded-lg appearance-none cursor-pointer accent-sky-500",title:p>0?"Ajustar altura (referencial, visibilidad si >0)":"Mostrar panel de volumen (establecer >0)"}),M.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Nota: 0 oculta el panel de volumen. La altura es referencial para la visualización."})]})]}),M.jsxs("div",{className:`p-2 sm:p-3 rounded-md border ${R} ${q}`,children:[M.jsx("h4",{className:"text-sm sm:text-md font-semibold text-sky-300 mb-2",children:"Apariencia Señal W"}),M.jsxs("div",{className:"flex items-center mb-2 sm:mb-3",children:[M.jsx("input",{type:"checkbox",id:"show-w-signals-checkbox-dialog",checked:x,onChange:Y=>E(Y.target.checked),className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-sky-600 bg-slate-100 border-slate-300 rounded focus:ring-sky-500 dark:focus:ring-sky-600 dark:ring-offset-slate-800 focus:ring-2 dark:bg-slate-700 dark:border-slate-600 mr-2"}),M.jsx("label",{htmlFor:"show-w-signals-checkbox-dialog",className:`text-xs sm:text-sm font-medium ${U}`,children:"Mostrar Señales W"})]}),M.jsxs("div",{className:"mb-2 sm:mb-3",children:[M.jsx("label",{htmlFor:"w-signal-color-picker-dialog",className:`block mb-1 text-xs sm:text-sm font-medium ${U}`,children:"Color Marcador Señal W"}),M.jsx("input",{type:"color",id:"w-signal-color-picker-dialog",value:v,onChange:Y=>_(Y.target.value),className:`w-full h-7 sm:h-8 p-0 border-none rounded cursor-pointer ${t==="dark"?"bg-slate-600":"bg-gray-200"}`})]}),M.jsxs("div",{className:"mb-2 sm:mb-3",children:[M.jsxs("label",{htmlFor:"w-signal-opacity-slider-dialog",className:`block mb-1 text-xs sm:text-sm font-medium ${U}`,children:["Opacidad Marcador Señal W: ",S,"%"]}),M.jsx("input",{type:"range",id:"w-signal-opacity-slider-dialog",min:"0",max:"100",step:"1",value:S,onChange:Y=>b(Number(Y.target.value)),className:"w-full h-2 bg-slate-600 rounded-lg appearance-none cursor-pointer accent-sky-500"})]})]})]})]})})};var Be;(function(n){n.assertEqual=o=>{};function e(o){}n.assertIs=e;function t(o){throw new Error}n.assertNever=t,n.arrayToEnum=o=>{const a={};for(const d of o)a[d]=d;return a},n.getValidEnumValues=o=>{const a=n.objectKeys(o).filter(h=>typeof o[o[h]]!="number"),d={};for(const h of a)d[h]=o[h];return n.objectValues(d)},n.objectValues=o=>n.objectKeys(o).map(function(a){return o[a]}),n.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{const a=[];for(const d in o)Object.prototype.hasOwnProperty.call(o,d)&&a.push(d);return a},n.find=(o,a)=>{for(const d of o)if(a(d))return d},n.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&Number.isFinite(o)&&Math.floor(o)===o;function i(o,a=" | "){return o.map(d=>typeof d=="string"?`'${d}'`:d).join(a)}n.joinValues=i,n.jsonStringifyReplacer=(o,a)=>typeof a=="bigint"?a.toString():a})(Be||(Be={}));var Dy;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(Dy||(Dy={}));const re=Be.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ki=n=>{switch(typeof n){case"undefined":return re.undefined;case"string":return re.string;case"number":return Number.isNaN(n)?re.nan:re.number;case"boolean":return re.boolean;case"function":return re.function;case"bigint":return re.bigint;case"symbol":return re.symbol;case"object":return Array.isArray(n)?re.array:n===null?re.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?re.promise:typeof Map<"u"&&n instanceof Map?re.map:typeof Set<"u"&&n instanceof Set?re.set:typeof Date<"u"&&n instanceof Date?re.date:re.object;default:return re.unknown}},Q=Be.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class yi extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(a){return a.message},i={_errors:[]},o=a=>{for(const d of a.issues)if(d.code==="invalid_union")d.unionErrors.map(o);else if(d.code==="invalid_return_type")o(d.returnTypeError);else if(d.code==="invalid_arguments")o(d.argumentsError);else if(d.path.length===0)i._errors.push(t(d));else{let h=i,p=0;for(;p<d.path.length;){const m=d.path[p];p===d.path.length-1?(h[m]=h[m]||{_errors:[]},h[m]._errors.push(t(d))):h[m]=h[m]||{_errors:[]},h=h[m],p++}}};return o(this),i}static assert(e){if(!(e instanceof yi))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Be.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},i=[];for(const o of this.issues)o.path.length>0?(t[o.path[0]]=t[o.path[0]]||[],t[o.path[0]].push(e(o))):i.push(e(o));return{formErrors:i,fieldErrors:t}}get formErrors(){return this.flatten()}}yi.create=n=>new yi(n);const mh=(n,e)=>{let t;switch(n.code){case Q.invalid_type:n.received===re.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case Q.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,Be.jsonStringifyReplacer)}`;break;case Q.unrecognized_keys:t=`Unrecognized key(s) in object: ${Be.joinValues(n.keys,", ")}`;break;case Q.invalid_union:t="Invalid input";break;case Q.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Be.joinValues(n.options)}`;break;case Q.invalid_enum_value:t=`Invalid enum value. Expected ${Be.joinValues(n.options)}, received '${n.received}'`;break;case Q.invalid_arguments:t="Invalid function arguments";break;case Q.invalid_return_type:t="Invalid function return type";break;case Q.invalid_date:t="Invalid date";break;case Q.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:Be.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case Q.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case Q.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case Q.custom:t="Invalid input";break;case Q.invalid_intersection_types:t="Intersection results could not be merged";break;case Q.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case Q.not_finite:t="Number must be finite";break;default:t=e.defaultError,Be.assertNever(n)}return{message:t}};let hR=mh;function mR(){return hR}const pR=n=>{const{data:e,path:t,errorMaps:i,issueData:o}=n,a=[...t,...o.path||[]],d={...o,path:a};if(o.message!==void 0)return{...o,path:a,message:o.message};let h="";const p=i.filter(m=>!!m).slice().reverse();for(const m of p)h=m(d,{data:e,defaultError:h}).message;return{...o,path:a,message:h}};function oe(n,e){const t=mR(),i=pR({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===mh?void 0:mh].filter(o=>!!o)});n.common.issues.push(i)}class Ft{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const i=[];for(const o of t){if(o.status==="aborted")return xe;o.status==="dirty"&&e.dirty(),i.push(o.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,t){const i=[];for(const o of t){const a=await o.key,d=await o.value;i.push({key:a,value:d})}return Ft.mergeObjectSync(e,i)}static mergeObjectSync(e,t){const i={};for(const o of t){const{key:a,value:d}=o;if(a.status==="aborted"||d.status==="aborted")return xe;a.status==="dirty"&&e.dirty(),d.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof d.value<"u"||o.alwaysSet)&&(i[a.value]=d.value)}return{status:e.value,value:i}}}const xe=Object.freeze({status:"aborted"}),ua=n=>({status:"dirty",value:n}),Cn=n=>({status:"valid",value:n}),ky=n=>n.status==="aborted",Iy=n=>n.status==="dirty",Xo=n=>n.status==="valid",wu=n=>typeof Promise<"u"&&n instanceof Promise;var fe;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(fe||(fe={}));class Zn{constructor(e,t,i,o){this._cachedPath=[],this.parent=e,this.data=t,this._path=i,this._key=o}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const zy=(n,e)=>{if(Xo(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new yi(n.common.issues);return this._error=t,this._error}}};function Ae(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:i,description:o}=n;if(e&&(t||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:o}:{errorMap:(d,h)=>{const{message:p}=n;return d.code==="invalid_enum_value"?{message:p??h.defaultError}:typeof h.data>"u"?{message:p??i??h.defaultError}:d.code!=="invalid_type"?{message:h.defaultError}:{message:p??t??h.defaultError}},description:o}}class Ue{get description(){return this._def.description}_getType(e){return Ki(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Ki(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ft,ctx:{common:e.parent.common,data:e.data,parsedType:Ki(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(wu(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const i=this.safeParse(e,t);if(i.success)return i.data;throw i.error}safeParse(e,t){const i={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ki(e)},o=this._parseSync({data:e,path:i.path,parent:i});return zy(i,o)}"~validate"(e){var i,o;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ki(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:t});return Xo(a)?{value:a.value}:{issues:t.common.issues}}catch(a){(o=(i=a==null?void 0:a.message)==null?void 0:i.toLowerCase())!=null&&o.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(a=>Xo(a)?{value:a.value}:{issues:t.common.issues})}async parseAsync(e,t){const i=await this.safeParseAsync(e,t);if(i.success)return i.data;throw i.error}async safeParseAsync(e,t){const i={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ki(e)},o=this._parse({data:e,path:i.path,parent:i}),a=await(wu(o)?o:Promise.resolve(o));return zy(i,a)}refine(e,t){const i=o=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(o):t;return this._refinement((o,a)=>{const d=e(o),h=()=>a.addIssue({code:Q.custom,...i(o)});return typeof Promise<"u"&&d instanceof Promise?d.then(p=>p?!0:(h(),!1)):d?!0:(h(),!1)})}refinement(e,t){return this._refinement((i,o)=>e(i)?!0:(o.addIssue(typeof t=="function"?t(i,o):t),!1))}_refinement(e){return new jo({schema:this,typeName:Ce.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return ts.create(this,this._def)}nullable(){return el.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Jn.create(this)}promise(){return Du.create(this,this._def)}or(e){return Au.create([this,e],this._def)}and(e){return Ru.create(this,e,this._def)}transform(e){return new jo({...Ae(this._def),schema:this,typeName:Ce.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new yh({...Ae(this._def),innerType:this,defaultValue:t,typeName:Ce.ZodDefault})}brand(){return new OR({typeName:Ce.ZodBranded,type:this,...Ae(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new _h({...Ae(this._def),innerType:this,catchValue:t,typeName:Ce.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Qh.create(this,e)}readonly(){return Sh.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const gR=/^c[^\s-]{8,}$/i,vR=/^[0-9a-z]+$/,yR=/^[0-9A-HJKMNP-TV-Z]{26}$/i,_R=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,SR=/^[a-z0-9_-]{21}$/i,TR=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,bR=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,CR=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,xR="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Yd;const ER=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,wR=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,MR=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,AR=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,RR=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,NR=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,gT="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",DR=new RegExp(`^${gT}$`);function vT(n){let e="[0-5]\\d";n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`);const t=n.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function kR(n){return new RegExp(`^${vT(n)}$`)}function IR(n){let e=`${gT}T${vT(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function zR(n,e){return!!((e==="v4"||!e)&&ER.test(n)||(e==="v6"||!e)&&MR.test(n))}function LR(n,e){if(!TR.test(n))return!1;try{const[t]=n.split("."),i=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),o=JSON.parse(atob(i));return!(typeof o!="object"||o===null||"typ"in o&&(o==null?void 0:o.typ)!=="JWT"||!o.alg||e&&o.alg!==e)}catch{return!1}}function UR(n,e){return!!((e==="v4"||!e)&&wR.test(n)||(e==="v6"||!e)&&AR.test(n))}class Hn extends Ue{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==re.string){const a=this._getOrReturnCtx(e);return oe(a,{code:Q.invalid_type,expected:re.string,received:a.parsedType}),xe}const i=new Ft;let o;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(o=this._getOrReturnCtx(e,o),oe(o,{code:Q.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),i.dirty());else if(a.kind==="max")e.data.length>a.value&&(o=this._getOrReturnCtx(e,o),oe(o,{code:Q.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),i.dirty());else if(a.kind==="length"){const d=e.data.length>a.value,h=e.data.length<a.value;(d||h)&&(o=this._getOrReturnCtx(e,o),d?oe(o,{code:Q.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):h&&oe(o,{code:Q.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),i.dirty())}else if(a.kind==="email")CR.test(e.data)||(o=this._getOrReturnCtx(e,o),oe(o,{validation:"email",code:Q.invalid_string,message:a.message}),i.dirty());else if(a.kind==="emoji")Yd||(Yd=new RegExp(xR,"u")),Yd.test(e.data)||(o=this._getOrReturnCtx(e,o),oe(o,{validation:"emoji",code:Q.invalid_string,message:a.message}),i.dirty());else if(a.kind==="uuid")_R.test(e.data)||(o=this._getOrReturnCtx(e,o),oe(o,{validation:"uuid",code:Q.invalid_string,message:a.message}),i.dirty());else if(a.kind==="nanoid")SR.test(e.data)||(o=this._getOrReturnCtx(e,o),oe(o,{validation:"nanoid",code:Q.invalid_string,message:a.message}),i.dirty());else if(a.kind==="cuid")gR.test(e.data)||(o=this._getOrReturnCtx(e,o),oe(o,{validation:"cuid",code:Q.invalid_string,message:a.message}),i.dirty());else if(a.kind==="cuid2")vR.test(e.data)||(o=this._getOrReturnCtx(e,o),oe(o,{validation:"cuid2",code:Q.invalid_string,message:a.message}),i.dirty());else if(a.kind==="ulid")yR.test(e.data)||(o=this._getOrReturnCtx(e,o),oe(o,{validation:"ulid",code:Q.invalid_string,message:a.message}),i.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{o=this._getOrReturnCtx(e,o),oe(o,{validation:"url",code:Q.invalid_string,message:a.message}),i.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(o=this._getOrReturnCtx(e,o),oe(o,{validation:"regex",code:Q.invalid_string,message:a.message}),i.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(o=this._getOrReturnCtx(e,o),oe(o,{code:Q.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),i.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(o=this._getOrReturnCtx(e,o),oe(o,{code:Q.invalid_string,validation:{startsWith:a.value},message:a.message}),i.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(o=this._getOrReturnCtx(e,o),oe(o,{code:Q.invalid_string,validation:{endsWith:a.value},message:a.message}),i.dirty()):a.kind==="datetime"?IR(a).test(e.data)||(o=this._getOrReturnCtx(e,o),oe(o,{code:Q.invalid_string,validation:"datetime",message:a.message}),i.dirty()):a.kind==="date"?DR.test(e.data)||(o=this._getOrReturnCtx(e,o),oe(o,{code:Q.invalid_string,validation:"date",message:a.message}),i.dirty()):a.kind==="time"?kR(a).test(e.data)||(o=this._getOrReturnCtx(e,o),oe(o,{code:Q.invalid_string,validation:"time",message:a.message}),i.dirty()):a.kind==="duration"?bR.test(e.data)||(o=this._getOrReturnCtx(e,o),oe(o,{validation:"duration",code:Q.invalid_string,message:a.message}),i.dirty()):a.kind==="ip"?zR(e.data,a.version)||(o=this._getOrReturnCtx(e,o),oe(o,{validation:"ip",code:Q.invalid_string,message:a.message}),i.dirty()):a.kind==="jwt"?LR(e.data,a.alg)||(o=this._getOrReturnCtx(e,o),oe(o,{validation:"jwt",code:Q.invalid_string,message:a.message}),i.dirty()):a.kind==="cidr"?UR(e.data,a.version)||(o=this._getOrReturnCtx(e,o),oe(o,{validation:"cidr",code:Q.invalid_string,message:a.message}),i.dirty()):a.kind==="base64"?RR.test(e.data)||(o=this._getOrReturnCtx(e,o),oe(o,{validation:"base64",code:Q.invalid_string,message:a.message}),i.dirty()):a.kind==="base64url"?NR.test(e.data)||(o=this._getOrReturnCtx(e,o),oe(o,{validation:"base64url",code:Q.invalid_string,message:a.message}),i.dirty()):Be.assertNever(a);return{status:i.value,value:e.data}}_regex(e,t,i){return this.refinement(o=>e.test(o),{validation:t,code:Q.invalid_string,...fe.errToObj(i)})}_addCheck(e){return new Hn({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...fe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...fe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...fe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...fe.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...fe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...fe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...fe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...fe.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...fe.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...fe.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...fe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...fe.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...fe.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...fe.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...fe.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...fe.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...fe.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...fe.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...fe.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...fe.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...fe.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...fe.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...fe.errToObj(t)})}nonempty(e){return this.min(1,fe.errToObj(e))}trim(){return new Hn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Hn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Hn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Hn.create=n=>new Hn({checks:[],typeName:Ce.ZodString,coerce:(n==null?void 0:n.coerce)??!1,...Ae(n)});function VR(n,e){const t=(n.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,o=t>i?t:i,a=Number.parseInt(n.toFixed(o).replace(".","")),d=Number.parseInt(e.toFixed(o).replace(".",""));return a%d/10**o}class Vs extends Ue{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==re.number){const a=this._getOrReturnCtx(e);return oe(a,{code:Q.invalid_type,expected:re.number,received:a.parsedType}),xe}let i;const o=new Ft;for(const a of this._def.checks)a.kind==="int"?Be.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{code:Q.invalid_type,expected:"integer",received:"float",message:a.message}),o.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(i=this._getOrReturnCtx(e,i),oe(i,{code:Q.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),o.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(i=this._getOrReturnCtx(e,i),oe(i,{code:Q.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),o.dirty()):a.kind==="multipleOf"?VR(e.data,a.value)!==0&&(i=this._getOrReturnCtx(e,i),oe(i,{code:Q.not_multiple_of,multipleOf:a.value,message:a.message}),o.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{code:Q.not_finite,message:a.message}),o.dirty()):Be.assertNever(a);return{status:o.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,fe.toString(t))}gt(e,t){return this.setLimit("min",e,!1,fe.toString(t))}lte(e,t){return this.setLimit("max",e,!0,fe.toString(t))}lt(e,t){return this.setLimit("max",e,!1,fe.toString(t))}setLimit(e,t,i,o){return new Vs({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:i,message:fe.toString(o)}]})}_addCheck(e){return new Vs({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:fe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:fe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:fe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:fe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:fe.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:fe.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:fe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:fe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:fe.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Be.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(t===null||i.value>t)&&(t=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Vs.create=n=>new Vs({checks:[],typeName:Ce.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...Ae(n)});class Os extends Ue{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==re.bigint)return this._getInvalidInput(e);let i;const o=new Ft;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(i=this._getOrReturnCtx(e,i),oe(i,{code:Q.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),o.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(i=this._getOrReturnCtx(e,i),oe(i,{code:Q.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),o.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),oe(i,{code:Q.not_multiple_of,multipleOf:a.value,message:a.message}),o.dirty()):Be.assertNever(a);return{status:o.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return oe(t,{code:Q.invalid_type,expected:re.bigint,received:t.parsedType}),xe}gte(e,t){return this.setLimit("min",e,!0,fe.toString(t))}gt(e,t){return this.setLimit("min",e,!1,fe.toString(t))}lte(e,t){return this.setLimit("max",e,!0,fe.toString(t))}lt(e,t){return this.setLimit("max",e,!1,fe.toString(t))}setLimit(e,t,i,o){return new Os({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:i,message:fe.toString(o)}]})}_addCheck(e){return new Os({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:fe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:fe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:fe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:fe.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:fe.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Os.create=n=>new Os({checks:[],typeName:Ce.ZodBigInt,coerce:(n==null?void 0:n.coerce)??!1,...Ae(n)});class Mu extends Ue{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==re.boolean){const i=this._getOrReturnCtx(e);return oe(i,{code:Q.invalid_type,expected:re.boolean,received:i.parsedType}),xe}return Cn(e.data)}}Mu.create=n=>new Mu({typeName:Ce.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...Ae(n)});class Wo extends Ue{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==re.date){const a=this._getOrReturnCtx(e);return oe(a,{code:Q.invalid_type,expected:re.date,received:a.parsedType}),xe}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return oe(a,{code:Q.invalid_date}),xe}const i=new Ft;let o;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(o=this._getOrReturnCtx(e,o),oe(o,{code:Q.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),i.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(o=this._getOrReturnCtx(e,o),oe(o,{code:Q.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),i.dirty()):Be.assertNever(a);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Wo({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:fe.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:fe.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Wo.create=n=>new Wo({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:Ce.ZodDate,...Ae(n)});class Ly extends Ue{_parse(e){if(this._getType(e)!==re.symbol){const i=this._getOrReturnCtx(e);return oe(i,{code:Q.invalid_type,expected:re.symbol,received:i.parsedType}),xe}return Cn(e.data)}}Ly.create=n=>new Ly({typeName:Ce.ZodSymbol,...Ae(n)});class Uy extends Ue{_parse(e){if(this._getType(e)!==re.undefined){const i=this._getOrReturnCtx(e);return oe(i,{code:Q.invalid_type,expected:re.undefined,received:i.parsedType}),xe}return Cn(e.data)}}Uy.create=n=>new Uy({typeName:Ce.ZodUndefined,...Ae(n)});class Vy extends Ue{_parse(e){if(this._getType(e)!==re.null){const i=this._getOrReturnCtx(e);return oe(i,{code:Q.invalid_type,expected:re.null,received:i.parsedType}),xe}return Cn(e.data)}}Vy.create=n=>new Vy({typeName:Ce.ZodNull,...Ae(n)});class Oy extends Ue{constructor(){super(...arguments),this._any=!0}_parse(e){return Cn(e.data)}}Oy.create=n=>new Oy({typeName:Ce.ZodAny,...Ae(n)});class ph extends Ue{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Cn(e.data)}}ph.create=n=>new ph({typeName:Ce.ZodUnknown,...Ae(n)});class is extends Ue{_parse(e){const t=this._getOrReturnCtx(e);return oe(t,{code:Q.invalid_type,expected:re.never,received:t.parsedType}),xe}}is.create=n=>new is({typeName:Ce.ZodNever,...Ae(n)});class By extends Ue{_parse(e){if(this._getType(e)!==re.undefined){const i=this._getOrReturnCtx(e);return oe(i,{code:Q.invalid_type,expected:re.void,received:i.parsedType}),xe}return Cn(e.data)}}By.create=n=>new By({typeName:Ce.ZodVoid,...Ae(n)});class Jn extends Ue{_parse(e){const{ctx:t,status:i}=this._processInputParams(e),o=this._def;if(t.parsedType!==re.array)return oe(t,{code:Q.invalid_type,expected:re.array,received:t.parsedType}),xe;if(o.exactLength!==null){const d=t.data.length>o.exactLength.value,h=t.data.length<o.exactLength.value;(d||h)&&(oe(t,{code:d?Q.too_big:Q.too_small,minimum:h?o.exactLength.value:void 0,maximum:d?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),i.dirty())}if(o.minLength!==null&&t.data.length<o.minLength.value&&(oe(t,{code:Q.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),i.dirty()),o.maxLength!==null&&t.data.length>o.maxLength.value&&(oe(t,{code:Q.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),i.dirty()),t.common.async)return Promise.all([...t.data].map((d,h)=>o.type._parseAsync(new Zn(t,d,t.path,h)))).then(d=>Ft.mergeArray(i,d));const a=[...t.data].map((d,h)=>o.type._parseSync(new Zn(t,d,t.path,h)));return Ft.mergeArray(i,a)}get element(){return this._def.type}min(e,t){return new Jn({...this._def,minLength:{value:e,message:fe.toString(t)}})}max(e,t){return new Jn({...this._def,maxLength:{value:e,message:fe.toString(t)}})}length(e,t){return new Jn({...this._def,exactLength:{value:e,message:fe.toString(t)}})}nonempty(e){return this.min(1,e)}}Jn.create=(n,e)=>new Jn({type:n,minLength:null,maxLength:null,exactLength:null,typeName:Ce.ZodArray,...Ae(e)});function Oo(n){if(n instanceof ht){const e={};for(const t in n.shape){const i=n.shape[t];e[t]=ts.create(Oo(i))}return new ht({...n._def,shape:()=>e})}else return n instanceof Jn?new Jn({...n._def,type:Oo(n.element)}):n instanceof ts?ts.create(Oo(n.unwrap())):n instanceof el?el.create(Oo(n.unwrap())):n instanceof Bs?Bs.create(n.items.map(e=>Oo(e))):n}class ht extends Ue{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=Be.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==re.object){const m=this._getOrReturnCtx(e);return oe(m,{code:Q.invalid_type,expected:re.object,received:m.parsedType}),xe}const{status:i,ctx:o}=this._processInputParams(e),{shape:a,keys:d}=this._getCached(),h=[];if(!(this._def.catchall instanceof is&&this._def.unknownKeys==="strip"))for(const m in o.data)d.includes(m)||h.push(m);const p=[];for(const m of d){const v=a[m],_=o.data[m];p.push({key:{status:"valid",value:m},value:v._parse(new Zn(o,_,o.path,m)),alwaysSet:m in o.data})}if(this._def.catchall instanceof is){const m=this._def.unknownKeys;if(m==="passthrough")for(const v of h)p.push({key:{status:"valid",value:v},value:{status:"valid",value:o.data[v]}});else if(m==="strict")h.length>0&&(oe(o,{code:Q.unrecognized_keys,keys:h}),i.dirty());else if(m!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const m=this._def.catchall;for(const v of h){const _=o.data[v];p.push({key:{status:"valid",value:v},value:m._parse(new Zn(o,_,o.path,v)),alwaysSet:v in o.data})}}return o.common.async?Promise.resolve().then(async()=>{const m=[];for(const v of p){const _=await v.key,S=await v.value;m.push({key:_,value:S,alwaysSet:v.alwaysSet})}return m}).then(m=>Ft.mergeObjectSync(i,m)):Ft.mergeObjectSync(i,p)}get shape(){return this._def.shape()}strict(e){return fe.errToObj,new ht({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,i)=>{var a,d;const o=((d=(a=this._def).errorMap)==null?void 0:d.call(a,t,i).message)??i.defaultError;return t.code==="unrecognized_keys"?{message:fe.errToObj(e).message??o}:{message:o}}}:{}})}strip(){return new ht({...this._def,unknownKeys:"strip"})}passthrough(){return new ht({...this._def,unknownKeys:"passthrough"})}extend(e){return new ht({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ht({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ce.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ht({...this._def,catchall:e})}pick(e){const t={};for(const i of Be.objectKeys(e))e[i]&&this.shape[i]&&(t[i]=this.shape[i]);return new ht({...this._def,shape:()=>t})}omit(e){const t={};for(const i of Be.objectKeys(this.shape))e[i]||(t[i]=this.shape[i]);return new ht({...this._def,shape:()=>t})}deepPartial(){return Oo(this)}partial(e){const t={};for(const i of Be.objectKeys(this.shape)){const o=this.shape[i];e&&!e[i]?t[i]=o:t[i]=o.optional()}return new ht({...this._def,shape:()=>t})}required(e){const t={};for(const i of Be.objectKeys(this.shape))if(e&&!e[i])t[i]=this.shape[i];else{let a=this.shape[i];for(;a instanceof ts;)a=a._def.innerType;t[i]=a}return new ht({...this._def,shape:()=>t})}keyof(){return yT(Be.objectKeys(this.shape))}}ht.create=(n,e)=>new ht({shape:()=>n,unknownKeys:"strip",catchall:is.create(),typeName:Ce.ZodObject,...Ae(e)});ht.strictCreate=(n,e)=>new ht({shape:()=>n,unknownKeys:"strict",catchall:is.create(),typeName:Ce.ZodObject,...Ae(e)});ht.lazycreate=(n,e)=>new ht({shape:n,unknownKeys:"strip",catchall:is.create(),typeName:Ce.ZodObject,...Ae(e)});class Au extends Ue{_parse(e){const{ctx:t}=this._processInputParams(e),i=this._def.options;function o(a){for(const h of a)if(h.result.status==="valid")return h.result;for(const h of a)if(h.result.status==="dirty")return t.common.issues.push(...h.ctx.common.issues),h.result;const d=a.map(h=>new yi(h.ctx.common.issues));return oe(t,{code:Q.invalid_union,unionErrors:d}),xe}if(t.common.async)return Promise.all(i.map(async a=>{const d={...t,common:{...t.common,issues:[]},parent:null};return{result:await a._parseAsync({data:t.data,path:t.path,parent:d}),ctx:d}})).then(o);{let a;const d=[];for(const p of i){const m={...t,common:{...t.common,issues:[]},parent:null},v=p._parseSync({data:t.data,path:t.path,parent:m});if(v.status==="valid")return v;v.status==="dirty"&&!a&&(a={result:v,ctx:m}),m.common.issues.length&&d.push(m.common.issues)}if(a)return t.common.issues.push(...a.ctx.common.issues),a.result;const h=d.map(p=>new yi(p));return oe(t,{code:Q.invalid_union,unionErrors:h}),xe}}get options(){return this._def.options}}Au.create=(n,e)=>new Au({options:n,typeName:Ce.ZodUnion,...Ae(e)});function gh(n,e){const t=Ki(n),i=Ki(e);if(n===e)return{valid:!0,data:n};if(t===re.object&&i===re.object){const o=Be.objectKeys(e),a=Be.objectKeys(n).filter(h=>o.indexOf(h)!==-1),d={...n,...e};for(const h of a){const p=gh(n[h],e[h]);if(!p.valid)return{valid:!1};d[h]=p.data}return{valid:!0,data:d}}else if(t===re.array&&i===re.array){if(n.length!==e.length)return{valid:!1};const o=[];for(let a=0;a<n.length;a++){const d=n[a],h=e[a],p=gh(d,h);if(!p.valid)return{valid:!1};o.push(p.data)}return{valid:!0,data:o}}else return t===re.date&&i===re.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class Ru extends Ue{_parse(e){const{status:t,ctx:i}=this._processInputParams(e),o=(a,d)=>{if(ky(a)||ky(d))return xe;const h=gh(a.value,d.value);return h.valid?((Iy(a)||Iy(d))&&t.dirty(),{status:t.value,value:h.data}):(oe(i,{code:Q.invalid_intersection_types}),xe)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([a,d])=>o(a,d)):o(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}Ru.create=(n,e,t)=>new Ru({left:n,right:e,typeName:Ce.ZodIntersection,...Ae(t)});class Bs extends Ue{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==re.array)return oe(i,{code:Q.invalid_type,expected:re.array,received:i.parsedType}),xe;if(i.data.length<this._def.items.length)return oe(i,{code:Q.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),xe;!this._def.rest&&i.data.length>this._def.items.length&&(oe(i,{code:Q.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const a=[...i.data].map((d,h)=>{const p=this._def.items[h]||this._def.rest;return p?p._parse(new Zn(i,d,i.path,h)):null}).filter(d=>!!d);return i.common.async?Promise.all(a).then(d=>Ft.mergeArray(t,d)):Ft.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new Bs({...this._def,rest:e})}}Bs.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Bs({items:n,typeName:Ce.ZodTuple,rest:null,...Ae(e)})};class Nu extends Ue{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==re.object)return oe(i,{code:Q.invalid_type,expected:re.object,received:i.parsedType}),xe;const o=[],a=this._def.keyType,d=this._def.valueType;for(const h in i.data)o.push({key:a._parse(new Zn(i,h,i.path,h)),value:d._parse(new Zn(i,i.data[h],i.path,h)),alwaysSet:h in i.data});return i.common.async?Ft.mergeObjectAsync(t,o):Ft.mergeObjectSync(t,o)}get element(){return this._def.valueType}static create(e,t,i){return t instanceof Ue?new Nu({keyType:e,valueType:t,typeName:Ce.ZodRecord,...Ae(i)}):new Nu({keyType:Hn.create(),valueType:e,typeName:Ce.ZodRecord,...Ae(t)})}}class Py extends Ue{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==re.map)return oe(i,{code:Q.invalid_type,expected:re.map,received:i.parsedType}),xe;const o=this._def.keyType,a=this._def.valueType,d=[...i.data.entries()].map(([h,p],m)=>({key:o._parse(new Zn(i,h,i.path,[m,"key"])),value:a._parse(new Zn(i,p,i.path,[m,"value"]))}));if(i.common.async){const h=new Map;return Promise.resolve().then(async()=>{for(const p of d){const m=await p.key,v=await p.value;if(m.status==="aborted"||v.status==="aborted")return xe;(m.status==="dirty"||v.status==="dirty")&&t.dirty(),h.set(m.value,v.value)}return{status:t.value,value:h}})}else{const h=new Map;for(const p of d){const m=p.key,v=p.value;if(m.status==="aborted"||v.status==="aborted")return xe;(m.status==="dirty"||v.status==="dirty")&&t.dirty(),h.set(m.value,v.value)}return{status:t.value,value:h}}}}Py.create=(n,e,t)=>new Py({valueType:e,keyType:n,typeName:Ce.ZodMap,...Ae(t)});class ka extends Ue{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==re.set)return oe(i,{code:Q.invalid_type,expected:re.set,received:i.parsedType}),xe;const o=this._def;o.minSize!==null&&i.data.size<o.minSize.value&&(oe(i,{code:Q.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),t.dirty()),o.maxSize!==null&&i.data.size>o.maxSize.value&&(oe(i,{code:Q.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),t.dirty());const a=this._def.valueType;function d(p){const m=new Set;for(const v of p){if(v.status==="aborted")return xe;v.status==="dirty"&&t.dirty(),m.add(v.value)}return{status:t.value,value:m}}const h=[...i.data.values()].map((p,m)=>a._parse(new Zn(i,p,i.path,m)));return i.common.async?Promise.all(h).then(p=>d(p)):d(h)}min(e,t){return new ka({...this._def,minSize:{value:e,message:fe.toString(t)}})}max(e,t){return new ka({...this._def,maxSize:{value:e,message:fe.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ka.create=(n,e)=>new ka({valueType:n,minSize:null,maxSize:null,typeName:Ce.ZodSet,...Ae(e)});class vh extends Ue{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}vh.create=(n,e)=>new vh({getter:n,typeName:Ce.ZodLazy,...Ae(e)});class qy extends Ue{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return oe(t,{received:t.data,code:Q.invalid_literal,expected:this._def.value}),xe}return{status:"valid",value:e.data}}get value(){return this._def.value}}qy.create=(n,e)=>new qy({value:n,typeName:Ce.ZodLiteral,...Ae(e)});function yT(n,e){return new Qo({values:n,typeName:Ce.ZodEnum,...Ae(e)})}class Qo extends Ue{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),i=this._def.values;return oe(t,{expected:Be.joinValues(i),received:t.parsedType,code:Q.invalid_type}),xe}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),i=this._def.values;return oe(t,{received:t.data,code:Q.invalid_enum_value,options:i}),xe}return Cn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Qo.create(e,{...this._def,...t})}exclude(e,t=this._def){return Qo.create(this.options.filter(i=>!e.includes(i)),{...this._def,...t})}}Qo.create=yT;class Fy extends Ue{_parse(e){const t=Be.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==re.string&&i.parsedType!==re.number){const o=Be.objectValues(t);return oe(i,{expected:Be.joinValues(o),received:i.parsedType,code:Q.invalid_type}),xe}if(this._cache||(this._cache=new Set(Be.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const o=Be.objectValues(t);return oe(i,{received:i.data,code:Q.invalid_enum_value,options:o}),xe}return Cn(e.data)}get enum(){return this._def.values}}Fy.create=(n,e)=>new Fy({values:n,typeName:Ce.ZodNativeEnum,...Ae(e)});class Du extends Ue{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==re.promise&&t.common.async===!1)return oe(t,{code:Q.invalid_type,expected:re.promise,received:t.parsedType}),xe;const i=t.parsedType===re.promise?t.data:Promise.resolve(t.data);return Cn(i.then(o=>this._def.type.parseAsync(o,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Du.create=(n,e)=>new Du({type:n,typeName:Ce.ZodPromise,...Ae(e)});class jo extends Ue{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ce.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:i}=this._processInputParams(e),o=this._def.effect||null,a={addIssue:d=>{oe(i,d),d.fatal?t.abort():t.dirty()},get path(){return i.path}};if(a.addIssue=a.addIssue.bind(a),o.type==="preprocess"){const d=o.transform(i.data,a);if(i.common.async)return Promise.resolve(d).then(async h=>{if(t.value==="aborted")return xe;const p=await this._def.schema._parseAsync({data:h,path:i.path,parent:i});return p.status==="aborted"?xe:p.status==="dirty"||t.value==="dirty"?ua(p.value):p});{if(t.value==="aborted")return xe;const h=this._def.schema._parseSync({data:d,path:i.path,parent:i});return h.status==="aborted"?xe:h.status==="dirty"||t.value==="dirty"?ua(h.value):h}}if(o.type==="refinement"){const d=h=>{const p=o.refinement(h,a);if(i.common.async)return Promise.resolve(p);if(p instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return h};if(i.common.async===!1){const h=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return h.status==="aborted"?xe:(h.status==="dirty"&&t.dirty(),d(h.value),{status:t.value,value:h.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(h=>h.status==="aborted"?xe:(h.status==="dirty"&&t.dirty(),d(h.value).then(()=>({status:t.value,value:h.value}))))}if(o.type==="transform")if(i.common.async===!1){const d=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!Xo(d))return xe;const h=o.transform(d.value,a);if(h instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:h}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(d=>Xo(d)?Promise.resolve(o.transform(d.value,a)).then(h=>({status:t.value,value:h})):xe);Be.assertNever(o)}}jo.create=(n,e,t)=>new jo({schema:n,typeName:Ce.ZodEffects,effect:e,...Ae(t)});jo.createWithPreprocess=(n,e,t)=>new jo({schema:e,effect:{type:"preprocess",transform:n},typeName:Ce.ZodEffects,...Ae(t)});class ts extends Ue{_parse(e){return this._getType(e)===re.undefined?Cn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ts.create=(n,e)=>new ts({innerType:n,typeName:Ce.ZodOptional,...Ae(e)});class el extends Ue{_parse(e){return this._getType(e)===re.null?Cn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}el.create=(n,e)=>new el({innerType:n,typeName:Ce.ZodNullable,...Ae(e)});class yh extends Ue{_parse(e){const{ctx:t}=this._processInputParams(e);let i=t.data;return t.parsedType===re.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}yh.create=(n,e)=>new yh({innerType:n,typeName:Ce.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ae(e)});class _h extends Ue{_parse(e){const{ctx:t}=this._processInputParams(e),i={...t,common:{...t.common,issues:[]}},o=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return wu(o)?o.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new yi(i.common.issues)},input:i.data})})):{status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new yi(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}_h.create=(n,e)=>new _h({innerType:n,typeName:Ce.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ae(e)});class Hy extends Ue{_parse(e){if(this._getType(e)!==re.nan){const i=this._getOrReturnCtx(e);return oe(i,{code:Q.invalid_type,expected:re.nan,received:i.parsedType}),xe}return{status:"valid",value:e.data}}}Hy.create=n=>new Hy({typeName:Ce.ZodNaN,...Ae(n)});class OR extends Ue{_parse(e){const{ctx:t}=this._processInputParams(e),i=t.data;return this._def.type._parse({data:i,path:t.path,parent:t})}unwrap(){return this._def.type}}class Qh extends Ue{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?xe:a.status==="dirty"?(t.dirty(),ua(a.value)):this._def.out._parseAsync({data:a.value,path:i.path,parent:i})})();{const o=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return o.status==="aborted"?xe:o.status==="dirty"?(t.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:i.path,parent:i})}}static create(e,t){return new Qh({in:e,out:t,typeName:Ce.ZodPipeline})}}class Sh extends Ue{_parse(e){const t=this._def.innerType._parse(e),i=o=>(Xo(o)&&(o.value=Object.freeze(o.value)),o);return wu(t)?t.then(o=>i(o)):i(t)}unwrap(){return this._def.innerType}}Sh.create=(n,e)=>new Sh({innerType:n,typeName:Ce.ZodReadonly,...Ae(e)});var Ce;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(Ce||(Ce={}));const Es=Hn.create,Gy=Vs.create;Os.create;const BR=Mu.create;Wo.create;const $y=ph.create;is.create;const ca=Jn.create,PR=ht.create,qR=Au.create;Ru.create;Bs.create;const FR=Nu.create,HR=vh.create,GR=Qo.create;Du.create;ts.create;el.create;const Vo={string:n=>Hn.create({...n,coerce:!0}),number:n=>Vs.create({...n,coerce:!0}),boolean:n=>Mu.create({...n,coerce:!0}),bigint:n=>Os.create({...n,coerce:!0}),date:n=>Wo.create({...n,coerce:!0})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let $R,YR;function JR(){return{geminiUrl:$R,vertexUrl:YR}}function ZR(n,e,t){var i,o,a;if(!(!((i=n.httpOptions)===null||i===void 0)&&i.baseUrl)){const d=JR();return n.vertexai?(o=d.vertexUrl)!==null&&o!==void 0?o:e:(a=d.geminiUrl)!==null&&a!==void 0?a:t}return n.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fs{}function ve(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const a=e[o];return a!=null?String(a):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function c(n,e,t){for(let a=0;a<e.length-1;a++){const d=e[a];if(d.endsWith("[]")){const h=d.slice(0,-2);if(!(h in n))if(Array.isArray(t))n[h]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${d}`);if(Array.isArray(n[h])){const p=n[h];if(Array.isArray(t))for(let m=0;m<p.length;m++){const v=p[m];c(v,e.slice(a+1),t[m])}else for(const m of p)c(m,e.slice(a+1),t)}return}else if(d.endsWith("[0]")){const h=d.slice(0,-3);h in n||(n[h]=[{}]);const p=n[h];c(p[0],e.slice(a+1),t);return}(!n[d]||typeof n[d]!="object")&&(n[d]={}),n=n[d]}const i=e[e.length-1],o=n[i];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else n[i]=t}function u(n,e){try{if(e.length===1&&e[0]==="_self")return n;for(let t=0;t<e.length;t++){if(typeof n!="object"||n===null)return;const i=e[t];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in n){const a=n[o];return Array.isArray(a)?a.map(d=>u(d,e.slice(t+1))):void 0}else return}else n=n[i]}return n}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Yy;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Yy||(Yy={}));var Jy;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Jy||(Jy={}));var Gn;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Gn||(Gn={}));var Zy;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Zy||(Zy={}));var Ky;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Ky||(Ky={}));var Xy;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Xy||(Xy={}));var Wy;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Wy||(Wy={}));var Qy;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(Qy||(Qy={}));var jy;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(jy||(jy={}));var e_;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(e_||(e_={}));var t_;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(t_||(t_={}));var n_;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(n_||(n_={}));var i_;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(i_||(i_={}));var ku;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(ku||(ku={}));var s_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(s_||(s_={}));var Th;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Th||(Th={}));var o_;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(o_||(o_={}));var l_;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(l_||(l_={}));var a_;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(a_||(a_={}));var r_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(r_||(r_={}));var u_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(u_||(u_={}));var c_;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(c_||(c_={}));var f_;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(f_||(f_={}));var d_;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(d_||(d_={}));var h_;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi"})(h_||(h_={}));var m_;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(m_||(m_={}));var p_;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(p_||(p_={}));var g_;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(g_||(g_={}));var v_;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(v_||(v_={}));var y_;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(y_||(y_={}));var __;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(__||(__={}));var S_;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(S_||(S_={}));var T_;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(T_||(T_={}));var b_;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(b_||(b_={}));var C_;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(C_||(C_={}));var x_;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(x_||(x_={}));var E_;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(E_||(E_={}));var w_;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(w_||(w_={}));var M_;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(M_||(M_={}));var qo;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(qo||(qo={}));class bh{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class la{get text(){var e,t,i,o,a,d,h,p;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const _=[];for(const S of(p=(h=(d=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)!==null&&p!==void 0?p:[]){for(const[b,x]of Object.entries(S))b!=="text"&&b!=="thought"&&(x!==null||x!==void 0)&&_.push(b);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,m+=S.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,t,i,o,a,d,h,p;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const _ of(p=(h=(d=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)!==null&&p!==void 0?p:[]){for(const[S,b]of Object.entries(_))S!=="inlineData"&&(b!==null||b!==void 0)&&v.push(S);_.inlineData&&typeof _.inlineData.data=="string"&&(m+=atob(_.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,t,i,o,a,d,h,p;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(p=(h=(d=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)===null||p===void 0?void 0:p.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,t,i,o,a,d,h,p,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(p=(h=(d=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)===null||p===void 0?void 0:p.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,t,i,o,a,d,h,p,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(p=(h=(d=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)===null||p===void 0?void 0:p.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class A_{}class R_{}class KR{}class XR{}class N_{}class D_{}class k_{}class WR{}class I_{}class z_{}class L_{}class QR{}class jR{}class eN{}class U_{}class tN{get text(){var e,t,i;let o="",a=!1;const d=[];for(const h of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[p,m]of Object.entries(h))p!=="text"&&p!=="thought"&&m!==null&&d.push(p);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;a=!0,o+=h.text}}return d.length>0&&console.warn(`there are non-text parts ${d} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?o:void 0}get data(){var e,t,i;let o="";const a=[];for(const d of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[h,p]of Object.entries(d))h!=="inlineData"&&p!==null&&a.push(h);d.inlineData&&typeof d.inlineData.data=="string"&&(o+=atob(d.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class nN{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ge(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function _T(n,e){const t=Ge(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function ST(n){return Array.isArray(n)?n.map(e=>Iu(e)):[Iu(n)]}function Iu(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function iN(n){const e=Iu(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function sN(n){const e=Iu(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function V_(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function TT(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>V_(e)):[V_(n)]}function Ch(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function O_(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function B_(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Ut(n){if(n==null)throw new Error("ContentUnion is required");return Ch(n)?n:{role:"user",parts:TT(n)}}function bT(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=Ut(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=Ut(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Ut(t)):[Ut(e)]}function Tn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(O_(n)||B_(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ut(n)]}const e=[],t=[],i=Ch(n[0]);for(const o of n){const a=Ch(o);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(o);else{if(O_(o)||B_(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return i||e.push({role:"user",parts:TT(t)}),e}const oN=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),P_=GR(["string","number","integer","object","array","boolean","null"]),lN=qR([P_,ca(P_)]);function aN(n=!0){const e=HR(()=>{const t=PR({type:lN.optional(),format:Es().optional(),title:Es().optional(),description:Es().optional(),default:$y().optional(),items:e.optional(),minItems:Vo.string().optional(),maxItems:Vo.string().optional(),enum:ca($y()).optional(),properties:FR(Es(),e).optional(),required:ca(Es()).optional(),minProperties:Vo.string().optional(),maxProperties:Vo.string().optional(),propertyOrdering:ca(Es()).optional(),minimum:Gy().optional(),maximum:Gy().optional(),minLength:Vo.string().optional(),maxLength:Vo.string().optional(),pattern:Es().optional(),anyOf:ca(e).optional(),additionalProperties:BR().optional()});return n?t.strict():t});return e}function rN(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(Gn).includes(t[0].toUpperCase())?t[0].toUpperCase():Gn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(Gn).includes(i.toUpperCase())?i.toUpperCase():Gn.TYPE_UNSPECIFIED})}}function Go(n){const e={},t=["items"],i=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&rN(n.type,e);for(const[d,h]of Object.entries(n))if(h!=null)if(d=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(Gn).includes(h.toUpperCase())?h.toUpperCase():Gn.TYPE_UNSPECIFIED}else if(t.includes(d))e[d]=Go(h);else if(i.includes(d)){const p=[];for(const m of h){if(m.type=="null"){e.nullable=!0;continue}p.push(Go(m))}e[d]=p}else if(o.includes(d)){const p={};for(const[m,v]of Object.entries(h))p[m]=Go(v);e[d]=p}else{if(d==="additionalProperties")continue;e[d]=h}return e}function Ia(n){if(Object.keys(n).includes("$schema")){delete n.$schema;const e=aN().parse(n);return Go(e)}else return Go(n)}function jh(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function em(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function sl(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(e.parameters=Ia(e.parameters)),e.response&&(e.response=Ia(e.response));return n}function ol(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function uN(n,e,t,i=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function _i(n,e){if(typeof e!="string")throw new Error("name must be a string");return uN(n,e,"cachedContents")}function CT(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Si(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}function cN(n){return n!=null&&typeof n=="object"&&"name"in n}function fN(n){return n!=null&&typeof n=="object"&&"video"in n}function dN(n){return n!=null&&typeof n=="object"&&"uri"in n}function xT(n){var e;let t;if(cN(n)&&(t=n.name),!(dN(n)&&(t=n.uri,t===void 0))&&!(fN(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function ET(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function wT(n){for(const e of["models","tunedModels","publisherModels"])if(hN(n,e))return n[e];return[]}function hN(n,e){return n!==null&&typeof n=="object"&&e in n}function mN(n,e={}){const t=n,i={name:t.name,description:t.description,parameters:Go(Hu(t.inputSchema))};return e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function pN(n,e={}){const t=[],i=new Set;for(const o of n){const a=o.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const d=mN(o,e);d.functionDeclarations&&t.push(...d.functionDeclarations)}return{functionDeclarations:t}}function gN(n){const e=[];for(const t of n)e.push(Hu(t));return e}function vN(n){const e={};for(const[t,i]of Object.entries(n)){const o=i;e[t]=Hu(o)}return e}function Hu(n){const e=new Set(["items"]),t=new Set(["anyOf"]),i=new Set(["properties"]),o={};for(const[a,d]of Object.entries(n))if(e.has(a))o[a]=Hu(d);else if(t.has(a))o[a]=gN(d);else if(i.has(a))o[a]=vN(d);else if(a==="type"){const h=d.toUpperCase();o[a]=Object.values(Gn).includes(h)?h:Gn.TYPE_UNSPECIFIED}else oN.has(a)&&(o[a]=d);return o}function MT(n,e){if(typeof e!="string"&&!Array.isArray(e)){if(n&&n.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function yN(n){const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Gu(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function AT(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _N(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const o=u(n,["startOffset"]);return o!=null&&c(e,["startOffset"],o),e}function SN(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function TN(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function bN(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],_N(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const o=u(n,["inlineData"]);o!=null&&c(e,["inlineData"],SN(o));const a=u(n,["fileData"]);a!=null&&c(e,["fileData"],TN(a));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const p=u(n,["executableCode"]);p!=null&&c(e,["executableCode"],p);const m=u(n,["functionCall"]);m!=null&&c(e,["functionCall"],m);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const _=u(n,["text"]);return _!=null&&c(e,["text"],_),e}function RT(n){const e={},t=u(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>bN(a))),c(e,["parts"],o)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function CN(n){const e={},t=u(n,["anyOf"]);t!=null&&c(e,["anyOf"],t);const i=u(n,["default"]);i!=null&&c(e,["default"],i);const o=u(n,["description"]);o!=null&&c(e,["description"],o);const a=u(n,["enum"]);a!=null&&c(e,["enum"],a);const d=u(n,["example"]);d!=null&&c(e,["example"],d);const h=u(n,["format"]);h!=null&&c(e,["format"],h);const p=u(n,["items"]);p!=null&&c(e,["items"],p);const m=u(n,["maxItems"]);m!=null&&c(e,["maxItems"],m);const v=u(n,["maxLength"]);v!=null&&c(e,["maxLength"],v);const _=u(n,["maxProperties"]);_!=null&&c(e,["maxProperties"],_);const S=u(n,["maximum"]);S!=null&&c(e,["maximum"],S);const b=u(n,["minItems"]);b!=null&&c(e,["minItems"],b);const x=u(n,["minLength"]);x!=null&&c(e,["minLength"],x);const E=u(n,["minProperties"]);E!=null&&c(e,["minProperties"],E);const D=u(n,["minimum"]);D!=null&&c(e,["minimum"],D);const I=u(n,["nullable"]);I!=null&&c(e,["nullable"],I);const B=u(n,["pattern"]);B!=null&&c(e,["pattern"],B);const q=u(n,["properties"]);q!=null&&c(e,["properties"],q);const R=u(n,["propertyOrdering"]);R!=null&&c(e,["propertyOrdering"],R);const U=u(n,["required"]);U!=null&&c(e,["required"],U);const Y=u(n,["title"]);Y!=null&&c(e,["title"],Y);const G=u(n,["type"]);return G!=null&&c(e,["type"],G),e}function xN(n){const e={};if(u(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=u(n,["category"]);t!=null&&c(e,["category"],t);const i=u(n,["threshold"]);return i!=null&&c(e,["threshold"],i),e}function EN(n){const e={},t=u(n,["behavior"]);t!=null&&c(e,["behavior"],t);const i=u(n,["description"]);i!=null&&c(e,["description"],i);const o=u(n,["name"]);o!=null&&c(e,["name"],o);const a=u(n,["parameters"]);a!=null&&c(e,["parameters"],a);const d=u(n,["parametersJsonSchema"]);d!=null&&c(e,["parametersJsonSchema"],d);const h=u(n,["response"]);h!=null&&c(e,["response"],h);const p=u(n,["responseJsonSchema"]);return p!=null&&c(e,["responseJsonSchema"],p),e}function wN(n){const e={},t=u(n,["startTime"]);t!=null&&c(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&c(e,["endTime"],i),e}function MN(n){const e={},t=u(n,["timeRangeFilter"]);return t!=null&&c(e,["timeRangeFilter"],wN(t)),e}function AN(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&c(e,["dynamicThreshold"],i),e}function RN(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&c(e,["dynamicRetrievalConfig"],AN(t)),e}function NN(){return{}}function DN(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(p=>EN(p))),c(e,["functionDeclarations"],h)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(n,["googleSearch"]);i!=null&&c(e,["googleSearch"],MN(i));const o=u(n,["googleSearchRetrieval"]);if(o!=null&&c(e,["googleSearchRetrieval"],RN(o)),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(n,["urlContext"])!=null&&c(e,["urlContext"],NN());const d=u(n,["codeExecution"]);return d!=null&&c(e,["codeExecution"],d),e}function kN(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["allowedFunctionNames"]);return i!=null&&c(e,["allowedFunctionNames"],i),e}function IN(n){const e={},t=u(n,["latitude"]);t!=null&&c(e,["latitude"],t);const i=u(n,["longitude"]);return i!=null&&c(e,["longitude"],i),e}function zN(n){const e={},t=u(n,["latLng"]);t!=null&&c(e,["latLng"],IN(t));const i=u(n,["languageCode"]);return i!=null&&c(e,["languageCode"],i),e}function LN(n){const e={},t=u(n,["functionCallingConfig"]);t!=null&&c(e,["functionCallingConfig"],kN(t));const i=u(n,["retrievalConfig"]);return i!=null&&c(e,["retrievalConfig"],zN(i)),e}function UN(n){const e={},t=u(n,["voiceName"]);return t!=null&&c(e,["voiceName"],t),e}function NT(n){const e={},t=u(n,["prebuiltVoiceConfig"]);return t!=null&&c(e,["prebuiltVoiceConfig"],UN(t)),e}function VN(n){const e={},t=u(n,["speaker"]);t!=null&&c(e,["speaker"],t);const i=u(n,["voiceConfig"]);return i!=null&&c(e,["voiceConfig"],NT(i)),e}function ON(n){const e={},t=u(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>VN(o))),c(e,["speakerVoiceConfigs"],i)}return e}function BN(n){const e={},t=u(n,["voiceConfig"]);t!=null&&c(e,["voiceConfig"],NT(t));const i=u(n,["multiSpeakerVoiceConfig"]);i!=null&&c(e,["multiSpeakerVoiceConfig"],ON(i));const o=u(n,["languageCode"]);return o!=null&&c(e,["languageCode"],o),e}function PN(n){const e={},t=u(n,["includeThoughts"]);t!=null&&c(e,["includeThoughts"],t);const i=u(n,["thinkingBudget"]);return i!=null&&c(e,["thinkingBudget"],i),e}function qN(n,e,t){const i={},o=u(e,["systemInstruction"]);t!==void 0&&o!=null&&c(t,["systemInstruction"],RT(Ut(o)));const a=u(e,["temperature"]);a!=null&&c(i,["temperature"],a);const d=u(e,["topP"]);d!=null&&c(i,["topP"],d);const h=u(e,["topK"]);h!=null&&c(i,["topK"],h);const p=u(e,["candidateCount"]);p!=null&&c(i,["candidateCount"],p);const m=u(e,["maxOutputTokens"]);m!=null&&c(i,["maxOutputTokens"],m);const v=u(e,["stopSequences"]);v!=null&&c(i,["stopSequences"],v);const _=u(e,["responseLogprobs"]);_!=null&&c(i,["responseLogprobs"],_);const S=u(e,["logprobs"]);S!=null&&c(i,["logprobs"],S);const b=u(e,["presencePenalty"]);b!=null&&c(i,["presencePenalty"],b);const x=u(e,["frequencyPenalty"]);x!=null&&c(i,["frequencyPenalty"],x);const E=u(e,["seed"]);E!=null&&c(i,["seed"],E);const D=u(e,["responseMimeType"]);D!=null&&c(i,["responseMimeType"],D);const I=u(e,["responseSchema"]);I!=null&&c(i,["responseSchema"],CN(Ia(I)));const B=u(e,["responseJsonSchema"]);if(B!=null&&c(i,["responseJsonSchema"],B),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const q=u(e,["safetySettings"]);if(t!==void 0&&q!=null){let ee=q;Array.isArray(ee)&&(ee=ee.map(de=>xN(de))),c(t,["safetySettings"],ee)}const R=u(e,["tools"]);if(t!==void 0&&R!=null){let ee=ol(R);Array.isArray(ee)&&(ee=ee.map(de=>DN(sl(de)))),c(t,["tools"],ee)}const U=u(e,["toolConfig"]);if(t!==void 0&&U!=null&&c(t,["toolConfig"],LN(U)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Y=u(e,["cachedContent"]);t!==void 0&&Y!=null&&c(t,["cachedContent"],_i(n,Y));const G=u(e,["responseModalities"]);G!=null&&c(i,["responseModalities"],G);const ne=u(e,["mediaResolution"]);ne!=null&&c(i,["mediaResolution"],ne);const K=u(e,["speechConfig"]);if(K!=null&&c(i,["speechConfig"],BN(jh(K))),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const X=u(e,["thinkingConfig"]);return X!=null&&c(i,["thinkingConfig"],PN(X)),i}function FN(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["request","model"],Ge(n,i));const o=u(e,["contents"]);if(o!=null){let d=Tn(o);Array.isArray(d)&&(d=d.map(h=>RT(h))),c(t,["request","contents"],d)}const a=u(e,["config"]);return a!=null&&c(t,["request","generationConfig"],qN(n,a,t)),t}function HN(n,e){const t={};if(u(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=u(e,["fileName"]);i!=null&&c(t,["fileName"],i);const o=u(e,["inlinedRequests"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(d=>FN(n,d))),c(t,["requests","requests"],a)}return t}function GN(n,e){const t={},i=u(n,["displayName"]);if(e!==void 0&&i!=null&&c(e,["batch","displayName"],i),u(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function $N(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Ge(n,i));const o=u(e,["src"]);o!=null&&c(t,["batch","inputConfig"],HN(n,MT(n,o)));const a=u(e,["config"]);return a!=null&&c(t,["config"],GN(a,t)),t}function YN(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],Gu(n,i));const o=u(e,["config"]);return o!=null&&c(t,["config"],o),t}function JN(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],Gu(n,i));const o=u(e,["config"]);return o!=null&&c(t,["config"],o),t}function ZN(n,e){const t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const o=u(n,["pageToken"]);if(e!==void 0&&o!=null&&c(e,["_query","pageToken"],o),u(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function KN(n){const e={},t=u(n,["config"]);return t!=null&&c(e,["config"],ZN(t,e)),e}function XN(n){const e={},t=u(n,["format"]);t!=null&&c(e,["instancesFormat"],t);const i=u(n,["gcsUri"]);i!=null&&c(e,["gcsSource","uris"],i);const o=u(n,["bigqueryUri"]);if(o!=null&&c(e,["bigquerySource","inputUri"],o),u(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function WN(n){const e={},t=u(n,["format"]);t!=null&&c(e,["predictionsFormat"],t);const i=u(n,["gcsUri"]);i!=null&&c(e,["gcsDestination","outputUriPrefix"],i);const o=u(n,["bigqueryUri"]);if(o!=null&&c(e,["bigqueryDestination","outputUri"],o),u(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function QN(n,e){const t={},i=u(n,["displayName"]);e!==void 0&&i!=null&&c(e,["displayName"],i);const o=u(n,["dest"]);return e!==void 0&&o!=null&&c(e,["outputConfig"],WN(yN(o))),t}function jN(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["model"],Ge(n,i));const o=u(e,["src"]);o!=null&&c(t,["inputConfig"],XN(MT(n,o)));const a=u(e,["config"]);return a!=null&&c(t,["config"],QN(a,t)),t}function e2(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],Gu(n,i));const o=u(e,["config"]);return o!=null&&c(t,["config"],o),t}function t2(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],Gu(n,i));const o=u(e,["config"]);return o!=null&&c(t,["config"],o),t}function n2(n,e){const t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const o=u(n,["pageToken"]);e!==void 0&&o!=null&&c(e,["_query","pageToken"],o);const a=u(n,["filter"]);return e!==void 0&&a!=null&&c(e,["_query","filter"],a),t}function i2(n){const e={},t=u(n,["config"]);return t!=null&&c(e,["config"],n2(t,e)),e}function s2(){return{}}function o2(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const o=u(n,["startOffset"]);return o!=null&&c(e,["startOffset"],o),e}function l2(n){const e={},t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function a2(n){const e={},t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function r2(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],o2(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const o=u(n,["inlineData"]);o!=null&&c(e,["inlineData"],l2(o));const a=u(n,["fileData"]);a!=null&&c(e,["fileData"],a2(a));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const p=u(n,["executableCode"]);p!=null&&c(e,["executableCode"],p);const m=u(n,["functionCall"]);m!=null&&c(e,["functionCall"],m);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const _=u(n,["text"]);return _!=null&&c(e,["text"],_),e}function u2(n){const e={},t=u(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>r2(a))),c(e,["parts"],o)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function c2(n){const e={},t=u(n,["citationSources"]);return t!=null&&c(e,["citations"],t),e}function f2(n){const e={},t=u(n,["retrievedUrl"]);t!=null&&c(e,["retrievedUrl"],t);const i=u(n,["urlRetrievalStatus"]);return i!=null&&c(e,["urlRetrievalStatus"],i),e}function d2(n){const e={},t=u(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>f2(o))),c(e,["urlMetadata"],i)}return e}function h2(n){const e={},t=u(n,["content"]);t!=null&&c(e,["content"],u2(t));const i=u(n,["citationMetadata"]);i!=null&&c(e,["citationMetadata"],c2(i));const o=u(n,["tokenCount"]);o!=null&&c(e,["tokenCount"],o);const a=u(n,["finishReason"]);a!=null&&c(e,["finishReason"],a);const d=u(n,["urlContextMetadata"]);d!=null&&c(e,["urlContextMetadata"],d2(d));const h=u(n,["avgLogprobs"]);h!=null&&c(e,["avgLogprobs"],h);const p=u(n,["groundingMetadata"]);p!=null&&c(e,["groundingMetadata"],p);const m=u(n,["index"]);m!=null&&c(e,["index"],m);const v=u(n,["logprobsResult"]);v!=null&&c(e,["logprobsResult"],v);const _=u(n,["safetyRatings"]);return _!=null&&c(e,["safetyRatings"],_),e}function m2(n){const e={},t=u(n,["candidates"]);if(t!=null){let d=t;Array.isArray(d)&&(d=d.map(h=>h2(h))),c(e,["candidates"],d)}const i=u(n,["modelVersion"]);i!=null&&c(e,["modelVersion"],i);const o=u(n,["promptFeedback"]);o!=null&&c(e,["promptFeedback"],o);const a=u(n,["usageMetadata"]);return a!=null&&c(e,["usageMetadata"],a),e}function p2(n){const e={},t=u(n,["response"]);return t!=null&&c(e,["response"],m2(t)),u(n,["error"])!=null&&c(e,["error"],s2()),e}function g2(n){const e={},t=u(n,["responsesFile"]);t!=null&&c(e,["fileName"],t);const i=u(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>p2(a))),c(e,["inlinedResponses"],o)}return e}function xh(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["metadata","displayName"]);i!=null&&c(e,["displayName"],i);const o=u(n,["metadata","state"]);o!=null&&c(e,["state"],AT(o));const a=u(n,["metadata","createTime"]);a!=null&&c(e,["createTime"],a);const d=u(n,["metadata","endTime"]);d!=null&&c(e,["endTime"],d);const h=u(n,["metadata","updateTime"]);h!=null&&c(e,["updateTime"],h);const p=u(n,["metadata","model"]);p!=null&&c(e,["model"],p);const m=u(n,["metadata","output"]);return m!=null&&c(e,["dest"],g2(m)),e}function v2(n){const e={},t=u(n,["nextPageToken"]);t!=null&&c(e,["nextPageToken"],t);const i=u(n,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>xh(a))),c(e,["batchJobs"],o)}return e}function y2(n){const e={},t=u(n,["details"]);t!=null&&c(e,["details"],t);const i=u(n,["code"]);i!=null&&c(e,["code"],i);const o=u(n,["message"]);return o!=null&&c(e,["message"],o),e}function _2(n){const e={},t=u(n,["instancesFormat"]);t!=null&&c(e,["format"],t);const i=u(n,["gcsSource","uris"]);i!=null&&c(e,["gcsUri"],i);const o=u(n,["bigquerySource","inputUri"]);return o!=null&&c(e,["bigqueryUri"],o),e}function S2(n){const e={},t=u(n,["predictionsFormat"]);t!=null&&c(e,["format"],t);const i=u(n,["gcsDestination","outputUriPrefix"]);i!=null&&c(e,["gcsUri"],i);const o=u(n,["bigqueryDestination","outputUri"]);return o!=null&&c(e,["bigqueryUri"],o),e}function Eh(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["displayName"]);i!=null&&c(e,["displayName"],i);const o=u(n,["state"]);o!=null&&c(e,["state"],AT(o));const a=u(n,["error"]);a!=null&&c(e,["error"],y2(a));const d=u(n,["createTime"]);d!=null&&c(e,["createTime"],d);const h=u(n,["startTime"]);h!=null&&c(e,["startTime"],h);const p=u(n,["endTime"]);p!=null&&c(e,["endTime"],p);const m=u(n,["updateTime"]);m!=null&&c(e,["updateTime"],m);const v=u(n,["model"]);v!=null&&c(e,["model"],v);const _=u(n,["inputConfig"]);_!=null&&c(e,["src"],_2(_));const S=u(n,["outputConfig"]);return S!=null&&c(e,["dest"],S2(S)),e}function T2(n){const e={},t=u(n,["nextPageToken"]);t!=null&&c(e,["nextPageToken"],t);const i=u(n,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Eh(a))),c(e,["batchJobs"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ps;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Ps||(Ps={}));class qa{constructor(e,t,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,o)}init(e,t,i){var o,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.idxInternal=0;let d={config:{}};i?typeof i=="object"?d=Object.assign({},i):d=i:d={config:{}},d.config&&(d.config.pageToken=t.nextPageToken),this.paramsInternal=d,this.pageInternalSize=(a=(o=d.config)===null||o===void 0?void 0:o.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class b2 extends Fs{constructor(e){super(),this.apiClient=e,this.create=async t=>{if(this.apiClient.isVertexAI()){if(Array.isArray(t.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(t.config=t.config||{},t.config.displayName===void 0&&(t.config.displayName="genaiBatchJob_"),t.config.dest===void 0&&typeof t.src=="string")if(t.src.startsWith("gs://")&&t.src.endsWith(".jsonl"))t.config.dest=`${t.src.slice(0,-6)}/dest`;else if(t.src.startsWith("bq://"))t.config.dest=`${t.src}_dest_`;else throw new Error("Unsupported source:"+t.src)}return await this.createInternal(t)},this.list=async(t={})=>new qa(Ps.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t)}async createInternal(e){var t,i,o,a;let d,h="",p={};if(this.apiClient.isVertexAI()){const m=jN(this.apiClient,e);return h=ve("batchPredictionJobs",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),d.then(v=>Eh(v))}else{const m=$N(this.apiClient,e);return h=ve("{model}:batchGenerateContent",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),d.then(v=>xh(v))}}async get(e){var t,i,o,a;let d,h="",p={};if(this.apiClient.isVertexAI()){const m=e2(this.apiClient,e);return h=ve("batchPredictionJobs/{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),d.then(v=>Eh(v))}else{const m=YN(this.apiClient,e);return h=ve("batches/{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),d.then(v=>xh(v))}}async cancel(e){var t,i,o,a;let d="",h={};if(this.apiClient.isVertexAI()){const p=t2(this.apiClient,e);d=ve("batchPredictionJobs/{name}:cancel",p._url),h=p._query,delete p.config,delete p._url,delete p._query,await this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const p=JN(this.apiClient,e);d=ve("batches/{name}:cancel",p._url),h=p._query,delete p.config,delete p._url,delete p._query,await this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,i,o,a;let d,h="",p={};if(this.apiClient.isVertexAI()){const m=i2(e);return h=ve("batchPredictionJobs",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),d.then(v=>{const _=T2(v),S=new U_;return Object.assign(S,_),S})}else{const m=KN(e);return h=ve("batches",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),d.then(v=>{const _=v2(v),S=new U_;return Object.assign(S,_),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function C2(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const o=u(n,["startOffset"]);return o!=null&&c(e,["startOffset"],o),e}function x2(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function E2(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function w2(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],C2(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const o=u(n,["inlineData"]);o!=null&&c(e,["inlineData"],x2(o));const a=u(n,["fileData"]);a!=null&&c(e,["fileData"],E2(a));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const p=u(n,["executableCode"]);p!=null&&c(e,["executableCode"],p);const m=u(n,["functionCall"]);m!=null&&c(e,["functionCall"],m);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const _=u(n,["text"]);return _!=null&&c(e,["text"],_),e}function q_(n){const e={},t=u(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>w2(a))),c(e,["parts"],o)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function M2(n){const e={},t=u(n,["behavior"]);t!=null&&c(e,["behavior"],t);const i=u(n,["description"]);i!=null&&c(e,["description"],i);const o=u(n,["name"]);o!=null&&c(e,["name"],o);const a=u(n,["parameters"]);a!=null&&c(e,["parameters"],a);const d=u(n,["parametersJsonSchema"]);d!=null&&c(e,["parametersJsonSchema"],d);const h=u(n,["response"]);h!=null&&c(e,["response"],h);const p=u(n,["responseJsonSchema"]);return p!=null&&c(e,["responseJsonSchema"],p),e}function A2(n){const e={},t=u(n,["startTime"]);t!=null&&c(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&c(e,["endTime"],i),e}function R2(n){const e={},t=u(n,["timeRangeFilter"]);return t!=null&&c(e,["timeRangeFilter"],A2(t)),e}function N2(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&c(e,["dynamicThreshold"],i),e}function D2(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&c(e,["dynamicRetrievalConfig"],N2(t)),e}function k2(){return{}}function I2(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(p=>M2(p))),c(e,["functionDeclarations"],h)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(n,["googleSearch"]);i!=null&&c(e,["googleSearch"],R2(i));const o=u(n,["googleSearchRetrieval"]);if(o!=null&&c(e,["googleSearchRetrieval"],D2(o)),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(n,["urlContext"])!=null&&c(e,["urlContext"],k2());const d=u(n,["codeExecution"]);return d!=null&&c(e,["codeExecution"],d),e}function z2(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["allowedFunctionNames"]);return i!=null&&c(e,["allowedFunctionNames"],i),e}function L2(n){const e={},t=u(n,["latitude"]);t!=null&&c(e,["latitude"],t);const i=u(n,["longitude"]);return i!=null&&c(e,["longitude"],i),e}function U2(n){const e={},t=u(n,["latLng"]);t!=null&&c(e,["latLng"],L2(t));const i=u(n,["languageCode"]);return i!=null&&c(e,["languageCode"],i),e}function V2(n){const e={},t=u(n,["functionCallingConfig"]);t!=null&&c(e,["functionCallingConfig"],z2(t));const i=u(n,["retrievalConfig"]);return i!=null&&c(e,["retrievalConfig"],U2(i)),e}function O2(n,e){const t={},i=u(n,["ttl"]);e!==void 0&&i!=null&&c(e,["ttl"],i);const o=u(n,["expireTime"]);e!==void 0&&o!=null&&c(e,["expireTime"],o);const a=u(n,["displayName"]);e!==void 0&&a!=null&&c(e,["displayName"],a);const d=u(n,["contents"]);if(e!==void 0&&d!=null){let v=Tn(d);Array.isArray(v)&&(v=v.map(_=>q_(_))),c(e,["contents"],v)}const h=u(n,["systemInstruction"]);e!==void 0&&h!=null&&c(e,["systemInstruction"],q_(Ut(h)));const p=u(n,["tools"]);if(e!==void 0&&p!=null){let v=p;Array.isArray(v)&&(v=v.map(_=>I2(_))),c(e,["tools"],v)}const m=u(n,["toolConfig"]);if(e!==void 0&&m!=null&&c(e,["toolConfig"],V2(m)),u(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function B2(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["model"],_T(n,i));const o=u(e,["config"]);return o!=null&&c(t,["config"],O2(o,t)),t}function P2(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],_i(n,i));const o=u(e,["config"]);return o!=null&&c(t,["config"],o),t}function q2(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],_i(n,i));const o=u(e,["config"]);return o!=null&&c(t,["config"],o),t}function F2(n,e){const t={},i=u(n,["ttl"]);e!==void 0&&i!=null&&c(e,["ttl"],i);const o=u(n,["expireTime"]);return e!==void 0&&o!=null&&c(e,["expireTime"],o),t}function H2(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],_i(n,i));const o=u(e,["config"]);return o!=null&&c(t,["config"],F2(o,t)),t}function G2(n,e){const t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const o=u(n,["pageToken"]);return e!==void 0&&o!=null&&c(e,["_query","pageToken"],o),t}function $2(n){const e={},t=u(n,["config"]);return t!=null&&c(e,["config"],G2(t,e)),e}function Y2(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const o=u(n,["startOffset"]);return o!=null&&c(e,["startOffset"],o),e}function J2(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["data"]);i!=null&&c(e,["data"],i);const o=u(n,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function Z2(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["fileUri"]);i!=null&&c(e,["fileUri"],i);const o=u(n,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function K2(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],Y2(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const o=u(n,["inlineData"]);o!=null&&c(e,["inlineData"],J2(o));const a=u(n,["fileData"]);a!=null&&c(e,["fileData"],Z2(a));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const p=u(n,["executableCode"]);p!=null&&c(e,["executableCode"],p);const m=u(n,["functionCall"]);m!=null&&c(e,["functionCall"],m);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const _=u(n,["text"]);return _!=null&&c(e,["text"],_),e}function F_(n){const e={},t=u(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>K2(a))),c(e,["parts"],o)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function X2(n){const e={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=u(n,["description"]);t!=null&&c(e,["description"],t);const i=u(n,["name"]);i!=null&&c(e,["name"],i);const o=u(n,["parameters"]);o!=null&&c(e,["parameters"],o);const a=u(n,["parametersJsonSchema"]);a!=null&&c(e,["parametersJsonSchema"],a);const d=u(n,["response"]);d!=null&&c(e,["response"],d);const h=u(n,["responseJsonSchema"]);return h!=null&&c(e,["responseJsonSchema"],h),e}function W2(n){const e={},t=u(n,["startTime"]);t!=null&&c(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&c(e,["endTime"],i),e}function Q2(n){const e={},t=u(n,["timeRangeFilter"]);return t!=null&&c(e,["timeRangeFilter"],W2(t)),e}function j2(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&c(e,["dynamicThreshold"],i),e}function eD(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&c(e,["dynamicRetrievalConfig"],j2(t)),e}function tD(){return{}}function nD(n){const e={},t=u(n,["apiKeyString"]);return t!=null&&c(e,["apiKeyString"],t),e}function iD(n){const e={},t=u(n,["apiKeyConfig"]);t!=null&&c(e,["apiKeyConfig"],nD(t));const i=u(n,["authType"]);i!=null&&c(e,["authType"],i);const o=u(n,["googleServiceAccountConfig"]);o!=null&&c(e,["googleServiceAccountConfig"],o);const a=u(n,["httpBasicAuthConfig"]);a!=null&&c(e,["httpBasicAuthConfig"],a);const d=u(n,["oauthConfig"]);d!=null&&c(e,["oauthConfig"],d);const h=u(n,["oidcConfig"]);return h!=null&&c(e,["oidcConfig"],h),e}function sD(n){const e={},t=u(n,["authConfig"]);return t!=null&&c(e,["authConfig"],iD(t)),e}function oD(){return{}}function lD(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(_=>X2(_))),c(e,["functionDeclarations"],v)}const i=u(n,["retrieval"]);i!=null&&c(e,["retrieval"],i);const o=u(n,["googleSearch"]);o!=null&&c(e,["googleSearch"],Q2(o));const a=u(n,["googleSearchRetrieval"]);a!=null&&c(e,["googleSearchRetrieval"],eD(a)),u(n,["enterpriseWebSearch"])!=null&&c(e,["enterpriseWebSearch"],tD());const h=u(n,["googleMaps"]);h!=null&&c(e,["googleMaps"],sD(h)),u(n,["urlContext"])!=null&&c(e,["urlContext"],oD());const m=u(n,["codeExecution"]);return m!=null&&c(e,["codeExecution"],m),e}function aD(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["allowedFunctionNames"]);return i!=null&&c(e,["allowedFunctionNames"],i),e}function rD(n){const e={},t=u(n,["latitude"]);t!=null&&c(e,["latitude"],t);const i=u(n,["longitude"]);return i!=null&&c(e,["longitude"],i),e}function uD(n){const e={},t=u(n,["latLng"]);t!=null&&c(e,["latLng"],rD(t));const i=u(n,["languageCode"]);return i!=null&&c(e,["languageCode"],i),e}function cD(n){const e={},t=u(n,["functionCallingConfig"]);t!=null&&c(e,["functionCallingConfig"],aD(t));const i=u(n,["retrievalConfig"]);return i!=null&&c(e,["retrievalConfig"],uD(i)),e}function fD(n,e){const t={},i=u(n,["ttl"]);e!==void 0&&i!=null&&c(e,["ttl"],i);const o=u(n,["expireTime"]);e!==void 0&&o!=null&&c(e,["expireTime"],o);const a=u(n,["displayName"]);e!==void 0&&a!=null&&c(e,["displayName"],a);const d=u(n,["contents"]);if(e!==void 0&&d!=null){let _=Tn(d);Array.isArray(_)&&(_=_.map(S=>F_(S))),c(e,["contents"],_)}const h=u(n,["systemInstruction"]);e!==void 0&&h!=null&&c(e,["systemInstruction"],F_(Ut(h)));const p=u(n,["tools"]);if(e!==void 0&&p!=null){let _=p;Array.isArray(_)&&(_=_.map(S=>lD(S))),c(e,["tools"],_)}const m=u(n,["toolConfig"]);e!==void 0&&m!=null&&c(e,["toolConfig"],cD(m));const v=u(n,["kmsKeyName"]);return e!==void 0&&v!=null&&c(e,["encryption_spec","kmsKeyName"],v),t}function dD(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["model"],_T(n,i));const o=u(e,["config"]);return o!=null&&c(t,["config"],fD(o,t)),t}function hD(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],_i(n,i));const o=u(e,["config"]);return o!=null&&c(t,["config"],o),t}function mD(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],_i(n,i));const o=u(e,["config"]);return o!=null&&c(t,["config"],o),t}function pD(n,e){const t={},i=u(n,["ttl"]);e!==void 0&&i!=null&&c(e,["ttl"],i);const o=u(n,["expireTime"]);return e!==void 0&&o!=null&&c(e,["expireTime"],o),t}function gD(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],_i(n,i));const o=u(e,["config"]);return o!=null&&c(t,["config"],pD(o,t)),t}function vD(n,e){const t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const o=u(n,["pageToken"]);return e!==void 0&&o!=null&&c(e,["_query","pageToken"],o),t}function yD(n){const e={},t=u(n,["config"]);return t!=null&&c(e,["config"],vD(t,e)),e}function yu(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["displayName"]);i!=null&&c(e,["displayName"],i);const o=u(n,["model"]);o!=null&&c(e,["model"],o);const a=u(n,["createTime"]);a!=null&&c(e,["createTime"],a);const d=u(n,["updateTime"]);d!=null&&c(e,["updateTime"],d);const h=u(n,["expireTime"]);h!=null&&c(e,["expireTime"],h);const p=u(n,["usageMetadata"]);return p!=null&&c(e,["usageMetadata"],p),e}function _D(){return{}}function SD(n){const e={},t=u(n,["nextPageToken"]);t!=null&&c(e,["nextPageToken"],t);const i=u(n,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>yu(a))),c(e,["cachedContents"],o)}return e}function _u(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["displayName"]);i!=null&&c(e,["displayName"],i);const o=u(n,["model"]);o!=null&&c(e,["model"],o);const a=u(n,["createTime"]);a!=null&&c(e,["createTime"],a);const d=u(n,["updateTime"]);d!=null&&c(e,["updateTime"],d);const h=u(n,["expireTime"]);h!=null&&c(e,["expireTime"],h);const p=u(n,["usageMetadata"]);return p!=null&&c(e,["usageMetadata"],p),e}function TD(){return{}}function bD(n){const e={},t=u(n,["nextPageToken"]);t!=null&&c(e,["nextPageToken"],t);const i=u(n,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>_u(a))),c(e,["cachedContents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class CD extends Fs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new qa(Ps.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,o,a;let d,h="",p={};if(this.apiClient.isVertexAI()){const m=dD(this.apiClient,e);return h=ve("cachedContents",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),d.then(v=>_u(v))}else{const m=B2(this.apiClient,e);return h=ve("cachedContents",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),d.then(v=>yu(v))}}async get(e){var t,i,o,a;let d,h="",p={};if(this.apiClient.isVertexAI()){const m=hD(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),d.then(v=>_u(v))}else{const m=P2(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),d.then(v=>yu(v))}}async delete(e){var t,i,o,a;let d,h="",p={};if(this.apiClient.isVertexAI()){const m=mD(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),d.then(()=>{const v=TD(),_=new z_;return Object.assign(_,v),_})}else{const m=q2(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),d.then(()=>{const v=_D(),_=new z_;return Object.assign(_,v),_})}}async update(e){var t,i,o,a;let d,h="",p={};if(this.apiClient.isVertexAI()){const m=gD(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),d.then(v=>_u(v))}else{const m=H2(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),d.then(v=>yu(v))}}async listInternal(e){var t,i,o,a;let d,h="",p={};if(this.apiClient.isVertexAI()){const m=yD(e);return h=ve("cachedContents",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),d.then(v=>{const _=bD(v),S=new L_;return Object.assign(S,_),S})}else{const m=$2(e);return h=ve("cachedContents",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),d.then(v=>{const _=SD(v),S=new L_;return Object.assign(S,_),S})}}}function H_(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Qe(n){return this instanceof Qe?(this.v=n,this):new Qe(n)}function $o(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",d),o[Symbol.asyncIterator]=function(){return this},o;function d(b){return function(x){return Promise.resolve(x).then(b,_)}}function h(b,x){i[b]&&(o[b]=function(E){return new Promise(function(D,I){a.push([b,E,D,I])>1||p(b,E)})},x&&(o[b]=x(o[b])))}function p(b,x){try{m(i[b](x))}catch(E){S(a[0][3],E)}}function m(b){b.value instanceof Qe?Promise.resolve(b.value.v).then(v,_):S(a[0][2],b)}function v(b){p("next",b)}function _(b){p("throw",b)}function S(b,x){b(x),a.shift(),a.length&&p(a[0][0],a[0][1])}}function ya(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof H_=="function"?H_(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(d){return new Promise(function(h,p){d=n[a](d),o(h,p,d.done,d.value)})}}function o(a,d,h,p){Promise.resolve(p).then(function(m){a({value:m,done:h})},d)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xD(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:DT(t)}function DT(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function ED(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function G_(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const o=[];let a=!0;for(;i<t&&n[i].role==="model";)o.push(n[i]),a&&!DT(n[i])&&(a=!1),i++;a?e.push(...o):e.pop()}return e}class wD{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new MD(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class MD{constructor(e,t,i,o={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=o,this.history=a,this.sendPromise=Promise.resolve(),ED(a)}async sendMessage(e){var t;await this.sendPromise;const i=Ut(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,d,h;const p=await o,m=(d=(a=p.candidates)===null||a===void 0?void 0:a[0])===null||d===void 0?void 0:d.content,v=p.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let S=[];v!=null&&(S=(h=v.slice(_))!==null&&h!==void 0?h:[]);const b=m?[m]:[];this.recordHistory(i,b,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const i=Ut(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const a=await o;return this.processStreamResponse(a,i)}getHistory(e=!1){const t=e?G_(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var i,o;return $o(this,arguments,function*(){var d,h,p,m;const v=[];try{for(var _=!0,S=ya(e),b;b=yield Qe(S.next()),d=b.done,!d;_=!0){m=b.value,_=!1;const x=m;if(xD(x)){const E=(o=(i=x.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content;E!==void 0&&v.push(E)}yield yield Qe(x)}}catch(x){h={error:x}}finally{try{!_&&!d&&(p=S.return)&&(yield Qe(p.call(S)))}finally{if(h)throw h.error}}this.recordHistory(t,v)})}recordHistory(e,t,i){let o=[];t.length>0&&t.every(a=>a.role!==void 0)?o=t:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...G_(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $u extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,$u.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AD(n,e){const t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const o=u(n,["pageToken"]);return e!==void 0&&o!=null&&c(e,["_query","pageToken"],o),t}function RD(n){const e={},t=u(n,["config"]);return t!=null&&c(e,["config"],AD(t,e)),e}function ND(n){const e={},t=u(n,["details"]);t!=null&&c(e,["details"],t);const i=u(n,["message"]);i!=null&&c(e,["message"],i);const o=u(n,["code"]);return o!=null&&c(e,["code"],o),e}function DD(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["displayName"]);i!=null&&c(e,["displayName"],i);const o=u(n,["mimeType"]);o!=null&&c(e,["mimeType"],o);const a=u(n,["sizeBytes"]);a!=null&&c(e,["sizeBytes"],a);const d=u(n,["createTime"]);d!=null&&c(e,["createTime"],d);const h=u(n,["expirationTime"]);h!=null&&c(e,["expirationTime"],h);const p=u(n,["updateTime"]);p!=null&&c(e,["updateTime"],p);const m=u(n,["sha256Hash"]);m!=null&&c(e,["sha256Hash"],m);const v=u(n,["uri"]);v!=null&&c(e,["uri"],v);const _=u(n,["downloadUri"]);_!=null&&c(e,["downloadUri"],_);const S=u(n,["state"]);S!=null&&c(e,["state"],S);const b=u(n,["source"]);b!=null&&c(e,["source"],b);const x=u(n,["videoMetadata"]);x!=null&&c(e,["videoMetadata"],x);const E=u(n,["error"]);return E!=null&&c(e,["error"],ND(E)),e}function kD(n){const e={},t=u(n,["file"]);t!=null&&c(e,["file"],DD(t));const i=u(n,["config"]);return i!=null&&c(e,["config"],i),e}function ID(n){const e={},t=u(n,["name"]);t!=null&&c(e,["_url","file"],xT(t));const i=u(n,["config"]);return i!=null&&c(e,["config"],i),e}function zD(n){const e={},t=u(n,["name"]);t!=null&&c(e,["_url","file"],xT(t));const i=u(n,["config"]);return i!=null&&c(e,["config"],i),e}function LD(n){const e={},t=u(n,["details"]);t!=null&&c(e,["details"],t);const i=u(n,["message"]);i!=null&&c(e,["message"],i);const o=u(n,["code"]);return o!=null&&c(e,["code"],o),e}function wh(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["displayName"]);i!=null&&c(e,["displayName"],i);const o=u(n,["mimeType"]);o!=null&&c(e,["mimeType"],o);const a=u(n,["sizeBytes"]);a!=null&&c(e,["sizeBytes"],a);const d=u(n,["createTime"]);d!=null&&c(e,["createTime"],d);const h=u(n,["expirationTime"]);h!=null&&c(e,["expirationTime"],h);const p=u(n,["updateTime"]);p!=null&&c(e,["updateTime"],p);const m=u(n,["sha256Hash"]);m!=null&&c(e,["sha256Hash"],m);const v=u(n,["uri"]);v!=null&&c(e,["uri"],v);const _=u(n,["downloadUri"]);_!=null&&c(e,["downloadUri"],_);const S=u(n,["state"]);S!=null&&c(e,["state"],S);const b=u(n,["source"]);b!=null&&c(e,["source"],b);const x=u(n,["videoMetadata"]);x!=null&&c(e,["videoMetadata"],x);const E=u(n,["error"]);return E!=null&&c(e,["error"],LD(E)),e}function UD(n){const e={},t=u(n,["nextPageToken"]);t!=null&&c(e,["nextPageToken"],t);const i=u(n,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>wh(a))),c(e,["files"],o)}return e}function VD(){return{}}function OD(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BD extends Fs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new qa(Ps.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>wh(t))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let o,a="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=RD(e);return a=ve("files",h._url),d=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=UD(p),v=new QR;return Object.assign(v,m),v})}}async createInternal(e){var t,i;let o,a="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=kD(e);return a=ve("upload/v1beta/files",h._url),d=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(()=>{const p=VD(),m=new jR;return Object.assign(m,p),m})}}async get(e){var t,i;let o,a="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=ID(e);return a=ve("files/{file}",h._url),d=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>wh(p))}}async delete(e){var t,i;let o,a="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=zD(e);return a=ve("files/{file}",h._url),d=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(()=>{const p=OD(),m=new eN;return Object.assign(m,p),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PD(n){const e={},t=u(n,["voiceName"]);return t!=null&&c(e,["voiceName"],t),e}function qD(n){const e={},t=u(n,["voiceName"]);return t!=null&&c(e,["voiceName"],t),e}function kT(n){const e={},t=u(n,["prebuiltVoiceConfig"]);return t!=null&&c(e,["prebuiltVoiceConfig"],PD(t)),e}function FD(n){const e={},t=u(n,["prebuiltVoiceConfig"]);return t!=null&&c(e,["prebuiltVoiceConfig"],qD(t)),e}function HD(n){const e={},t=u(n,["speaker"]);t!=null&&c(e,["speaker"],t);const i=u(n,["voiceConfig"]);return i!=null&&c(e,["voiceConfig"],kT(i)),e}function GD(n){const e={},t=u(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>HD(o))),c(e,["speakerVoiceConfigs"],i)}return e}function $D(n){const e={},t=u(n,["voiceConfig"]);t!=null&&c(e,["voiceConfig"],kT(t));const i=u(n,["multiSpeakerVoiceConfig"]);i!=null&&c(e,["multiSpeakerVoiceConfig"],GD(i));const o=u(n,["languageCode"]);return o!=null&&c(e,["languageCode"],o),e}function YD(n){const e={},t=u(n,["voiceConfig"]);if(t!=null&&c(e,["voiceConfig"],FD(t)),u(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=u(n,["languageCode"]);return i!=null&&c(e,["languageCode"],i),e}function JD(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const o=u(n,["startOffset"]);return o!=null&&c(e,["startOffset"],o),e}function ZD(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const o=u(n,["startOffset"]);return o!=null&&c(e,["startOffset"],o),e}function KD(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function XD(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["data"]);i!=null&&c(e,["data"],i);const o=u(n,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function WD(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function QD(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["fileUri"]);i!=null&&c(e,["fileUri"],i);const o=u(n,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function jD(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],JD(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const o=u(n,["inlineData"]);o!=null&&c(e,["inlineData"],KD(o));const a=u(n,["fileData"]);a!=null&&c(e,["fileData"],WD(a));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const p=u(n,["executableCode"]);p!=null&&c(e,["executableCode"],p);const m=u(n,["functionCall"]);m!=null&&c(e,["functionCall"],m);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const _=u(n,["text"]);return _!=null&&c(e,["text"],_),e}function ek(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],ZD(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const o=u(n,["inlineData"]);o!=null&&c(e,["inlineData"],XD(o));const a=u(n,["fileData"]);a!=null&&c(e,["fileData"],QD(a));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const p=u(n,["executableCode"]);p!=null&&c(e,["executableCode"],p);const m=u(n,["functionCall"]);m!=null&&c(e,["functionCall"],m);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const _=u(n,["text"]);return _!=null&&c(e,["text"],_),e}function tk(n){const e={},t=u(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>jD(a))),c(e,["parts"],o)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function nk(n){const e={},t=u(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>ek(a))),c(e,["parts"],o)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function ik(n){const e={},t=u(n,["behavior"]);t!=null&&c(e,["behavior"],t);const i=u(n,["description"]);i!=null&&c(e,["description"],i);const o=u(n,["name"]);o!=null&&c(e,["name"],o);const a=u(n,["parameters"]);a!=null&&c(e,["parameters"],a);const d=u(n,["parametersJsonSchema"]);d!=null&&c(e,["parametersJsonSchema"],d);const h=u(n,["response"]);h!=null&&c(e,["response"],h);const p=u(n,["responseJsonSchema"]);return p!=null&&c(e,["responseJsonSchema"],p),e}function sk(n){const e={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=u(n,["description"]);t!=null&&c(e,["description"],t);const i=u(n,["name"]);i!=null&&c(e,["name"],i);const o=u(n,["parameters"]);o!=null&&c(e,["parameters"],o);const a=u(n,["parametersJsonSchema"]);a!=null&&c(e,["parametersJsonSchema"],a);const d=u(n,["response"]);d!=null&&c(e,["response"],d);const h=u(n,["responseJsonSchema"]);return h!=null&&c(e,["responseJsonSchema"],h),e}function ok(n){const e={},t=u(n,["startTime"]);t!=null&&c(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&c(e,["endTime"],i),e}function lk(n){const e={},t=u(n,["startTime"]);t!=null&&c(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&c(e,["endTime"],i),e}function ak(n){const e={},t=u(n,["timeRangeFilter"]);return t!=null&&c(e,["timeRangeFilter"],ok(t)),e}function rk(n){const e={},t=u(n,["timeRangeFilter"]);return t!=null&&c(e,["timeRangeFilter"],lk(t)),e}function uk(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&c(e,["dynamicThreshold"],i),e}function ck(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&c(e,["dynamicThreshold"],i),e}function fk(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&c(e,["dynamicRetrievalConfig"],uk(t)),e}function dk(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&c(e,["dynamicRetrievalConfig"],ck(t)),e}function hk(){return{}}function mk(n){const e={},t=u(n,["apiKeyString"]);return t!=null&&c(e,["apiKeyString"],t),e}function pk(n){const e={},t=u(n,["apiKeyConfig"]);t!=null&&c(e,["apiKeyConfig"],mk(t));const i=u(n,["authType"]);i!=null&&c(e,["authType"],i);const o=u(n,["googleServiceAccountConfig"]);o!=null&&c(e,["googleServiceAccountConfig"],o);const a=u(n,["httpBasicAuthConfig"]);a!=null&&c(e,["httpBasicAuthConfig"],a);const d=u(n,["oauthConfig"]);d!=null&&c(e,["oauthConfig"],d);const h=u(n,["oidcConfig"]);return h!=null&&c(e,["oidcConfig"],h),e}function gk(n){const e={},t=u(n,["authConfig"]);return t!=null&&c(e,["authConfig"],pk(t)),e}function vk(){return{}}function yk(){return{}}function _k(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(p=>ik(p))),c(e,["functionDeclarations"],h)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(n,["googleSearch"]);i!=null&&c(e,["googleSearch"],ak(i));const o=u(n,["googleSearchRetrieval"]);if(o!=null&&c(e,["googleSearchRetrieval"],fk(o)),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(n,["urlContext"])!=null&&c(e,["urlContext"],vk());const d=u(n,["codeExecution"]);return d!=null&&c(e,["codeExecution"],d),e}function Sk(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(_=>sk(_))),c(e,["functionDeclarations"],v)}const i=u(n,["retrieval"]);i!=null&&c(e,["retrieval"],i);const o=u(n,["googleSearch"]);o!=null&&c(e,["googleSearch"],rk(o));const a=u(n,["googleSearchRetrieval"]);a!=null&&c(e,["googleSearchRetrieval"],dk(a)),u(n,["enterpriseWebSearch"])!=null&&c(e,["enterpriseWebSearch"],hk());const h=u(n,["googleMaps"]);h!=null&&c(e,["googleMaps"],gk(h)),u(n,["urlContext"])!=null&&c(e,["urlContext"],yk());const m=u(n,["codeExecution"]);return m!=null&&c(e,["codeExecution"],m),e}function Tk(n){const e={},t=u(n,["handle"]);if(t!=null&&c(e,["handle"],t),u(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function bk(n){const e={},t=u(n,["handle"]);t!=null&&c(e,["handle"],t);const i=u(n,["transparent"]);return i!=null&&c(e,["transparent"],i),e}function $_(){return{}}function Y_(){return{}}function Ck(n){const e={},t=u(n,["disabled"]);t!=null&&c(e,["disabled"],t);const i=u(n,["startOfSpeechSensitivity"]);i!=null&&c(e,["startOfSpeechSensitivity"],i);const o=u(n,["endOfSpeechSensitivity"]);o!=null&&c(e,["endOfSpeechSensitivity"],o);const a=u(n,["prefixPaddingMs"]);a!=null&&c(e,["prefixPaddingMs"],a);const d=u(n,["silenceDurationMs"]);return d!=null&&c(e,["silenceDurationMs"],d),e}function xk(n){const e={},t=u(n,["disabled"]);t!=null&&c(e,["disabled"],t);const i=u(n,["startOfSpeechSensitivity"]);i!=null&&c(e,["startOfSpeechSensitivity"],i);const o=u(n,["endOfSpeechSensitivity"]);o!=null&&c(e,["endOfSpeechSensitivity"],o);const a=u(n,["prefixPaddingMs"]);a!=null&&c(e,["prefixPaddingMs"],a);const d=u(n,["silenceDurationMs"]);return d!=null&&c(e,["silenceDurationMs"],d),e}function Ek(n){const e={},t=u(n,["automaticActivityDetection"]);t!=null&&c(e,["automaticActivityDetection"],Ck(t));const i=u(n,["activityHandling"]);i!=null&&c(e,["activityHandling"],i);const o=u(n,["turnCoverage"]);return o!=null&&c(e,["turnCoverage"],o),e}function wk(n){const e={},t=u(n,["automaticActivityDetection"]);t!=null&&c(e,["automaticActivityDetection"],xk(t));const i=u(n,["activityHandling"]);i!=null&&c(e,["activityHandling"],i);const o=u(n,["turnCoverage"]);return o!=null&&c(e,["turnCoverage"],o),e}function Mk(n){const e={},t=u(n,["targetTokens"]);return t!=null&&c(e,["targetTokens"],t),e}function Ak(n){const e={},t=u(n,["targetTokens"]);return t!=null&&c(e,["targetTokens"],t),e}function Rk(n){const e={},t=u(n,["triggerTokens"]);t!=null&&c(e,["triggerTokens"],t);const i=u(n,["slidingWindow"]);return i!=null&&c(e,["slidingWindow"],Mk(i)),e}function Nk(n){const e={},t=u(n,["triggerTokens"]);t!=null&&c(e,["triggerTokens"],t);const i=u(n,["slidingWindow"]);return i!=null&&c(e,["slidingWindow"],Ak(i)),e}function Dk(n){const e={},t=u(n,["proactiveAudio"]);return t!=null&&c(e,["proactiveAudio"],t),e}function kk(n){const e={},t=u(n,["proactiveAudio"]);return t!=null&&c(e,["proactiveAudio"],t),e}function Ik(n,e){const t={},i=u(n,["generationConfig"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig"],i);const o=u(n,["responseModalities"]);e!==void 0&&o!=null&&c(e,["setup","generationConfig","responseModalities"],o);const a=u(n,["temperature"]);e!==void 0&&a!=null&&c(e,["setup","generationConfig","temperature"],a);const d=u(n,["topP"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","topP"],d);const h=u(n,["topK"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","topK"],h);const p=u(n,["maxOutputTokens"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","maxOutputTokens"],p);const m=u(n,["mediaResolution"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","mediaResolution"],m);const v=u(n,["seed"]);e!==void 0&&v!=null&&c(e,["setup","generationConfig","seed"],v);const _=u(n,["speechConfig"]);e!==void 0&&_!=null&&c(e,["setup","generationConfig","speechConfig"],$D(em(_)));const S=u(n,["enableAffectiveDialog"]);e!==void 0&&S!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],S);const b=u(n,["systemInstruction"]);e!==void 0&&b!=null&&c(e,["setup","systemInstruction"],tk(Ut(b)));const x=u(n,["tools"]);if(e!==void 0&&x!=null){let U=ol(x);Array.isArray(U)&&(U=U.map(Y=>_k(sl(Y)))),c(e,["setup","tools"],U)}const E=u(n,["sessionResumption"]);e!==void 0&&E!=null&&c(e,["setup","sessionResumption"],Tk(E));const D=u(n,["inputAudioTranscription"]);e!==void 0&&D!=null&&c(e,["setup","inputAudioTranscription"],$_());const I=u(n,["outputAudioTranscription"]);e!==void 0&&I!=null&&c(e,["setup","outputAudioTranscription"],$_());const B=u(n,["realtimeInputConfig"]);e!==void 0&&B!=null&&c(e,["setup","realtimeInputConfig"],Ek(B));const q=u(n,["contextWindowCompression"]);e!==void 0&&q!=null&&c(e,["setup","contextWindowCompression"],Rk(q));const R=u(n,["proactivity"]);return e!==void 0&&R!=null&&c(e,["setup","proactivity"],Dk(R)),t}function zk(n,e){const t={},i=u(n,["generationConfig"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig"],i);const o=u(n,["responseModalities"]);e!==void 0&&o!=null&&c(e,["setup","generationConfig","responseModalities"],o);const a=u(n,["temperature"]);e!==void 0&&a!=null&&c(e,["setup","generationConfig","temperature"],a);const d=u(n,["topP"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","topP"],d);const h=u(n,["topK"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","topK"],h);const p=u(n,["maxOutputTokens"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","maxOutputTokens"],p);const m=u(n,["mediaResolution"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","mediaResolution"],m);const v=u(n,["seed"]);e!==void 0&&v!=null&&c(e,["setup","generationConfig","seed"],v);const _=u(n,["speechConfig"]);e!==void 0&&_!=null&&c(e,["setup","generationConfig","speechConfig"],YD(em(_)));const S=u(n,["enableAffectiveDialog"]);e!==void 0&&S!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],S);const b=u(n,["systemInstruction"]);e!==void 0&&b!=null&&c(e,["setup","systemInstruction"],nk(Ut(b)));const x=u(n,["tools"]);if(e!==void 0&&x!=null){let U=ol(x);Array.isArray(U)&&(U=U.map(Y=>Sk(sl(Y)))),c(e,["setup","tools"],U)}const E=u(n,["sessionResumption"]);e!==void 0&&E!=null&&c(e,["setup","sessionResumption"],bk(E));const D=u(n,["inputAudioTranscription"]);e!==void 0&&D!=null&&c(e,["setup","inputAudioTranscription"],Y_());const I=u(n,["outputAudioTranscription"]);e!==void 0&&I!=null&&c(e,["setup","outputAudioTranscription"],Y_());const B=u(n,["realtimeInputConfig"]);e!==void 0&&B!=null&&c(e,["setup","realtimeInputConfig"],wk(B));const q=u(n,["contextWindowCompression"]);e!==void 0&&q!=null&&c(e,["setup","contextWindowCompression"],Nk(q));const R=u(n,["proactivity"]);return e!==void 0&&R!=null&&c(e,["setup","proactivity"],kk(R)),t}function Lk(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["setup","model"],Ge(n,i));const o=u(e,["config"]);return o!=null&&c(t,["config"],Ik(o,t)),t}function Uk(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["setup","model"],Ge(n,i));const o=u(e,["config"]);return o!=null&&c(t,["config"],zk(o,t)),t}function Vk(){return{}}function Ok(){return{}}function Bk(){return{}}function Pk(){return{}}function qk(n){const e={},t=u(n,["media"]);t!=null&&c(e,["mediaChunks"],ST(t));const i=u(n,["audio"]);i!=null&&c(e,["audio"],sN(i));const o=u(n,["audioStreamEnd"]);o!=null&&c(e,["audioStreamEnd"],o);const a=u(n,["video"]);a!=null&&c(e,["video"],iN(a));const d=u(n,["text"]);return d!=null&&c(e,["text"],d),u(n,["activityStart"])!=null&&c(e,["activityStart"],Vk()),u(n,["activityEnd"])!=null&&c(e,["activityEnd"],Bk()),e}function Fk(n){const e={},t=u(n,["media"]);if(t!=null&&c(e,["mediaChunks"],ST(t)),u(n,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const i=u(n,["audioStreamEnd"]);if(i!=null&&c(e,["audioStreamEnd"],i),u(n,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(u(n,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return u(n,["activityStart"])!=null&&c(e,["activityStart"],Ok()),u(n,["activityEnd"])!=null&&c(e,["activityEnd"],Pk()),e}function IT(n){const e={},t=u(n,["text"]);t!=null&&c(e,["text"],t);const i=u(n,["weight"]);return i!=null&&c(e,["weight"],i),e}function Hk(n){const e={},t=u(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>IT(o))),c(e,["weightedPrompts"],i)}return e}function zT(n){const e={},t=u(n,["temperature"]);t!=null&&c(e,["temperature"],t);const i=u(n,["topK"]);i!=null&&c(e,["topK"],i);const o=u(n,["seed"]);o!=null&&c(e,["seed"],o);const a=u(n,["guidance"]);a!=null&&c(e,["guidance"],a);const d=u(n,["bpm"]);d!=null&&c(e,["bpm"],d);const h=u(n,["density"]);h!=null&&c(e,["density"],h);const p=u(n,["brightness"]);p!=null&&c(e,["brightness"],p);const m=u(n,["scale"]);m!=null&&c(e,["scale"],m);const v=u(n,["muteBass"]);v!=null&&c(e,["muteBass"],v);const _=u(n,["muteDrums"]);_!=null&&c(e,["muteDrums"],_);const S=u(n,["onlyBassAndDrums"]);return S!=null&&c(e,["onlyBassAndDrums"],S),e}function Gk(n){const e={},t=u(n,["musicGenerationConfig"]);return t!=null&&c(e,["musicGenerationConfig"],zT(t)),e}function LT(n){const e={},t=u(n,["model"]);return t!=null&&c(e,["model"],t),e}function UT(n){const e={},t=u(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>IT(o))),c(e,["weightedPrompts"],i)}return e}function Mh(n){const e={},t=u(n,["setup"]);t!=null&&c(e,["setup"],LT(t));const i=u(n,["clientContent"]);i!=null&&c(e,["clientContent"],UT(i));const o=u(n,["musicGenerationConfig"]);o!=null&&c(e,["musicGenerationConfig"],zT(o));const a=u(n,["playbackControl"]);return a!=null&&c(e,["playbackControl"],a),e}function $k(){return{}}function Yk(){return{}}function Jk(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const o=u(n,["startOffset"]);return o!=null&&c(e,["startOffset"],o),e}function Zk(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const o=u(n,["startOffset"]);return o!=null&&c(e,["startOffset"],o),e}function Kk(n){const e={},t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function Xk(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["data"]);i!=null&&c(e,["data"],i);const o=u(n,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function Wk(n){const e={},t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function Qk(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["fileUri"]);i!=null&&c(e,["fileUri"],i);const o=u(n,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function jk(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],Jk(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const o=u(n,["inlineData"]);o!=null&&c(e,["inlineData"],Kk(o));const a=u(n,["fileData"]);a!=null&&c(e,["fileData"],Wk(a));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const p=u(n,["executableCode"]);p!=null&&c(e,["executableCode"],p);const m=u(n,["functionCall"]);m!=null&&c(e,["functionCall"],m);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const _=u(n,["text"]);return _!=null&&c(e,["text"],_),e}function eI(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],Zk(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const o=u(n,["inlineData"]);o!=null&&c(e,["inlineData"],Xk(o));const a=u(n,["fileData"]);a!=null&&c(e,["fileData"],Qk(a));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const p=u(n,["executableCode"]);p!=null&&c(e,["executableCode"],p);const m=u(n,["functionCall"]);m!=null&&c(e,["functionCall"],m);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const _=u(n,["text"]);return _!=null&&c(e,["text"],_),e}function tI(n){const e={},t=u(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>jk(a))),c(e,["parts"],o)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function nI(n){const e={},t=u(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>eI(a))),c(e,["parts"],o)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function J_(n){const e={},t=u(n,["text"]);t!=null&&c(e,["text"],t);const i=u(n,["finished"]);return i!=null&&c(e,["finished"],i),e}function Z_(n){const e={},t=u(n,["text"]);t!=null&&c(e,["text"],t);const i=u(n,["finished"]);return i!=null&&c(e,["finished"],i),e}function iI(n){const e={},t=u(n,["retrievedUrl"]);t!=null&&c(e,["retrievedUrl"],t);const i=u(n,["urlRetrievalStatus"]);return i!=null&&c(e,["urlRetrievalStatus"],i),e}function sI(n){const e={},t=u(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>iI(o))),c(e,["urlMetadata"],i)}return e}function oI(n){const e={},t=u(n,["modelTurn"]);t!=null&&c(e,["modelTurn"],tI(t));const i=u(n,["turnComplete"]);i!=null&&c(e,["turnComplete"],i);const o=u(n,["interrupted"]);o!=null&&c(e,["interrupted"],o);const a=u(n,["groundingMetadata"]);a!=null&&c(e,["groundingMetadata"],a);const d=u(n,["generationComplete"]);d!=null&&c(e,["generationComplete"],d);const h=u(n,["inputTranscription"]);h!=null&&c(e,["inputTranscription"],J_(h));const p=u(n,["outputTranscription"]);p!=null&&c(e,["outputTranscription"],J_(p));const m=u(n,["urlContextMetadata"]);return m!=null&&c(e,["urlContextMetadata"],sI(m)),e}function lI(n){const e={},t=u(n,["modelTurn"]);t!=null&&c(e,["modelTurn"],nI(t));const i=u(n,["turnComplete"]);i!=null&&c(e,["turnComplete"],i);const o=u(n,["interrupted"]);o!=null&&c(e,["interrupted"],o);const a=u(n,["groundingMetadata"]);a!=null&&c(e,["groundingMetadata"],a);const d=u(n,["generationComplete"]);d!=null&&c(e,["generationComplete"],d);const h=u(n,["inputTranscription"]);h!=null&&c(e,["inputTranscription"],Z_(h));const p=u(n,["outputTranscription"]);return p!=null&&c(e,["outputTranscription"],Z_(p)),e}function aI(n){const e={},t=u(n,["id"]);t!=null&&c(e,["id"],t);const i=u(n,["args"]);i!=null&&c(e,["args"],i);const o=u(n,["name"]);return o!=null&&c(e,["name"],o),e}function rI(n){const e={},t=u(n,["args"]);t!=null&&c(e,["args"],t);const i=u(n,["name"]);return i!=null&&c(e,["name"],i),e}function uI(n){const e={},t=u(n,["functionCalls"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>aI(o))),c(e,["functionCalls"],i)}return e}function cI(n){const e={},t=u(n,["functionCalls"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>rI(o))),c(e,["functionCalls"],i)}return e}function fI(n){const e={},t=u(n,["ids"]);return t!=null&&c(e,["ids"],t),e}function dI(n){const e={},t=u(n,["ids"]);return t!=null&&c(e,["ids"],t),e}function mu(n){const e={},t=u(n,["modality"]);t!=null&&c(e,["modality"],t);const i=u(n,["tokenCount"]);return i!=null&&c(e,["tokenCount"],i),e}function pu(n){const e={},t=u(n,["modality"]);t!=null&&c(e,["modality"],t);const i=u(n,["tokenCount"]);return i!=null&&c(e,["tokenCount"],i),e}function hI(n){const e={},t=u(n,["promptTokenCount"]);t!=null&&c(e,["promptTokenCount"],t);const i=u(n,["cachedContentTokenCount"]);i!=null&&c(e,["cachedContentTokenCount"],i);const o=u(n,["responseTokenCount"]);o!=null&&c(e,["responseTokenCount"],o);const a=u(n,["toolUsePromptTokenCount"]);a!=null&&c(e,["toolUsePromptTokenCount"],a);const d=u(n,["thoughtsTokenCount"]);d!=null&&c(e,["thoughtsTokenCount"],d);const h=u(n,["totalTokenCount"]);h!=null&&c(e,["totalTokenCount"],h);const p=u(n,["promptTokensDetails"]);if(p!=null){let S=p;Array.isArray(S)&&(S=S.map(b=>mu(b))),c(e,["promptTokensDetails"],S)}const m=u(n,["cacheTokensDetails"]);if(m!=null){let S=m;Array.isArray(S)&&(S=S.map(b=>mu(b))),c(e,["cacheTokensDetails"],S)}const v=u(n,["responseTokensDetails"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(b=>mu(b))),c(e,["responseTokensDetails"],S)}const _=u(n,["toolUsePromptTokensDetails"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(b=>mu(b))),c(e,["toolUsePromptTokensDetails"],S)}return e}function mI(n){const e={},t=u(n,["promptTokenCount"]);t!=null&&c(e,["promptTokenCount"],t);const i=u(n,["cachedContentTokenCount"]);i!=null&&c(e,["cachedContentTokenCount"],i);const o=u(n,["candidatesTokenCount"]);o!=null&&c(e,["responseTokenCount"],o);const a=u(n,["toolUsePromptTokenCount"]);a!=null&&c(e,["toolUsePromptTokenCount"],a);const d=u(n,["thoughtsTokenCount"]);d!=null&&c(e,["thoughtsTokenCount"],d);const h=u(n,["totalTokenCount"]);h!=null&&c(e,["totalTokenCount"],h);const p=u(n,["promptTokensDetails"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(x=>pu(x))),c(e,["promptTokensDetails"],b)}const m=u(n,["cacheTokensDetails"]);if(m!=null){let b=m;Array.isArray(b)&&(b=b.map(x=>pu(x))),c(e,["cacheTokensDetails"],b)}const v=u(n,["candidatesTokensDetails"]);if(v!=null){let b=v;Array.isArray(b)&&(b=b.map(x=>pu(x))),c(e,["responseTokensDetails"],b)}const _=u(n,["toolUsePromptTokensDetails"]);if(_!=null){let b=_;Array.isArray(b)&&(b=b.map(x=>pu(x))),c(e,["toolUsePromptTokensDetails"],b)}const S=u(n,["trafficType"]);return S!=null&&c(e,["trafficType"],S),e}function pI(n){const e={},t=u(n,["timeLeft"]);return t!=null&&c(e,["timeLeft"],t),e}function gI(n){const e={},t=u(n,["timeLeft"]);return t!=null&&c(e,["timeLeft"],t),e}function vI(n){const e={},t=u(n,["newHandle"]);t!=null&&c(e,["newHandle"],t);const i=u(n,["resumable"]);i!=null&&c(e,["resumable"],i);const o=u(n,["lastConsumedClientMessageIndex"]);return o!=null&&c(e,["lastConsumedClientMessageIndex"],o),e}function yI(n){const e={},t=u(n,["newHandle"]);t!=null&&c(e,["newHandle"],t);const i=u(n,["resumable"]);i!=null&&c(e,["resumable"],i);const o=u(n,["lastConsumedClientMessageIndex"]);return o!=null&&c(e,["lastConsumedClientMessageIndex"],o),e}function _I(n){const e={};u(n,["setupComplete"])!=null&&c(e,["setupComplete"],$k());const i=u(n,["serverContent"]);i!=null&&c(e,["serverContent"],oI(i));const o=u(n,["toolCall"]);o!=null&&c(e,["toolCall"],uI(o));const a=u(n,["toolCallCancellation"]);a!=null&&c(e,["toolCallCancellation"],fI(a));const d=u(n,["usageMetadata"]);d!=null&&c(e,["usageMetadata"],hI(d));const h=u(n,["goAway"]);h!=null&&c(e,["goAway"],pI(h));const p=u(n,["sessionResumptionUpdate"]);return p!=null&&c(e,["sessionResumptionUpdate"],vI(p)),e}function SI(n){const e={};u(n,["setupComplete"])!=null&&c(e,["setupComplete"],Yk());const i=u(n,["serverContent"]);i!=null&&c(e,["serverContent"],lI(i));const o=u(n,["toolCall"]);o!=null&&c(e,["toolCall"],cI(o));const a=u(n,["toolCallCancellation"]);a!=null&&c(e,["toolCallCancellation"],dI(a));const d=u(n,["usageMetadata"]);d!=null&&c(e,["usageMetadata"],mI(d));const h=u(n,["goAway"]);h!=null&&c(e,["goAway"],gI(h));const p=u(n,["sessionResumptionUpdate"]);return p!=null&&c(e,["sessionResumptionUpdate"],yI(p)),e}function TI(){return{}}function bI(n){const e={},t=u(n,["text"]);t!=null&&c(e,["text"],t);const i=u(n,["weight"]);return i!=null&&c(e,["weight"],i),e}function CI(n){const e={},t=u(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>bI(o))),c(e,["weightedPrompts"],i)}return e}function xI(n){const e={},t=u(n,["temperature"]);t!=null&&c(e,["temperature"],t);const i=u(n,["topK"]);i!=null&&c(e,["topK"],i);const o=u(n,["seed"]);o!=null&&c(e,["seed"],o);const a=u(n,["guidance"]);a!=null&&c(e,["guidance"],a);const d=u(n,["bpm"]);d!=null&&c(e,["bpm"],d);const h=u(n,["density"]);h!=null&&c(e,["density"],h);const p=u(n,["brightness"]);p!=null&&c(e,["brightness"],p);const m=u(n,["scale"]);m!=null&&c(e,["scale"],m);const v=u(n,["muteBass"]);v!=null&&c(e,["muteBass"],v);const _=u(n,["muteDrums"]);_!=null&&c(e,["muteDrums"],_);const S=u(n,["onlyBassAndDrums"]);return S!=null&&c(e,["onlyBassAndDrums"],S),e}function EI(n){const e={},t=u(n,["clientContent"]);t!=null&&c(e,["clientContent"],CI(t));const i=u(n,["musicGenerationConfig"]);return i!=null&&c(e,["musicGenerationConfig"],xI(i)),e}function wI(n){const e={},t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);i!=null&&c(e,["mimeType"],i);const o=u(n,["sourceMetadata"]);return o!=null&&c(e,["sourceMetadata"],EI(o)),e}function MI(n){const e={},t=u(n,["audioChunks"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>wI(o))),c(e,["audioChunks"],i)}return e}function AI(n){const e={},t=u(n,["text"]);t!=null&&c(e,["text"],t);const i=u(n,["filteredReason"]);return i!=null&&c(e,["filteredReason"],i),e}function RI(n){const e={};u(n,["setupComplete"])!=null&&c(e,["setupComplete"],TI());const i=u(n,["serverContent"]);i!=null&&c(e,["serverContent"],MI(i));const o=u(n,["filteredPrompt"]);return o!=null&&c(e,["filteredPrompt"],AI(o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NI(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const o=u(n,["startOffset"]);return o!=null&&c(e,["startOffset"],o),e}function DI(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function kI(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function II(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],NI(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const o=u(n,["inlineData"]);o!=null&&c(e,["inlineData"],DI(o));const a=u(n,["fileData"]);a!=null&&c(e,["fileData"],kI(a));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const p=u(n,["executableCode"]);p!=null&&c(e,["executableCode"],p);const m=u(n,["functionCall"]);m!=null&&c(e,["functionCall"],m);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const _=u(n,["text"]);return _!=null&&c(e,["text"],_),e}function Yu(n){const e={},t=u(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>II(a))),c(e,["parts"],o)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function zI(n){const e={},t=u(n,["anyOf"]);t!=null&&c(e,["anyOf"],t);const i=u(n,["default"]);i!=null&&c(e,["default"],i);const o=u(n,["description"]);o!=null&&c(e,["description"],o);const a=u(n,["enum"]);a!=null&&c(e,["enum"],a);const d=u(n,["example"]);d!=null&&c(e,["example"],d);const h=u(n,["format"]);h!=null&&c(e,["format"],h);const p=u(n,["items"]);p!=null&&c(e,["items"],p);const m=u(n,["maxItems"]);m!=null&&c(e,["maxItems"],m);const v=u(n,["maxLength"]);v!=null&&c(e,["maxLength"],v);const _=u(n,["maxProperties"]);_!=null&&c(e,["maxProperties"],_);const S=u(n,["maximum"]);S!=null&&c(e,["maximum"],S);const b=u(n,["minItems"]);b!=null&&c(e,["minItems"],b);const x=u(n,["minLength"]);x!=null&&c(e,["minLength"],x);const E=u(n,["minProperties"]);E!=null&&c(e,["minProperties"],E);const D=u(n,["minimum"]);D!=null&&c(e,["minimum"],D);const I=u(n,["nullable"]);I!=null&&c(e,["nullable"],I);const B=u(n,["pattern"]);B!=null&&c(e,["pattern"],B);const q=u(n,["properties"]);q!=null&&c(e,["properties"],q);const R=u(n,["propertyOrdering"]);R!=null&&c(e,["propertyOrdering"],R);const U=u(n,["required"]);U!=null&&c(e,["required"],U);const Y=u(n,["title"]);Y!=null&&c(e,["title"],Y);const G=u(n,["type"]);return G!=null&&c(e,["type"],G),e}function LI(n){const e={};if(u(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=u(n,["category"]);t!=null&&c(e,["category"],t);const i=u(n,["threshold"]);return i!=null&&c(e,["threshold"],i),e}function UI(n){const e={},t=u(n,["behavior"]);t!=null&&c(e,["behavior"],t);const i=u(n,["description"]);i!=null&&c(e,["description"],i);const o=u(n,["name"]);o!=null&&c(e,["name"],o);const a=u(n,["parameters"]);a!=null&&c(e,["parameters"],a);const d=u(n,["parametersJsonSchema"]);d!=null&&c(e,["parametersJsonSchema"],d);const h=u(n,["response"]);h!=null&&c(e,["response"],h);const p=u(n,["responseJsonSchema"]);return p!=null&&c(e,["responseJsonSchema"],p),e}function VI(n){const e={},t=u(n,["startTime"]);t!=null&&c(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&c(e,["endTime"],i),e}function OI(n){const e={},t=u(n,["timeRangeFilter"]);return t!=null&&c(e,["timeRangeFilter"],VI(t)),e}function BI(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&c(e,["dynamicThreshold"],i),e}function PI(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&c(e,["dynamicRetrievalConfig"],BI(t)),e}function qI(){return{}}function FI(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(p=>UI(p))),c(e,["functionDeclarations"],h)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(n,["googleSearch"]);i!=null&&c(e,["googleSearch"],OI(i));const o=u(n,["googleSearchRetrieval"]);if(o!=null&&c(e,["googleSearchRetrieval"],PI(o)),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(n,["urlContext"])!=null&&c(e,["urlContext"],qI());const d=u(n,["codeExecution"]);return d!=null&&c(e,["codeExecution"],d),e}function HI(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["allowedFunctionNames"]);return i!=null&&c(e,["allowedFunctionNames"],i),e}function GI(n){const e={},t=u(n,["latitude"]);t!=null&&c(e,["latitude"],t);const i=u(n,["longitude"]);return i!=null&&c(e,["longitude"],i),e}function $I(n){const e={},t=u(n,["latLng"]);t!=null&&c(e,["latLng"],GI(t));const i=u(n,["languageCode"]);return i!=null&&c(e,["languageCode"],i),e}function YI(n){const e={},t=u(n,["functionCallingConfig"]);t!=null&&c(e,["functionCallingConfig"],HI(t));const i=u(n,["retrievalConfig"]);return i!=null&&c(e,["retrievalConfig"],$I(i)),e}function JI(n){const e={},t=u(n,["voiceName"]);return t!=null&&c(e,["voiceName"],t),e}function VT(n){const e={},t=u(n,["prebuiltVoiceConfig"]);return t!=null&&c(e,["prebuiltVoiceConfig"],JI(t)),e}function ZI(n){const e={},t=u(n,["speaker"]);t!=null&&c(e,["speaker"],t);const i=u(n,["voiceConfig"]);return i!=null&&c(e,["voiceConfig"],VT(i)),e}function KI(n){const e={},t=u(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>ZI(o))),c(e,["speakerVoiceConfigs"],i)}return e}function XI(n){const e={},t=u(n,["voiceConfig"]);t!=null&&c(e,["voiceConfig"],VT(t));const i=u(n,["multiSpeakerVoiceConfig"]);i!=null&&c(e,["multiSpeakerVoiceConfig"],KI(i));const o=u(n,["languageCode"]);return o!=null&&c(e,["languageCode"],o),e}function WI(n){const e={},t=u(n,["includeThoughts"]);t!=null&&c(e,["includeThoughts"],t);const i=u(n,["thinkingBudget"]);return i!=null&&c(e,["thinkingBudget"],i),e}function QI(n,e,t){const i={},o=u(e,["systemInstruction"]);t!==void 0&&o!=null&&c(t,["systemInstruction"],Yu(Ut(o)));const a=u(e,["temperature"]);a!=null&&c(i,["temperature"],a);const d=u(e,["topP"]);d!=null&&c(i,["topP"],d);const h=u(e,["topK"]);h!=null&&c(i,["topK"],h);const p=u(e,["candidateCount"]);p!=null&&c(i,["candidateCount"],p);const m=u(e,["maxOutputTokens"]);m!=null&&c(i,["maxOutputTokens"],m);const v=u(e,["stopSequences"]);v!=null&&c(i,["stopSequences"],v);const _=u(e,["responseLogprobs"]);_!=null&&c(i,["responseLogprobs"],_);const S=u(e,["logprobs"]);S!=null&&c(i,["logprobs"],S);const b=u(e,["presencePenalty"]);b!=null&&c(i,["presencePenalty"],b);const x=u(e,["frequencyPenalty"]);x!=null&&c(i,["frequencyPenalty"],x);const E=u(e,["seed"]);E!=null&&c(i,["seed"],E);const D=u(e,["responseMimeType"]);D!=null&&c(i,["responseMimeType"],D);const I=u(e,["responseSchema"]);I!=null&&c(i,["responseSchema"],zI(Ia(I)));const B=u(e,["responseJsonSchema"]);if(B!=null&&c(i,["responseJsonSchema"],B),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const q=u(e,["safetySettings"]);if(t!==void 0&&q!=null){let ee=q;Array.isArray(ee)&&(ee=ee.map(de=>LI(de))),c(t,["safetySettings"],ee)}const R=u(e,["tools"]);if(t!==void 0&&R!=null){let ee=ol(R);Array.isArray(ee)&&(ee=ee.map(de=>FI(sl(de)))),c(t,["tools"],ee)}const U=u(e,["toolConfig"]);if(t!==void 0&&U!=null&&c(t,["toolConfig"],YI(U)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Y=u(e,["cachedContent"]);t!==void 0&&Y!=null&&c(t,["cachedContent"],_i(n,Y));const G=u(e,["responseModalities"]);G!=null&&c(i,["responseModalities"],G);const ne=u(e,["mediaResolution"]);ne!=null&&c(i,["mediaResolution"],ne);const K=u(e,["speechConfig"]);if(K!=null&&c(i,["speechConfig"],XI(jh(K))),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const X=u(e,["thinkingConfig"]);return X!=null&&c(i,["thinkingConfig"],WI(X)),i}function K_(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Ge(n,i));const o=u(e,["contents"]);if(o!=null){let d=Tn(o);Array.isArray(d)&&(d=d.map(h=>Yu(h))),c(t,["contents"],d)}const a=u(e,["config"]);return a!=null&&c(t,["generationConfig"],QI(n,a,t)),t}function jI(n,e){const t={},i=u(n,["taskType"]);e!==void 0&&i!=null&&c(e,["requests[]","taskType"],i);const o=u(n,["title"]);e!==void 0&&o!=null&&c(e,["requests[]","title"],o);const a=u(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&c(e,["requests[]","outputDimensionality"],a),u(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function ez(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Ge(n,i));const o=u(e,["contents"]);o!=null&&c(t,["requests[]","content"],bT(n,o));const a=u(e,["config"]);a!=null&&c(t,["config"],jI(a,t));const d=u(e,["model"]);return d!==void 0&&c(t,["requests[]","model"],Ge(n,d)),t}function tz(n,e){const t={};if(u(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=u(n,["numberOfImages"]);e!==void 0&&i!=null&&c(e,["parameters","sampleCount"],i);const o=u(n,["aspectRatio"]);e!==void 0&&o!=null&&c(e,["parameters","aspectRatio"],o);const a=u(n,["guidanceScale"]);if(e!==void 0&&a!=null&&c(e,["parameters","guidanceScale"],a),u(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=u(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&c(e,["parameters","safetySetting"],d);const h=u(n,["personGeneration"]);e!==void 0&&h!=null&&c(e,["parameters","personGeneration"],h);const p=u(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&c(e,["parameters","includeSafetyAttributes"],p);const m=u(n,["includeRaiReason"]);e!==void 0&&m!=null&&c(e,["parameters","includeRaiReason"],m);const v=u(n,["language"]);e!==void 0&&v!=null&&c(e,["parameters","language"],v);const _=u(n,["outputMimeType"]);e!==void 0&&_!=null&&c(e,["parameters","outputOptions","mimeType"],_);const S=u(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&c(e,["parameters","outputOptions","compressionQuality"],S),u(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function nz(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Ge(n,i));const o=u(e,["prompt"]);o!=null&&c(t,["instances[0]","prompt"],o);const a=u(e,["config"]);return a!=null&&c(t,["config"],tz(a,t)),t}function iz(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","name"],Ge(n,i));const o=u(e,["config"]);return o!=null&&c(t,["config"],o),t}function sz(n,e,t){const i={},o=u(e,["pageSize"]);t!==void 0&&o!=null&&c(t,["_query","pageSize"],o);const a=u(e,["pageToken"]);t!==void 0&&a!=null&&c(t,["_query","pageToken"],a);const d=u(e,["filter"]);t!==void 0&&d!=null&&c(t,["_query","filter"],d);const h=u(e,["queryBase"]);return t!==void 0&&h!=null&&c(t,["_url","models_url"],ET(n,h)),i}function oz(n,e){const t={},i=u(e,["config"]);return i!=null&&c(t,["config"],sz(n,i,t)),t}function lz(n,e){const t={},i=u(n,["displayName"]);e!==void 0&&i!=null&&c(e,["displayName"],i);const o=u(n,["description"]);e!==void 0&&o!=null&&c(e,["description"],o);const a=u(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&c(e,["defaultCheckpointId"],a),t}function az(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","name"],Ge(n,i));const o=u(e,["config"]);return o!=null&&c(t,["config"],lz(o,t)),t}function rz(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","name"],Ge(n,i));const o=u(e,["config"]);return o!=null&&c(t,["config"],o),t}function uz(n){const e={};if(u(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function cz(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Ge(n,i));const o=u(e,["contents"]);if(o!=null){let d=Tn(o);Array.isArray(d)&&(d=d.map(h=>Yu(h))),c(t,["contents"],d)}const a=u(e,["config"]);return a!=null&&c(t,["config"],uz(a)),t}function fz(n){const e={};if(u(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=u(n,["imageBytes"]);t!=null&&c(e,["bytesBase64Encoded"],Si(t));const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function dz(n,e){const t={},i=u(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&c(e,["parameters","sampleCount"],i),u(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=u(n,["durationSeconds"]);if(e!==void 0&&o!=null&&c(e,["parameters","durationSeconds"],o),u(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=u(n,["aspectRatio"]);if(e!==void 0&&a!=null&&c(e,["parameters","aspectRatio"],a),u(n,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const d=u(n,["personGeneration"]);if(e!==void 0&&d!=null&&c(e,["parameters","personGeneration"],d),u(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=u(n,["negativePrompt"]);e!==void 0&&h!=null&&c(e,["parameters","negativePrompt"],h);const p=u(n,["enhancePrompt"]);if(e!==void 0&&p!=null&&c(e,["parameters","enhancePrompt"],p),u(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(u(n,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(u(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function hz(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Ge(n,i));const o=u(e,["prompt"]);o!=null&&c(t,["instances[0]","prompt"],o);const a=u(e,["image"]);if(a!=null&&c(t,["instances[0]","image"],fz(a)),u(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const d=u(e,["config"]);return d!=null&&c(t,["config"],dz(d,t)),t}function mz(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const o=u(n,["startOffset"]);return o!=null&&c(e,["startOffset"],o),e}function pz(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["data"]);i!=null&&c(e,["data"],i);const o=u(n,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function gz(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["fileUri"]);i!=null&&c(e,["fileUri"],i);const o=u(n,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function vz(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],mz(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const o=u(n,["inlineData"]);o!=null&&c(e,["inlineData"],pz(o));const a=u(n,["fileData"]);a!=null&&c(e,["fileData"],gz(a));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const p=u(n,["executableCode"]);p!=null&&c(e,["executableCode"],p);const m=u(n,["functionCall"]);m!=null&&c(e,["functionCall"],m);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const _=u(n,["text"]);return _!=null&&c(e,["text"],_),e}function ll(n){const e={},t=u(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>vz(a))),c(e,["parts"],o)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function yz(n){const e={},t=u(n,["anyOf"]);t!=null&&c(e,["anyOf"],t);const i=u(n,["default"]);i!=null&&c(e,["default"],i);const o=u(n,["description"]);o!=null&&c(e,["description"],o);const a=u(n,["enum"]);a!=null&&c(e,["enum"],a);const d=u(n,["example"]);d!=null&&c(e,["example"],d);const h=u(n,["format"]);h!=null&&c(e,["format"],h);const p=u(n,["items"]);p!=null&&c(e,["items"],p);const m=u(n,["maxItems"]);m!=null&&c(e,["maxItems"],m);const v=u(n,["maxLength"]);v!=null&&c(e,["maxLength"],v);const _=u(n,["maxProperties"]);_!=null&&c(e,["maxProperties"],_);const S=u(n,["maximum"]);S!=null&&c(e,["maximum"],S);const b=u(n,["minItems"]);b!=null&&c(e,["minItems"],b);const x=u(n,["minLength"]);x!=null&&c(e,["minLength"],x);const E=u(n,["minProperties"]);E!=null&&c(e,["minProperties"],E);const D=u(n,["minimum"]);D!=null&&c(e,["minimum"],D);const I=u(n,["nullable"]);I!=null&&c(e,["nullable"],I);const B=u(n,["pattern"]);B!=null&&c(e,["pattern"],B);const q=u(n,["properties"]);q!=null&&c(e,["properties"],q);const R=u(n,["propertyOrdering"]);R!=null&&c(e,["propertyOrdering"],R);const U=u(n,["required"]);U!=null&&c(e,["required"],U);const Y=u(n,["title"]);Y!=null&&c(e,["title"],Y);const G=u(n,["type"]);return G!=null&&c(e,["type"],G),e}function _z(n){const e={},t=u(n,["featureSelectionPreference"]);return t!=null&&c(e,["featureSelectionPreference"],t),e}function Sz(n){const e={},t=u(n,["method"]);t!=null&&c(e,["method"],t);const i=u(n,["category"]);i!=null&&c(e,["category"],i);const o=u(n,["threshold"]);return o!=null&&c(e,["threshold"],o),e}function Tz(n){const e={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=u(n,["description"]);t!=null&&c(e,["description"],t);const i=u(n,["name"]);i!=null&&c(e,["name"],i);const o=u(n,["parameters"]);o!=null&&c(e,["parameters"],o);const a=u(n,["parametersJsonSchema"]);a!=null&&c(e,["parametersJsonSchema"],a);const d=u(n,["response"]);d!=null&&c(e,["response"],d);const h=u(n,["responseJsonSchema"]);return h!=null&&c(e,["responseJsonSchema"],h),e}function bz(n){const e={},t=u(n,["startTime"]);t!=null&&c(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&c(e,["endTime"],i),e}function Cz(n){const e={},t=u(n,["timeRangeFilter"]);return t!=null&&c(e,["timeRangeFilter"],bz(t)),e}function xz(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&c(e,["dynamicThreshold"],i),e}function Ez(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&c(e,["dynamicRetrievalConfig"],xz(t)),e}function wz(){return{}}function Mz(n){const e={},t=u(n,["apiKeyString"]);return t!=null&&c(e,["apiKeyString"],t),e}function Az(n){const e={},t=u(n,["apiKeyConfig"]);t!=null&&c(e,["apiKeyConfig"],Mz(t));const i=u(n,["authType"]);i!=null&&c(e,["authType"],i);const o=u(n,["googleServiceAccountConfig"]);o!=null&&c(e,["googleServiceAccountConfig"],o);const a=u(n,["httpBasicAuthConfig"]);a!=null&&c(e,["httpBasicAuthConfig"],a);const d=u(n,["oauthConfig"]);d!=null&&c(e,["oauthConfig"],d);const h=u(n,["oidcConfig"]);return h!=null&&c(e,["oidcConfig"],h),e}function Rz(n){const e={},t=u(n,["authConfig"]);return t!=null&&c(e,["authConfig"],Az(t)),e}function Nz(){return{}}function OT(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(_=>Tz(_))),c(e,["functionDeclarations"],v)}const i=u(n,["retrieval"]);i!=null&&c(e,["retrieval"],i);const o=u(n,["googleSearch"]);o!=null&&c(e,["googleSearch"],Cz(o));const a=u(n,["googleSearchRetrieval"]);a!=null&&c(e,["googleSearchRetrieval"],Ez(a)),u(n,["enterpriseWebSearch"])!=null&&c(e,["enterpriseWebSearch"],wz());const h=u(n,["googleMaps"]);h!=null&&c(e,["googleMaps"],Rz(h)),u(n,["urlContext"])!=null&&c(e,["urlContext"],Nz());const m=u(n,["codeExecution"]);return m!=null&&c(e,["codeExecution"],m),e}function Dz(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["allowedFunctionNames"]);return i!=null&&c(e,["allowedFunctionNames"],i),e}function kz(n){const e={},t=u(n,["latitude"]);t!=null&&c(e,["latitude"],t);const i=u(n,["longitude"]);return i!=null&&c(e,["longitude"],i),e}function Iz(n){const e={},t=u(n,["latLng"]);t!=null&&c(e,["latLng"],kz(t));const i=u(n,["languageCode"]);return i!=null&&c(e,["languageCode"],i),e}function zz(n){const e={},t=u(n,["functionCallingConfig"]);t!=null&&c(e,["functionCallingConfig"],Dz(t));const i=u(n,["retrievalConfig"]);return i!=null&&c(e,["retrievalConfig"],Iz(i)),e}function Lz(n){const e={},t=u(n,["voiceName"]);return t!=null&&c(e,["voiceName"],t),e}function Uz(n){const e={},t=u(n,["prebuiltVoiceConfig"]);return t!=null&&c(e,["prebuiltVoiceConfig"],Lz(t)),e}function Vz(n){const e={},t=u(n,["voiceConfig"]);if(t!=null&&c(e,["voiceConfig"],Uz(t)),u(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=u(n,["languageCode"]);return i!=null&&c(e,["languageCode"],i),e}function Oz(n){const e={},t=u(n,["includeThoughts"]);t!=null&&c(e,["includeThoughts"],t);const i=u(n,["thinkingBudget"]);return i!=null&&c(e,["thinkingBudget"],i),e}function Bz(n,e,t){const i={},o=u(e,["systemInstruction"]);t!==void 0&&o!=null&&c(t,["systemInstruction"],ll(Ut(o)));const a=u(e,["temperature"]);a!=null&&c(i,["temperature"],a);const d=u(e,["topP"]);d!=null&&c(i,["topP"],d);const h=u(e,["topK"]);h!=null&&c(i,["topK"],h);const p=u(e,["candidateCount"]);p!=null&&c(i,["candidateCount"],p);const m=u(e,["maxOutputTokens"]);m!=null&&c(i,["maxOutputTokens"],m);const v=u(e,["stopSequences"]);v!=null&&c(i,["stopSequences"],v);const _=u(e,["responseLogprobs"]);_!=null&&c(i,["responseLogprobs"],_);const S=u(e,["logprobs"]);S!=null&&c(i,["logprobs"],S);const b=u(e,["presencePenalty"]);b!=null&&c(i,["presencePenalty"],b);const x=u(e,["frequencyPenalty"]);x!=null&&c(i,["frequencyPenalty"],x);const E=u(e,["seed"]);E!=null&&c(i,["seed"],E);const D=u(e,["responseMimeType"]);D!=null&&c(i,["responseMimeType"],D);const I=u(e,["responseSchema"]);I!=null&&c(i,["responseSchema"],yz(Ia(I)));const B=u(e,["responseJsonSchema"]);B!=null&&c(i,["responseJsonSchema"],B);const q=u(e,["routingConfig"]);q!=null&&c(i,["routingConfig"],q);const R=u(e,["modelSelectionConfig"]);R!=null&&c(i,["modelConfig"],_z(R));const U=u(e,["safetySettings"]);if(t!==void 0&&U!=null){let be=U;Array.isArray(be)&&(be=be.map(P=>Sz(P))),c(t,["safetySettings"],be)}const Y=u(e,["tools"]);if(t!==void 0&&Y!=null){let be=ol(Y);Array.isArray(be)&&(be=be.map(P=>OT(sl(P)))),c(t,["tools"],be)}const G=u(e,["toolConfig"]);t!==void 0&&G!=null&&c(t,["toolConfig"],zz(G));const ne=u(e,["labels"]);t!==void 0&&ne!=null&&c(t,["labels"],ne);const K=u(e,["cachedContent"]);t!==void 0&&K!=null&&c(t,["cachedContent"],_i(n,K));const X=u(e,["responseModalities"]);X!=null&&c(i,["responseModalities"],X);const ee=u(e,["mediaResolution"]);ee!=null&&c(i,["mediaResolution"],ee);const de=u(e,["speechConfig"]);de!=null&&c(i,["speechConfig"],Vz(jh(de)));const Ee=u(e,["audioTimestamp"]);Ee!=null&&c(i,["audioTimestamp"],Ee);const ke=u(e,["thinkingConfig"]);return ke!=null&&c(i,["thinkingConfig"],Oz(ke)),i}function X_(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Ge(n,i));const o=u(e,["contents"]);if(o!=null){let d=Tn(o);Array.isArray(d)&&(d=d.map(h=>ll(h))),c(t,["contents"],d)}const a=u(e,["config"]);return a!=null&&c(t,["generationConfig"],Bz(n,a,t)),t}function Pz(n,e){const t={},i=u(n,["taskType"]);e!==void 0&&i!=null&&c(e,["instances[]","task_type"],i);const o=u(n,["title"]);e!==void 0&&o!=null&&c(e,["instances[]","title"],o);const a=u(n,["outputDimensionality"]);e!==void 0&&a!=null&&c(e,["parameters","outputDimensionality"],a);const d=u(n,["mimeType"]);e!==void 0&&d!=null&&c(e,["instances[]","mimeType"],d);const h=u(n,["autoTruncate"]);return e!==void 0&&h!=null&&c(e,["parameters","autoTruncate"],h),t}function qz(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Ge(n,i));const o=u(e,["contents"]);o!=null&&c(t,["instances[]","content"],bT(n,o));const a=u(e,["config"]);return a!=null&&c(t,["config"],Pz(a,t)),t}function Fz(n,e){const t={},i=u(n,["outputGcsUri"]);e!==void 0&&i!=null&&c(e,["parameters","storageUri"],i);const o=u(n,["negativePrompt"]);e!==void 0&&o!=null&&c(e,["parameters","negativePrompt"],o);const a=u(n,["numberOfImages"]);e!==void 0&&a!=null&&c(e,["parameters","sampleCount"],a);const d=u(n,["aspectRatio"]);e!==void 0&&d!=null&&c(e,["parameters","aspectRatio"],d);const h=u(n,["guidanceScale"]);e!==void 0&&h!=null&&c(e,["parameters","guidanceScale"],h);const p=u(n,["seed"]);e!==void 0&&p!=null&&c(e,["parameters","seed"],p);const m=u(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&c(e,["parameters","safetySetting"],m);const v=u(n,["personGeneration"]);e!==void 0&&v!=null&&c(e,["parameters","personGeneration"],v);const _=u(n,["includeSafetyAttributes"]);e!==void 0&&_!=null&&c(e,["parameters","includeSafetyAttributes"],_);const S=u(n,["includeRaiReason"]);e!==void 0&&S!=null&&c(e,["parameters","includeRaiReason"],S);const b=u(n,["language"]);e!==void 0&&b!=null&&c(e,["parameters","language"],b);const x=u(n,["outputMimeType"]);e!==void 0&&x!=null&&c(e,["parameters","outputOptions","mimeType"],x);const E=u(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&c(e,["parameters","outputOptions","compressionQuality"],E);const D=u(n,["addWatermark"]);e!==void 0&&D!=null&&c(e,["parameters","addWatermark"],D);const I=u(n,["enhancePrompt"]);return e!==void 0&&I!=null&&c(e,["parameters","enhancePrompt"],I),t}function Hz(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Ge(n,i));const o=u(e,["prompt"]);o!=null&&c(t,["instances[0]","prompt"],o);const a=u(e,["config"]);return a!=null&&c(t,["config"],Fz(a,t)),t}function Ju(n){const e={},t=u(n,["gcsUri"]);t!=null&&c(e,["gcsUri"],t);const i=u(n,["imageBytes"]);i!=null&&c(e,["bytesBase64Encoded"],Si(i));const o=u(n,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function Gz(n){const e={},t=u(n,["maskMode"]);t!=null&&c(e,["maskMode"],t);const i=u(n,["segmentationClasses"]);i!=null&&c(e,["maskClasses"],i);const o=u(n,["maskDilation"]);return o!=null&&c(e,["dilation"],o),e}function $z(n){const e={},t=u(n,["controlType"]);t!=null&&c(e,["controlType"],t);const i=u(n,["enableControlImageComputation"]);return i!=null&&c(e,["computeControl"],i),e}function Yz(n){const e={},t=u(n,["styleDescription"]);return t!=null&&c(e,["styleDescription"],t),e}function Jz(n){const e={},t=u(n,["subjectType"]);t!=null&&c(e,["subjectType"],t);const i=u(n,["subjectDescription"]);return i!=null&&c(e,["subjectDescription"],i),e}function Zz(n){const e={},t=u(n,["referenceImage"]);t!=null&&c(e,["referenceImage"],Ju(t));const i=u(n,["referenceId"]);i!=null&&c(e,["referenceId"],i);const o=u(n,["referenceType"]);o!=null&&c(e,["referenceType"],o);const a=u(n,["maskImageConfig"]);a!=null&&c(e,["maskImageConfig"],Gz(a));const d=u(n,["controlImageConfig"]);d!=null&&c(e,["controlImageConfig"],$z(d));const h=u(n,["styleImageConfig"]);h!=null&&c(e,["styleImageConfig"],Yz(h));const p=u(n,["subjectImageConfig"]);return p!=null&&c(e,["subjectImageConfig"],Jz(p)),e}function Kz(n,e){const t={},i=u(n,["outputGcsUri"]);e!==void 0&&i!=null&&c(e,["parameters","storageUri"],i);const o=u(n,["negativePrompt"]);e!==void 0&&o!=null&&c(e,["parameters","negativePrompt"],o);const a=u(n,["numberOfImages"]);e!==void 0&&a!=null&&c(e,["parameters","sampleCount"],a);const d=u(n,["aspectRatio"]);e!==void 0&&d!=null&&c(e,["parameters","aspectRatio"],d);const h=u(n,["guidanceScale"]);e!==void 0&&h!=null&&c(e,["parameters","guidanceScale"],h);const p=u(n,["seed"]);e!==void 0&&p!=null&&c(e,["parameters","seed"],p);const m=u(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&c(e,["parameters","safetySetting"],m);const v=u(n,["personGeneration"]);e!==void 0&&v!=null&&c(e,["parameters","personGeneration"],v);const _=u(n,["includeSafetyAttributes"]);e!==void 0&&_!=null&&c(e,["parameters","includeSafetyAttributes"],_);const S=u(n,["includeRaiReason"]);e!==void 0&&S!=null&&c(e,["parameters","includeRaiReason"],S);const b=u(n,["language"]);e!==void 0&&b!=null&&c(e,["parameters","language"],b);const x=u(n,["outputMimeType"]);e!==void 0&&x!=null&&c(e,["parameters","outputOptions","mimeType"],x);const E=u(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&c(e,["parameters","outputOptions","compressionQuality"],E);const D=u(n,["editMode"]);e!==void 0&&D!=null&&c(e,["parameters","editMode"],D);const I=u(n,["baseSteps"]);return e!==void 0&&I!=null&&c(e,["parameters","editConfig","baseSteps"],I),t}function Xz(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Ge(n,i));const o=u(e,["prompt"]);o!=null&&c(t,["instances[0]","prompt"],o);const a=u(e,["referenceImages"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(p=>Zz(p))),c(t,["instances[0]","referenceImages"],h)}const d=u(e,["config"]);return d!=null&&c(t,["config"],Kz(d,t)),t}function Wz(n,e){const t={},i=u(n,["includeRaiReason"]);e!==void 0&&i!=null&&c(e,["parameters","includeRaiReason"],i);const o=u(n,["outputMimeType"]);e!==void 0&&o!=null&&c(e,["parameters","outputOptions","mimeType"],o);const a=u(n,["outputCompressionQuality"]);e!==void 0&&a!=null&&c(e,["parameters","outputOptions","compressionQuality"],a);const d=u(n,["enhanceInputImage"]);e!==void 0&&d!=null&&c(e,["parameters","upscaleConfig","enhanceInputImage"],d);const h=u(n,["imagePreservationFactor"]);e!==void 0&&h!=null&&c(e,["parameters","upscaleConfig","imagePreservationFactor"],h);const p=u(n,["numberOfImages"]);e!==void 0&&p!=null&&c(e,["parameters","sampleCount"],p);const m=u(n,["mode"]);return e!==void 0&&m!=null&&c(e,["parameters","mode"],m),t}function Qz(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Ge(n,i));const o=u(e,["image"]);o!=null&&c(t,["instances[0]","image"],Ju(o));const a=u(e,["upscaleFactor"]);a!=null&&c(t,["parameters","upscaleConfig","upscaleFactor"],a);const d=u(e,["config"]);return d!=null&&c(t,["config"],Wz(d,t)),t}function jz(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","name"],Ge(n,i));const o=u(e,["config"]);return o!=null&&c(t,["config"],o),t}function eL(n,e,t){const i={},o=u(e,["pageSize"]);t!==void 0&&o!=null&&c(t,["_query","pageSize"],o);const a=u(e,["pageToken"]);t!==void 0&&a!=null&&c(t,["_query","pageToken"],a);const d=u(e,["filter"]);t!==void 0&&d!=null&&c(t,["_query","filter"],d);const h=u(e,["queryBase"]);return t!==void 0&&h!=null&&c(t,["_url","models_url"],ET(n,h)),i}function tL(n,e){const t={},i=u(e,["config"]);return i!=null&&c(t,["config"],eL(n,i,t)),t}function nL(n,e){const t={},i=u(n,["displayName"]);e!==void 0&&i!=null&&c(e,["displayName"],i);const o=u(n,["description"]);e!==void 0&&o!=null&&c(e,["description"],o);const a=u(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&c(e,["defaultCheckpointId"],a),t}function iL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Ge(n,i));const o=u(e,["config"]);return o!=null&&c(t,["config"],nL(o,t)),t}function sL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","name"],Ge(n,i));const o=u(e,["config"]);return o!=null&&c(t,["config"],o),t}function oL(n,e){const t={},i=u(n,["systemInstruction"]);e!==void 0&&i!=null&&c(e,["systemInstruction"],ll(Ut(i)));const o=u(n,["tools"]);if(e!==void 0&&o!=null){let d=o;Array.isArray(d)&&(d=d.map(h=>OT(h))),c(e,["tools"],d)}const a=u(n,["generationConfig"]);return e!==void 0&&a!=null&&c(e,["generationConfig"],a),t}function lL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Ge(n,i));const o=u(e,["contents"]);if(o!=null){let d=Tn(o);Array.isArray(d)&&(d=d.map(h=>ll(h))),c(t,["contents"],d)}const a=u(e,["config"]);return a!=null&&c(t,["config"],oL(a,t)),t}function aL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Ge(n,i));const o=u(e,["contents"]);if(o!=null){let d=Tn(o);Array.isArray(d)&&(d=d.map(h=>ll(h))),c(t,["contents"],d)}const a=u(e,["config"]);return a!=null&&c(t,["config"],a),t}function rL(n){const e={},t=u(n,["uri"]);t!=null&&c(e,["gcsUri"],t);const i=u(n,["videoBytes"]);i!=null&&c(e,["bytesBase64Encoded"],Si(i));const o=u(n,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function uL(n,e){const t={},i=u(n,["numberOfVideos"]);e!==void 0&&i!=null&&c(e,["parameters","sampleCount"],i);const o=u(n,["outputGcsUri"]);e!==void 0&&o!=null&&c(e,["parameters","storageUri"],o);const a=u(n,["fps"]);e!==void 0&&a!=null&&c(e,["parameters","fps"],a);const d=u(n,["durationSeconds"]);e!==void 0&&d!=null&&c(e,["parameters","durationSeconds"],d);const h=u(n,["seed"]);e!==void 0&&h!=null&&c(e,["parameters","seed"],h);const p=u(n,["aspectRatio"]);e!==void 0&&p!=null&&c(e,["parameters","aspectRatio"],p);const m=u(n,["resolution"]);e!==void 0&&m!=null&&c(e,["parameters","resolution"],m);const v=u(n,["personGeneration"]);e!==void 0&&v!=null&&c(e,["parameters","personGeneration"],v);const _=u(n,["pubsubTopic"]);e!==void 0&&_!=null&&c(e,["parameters","pubsubTopic"],_);const S=u(n,["negativePrompt"]);e!==void 0&&S!=null&&c(e,["parameters","negativePrompt"],S);const b=u(n,["enhancePrompt"]);e!==void 0&&b!=null&&c(e,["parameters","enhancePrompt"],b);const x=u(n,["generateAudio"]);e!==void 0&&x!=null&&c(e,["parameters","generateAudio"],x);const E=u(n,["lastFrame"]);e!==void 0&&E!=null&&c(e,["instances[0]","lastFrame"],Ju(E));const D=u(n,["compressionQuality"]);return e!==void 0&&D!=null&&c(e,["parameters","compressionQuality"],D),t}function cL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Ge(n,i));const o=u(e,["prompt"]);o!=null&&c(t,["instances[0]","prompt"],o);const a=u(e,["image"]);a!=null&&c(t,["instances[0]","image"],Ju(a));const d=u(e,["video"]);d!=null&&c(t,["instances[0]","video"],rL(d));const h=u(e,["config"]);return h!=null&&c(t,["config"],uL(h,t)),t}function fL(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const o=u(n,["startOffset"]);return o!=null&&c(e,["startOffset"],o),e}function dL(n){const e={},t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function hL(n){const e={},t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function mL(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],fL(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const o=u(n,["inlineData"]);o!=null&&c(e,["inlineData"],dL(o));const a=u(n,["fileData"]);a!=null&&c(e,["fileData"],hL(a));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const p=u(n,["executableCode"]);p!=null&&c(e,["executableCode"],p);const m=u(n,["functionCall"]);m!=null&&c(e,["functionCall"],m);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const _=u(n,["text"]);return _!=null&&c(e,["text"],_),e}function pL(n){const e={},t=u(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>mL(a))),c(e,["parts"],o)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function gL(n){const e={},t=u(n,["citationSources"]);return t!=null&&c(e,["citations"],t),e}function vL(n){const e={},t=u(n,["retrievedUrl"]);t!=null&&c(e,["retrievedUrl"],t);const i=u(n,["urlRetrievalStatus"]);return i!=null&&c(e,["urlRetrievalStatus"],i),e}function yL(n){const e={},t=u(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>vL(o))),c(e,["urlMetadata"],i)}return e}function _L(n){const e={},t=u(n,["content"]);t!=null&&c(e,["content"],pL(t));const i=u(n,["citationMetadata"]);i!=null&&c(e,["citationMetadata"],gL(i));const o=u(n,["tokenCount"]);o!=null&&c(e,["tokenCount"],o);const a=u(n,["finishReason"]);a!=null&&c(e,["finishReason"],a);const d=u(n,["urlContextMetadata"]);d!=null&&c(e,["urlContextMetadata"],yL(d));const h=u(n,["avgLogprobs"]);h!=null&&c(e,["avgLogprobs"],h);const p=u(n,["groundingMetadata"]);p!=null&&c(e,["groundingMetadata"],p);const m=u(n,["index"]);m!=null&&c(e,["index"],m);const v=u(n,["logprobsResult"]);v!=null&&c(e,["logprobsResult"],v);const _=u(n,["safetyRatings"]);return _!=null&&c(e,["safetyRatings"],_),e}function W_(n){const e={},t=u(n,["candidates"]);if(t!=null){let d=t;Array.isArray(d)&&(d=d.map(h=>_L(h))),c(e,["candidates"],d)}const i=u(n,["modelVersion"]);i!=null&&c(e,["modelVersion"],i);const o=u(n,["promptFeedback"]);o!=null&&c(e,["promptFeedback"],o);const a=u(n,["usageMetadata"]);return a!=null&&c(e,["usageMetadata"],a),e}function SL(n){const e={},t=u(n,["values"]);return t!=null&&c(e,["values"],t),e}function TL(){return{}}function bL(n){const e={},t=u(n,["embeddings"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>SL(a))),c(e,["embeddings"],o)}return u(n,["metadata"])!=null&&c(e,["metadata"],TL()),e}function CL(n){const e={},t=u(n,["bytesBase64Encoded"]);t!=null&&c(e,["imageBytes"],Si(t));const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function BT(n){const e={},t=u(n,["safetyAttributes","categories"]);t!=null&&c(e,["categories"],t);const i=u(n,["safetyAttributes","scores"]);i!=null&&c(e,["scores"],i);const o=u(n,["contentType"]);return o!=null&&c(e,["contentType"],o),e}function xL(n){const e={},t=u(n,["_self"]);t!=null&&c(e,["image"],CL(t));const i=u(n,["raiFilteredReason"]);i!=null&&c(e,["raiFilteredReason"],i);const o=u(n,["_self"]);return o!=null&&c(e,["safetyAttributes"],BT(o)),e}function EL(n){const e={},t=u(n,["predictions"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>xL(a))),c(e,["generatedImages"],o)}const i=u(n,["positivePromptSafetyAttributes"]);return i!=null&&c(e,["positivePromptSafetyAttributes"],BT(i)),e}function wL(n){const e={},t=u(n,["baseModel"]);t!=null&&c(e,["baseModel"],t);const i=u(n,["createTime"]);i!=null&&c(e,["createTime"],i);const o=u(n,["updateTime"]);return o!=null&&c(e,["updateTime"],o),e}function Ah(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["displayName"]);i!=null&&c(e,["displayName"],i);const o=u(n,["description"]);o!=null&&c(e,["description"],o);const a=u(n,["version"]);a!=null&&c(e,["version"],a);const d=u(n,["_self"]);d!=null&&c(e,["tunedModelInfo"],wL(d));const h=u(n,["inputTokenLimit"]);h!=null&&c(e,["inputTokenLimit"],h);const p=u(n,["outputTokenLimit"]);p!=null&&c(e,["outputTokenLimit"],p);const m=u(n,["supportedGenerationMethods"]);return m!=null&&c(e,["supportedActions"],m),e}function ML(n,e){const t={},i=u(e,["nextPageToken"]);i!=null&&c(t,["nextPageToken"],i);const o=u(e,["_self"]);if(o!=null){let a=wT(o);Array.isArray(a)&&(a=a.map(d=>Ah(d))),c(t,["models"],a)}return t}function AL(){return{}}function RL(n){const e={},t=u(n,["totalTokens"]);t!=null&&c(e,["totalTokens"],t);const i=u(n,["cachedContentTokenCount"]);return i!=null&&c(e,["cachedContentTokenCount"],i),e}function NL(n){const e={},t=u(n,["video","uri"]);t!=null&&c(e,["uri"],t);const i=u(n,["video","encodedVideo"]);i!=null&&c(e,["videoBytes"],Si(i));const o=u(n,["encoding"]);return o!=null&&c(e,["mimeType"],o),e}function DL(n){const e={},t=u(n,["_self"]);return t!=null&&c(e,["video"],NL(t)),e}function kL(n){const e={},t=u(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(d=>DL(d))),c(e,["generatedVideos"],a)}const i=u(n,["raiMediaFilteredCount"]);i!=null&&c(e,["raiMediaFilteredCount"],i);const o=u(n,["raiMediaFilteredReasons"]);return o!=null&&c(e,["raiMediaFilteredReasons"],o),e}function IL(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["metadata"]);i!=null&&c(e,["metadata"],i);const o=u(n,["done"]);o!=null&&c(e,["done"],o);const a=u(n,["error"]);a!=null&&c(e,["error"],a);const d=u(n,["response","generateVideoResponse"]);return d!=null&&c(e,["response"],kL(d)),e}function zL(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const o=u(n,["startOffset"]);return o!=null&&c(e,["startOffset"],o),e}function LL(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["data"]);i!=null&&c(e,["data"],i);const o=u(n,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function UL(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["fileUri"]);i!=null&&c(e,["fileUri"],i);const o=u(n,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function VL(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],zL(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const o=u(n,["inlineData"]);o!=null&&c(e,["inlineData"],LL(o));const a=u(n,["fileData"]);a!=null&&c(e,["fileData"],UL(a));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const p=u(n,["executableCode"]);p!=null&&c(e,["executableCode"],p);const m=u(n,["functionCall"]);m!=null&&c(e,["functionCall"],m);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const _=u(n,["text"]);return _!=null&&c(e,["text"],_),e}function OL(n){const e={},t=u(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>VL(a))),c(e,["parts"],o)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function BL(n){const e={},t=u(n,["citations"]);return t!=null&&c(e,["citations"],t),e}function PL(n){const e={},t=u(n,["retrievedUrl"]);t!=null&&c(e,["retrievedUrl"],t);const i=u(n,["urlRetrievalStatus"]);return i!=null&&c(e,["urlRetrievalStatus"],i),e}function qL(n){const e={},t=u(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>PL(o))),c(e,["urlMetadata"],i)}return e}function FL(n){const e={},t=u(n,["content"]);t!=null&&c(e,["content"],OL(t));const i=u(n,["citationMetadata"]);i!=null&&c(e,["citationMetadata"],BL(i));const o=u(n,["finishMessage"]);o!=null&&c(e,["finishMessage"],o);const a=u(n,["finishReason"]);a!=null&&c(e,["finishReason"],a);const d=u(n,["urlContextMetadata"]);d!=null&&c(e,["urlContextMetadata"],qL(d));const h=u(n,["avgLogprobs"]);h!=null&&c(e,["avgLogprobs"],h);const p=u(n,["groundingMetadata"]);p!=null&&c(e,["groundingMetadata"],p);const m=u(n,["index"]);m!=null&&c(e,["index"],m);const v=u(n,["logprobsResult"]);v!=null&&c(e,["logprobsResult"],v);const _=u(n,["safetyRatings"]);return _!=null&&c(e,["safetyRatings"],_),e}function Q_(n){const e={},t=u(n,["candidates"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>FL(m))),c(e,["candidates"],p)}const i=u(n,["createTime"]);i!=null&&c(e,["createTime"],i);const o=u(n,["responseId"]);o!=null&&c(e,["responseId"],o);const a=u(n,["modelVersion"]);a!=null&&c(e,["modelVersion"],a);const d=u(n,["promptFeedback"]);d!=null&&c(e,["promptFeedback"],d);const h=u(n,["usageMetadata"]);return h!=null&&c(e,["usageMetadata"],h),e}function HL(n){const e={},t=u(n,["truncated"]);t!=null&&c(e,["truncated"],t);const i=u(n,["token_count"]);return i!=null&&c(e,["tokenCount"],i),e}function GL(n){const e={},t=u(n,["values"]);t!=null&&c(e,["values"],t);const i=u(n,["statistics"]);return i!=null&&c(e,["statistics"],HL(i)),e}function $L(n){const e={},t=u(n,["billableCharacterCount"]);return t!=null&&c(e,["billableCharacterCount"],t),e}function YL(n){const e={},t=u(n,["predictions[]","embeddings"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>GL(a))),c(e,["embeddings"],o)}const i=u(n,["metadata"]);return i!=null&&c(e,["metadata"],$L(i)),e}function JL(n){const e={},t=u(n,["gcsUri"]);t!=null&&c(e,["gcsUri"],t);const i=u(n,["bytesBase64Encoded"]);i!=null&&c(e,["imageBytes"],Si(i));const o=u(n,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function PT(n){const e={},t=u(n,["safetyAttributes","categories"]);t!=null&&c(e,["categories"],t);const i=u(n,["safetyAttributes","scores"]);i!=null&&c(e,["scores"],i);const o=u(n,["contentType"]);return o!=null&&c(e,["contentType"],o),e}function tm(n){const e={},t=u(n,["_self"]);t!=null&&c(e,["image"],JL(t));const i=u(n,["raiFilteredReason"]);i!=null&&c(e,["raiFilteredReason"],i);const o=u(n,["_self"]);o!=null&&c(e,["safetyAttributes"],PT(o));const a=u(n,["prompt"]);return a!=null&&c(e,["enhancedPrompt"],a),e}function ZL(n){const e={},t=u(n,["predictions"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>tm(a))),c(e,["generatedImages"],o)}const i=u(n,["positivePromptSafetyAttributes"]);return i!=null&&c(e,["positivePromptSafetyAttributes"],PT(i)),e}function KL(n){const e={},t=u(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>tm(o))),c(e,["generatedImages"],i)}return e}function XL(n){const e={},t=u(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>tm(o))),c(e,["generatedImages"],i)}return e}function WL(n){const e={},t=u(n,["endpoint"]);t!=null&&c(e,["name"],t);const i=u(n,["deployedModelId"]);return i!=null&&c(e,["deployedModelId"],i),e}function QL(n){const e={},t=u(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&c(e,["baseModel"],t);const i=u(n,["createTime"]);i!=null&&c(e,["createTime"],i);const o=u(n,["updateTime"]);return o!=null&&c(e,["updateTime"],o),e}function jL(n){const e={},t=u(n,["checkpointId"]);t!=null&&c(e,["checkpointId"],t);const i=u(n,["epoch"]);i!=null&&c(e,["epoch"],i);const o=u(n,["step"]);return o!=null&&c(e,["step"],o),e}function Rh(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["displayName"]);i!=null&&c(e,["displayName"],i);const o=u(n,["description"]);o!=null&&c(e,["description"],o);const a=u(n,["versionId"]);a!=null&&c(e,["version"],a);const d=u(n,["deployedModels"]);if(d!=null){let _=d;Array.isArray(_)&&(_=_.map(S=>WL(S))),c(e,["endpoints"],_)}const h=u(n,["labels"]);h!=null&&c(e,["labels"],h);const p=u(n,["_self"]);p!=null&&c(e,["tunedModelInfo"],QL(p));const m=u(n,["defaultCheckpointId"]);m!=null&&c(e,["defaultCheckpointId"],m);const v=u(n,["checkpoints"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(S=>jL(S))),c(e,["checkpoints"],_)}return e}function eU(n,e){const t={},i=u(e,["nextPageToken"]);i!=null&&c(t,["nextPageToken"],i);const o=u(e,["_self"]);if(o!=null){let a=wT(o);Array.isArray(a)&&(a=a.map(d=>Rh(d))),c(t,["models"],a)}return t}function tU(){return{}}function nU(n){const e={},t=u(n,["totalTokens"]);return t!=null&&c(e,["totalTokens"],t),e}function iU(n){const e={},t=u(n,["tokensInfo"]);return t!=null&&c(e,["tokensInfo"],t),e}function sU(n){const e={},t=u(n,["gcsUri"]);t!=null&&c(e,["uri"],t);const i=u(n,["bytesBase64Encoded"]);i!=null&&c(e,["videoBytes"],Si(i));const o=u(n,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function oU(n){const e={},t=u(n,["_self"]);return t!=null&&c(e,["video"],sU(t)),e}function lU(n){const e={},t=u(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(d=>oU(d))),c(e,["generatedVideos"],a)}const i=u(n,["raiMediaFilteredCount"]);i!=null&&c(e,["raiMediaFilteredCount"],i);const o=u(n,["raiMediaFilteredReasons"]);return o!=null&&c(e,["raiMediaFilteredReasons"],o),e}function aU(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["metadata"]);i!=null&&c(e,["metadata"],i);const o=u(n,["done"]);o!=null&&c(e,["done"],o);const a=u(n,["error"]);a!=null&&c(e,["error"],a);const d=u(n,["response"]);return d!=null&&c(e,["response"],lU(d)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rU="Content-Type",uU="X-Server-Timeout",cU="User-Agent",Nh="x-goog-api-client",fU="1.7.0",dU=`google-genai-sdk/${fU}`,hU="v1beta1",mU="v1beta",j_=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class pU{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:hU,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:mU,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const o=[this.getRequestUrlInternal(t)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[d,h]of Object.entries(e.queryParams))o.searchParams.append(d,String(h));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,e.abortSignal),this.unaryApiCall(o,a,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[o,a]of Object.entries(t))typeof a=="object"?i[o]=Object.assign(Object.assign({},i[o]),a):a!==void 0&&(i[o]=a);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,e.abortSignal),this.streamApiCall(o,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i){if(t&&t.timeout||i){const o=new AbortController,a=o.signal;t.timeout&&(t==null?void 0:t.timeout)>0&&setTimeout(()=>o.abort(),t.timeout),i&&i.addEventListener("abort",()=>{o.abort()}),e.signal=a}return t&&t.extraBody!==null&&gU(e,t.extraBody),e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await eS(o),new bh(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await eS(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return $o(this,arguments,function*(){const o=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),a=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let d="";for(;;){const{done:h,value:p}=yield Qe(o.read());if(h){if(d.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=a.decode(p);try{const _=JSON.parse(m);if("error"in _){const S=JSON.parse(JSON.stringify(_.error)),b=S.status,x=S.code,E=`got status: ${b}. ${JSON.stringify(_)}`;if(x>=400&&x<600)throw new $u({message:E,status:x})}}catch(_){if(_.name==="ApiError")throw _}d+=m;let v=d.match(j_);for(;v;){const _=v[1];try{const S=new Response(_,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Qe(new bh(S)),d=d.slice(v[0].length),v=d.match(j_)}catch(S){throw new Error(`exception parsing stream chunk ${_}. ${S}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=dU+" "+this.clientOptions.userAgentExtra;return e[cU]=t,e[Nh]=t,e[rU]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[i,o]of Object.entries(e.headers))t.append(i,o);e.timeout&&e.timeout>0&&t.append(uU,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var i;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const a=this.clientOptions.uploader,d=await a.stat(e);o.sizeBytes=String(d.size);const h=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:d.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=h;const p=await this.fetchUploadUrl(o,t);return a.upload(e,p,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var i;let o={};t!=null&&t.httpOptions?o=t.httpOptions:o={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const a={file:e},d=await this.request({path:ve("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:o});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(i=d==null?void 0:d.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function eS(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(i);throw t>=400&&t<600?new $u({message:o,status:t}):new Error(o)}}function gU(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,d){const h=Object.assign({},a);for(const p in d)if(Object.prototype.hasOwnProperty.call(d,p)){const m=d[p],v=h[p];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?h[p]=i(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),h[p]=m)}return h}const o=i(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vU="mcp_used/unknown";function qT(n){for(const e of n)if(nm(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function FT(n){var e;const t=(e=n[Nh])!==null&&e!==void 0?e:"";n[Nh]=(t+` ${vU}`).trimStart()}function yU(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>nm(o)))!==null&&i!==void 0?i:!1}function _U(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>!nm(o)))!==null&&i!==void 0?i:!1}function nm(n){return n!==null&&typeof n=="object"&&n instanceof im}function SU(n,e=100){return $o(this,arguments,function*(){let i,o=0;for(;o<e;){const a=yield Qe(n.listTools({cursor:i}));for(const d of a.tools)yield yield Qe(d),o++;if(!a.nextCursor)break;i=a.nextCursor}})}class im{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new im(e,t)}async initialize(){var e,t,i,o;if(this.mcpTools.length>0)return;const a={},d=[];for(const v of this.mcpClients)try{for(var h=!0,p=(t=void 0,ya(SU(v))),m;m=await p.next(),e=m.done,!e;h=!0){o=m.value,h=!1;const _=o;d.push(_);const S=_.name;if(a[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);a[S]=v}}catch(_){t={error:_}}finally{try{!h&&!e&&(i=p.return)&&await i.call(p)}finally{if(t)throw t.error}}this.mcpTools=d,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),pN(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const d=await o.callTool({name:i.name,arguments:i.args},void 0,a);t.push({functionResponse:{name:i.name,response:d.isError?{error:d}:d}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function TU(n,e,t){const i=new nN;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data);const a=RI(o);Object.assign(i,a),e(i)}class bU{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),d=EU(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),p=`${o}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${h}`;let m=()=>{};const v=new Promise(q=>{m=q}),_=e.callbacks,S=function(){m({})},b=this.apiClient,x={onopen:S,onmessage:q=>{TU(b,_.onmessage,q)},onerror:(t=_==null?void 0:_.onerror)!==null&&t!==void 0?t:function(q){},onclose:(i=_==null?void 0:_.onclose)!==null&&i!==void 0?i:function(q){}},E=this.webSocketFactory.create(p,xU(d),x);E.connect(),await v;const D=Ge(this.apiClient,e.model),I=LT({model:D}),B=Mh({setup:I});return E.send(JSON.stringify(B)),new CU(E,this.apiClient)}}class CU{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=Hk(e),i=UT(t);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=Gk(e),i=Mh(t);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const t=Mh({playbackControl:e});this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(qo.PLAY)}pause(){this.sendPlaybackControl(qo.PAUSE)}stop(){this.sendPlaybackControl(qo.STOP)}resetContext(){this.sendPlaybackControl(qo.RESET_CONTEXT)}close(){this.conn.close()}}function xU(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function EU(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wU="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function MU(n,e,t){const i=new tN;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const a=JSON.parse(o);if(n.isVertexAI()){const d=SI(a);Object.assign(i,d)}else{const d=_I(a);Object.assign(i,d)}e(i)}class AU{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new bU(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,o,a,d,h;const p=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const _=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&qT(e.config.tools)&&FT(_);const S=kU(_);if(this.apiClient.isVertexAI())v=`${p}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S);else{const K=this.apiClient.getApiKey();let X="BidiGenerateContent",ee="key";K!=null&&K.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),X="BidiGenerateContentConstrained",ee="access_token"),v=`${p}/ws/google.ai.generativelanguage.${m}.GenerativeService.${X}?${ee}=${K}`}let b=()=>{};const x=new Promise(K=>{b=K}),E=e.callbacks,D=function(){var K;(K=E==null?void 0:E.onopen)===null||K===void 0||K.call(E),b({})},I=this.apiClient,B={onopen:D,onmessage:K=>{MU(I,E.onmessage,K)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function(K){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(K){}},q=this.webSocketFactory.create(v,DU(S),B);q.connect(),await x;let R=Ge(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&R.startsWith("publishers/")){const K=this.apiClient.getProject(),X=this.apiClient.getLocation();R=`projects/${K}/locations/${X}/`+R}let U={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ku.AUDIO]}:e.config.responseModalities=[ku.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Y=(h=(d=e.config)===null||d===void 0?void 0:d.tools)!==null&&h!==void 0?h:[],G=[];for(const K of Y)if(this.isCallableTool(K)){const X=K;G.push(await X.tool())}else G.push(K);G.length>0&&(e.config.tools=G);const ne={model:R,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?U=Uk(this.apiClient,ne):U=Lk(this.apiClient,ne),delete U.config,q.send(JSON.stringify(U)),new NU(q,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const RU={turnComplete:!0};class NU{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=Tn(t.turns),e.isVertexAI()?i=i.map(o=>ll(o)):i=i.map(o=>Yu(o))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(wU)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},RU),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:Fk(e)}:t={realtimeInput:qk(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function DU(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function kU(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tS=10;function nS(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const d of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Su(d)){o=!0;break}if(!o)return!0;const a=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Su(n){return"callTool"in n&&typeof n.callTool=="function"}function iS(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IU extends Fs{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,o,a,d,h;const p=await this.processParamsForMcpUsage(t);if(!yU(t)||nS(t.config))return await this.generateContentInternal(p);if(_U(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let m,v;const _=Tn(p.contents),S=(a=(o=(i=p.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:tS;let b=0;for(;b<S&&(m=await this.generateContentInternal(p),!(!m.functionCalls||m.functionCalls.length===0));){const x=m.candidates[0].content,E=[];for(const D of(h=(d=t.config)===null||d===void 0?void 0:d.tools)!==null&&h!==void 0?h:[])if(Su(D)){const B=await D.callTool(m.functionCalls);E.push(...B)}b++,v={role:"user",parts:E},p.contents=Tn(p.contents),p.contents.push(x),p.contents.push(v),iS(p.config)&&(_.push(x),_.push(v))}return iS(p.config)&&(m.automaticFunctionCallingHistory=_),m},this.generateContentStream=async t=>{if(nS(t.config)){const i=await this.processParamsForMcpUsage(t);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var o;let a;const d=[];if(i!=null&&i.generatedImages)for(const p of i.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((o=p==null?void 0:p.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?a=p==null?void 0:p.safetyAttributes:d.push(p);let h;return a?h={generatedImages:d,positivePromptSafetyAttributes:a}:h={generatedImages:d},h}),this.list=async t=>{var i;const d={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!d.config.queryBase){if(!((i=d.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");d.config.filter="labels.tune-type:*"}return new qa(Ps.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(d),d)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(o)}}async processParamsForMcpUsage(e){var t,i,o;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const d=await Promise.all(a.map(async p=>Su(p)?await p.tool():p)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:d})};if(h.config.tools=d,e.config&&e.config.tools&&qT(e.config.tools)){const p=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let m=Object.assign({},p);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),FT(m),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return h}async initAfcToolsMap(e){var t,i,o;const a=new Map;for(const d of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(Su(d)){const h=d,p=await h.tool();for(const m of(o=p.functionDeclarations)!==null&&o!==void 0?o:[]){if(!m.name)throw new Error("Function declaration name is required.");if(a.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);a.set(m.name,h)}}return a}async processAfcStream(e){var t,i,o;const a=(o=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:tS;let d=!1,h=0;const p=await this.initAfcToolsMap(e);return function(m,v,_){var S,b;return $o(this,arguments,function*(){for(var x,E,D,I;h<a;){d&&(h++,d=!1);const U=yield Qe(m.processParamsForMcpUsage(_)),Y=yield Qe(m.generateContentStreamInternal(U)),G=[],ne=[];try{for(var B=!0,q=(E=void 0,ya(Y)),R;R=yield Qe(q.next()),x=R.done,!x;B=!0){I=R.value,B=!1;const K=I;if(yield yield Qe(K),K.candidates&&(!((S=K.candidates[0])===null||S===void 0)&&S.content)){ne.push(K.candidates[0].content);for(const X of(b=K.candidates[0].content.parts)!==null&&b!==void 0?b:[])if(h<a&&X.functionCall){if(!X.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(X.functionCall.name)){const ee=yield Qe(v.get(X.functionCall.name).callTool([X.functionCall]));G.push(...ee)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${X.functionCall.name}`)}}}}catch(K){E={error:K}}finally{try{!B&&!x&&(D=q.return)&&(yield Qe(D.call(q)))}finally{if(E)throw E.error}}if(G.length>0){d=!0;const K=new la;K.candidates=[{content:{role:"user",parts:G}}],yield yield Qe(K);const X=[];X.push(...ne),X.push({role:"user",parts:G});const ee=Tn(_.contents).concat(X);_.contents=ee}else break}})}(this,p,e)}async generateContentInternal(e){var t,i,o,a;let d,h="",p={};if(this.apiClient.isVertexAI()){const m=X_(this.apiClient,e);return h=ve("{model}:generateContent",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),d.then(v=>{const _=Q_(v),S=new la;return Object.assign(S,_),S})}else{const m=K_(this.apiClient,e);return h=ve("{model}:generateContent",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),d.then(v=>{const _=W_(v),S=new la;return Object.assign(S,_),S})}}async generateContentStreamInternal(e){var t,i,o,a;let d,h="",p={};if(this.apiClient.isVertexAI()){const m=X_(this.apiClient,e);return h=ve("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.requestStream({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),d.then(function(_){return $o(this,arguments,function*(){var S,b,x,E;try{for(var D=!0,I=ya(_),B;B=yield Qe(I.next()),S=B.done,!S;D=!0){E=B.value,D=!1;const R=Q_(yield Qe(E.json())),U=new la;Object.assign(U,R),yield yield Qe(U)}}catch(q){b={error:q}}finally{try{!D&&!S&&(x=I.return)&&(yield Qe(x.call(I)))}finally{if(b)throw b.error}}})})}else{const m=K_(this.apiClient,e);return h=ve("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.requestStream({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),d.then(function(_){return $o(this,arguments,function*(){var S,b,x,E;try{for(var D=!0,I=ya(_),B;B=yield Qe(I.next()),S=B.done,!S;D=!0){E=B.value,D=!1;const R=W_(yield Qe(E.json())),U=new la;Object.assign(U,R),yield yield Qe(U)}}catch(q){b={error:q}}finally{try{!D&&!S&&(x=I.return)&&(yield Qe(x.call(I)))}finally{if(b)throw b.error}}})})}}async embedContent(e){var t,i,o,a;let d,h="",p={};if(this.apiClient.isVertexAI()){const m=qz(this.apiClient,e);return h=ve("{model}:predict",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),d.then(v=>{const _=YL(v),S=new A_;return Object.assign(S,_),S})}else{const m=ez(this.apiClient,e);return h=ve("{model}:batchEmbedContents",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),d.then(v=>{const _=bL(v),S=new A_;return Object.assign(S,_),S})}}async generateImagesInternal(e){var t,i,o,a;let d,h="",p={};if(this.apiClient.isVertexAI()){const m=Hz(this.apiClient,e);return h=ve("{model}:predict",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),d.then(v=>{const _=ZL(v),S=new R_;return Object.assign(S,_),S})}else{const m=nz(this.apiClient,e);return h=ve("{model}:predict",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),d.then(v=>{const _=EL(v),S=new R_;return Object.assign(S,_),S})}}async editImageInternal(e){var t,i;let o,a="",d={};if(this.apiClient.isVertexAI()){const h=Xz(this.apiClient,e);return a=ve("{model}:predict",h._url),d=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=KL(p),v=new KR;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let o,a="",d={};if(this.apiClient.isVertexAI()){const h=Qz(this.apiClient,e);return a=ve("{model}:predict",h._url),d=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=XL(p),v=new XR;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,o,a;let d,h="",p={};if(this.apiClient.isVertexAI()){const m=jz(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),d.then(v=>Rh(v))}else{const m=iz(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),d.then(v=>Ah(v))}}async listInternal(e){var t,i,o,a;let d,h="",p={};if(this.apiClient.isVertexAI()){const m=tL(this.apiClient,e);return h=ve("{models_url}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),d.then(v=>{const _=eU(this.apiClient,v),S=new N_;return Object.assign(S,_),S})}else{const m=oz(this.apiClient,e);return h=ve("{models_url}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),d.then(v=>{const _=ML(this.apiClient,v),S=new N_;return Object.assign(S,_),S})}}async update(e){var t,i,o,a;let d,h="",p={};if(this.apiClient.isVertexAI()){const m=iL(this.apiClient,e);return h=ve("{model}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),d.then(v=>Rh(v))}else{const m=az(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),d.then(v=>Ah(v))}}async delete(e){var t,i,o,a;let d,h="",p={};if(this.apiClient.isVertexAI()){const m=sL(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),d.then(()=>{const v=tU(),_=new D_;return Object.assign(_,v),_})}else{const m=rz(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),d.then(()=>{const v=AL(),_=new D_;return Object.assign(_,v),_})}}async countTokens(e){var t,i,o,a;let d,h="",p={};if(this.apiClient.isVertexAI()){const m=lL(this.apiClient,e);return h=ve("{model}:countTokens",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),d.then(v=>{const _=nU(v),S=new k_;return Object.assign(S,_),S})}else{const m=cz(this.apiClient,e);return h=ve("{model}:countTokens",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),d.then(v=>{const _=RL(v),S=new k_;return Object.assign(S,_),S})}}async computeTokens(e){var t,i;let o,a="",d={};if(this.apiClient.isVertexAI()){const h=aL(this.apiClient,e);return a=ve("{model}:computeTokens",h._url),d=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=iU(p),v=new WR;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var t,i,o,a;let d,h="",p={};if(this.apiClient.isVertexAI()){const m=cL(this.apiClient,e);return h=ve("{model}:predictLongRunning",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),d.then(v=>aU(v))}else{const m=hz(this.apiClient,e);return h=ve("{model}:predictLongRunning",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),d.then(v=>IL(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zU(n){const e={},t=u(n,["operationName"]);t!=null&&c(e,["_url","operationName"],t);const i=u(n,["config"]);return i!=null&&c(e,["config"],i),e}function LU(n){const e={},t=u(n,["operationName"]);t!=null&&c(e,["_url","operationName"],t);const i=u(n,["config"]);return i!=null&&c(e,["config"],i),e}function UU(n){const e={},t=u(n,["operationName"]);t!=null&&c(e,["operationName"],t);const i=u(n,["resourceName"]);i!=null&&c(e,["_url","resourceName"],i);const o=u(n,["config"]);return o!=null&&c(e,["config"],o),e}function VU(n){const e={},t=u(n,["video","uri"]);t!=null&&c(e,["uri"],t);const i=u(n,["video","encodedVideo"]);i!=null&&c(e,["videoBytes"],Si(i));const o=u(n,["encoding"]);return o!=null&&c(e,["mimeType"],o),e}function OU(n){const e={},t=u(n,["_self"]);return t!=null&&c(e,["video"],VU(t)),e}function BU(n){const e={},t=u(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(d=>OU(d))),c(e,["generatedVideos"],a)}const i=u(n,["raiMediaFilteredCount"]);i!=null&&c(e,["raiMediaFilteredCount"],i);const o=u(n,["raiMediaFilteredReasons"]);return o!=null&&c(e,["raiMediaFilteredReasons"],o),e}function PU(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["metadata"]);i!=null&&c(e,["metadata"],i);const o=u(n,["done"]);o!=null&&c(e,["done"],o);const a=u(n,["error"]);a!=null&&c(e,["error"],a);const d=u(n,["response","generateVideoResponse"]);return d!=null&&c(e,["response"],BU(d)),e}function qU(n){const e={},t=u(n,["gcsUri"]);t!=null&&c(e,["uri"],t);const i=u(n,["bytesBase64Encoded"]);i!=null&&c(e,["videoBytes"],Si(i));const o=u(n,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function FU(n){const e={},t=u(n,["_self"]);return t!=null&&c(e,["video"],qU(t)),e}function HU(n){const e={},t=u(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(d=>FU(d))),c(e,["generatedVideos"],a)}const i=u(n,["raiMediaFilteredCount"]);i!=null&&c(e,["raiMediaFilteredCount"],i);const o=u(n,["raiMediaFilteredReasons"]);return o!=null&&c(e,["raiMediaFilteredReasons"],o),e}function sS(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["metadata"]);i!=null&&c(e,["metadata"],i);const o=u(n,["done"]);o!=null&&c(e,["done"],o);const a=u(n,["error"]);a!=null&&c(e,["error"],a);const d=u(n,["response"]);return d!=null&&c(e,["response"],HU(d)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GU extends Fs{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;return i&&"httpOptions"in i&&(a=i.httpOptions),this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}})}else return this.getVideosOperationInternal({operationName:t.name,config:i})}async getVideosOperationInternal(e){var t,i,o,a;let d,h="",p={};if(this.apiClient.isVertexAI()){const m=LU(e);return h=ve("{operationName}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),d.then(v=>sS(v))}else{const m=zU(e);return h=ve("{operationName}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),d.then(v=>PU(v))}}async fetchPredictVideosOperationInternal(e){var t,i;let o,a="",d={};if(this.apiClient.isVertexAI()){const h=UU(e);return a=ve("{resourceName}:fetchPredictOperation",h._url),d=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>sS(p))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $U(n){const e={},t=u(n,["voiceName"]);return t!=null&&c(e,["voiceName"],t),e}function HT(n){const e={},t=u(n,["prebuiltVoiceConfig"]);return t!=null&&c(e,["prebuiltVoiceConfig"],$U(t)),e}function YU(n){const e={},t=u(n,["speaker"]);t!=null&&c(e,["speaker"],t);const i=u(n,["voiceConfig"]);return i!=null&&c(e,["voiceConfig"],HT(i)),e}function JU(n){const e={},t=u(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>YU(o))),c(e,["speakerVoiceConfigs"],i)}return e}function ZU(n){const e={},t=u(n,["voiceConfig"]);t!=null&&c(e,["voiceConfig"],HT(t));const i=u(n,["multiSpeakerVoiceConfig"]);i!=null&&c(e,["multiSpeakerVoiceConfig"],JU(i));const o=u(n,["languageCode"]);return o!=null&&c(e,["languageCode"],o),e}function KU(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const o=u(n,["startOffset"]);return o!=null&&c(e,["startOffset"],o),e}function XU(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function WU(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function QU(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],KU(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const o=u(n,["inlineData"]);o!=null&&c(e,["inlineData"],XU(o));const a=u(n,["fileData"]);a!=null&&c(e,["fileData"],WU(a));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const p=u(n,["executableCode"]);p!=null&&c(e,["executableCode"],p);const m=u(n,["functionCall"]);m!=null&&c(e,["functionCall"],m);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const _=u(n,["text"]);return _!=null&&c(e,["text"],_),e}function jU(n){const e={},t=u(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>QU(a))),c(e,["parts"],o)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function eV(n){const e={},t=u(n,["behavior"]);t!=null&&c(e,["behavior"],t);const i=u(n,["description"]);i!=null&&c(e,["description"],i);const o=u(n,["name"]);o!=null&&c(e,["name"],o);const a=u(n,["parameters"]);a!=null&&c(e,["parameters"],a);const d=u(n,["parametersJsonSchema"]);d!=null&&c(e,["parametersJsonSchema"],d);const h=u(n,["response"]);h!=null&&c(e,["response"],h);const p=u(n,["responseJsonSchema"]);return p!=null&&c(e,["responseJsonSchema"],p),e}function tV(n){const e={},t=u(n,["startTime"]);t!=null&&c(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&c(e,["endTime"],i),e}function nV(n){const e={},t=u(n,["timeRangeFilter"]);return t!=null&&c(e,["timeRangeFilter"],tV(t)),e}function iV(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&c(e,["dynamicThreshold"],i),e}function sV(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&c(e,["dynamicRetrievalConfig"],iV(t)),e}function oV(){return{}}function lV(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(p=>eV(p))),c(e,["functionDeclarations"],h)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(n,["googleSearch"]);i!=null&&c(e,["googleSearch"],nV(i));const o=u(n,["googleSearchRetrieval"]);if(o!=null&&c(e,["googleSearchRetrieval"],sV(o)),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(n,["urlContext"])!=null&&c(e,["urlContext"],oV());const d=u(n,["codeExecution"]);return d!=null&&c(e,["codeExecution"],d),e}function aV(n){const e={},t=u(n,["handle"]);if(t!=null&&c(e,["handle"],t),u(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function oS(){return{}}function rV(n){const e={},t=u(n,["disabled"]);t!=null&&c(e,["disabled"],t);const i=u(n,["startOfSpeechSensitivity"]);i!=null&&c(e,["startOfSpeechSensitivity"],i);const o=u(n,["endOfSpeechSensitivity"]);o!=null&&c(e,["endOfSpeechSensitivity"],o);const a=u(n,["prefixPaddingMs"]);a!=null&&c(e,["prefixPaddingMs"],a);const d=u(n,["silenceDurationMs"]);return d!=null&&c(e,["silenceDurationMs"],d),e}function uV(n){const e={},t=u(n,["automaticActivityDetection"]);t!=null&&c(e,["automaticActivityDetection"],rV(t));const i=u(n,["activityHandling"]);i!=null&&c(e,["activityHandling"],i);const o=u(n,["turnCoverage"]);return o!=null&&c(e,["turnCoverage"],o),e}function cV(n){const e={},t=u(n,["targetTokens"]);return t!=null&&c(e,["targetTokens"],t),e}function fV(n){const e={},t=u(n,["triggerTokens"]);t!=null&&c(e,["triggerTokens"],t);const i=u(n,["slidingWindow"]);return i!=null&&c(e,["slidingWindow"],cV(i)),e}function dV(n){const e={},t=u(n,["proactiveAudio"]);return t!=null&&c(e,["proactiveAudio"],t),e}function hV(n,e){const t={},i=u(n,["generationConfig"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig"],i);const o=u(n,["responseModalities"]);e!==void 0&&o!=null&&c(e,["setup","generationConfig","responseModalities"],o);const a=u(n,["temperature"]);e!==void 0&&a!=null&&c(e,["setup","generationConfig","temperature"],a);const d=u(n,["topP"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","topP"],d);const h=u(n,["topK"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","topK"],h);const p=u(n,["maxOutputTokens"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","maxOutputTokens"],p);const m=u(n,["mediaResolution"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","mediaResolution"],m);const v=u(n,["seed"]);e!==void 0&&v!=null&&c(e,["setup","generationConfig","seed"],v);const _=u(n,["speechConfig"]);e!==void 0&&_!=null&&c(e,["setup","generationConfig","speechConfig"],ZU(em(_)));const S=u(n,["enableAffectiveDialog"]);e!==void 0&&S!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],S);const b=u(n,["systemInstruction"]);e!==void 0&&b!=null&&c(e,["setup","systemInstruction"],jU(Ut(b)));const x=u(n,["tools"]);if(e!==void 0&&x!=null){let U=ol(x);Array.isArray(U)&&(U=U.map(Y=>lV(sl(Y)))),c(e,["setup","tools"],U)}const E=u(n,["sessionResumption"]);e!==void 0&&E!=null&&c(e,["setup","sessionResumption"],aV(E));const D=u(n,["inputAudioTranscription"]);e!==void 0&&D!=null&&c(e,["setup","inputAudioTranscription"],oS());const I=u(n,["outputAudioTranscription"]);e!==void 0&&I!=null&&c(e,["setup","outputAudioTranscription"],oS());const B=u(n,["realtimeInputConfig"]);e!==void 0&&B!=null&&c(e,["setup","realtimeInputConfig"],uV(B));const q=u(n,["contextWindowCompression"]);e!==void 0&&q!=null&&c(e,["setup","contextWindowCompression"],fV(q));const R=u(n,["proactivity"]);return e!==void 0&&R!=null&&c(e,["setup","proactivity"],dV(R)),t}function mV(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["setup","model"],Ge(n,i));const o=u(e,["config"]);return o!=null&&c(t,["config"],hV(o,t)),t}function pV(n,e,t){const i={},o=u(e,["expireTime"]);t!==void 0&&o!=null&&c(t,["expireTime"],o);const a=u(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&c(t,["newSessionExpireTime"],a);const d=u(e,["uses"]);t!==void 0&&d!=null&&c(t,["uses"],d);const h=u(e,["liveConnectConstraints"]);t!==void 0&&h!=null&&c(t,["bidiGenerateContentSetup"],mV(n,h));const p=u(e,["lockAdditionalFields"]);return t!==void 0&&p!=null&&c(t,["fieldMask"],p),i}function gV(n,e){const t={},i=u(e,["config"]);return i!=null&&c(t,["config"],pV(n,i,t)),t}function vV(n){const e={},t=u(n,["name"]);return t!=null&&c(e,["name"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yV(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(a=>`${t}.${a}`);e.push(...o)}else e.push(t)}return e.join(",")}function _V(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const a=yV(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const d=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];o.length>0&&(h=o.map(m=>d.includes(m)?`generationConfig.${m}`:m));const p=[];a&&p.push(a),h.length>0&&p.push(...h),p.length>0?n.fieldMask=p.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class SV extends Fs{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let o,a="",d={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=gV(this.apiClient,e);a=ve("auth_tokens",h._url),d=h._query,delete h.config,delete h._url,delete h._query;const p=_V(h,e.config);return o=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>vV(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TV(n){const e={},t=u(n,["name"]);t!=null&&c(e,["_url","name"],t);const i=u(n,["config"]);return i!=null&&c(e,["config"],i),e}function bV(n,e){const t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const o=u(n,["pageToken"]);e!==void 0&&o!=null&&c(e,["_query","pageToken"],o);const a=u(n,["filter"]);return e!==void 0&&a!=null&&c(e,["_query","filter"],a),t}function CV(n){const e={},t=u(n,["config"]);return t!=null&&c(e,["config"],bV(t,e)),e}function xV(n){const e={},t=u(n,["textInput"]);t!=null&&c(e,["textInput"],t);const i=u(n,["output"]);return i!=null&&c(e,["output"],i),e}function EV(n){const e={};if(u(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=u(n,["examples"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>xV(o))),c(e,["examples","examples"],i)}return e}function wV(n,e){const t={};if(u(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=u(n,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&c(e,["displayName"],i),u(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=u(n,["epochCount"]);e!==void 0&&o!=null&&c(e,["tuningTask","hyperparameters","epochCount"],o);const a=u(n,["learningRateMultiplier"]);if(a!=null&&c(t,["tuningTask","hyperparameters","learningRateMultiplier"],a),u(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=u(n,["batchSize"]);e!==void 0&&d!=null&&c(e,["tuningTask","hyperparameters","batchSize"],d);const h=u(n,["learningRate"]);return e!==void 0&&h!=null&&c(e,["tuningTask","hyperparameters","learningRate"],h),t}function MV(n){const e={},t=u(n,["baseModel"]);t!=null&&c(e,["baseModel"],t);const i=u(n,["trainingDataset"]);i!=null&&c(e,["tuningTask","trainingData"],EV(i));const o=u(n,["config"]);return o!=null&&c(e,["config"],wV(o,e)),e}function AV(n){const e={},t=u(n,["name"]);t!=null&&c(e,["_url","name"],t);const i=u(n,["config"]);return i!=null&&c(e,["config"],i),e}function RV(n,e){const t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const o=u(n,["pageToken"]);e!==void 0&&o!=null&&c(e,["_query","pageToken"],o);const a=u(n,["filter"]);return e!==void 0&&a!=null&&c(e,["_query","filter"],a),t}function NV(n){const e={},t=u(n,["config"]);return t!=null&&c(e,["config"],RV(t,e)),e}function DV(n,e){const t={},i=u(n,["gcsUri"]);if(e!==void 0&&i!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],i),u(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return t}function kV(n){const e={},t=u(n,["gcsUri"]);return t!=null&&c(e,["validationDatasetUri"],t),e}function IV(n,e){const t={},i=u(n,["validationDataset"]);e!==void 0&&i!=null&&c(e,["supervisedTuningSpec"],kV(i));const o=u(n,["tunedModelDisplayName"]);e!==void 0&&o!=null&&c(e,["tunedModelDisplayName"],o);const a=u(n,["description"]);e!==void 0&&a!=null&&c(e,["description"],a);const d=u(n,["epochCount"]);e!==void 0&&d!=null&&c(e,["supervisedTuningSpec","hyperParameters","epochCount"],d);const h=u(n,["learningRateMultiplier"]);e!==void 0&&h!=null&&c(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],h);const p=u(n,["exportLastCheckpointOnly"]);e!==void 0&&p!=null&&c(e,["supervisedTuningSpec","exportLastCheckpointOnly"],p);const m=u(n,["adapterSize"]);if(e!==void 0&&m!=null&&c(e,["supervisedTuningSpec","hyperParameters","adapterSize"],m),u(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return t}function zV(n){const e={},t=u(n,["baseModel"]);t!=null&&c(e,["baseModel"],t);const i=u(n,["trainingDataset"]);i!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],DV(i,e));const o=u(n,["config"]);return o!=null&&c(e,["config"],IV(o,e)),e}function LV(n){const e={},t=u(n,["name"]);t!=null&&c(e,["model"],t);const i=u(n,["name"]);return i!=null&&c(e,["endpoint"],i),e}function GT(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["state"]);i!=null&&c(e,["state"],CT(i));const o=u(n,["createTime"]);o!=null&&c(e,["createTime"],o);const a=u(n,["tuningTask","startTime"]);a!=null&&c(e,["startTime"],a);const d=u(n,["tuningTask","completeTime"]);d!=null&&c(e,["endTime"],d);const h=u(n,["updateTime"]);h!=null&&c(e,["updateTime"],h);const p=u(n,["description"]);p!=null&&c(e,["description"],p);const m=u(n,["baseModel"]);m!=null&&c(e,["baseModel"],m);const v=u(n,["_self"]);v!=null&&c(e,["tunedModel"],LV(v));const _=u(n,["distillationSpec"]);_!=null&&c(e,["distillationSpec"],_);const S=u(n,["experiment"]);S!=null&&c(e,["experiment"],S);const b=u(n,["labels"]);b!=null&&c(e,["labels"],b);const x=u(n,["pipelineJob"]);x!=null&&c(e,["pipelineJob"],x);const E=u(n,["serviceAccount"]);E!=null&&c(e,["serviceAccount"],E);const D=u(n,["tunedModelDisplayName"]);return D!=null&&c(e,["tunedModelDisplayName"],D),e}function UV(n){const e={},t=u(n,["nextPageToken"]);t!=null&&c(e,["nextPageToken"],t);const i=u(n,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>GT(a))),c(e,["tuningJobs"],o)}return e}function VV(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["metadata"]);i!=null&&c(e,["metadata"],i);const o=u(n,["done"]);o!=null&&c(e,["done"],o);const a=u(n,["error"]);return a!=null&&c(e,["error"],a),e}function OV(n){const e={},t=u(n,["checkpointId"]);t!=null&&c(e,["checkpointId"],t);const i=u(n,["epoch"]);i!=null&&c(e,["epoch"],i);const o=u(n,["step"]);o!=null&&c(e,["step"],o);const a=u(n,["endpoint"]);return a!=null&&c(e,["endpoint"],a),e}function BV(n){const e={},t=u(n,["model"]);t!=null&&c(e,["model"],t);const i=u(n,["endpoint"]);i!=null&&c(e,["endpoint"],i);const o=u(n,["checkpoints"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(d=>OV(d))),c(e,["checkpoints"],a)}return e}function Dh(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["state"]);i!=null&&c(e,["state"],CT(i));const o=u(n,["createTime"]);o!=null&&c(e,["createTime"],o);const a=u(n,["startTime"]);a!=null&&c(e,["startTime"],a);const d=u(n,["endTime"]);d!=null&&c(e,["endTime"],d);const h=u(n,["updateTime"]);h!=null&&c(e,["updateTime"],h);const p=u(n,["error"]);p!=null&&c(e,["error"],p);const m=u(n,["description"]);m!=null&&c(e,["description"],m);const v=u(n,["baseModel"]);v!=null&&c(e,["baseModel"],v);const _=u(n,["tunedModel"]);_!=null&&c(e,["tunedModel"],BV(_));const S=u(n,["supervisedTuningSpec"]);S!=null&&c(e,["supervisedTuningSpec"],S);const b=u(n,["tuningDataStats"]);b!=null&&c(e,["tuningDataStats"],b);const x=u(n,["encryptionSpec"]);x!=null&&c(e,["encryptionSpec"],x);const E=u(n,["partnerModelTuningSpec"]);E!=null&&c(e,["partnerModelTuningSpec"],E);const D=u(n,["distillationSpec"]);D!=null&&c(e,["distillationSpec"],D);const I=u(n,["experiment"]);I!=null&&c(e,["experiment"],I);const B=u(n,["labels"]);B!=null&&c(e,["labels"],B);const q=u(n,["pipelineJob"]);q!=null&&c(e,["pipelineJob"],q);const R=u(n,["serviceAccount"]);R!=null&&c(e,["serviceAccount"],R);const U=u(n,["tunedModelDisplayName"]);return U!=null&&c(e,["tunedModelDisplayName"],U),e}function PV(n){const e={},t=u(n,["nextPageToken"]);t!=null&&c(e,["nextPageToken"],t);const i=u(n,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Dh(a))),c(e,["tuningJobs"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qV extends Fs{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new qa(Ps.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.tune=async t=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(t);{const i=await this.tuneMldevInternal(t);let o="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?o=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(o=i.name.split("/operations/")[0]),{name:o,state:Th.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,o,a;let d,h="",p={};if(this.apiClient.isVertexAI()){const m=AV(e);return h=ve("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),d.then(v=>Dh(v))}else{const m=TV(e);return h=ve("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),d.then(v=>GT(v))}}async listInternal(e){var t,i,o,a;let d,h="",p={};if(this.apiClient.isVertexAI()){const m=NV(e);return h=ve("tuningJobs",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),d.then(v=>{const _=PV(v),S=new I_;return Object.assign(S,_),S})}else{const m=CV(e);return h=ve("tunedModels",m._url),p=m._query,delete m.config,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),d.then(v=>{const _=UV(v),S=new I_;return Object.assign(S,_),S})}}async tuneInternal(e){var t,i;let o,a="",d={};if(this.apiClient.isVertexAI()){const h=zV(e);return a=ve("tuningJobs",h._url),d=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>Dh(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let o,a="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=MV(e);return a=ve("tunedModels",h._url),d=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>VV(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FV{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const HV=1024*1024*8,GV=3,$V=1e3,YV=2,Jd="x-goog-upload-status";async function JV(n,e,t){var i,o,a;let d=0,h=0,p=new bh(new Response),m="upload";for(d=n.size;h<d;){const _=Math.min(HV,d-h),S=n.slice(h,h+_);h+_>=d&&(m+=", finalize");let b=0,x=$V;for(;b<GV&&(p=await t.request({path:"",body:S,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(h),"Content-Length":String(_)}}}),!(!((i=p==null?void 0:p.headers)===null||i===void 0)&&i[Jd]));)b++,await KV(x),x=x*YV;if(h+=_,((o=p==null?void 0:p.headers)===null||o===void 0?void 0:o[Jd])!=="active")break;if(d<=h)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const v=await(p==null?void 0:p.json());if(((a=p==null?void 0:p.headers)===null||a===void 0?void 0:a[Jd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return v.file}async function ZV(n){return{size:n.size,type:n.type}}function KV(n){return new Promise(e=>setTimeout(e,n))}class XV{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await JV(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await ZV(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WV{create(e,t,i){return new QV(e,t,i)}}class QV{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lS="x-goog-api-key";class jV{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(lS)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(lS,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const e3="gl-node/";class $T{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=ZR(e,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const o=new jV(this.apiKey);this.apiClient=new pU({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:e3+"web",uploader:new XV,downloader:new FV}),this.models=new IU(this.apiClient),this.live=new AU(this.apiClient,o,new WV),this.batches=new b2(this.apiClient),this.chats=new wD(this.models,this.apiClient),this.caches=new CD(this.apiClient),this.files=new BD(this.apiClient),this.operations=new GU(this.apiClient),this.authTokens=new SV(this.apiClient),this.tunings=new qV(this.apiClient)}}const t3=async n=>{const{apiKey:e,...t}=n;if(!e||e==="TU_CLAVE_API_DE_GEMINI_AQUI")throw console.error("API_KEY is not configured or is a placeholder. It was passed to analyzeChartWithGemini."),new Error("API Key is not configured or is a placeholder. AI analysis disabled.");const i=new $T({apiKey:e}),o=WA(t.symbol,t.timeframe,t.currentPrice,t.latestVolume);console.log("--- PROMPT REAL ENVIADO A GEMINI ---",o);const a=o.replace("AUTO_GENERATED_TIMESTAMP_ISO8601",new Date().toISOString());let d;try{d=await i.models.generateContent({model:pT,contents:a,config:{responseMimeType:"application/json"}}),console.log("Raw text response from Gemini API:",d==null?void 0:d.text);let h=d.text.trim();const p=/```(?:json)?\s*\n?([\s\S]*?)\n?\s*```/,m=h.match(p);if(m&&m[1])h=m[1].trim();else{const _=h.indexOf("{"),S=h.lastIndexOf("}");_!==-1&&S>_&&(h=h.substring(_,S+1).trim())}const v=JSON.parse(h);return(!v.analisis_general||!v.escenarios_probables)&&console.warn("Parsed Gemini response seems to be missing key fields.",v),v}catch(h){console.error("Error calling Gemini API or parsing response. Full error object:",h);let p="Failed to get analysis from Gemini. An unknown error occurred during the API call or response processing.";if(h.message)h.message.includes("API_KEY_INVALID")||h.message.includes("API key not valid")?p="Gemini API Key is invalid. Please check your API_KEY configuration.":h.message.includes("quota")||h.message.includes("Quota")?p="Gemini API quota exceeded. Please check your quota or try again later.":h.message.toLowerCase().includes("json")||h instanceof SyntaxError?(p="Failed to parse the analysis from Gemini. The response was not valid JSON.",d&&typeof d.text=="string"&&console.error("Problematic JSON string from Gemini (leading to parsing error):",d.text)):p=`Gemini API error: ${h.message}`;else if(typeof h=="string"&&h.includes("```"))p="Received a malformed response from Gemini (likely unparsed markdown/JSON).",d&&typeof d.text=="string"&&console.error("Malformed (markdown/JSON) string from Gemini:",d.text);else if(h&&typeof h.toString=="function"){const m=h.toString();p=`Gemini API call failed: ${m.startsWith("[object Object]")?"Non-descriptive error object received.":m}`}throw d&&typeof d.text=="string"&&!p.toLowerCase().includes("json")&&console.error("Gemini raw response text during error:",d.text),new Error(p)}};function n3(n,e){let t=null;return function(...i){t&&clearTimeout(t),t=setTimeout(()=>{n.apply(this,i)},e)}}const i3=[{id:"ma1",type:"EMA",period:12,color:"#34D399",visible:!0},{id:"ma2",type:"EMA",period:20,color:"#F472B6",visible:!0},{id:"ma3",type:"MA",period:50,color:"#CBD5E1",visible:!0},{id:"ma4",type:"MA",period:200,color:"#FF0000",visible:!0}],Zd="#18191B",Kd="#FFFFFF",s3=0,o3="#243EA8",l3=70,a3=!0,yn=(n,e)=>{if(typeof window<"u"&&window.localStorage){const t=localStorage.getItem(n);if(t)try{return JSON.parse(t)}catch(i){return console.error(`Error parsing localStorage item ${n}:`,i),e}}return e},Xd=(n,e)=>{let t=n.toUpperCase();if(e==="bingx"){if(t==="BTCUSDT")return"BTC-USDT";if(t==="ETHUSDT")return"ETH-USDT";if(t==="SOLUSDT")return"SOL-USDT"}else if(e==="binance"){if(t==="BTC-USDT")return"BTCUSDT";if(t==="ETH-USDT")return"ETHUSDT";if(t==="SOL-USDT")return"SOLUSDT"}return t},r3=()=>{var Dn,ls;const n=yn("traderoad_actualSymbol",HA),e=yn("traderoad_dataSource",jA),t=Xd(n,e),[i,o]=ue.useState(e),[a,d]=ue.useState(t),[h,p]=ue.useState(t),[m,v]=ue.useState(()=>yn("traderoad_timeframe",YA)),[_,S]=ue.useState(()=>yn("traderoad_theme","dark")),[b,x]=ue.useState(()=>yn("traderoad_movingAverages",i3)),E=_==="dark"?Zd:Kd,[D,I]=ue.useState(()=>yn("traderoad_chartPaneBackgroundColor",E)),[B,q]=ue.useState(()=>yn("traderoad_volumePaneHeight",s3)),[R,U]=ue.useState(()=>yn("traderoad_showAiAnalysisDrawings",!0)),[Y,G]=ue.useState(()=>yn("traderoad_isPanelVisible",!0)),[ne,K]=ue.useState(()=>yn("traderoad_wSignalColor",o3)),[X,ee]=ue.useState(()=>yn("traderoad_wSignalOpacity",l3)),[de,Ee]=ue.useState(()=>yn("traderoad_showWSignals",a3)),[ke,be]=ue.useState(null),[P,ie]=ue.useState(!1),[j,he]=ue.useState(!1),[w,F]=ue.useState(null),[Z,te]=ue.useState(!1),[se,ge]=ue.useState(null),[le,Ze]=ue.useState({price:null,volume:null}),[ye,mt]=ue.useState(!0),[Ne,et]=ue.useState(!1),[me,Me]=ue.useState("initial"),[tt,We]=ue.useState([]),[Wt,Rt]=ue.useState(!1),[ss,Nt]=ue.useState(null),Dt=ue.useRef(null);ue.useEffect(()=>{typeof window<"u"&&window.localStorage&&(localStorage.setItem("traderoad_dataSource",JSON.stringify(i)),localStorage.setItem("traderoad_actualSymbol",JSON.stringify(a)),localStorage.setItem("traderoad_timeframe",JSON.stringify(m)),localStorage.setItem("traderoad_theme",JSON.stringify(_)),localStorage.setItem("traderoad_movingAverages",JSON.stringify(b)),localStorage.setItem("traderoad_chartPaneBackgroundColor",JSON.stringify(D)),localStorage.setItem("traderoad_volumePaneHeight",JSON.stringify(B)),localStorage.setItem("traderoad_showAiAnalysisDrawings",JSON.stringify(R)),localStorage.setItem("traderoad_isPanelVisible",JSON.stringify(Y)),localStorage.setItem("traderoad_wSignalColor",JSON.stringify(ne)),localStorage.setItem("traderoad_wSignalOpacity",JSON.stringify(X)),localStorage.setItem("traderoad_showWSignals",JSON.stringify(de)))},[i,a,m,_,b,D,B,R,Y,ne,X,de]),ue.useEffect(()=>{et(typeof navigator<"u"&&/Mobi|Android/i.test(navigator.userAgent));let ce;ce="AIzaSyABCOKa9o087eLRo6TJ5-lWh6dqNjT-WPo",ce&&ce!=="TU_CLAVE_API_DE_GEMINI_AQUI"?(be(ce),ie(!0)):(be(null),ie(!1),console.warn("Gemini API Key (API_KEY) is not set or is the placeholder value. AI analysis will be disabled."))},[]);const Ct=()=>i==="bingx"?"Ej: BTC-USDT":"Ej: BTCUSDT",al=()=>i==="bingx"?$A:GA,rn=ue.useCallback(()=>tR,[]),Rn=ue.useCallback(()=>{if(ke&&!Wt)try{const ce=new $T({apiKey:ke});Dt.current=ce.chats.create({model:pT,config:{systemInstruction:rn()}}),Nt(null)}catch(ce){console.error("Failed to initialize chat session:",ce),Nt(`Falló la inicialización del chat IA: ${ce.message}.`),Dt.current=null}},[ke,rn,Wt]);ue.useEffect(()=>{P&&Rn()},[P,Rn]);const Zu=ue.useCallback(n3(ce=>{const kt=Xd(ce.trim(),i);d(kt),kt!==ce.trim()&&p(kt)},750),[i]),os=ce=>{p(ce.toUpperCase()),Zu(ce.toUpperCase())};ue.useEffect(()=>{h!==a&&p(a)},[a]),ue.useEffect(()=>{F(null),ge(null),Me("initial")},[a,i]),ue.useEffect(()=>{Ze({price:null,volume:null})},[a,m,i]),ue.useEffect(()=>{const ce=_==="dark"?Zd:Kd;(D===Zd||D===Kd)&&D!==ce&&I(ce)},[_,D]);const Vt=ue.useCallback(ce=>Ze(ce),[]),Nn=ue.useCallback(ce=>mt(ce),[]),Ot=ue.useCallback(async()=>{if(!ke){ge("Clave API no configurada. El análisis no puede proceder."),Me("analysis");return}if(ye||le.price===null||le.price===0){ge("Datos del gráfico cargando o precio actual no disponible."),Me("analysis");return}if(me!=="analysis"&&w){Me("analysis"),te(!1),ge(null);return}te(!0),ge(null),F(null),Me("analysis");try{const kt={symbol:a.includes("-")?a.replace("-","/"):a.endsWith("USDT")?a.replace(/USDT$/,"/USDT"):a,timeframe:m.toUpperCase(),currentPrice:le.price,marketContextPrompt:"Context will be generated by getFullAnalysisPrompt",latestVolume:le.volume,apiKey:ke},Ht=await t3(kt);F(Ht)}catch(ce){let kt=ce instanceof Error?ce.message:"Ocurrió un error desconocido.";ge(`${kt} --- Revisa la consola para más detalles.`)}finally{te(!1)}},[ke,a,m,le,ye,Ne,w,me]),Ku=()=>{Me("chat"),Nt(null),P?Dt.current||Rn():Nt("Clave API no configurada. El Chat IA no está disponible.")},Xu=async ce=>{var Ys,Ti;if(!ce.trim()||Wt)return;if(!Dt.current){Nt("La sesión de chat no está inicializada. Intenta de nuevo."),Rn();return}let kt=ce.trim();const Ht=a.includes("-")?a.replace("-","/"):a.endsWith("USDT")?a.replace(/USDT$/,"/USDT"):a;w&&((Ys=w.analisis_general)==null?void 0:Ys.simbolo)===Ht&&((Ti=w.analisis_general)==null?void 0:Ti.temporalidad_principal_analisis)===m.toUpperCase()&&(kt=`--- INICIO DEL CONTEXTO DE ANÁLISIS ---
El usuario está viendo el siguiente gráfico y ya ha ejecutado un análisis. Basa tu respuesta en esta información.
Símbolo: ${Ht}
Temporalidad: ${m.toUpperCase()}
Precio Actual Aproximado: ${le.price}

Análisis Detallado en JSON:
${JSON.stringify(w,null,2)}
--- FIN DEL CONTEXTO DE ANÁLISIS ---

Pregunta del usuario: ${ce.trim()}`);const $s={id:crypto.randomUUID(),sender:"user",text:ce.trim(),timestamp:Date.now()};We(kn=>[...kn,$s]),Rt(!0),Nt(null);try{const kn=await Dt.current.sendMessageStream({message:kt});let bi=crypto.randomUUID(),Ci="";We(Kn=>[...Kn,{id:bi,sender:"ai",text:"▋",timestamp:Date.now()}]);for await(const Kn of kn)Ci+=Kn.text,We(Xn=>Xn.map(Js=>Js.id===bi?{...Js,text:Ci+"▋"}:Js));We(Kn=>Kn.map(Xn=>Xn.id===bi?{...Xn,text:Ci}:Xn))}catch(kn){console.error("Error sending message to Gemini Chat:",kn);const bi=`Falló la obtención de respuesta de la IA: ${kn.message}`;Nt(bi),We(Ci=>[...Ci,{id:crypto.randomUUID(),sender:"ai",text:`Error: ${kn.message}`,timestamp:Date.now()}])}finally{Rt(!1)}},Wu=()=>{We([]),Nt(null),P&&Rn()},Hs=ce=>{o(ce);const Ht=Xd(h||a,ce);d(Ht),p(Ht)},Gs=ce=>{const kt=typeof ce=="boolean"?ce:!b.every(Ht=>Ht.visible);x(Ht=>Ht.map($s=>({...$s,visible:kt})))};return M.jsxs("div",{className:`flex flex-col h-screen antialiased ${_==="dark"?"bg-slate-900 text-slate-100":"bg-gray-100 text-gray-900"}`,children:[M.jsxs("header",{className:`p-2 sm:p-3 shadow-md flex justify-between items-center flex-nowrap gap-4 ${_==="dark"?"bg-slate-800":"bg-white border-b border-gray-200"}`,children:[M.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-wrap",children:[M.jsx("h1",{className:`text-lg sm:text-xl font-bold ${_==="dark"?"text-sky-400":"text-sky-600"} flex-shrink-0`,children:"TradeRoad"}),M.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[M.jsxs("div",{className:"w-32 sm:w-36",children:[M.jsx("label",{htmlFor:"dataSource-header",className:"sr-only",children:"Fuente de Datos"}),M.jsx("select",{id:"dataSource-header",value:i,onChange:ce=>Hs(ce.target.value),className:`w-full text-xs rounded-md p-1.5 border focus:ring-1 focus:outline-none transition-colors ${_==="dark"?"bg-slate-700 border-slate-600 text-slate-100 focus:ring-sky-500":"bg-gray-100 border-gray-300 text-gray-800 focus:ring-sky-500"}`,"aria-label":"Fuente de Datos",children:eR.map(ce=>M.jsx("option",{value:ce.value,children:ce.label},ce.value))})]}),M.jsxs("div",{className:"w-28 sm:w-32",children:[M.jsx("label",{htmlFor:"symbol-input-header",className:"sr-only",children:"Símbolo"}),M.jsx("input",{type:"text",id:"symbol-input-header",value:h,onChange:ce=>os(ce.target.value),placeholder:Ct(),className:`w-full text-xs rounded-md p-1.5 border focus:ring-1 focus:outline-none transition-colors ${_==="dark"?"bg-slate-700 border-slate-600 text-slate-100 focus:ring-sky-500":"bg-gray-100 border-gray-300 text-gray-800 focus:ring-sky-500"}`,list:"symbol-suggestions-header","aria-label":"Par de Trading / Símbolo"}),M.jsx("datalist",{id:"symbol-suggestions-header",children:al().map(ce=>M.jsx("option",{value:ce},ce))})]}),M.jsxs("div",{className:"w-16 sm:w-20",children:[M.jsx("label",{htmlFor:"timeframe-header",className:"sr-only",children:"Temporalidad"}),M.jsx("select",{id:"timeframe-header",value:m,onChange:ce=>v(ce.target.value),className:`w-full text-xs rounded-md p-1.5 border focus:ring-1 focus:outline-none transition-colors ${_==="dark"?"bg-slate-700 border-slate-600 text-slate-100 focus:ring-sky-500":"bg-gray-100 border-gray-300 text-gray-800 focus:ring-sky-500"}`,"aria-label":"Temporalidad",children:JA.map(ce=>M.jsx("option",{value:ce,children:ce.toUpperCase()},ce))})]})]})]}),M.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[M.jsx("button",{onClick:()=>G(!Y),"aria-label":Y?"Ocultar panel de controles":"Mostrar panel de controles",className:`p-1.5 sm:p-2 rounded text-xs transition-colors ${_==="dark"?"bg-slate-700 hover:bg-slate-600 text-slate-200":"bg-gray-200 hover:bg-gray-300 text-gray-700"}`,children:Y?"Ocultar Panel":"Mostrar Panel"}),M.jsx("button",{onClick:()=>he(!0),title:"Configuración de Visualización","aria-label":"Abrir Configuración de Visualización",className:`p-1.5 sm:p-2 rounded text-xs transition-colors ${_==="dark"?"bg-slate-700 hover:bg-slate-600 text-slate-200":"bg-gray-200 hover:bg-gray-300 text-gray-700"}`,children:M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-4 h-4 sm:w-5 sm:h-5",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75"})})}),M.jsx("button",{onClick:()=>S(_==="light"?"dark":"light"),title:`Cambiar a tema ${_==="light"?"oscuro":"claro"}`,"aria-label":`Cambiar a tema ${_==="light"?"oscuro":"claro"}`,className:`p-1.5 sm:p-2 rounded text-xs transition-colors ${_==="dark"?"bg-slate-700 hover:bg-slate-600 text-slate-200":"bg-gray-200 hover:bg-gray-300 text-gray-700"}`,children:_==="light"?M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-4 h-4 sm:w-5 sm:h-5",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"})}):M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-4 h-4 sm:w-5 sm:h-5",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"})})})]})]}),M.jsx(cR,{apiKeyPresent:P}),M.jsxs("main",{className:"flex-grow flex flex-col md:flex-row p-2 sm:p-4 gap-2 sm:gap-4 overflow-y-auto",children:[M.jsx("div",{className:`w-full flex-1 flex flex-col gap-2 sm:gap-4 overflow-hidden order-1 ${Y?"md:order-2":"md:order-1"}`,children:M.jsx("div",{className:`flex-grow min-h-[300px] sm:min-h-[400px] md:min-h-0 shadow-lg rounded-lg overflow-hidden ${_==="dark"?"bg-slate-800":"bg-white"}`,children:M.jsx(aR,{dataSource:i,symbol:a,timeframe:m,analysisResult:w,onLatestChartInfoUpdate:Vt,onChartLoadingStateChange:Nn,movingAverages:b,theme:_,chartPaneBackgroundColor:D,volumePaneHeight:B,showAiAnalysisDrawings:R,wSignalColor:ne,wSignalOpacity:X/100,showWSignals:de})})}),M.jsxs("div",{id:"controls-analysis-panel",className:`w-full md:w-80 lg:w-[360px] xl:w-[400px] flex-none flex flex-col gap-2 sm:gap-4 overflow-y-auto order-2 md:order-1 ${Y?"":"hidden"}`,children:[M.jsx("div",{className:`${_==="dark"?"bg-slate-800":"bg-white"} p-1 rounded-lg shadow-md flex-shrink-0 order-1 md:order-none`,children:M.jsx(gx,{onRequestAnalysis:Ot,onRequestChat:Ku,isLoading:Z||Wt,apiKeyPresent:P,isChartLoading:ye,showAiAnalysisDrawings:R,setShowAiAnalysisDrawings:U,analysisPanelMode:me,hasAnalysisResult:!!w&&((Dn=w.analisis_general)==null?void 0:Dn.simbolo)===(a.includes("-")?a.replace("-","/"):a.endsWith("USDT")?a.replace(/USDT$/,"/USDT"):a)&&((ls=w.analisis_general)==null?void 0:ls.temporalidad_principal_analisis)===m.toUpperCase()})}),M.jsx("div",{className:`${_==="dark"?"bg-slate-800":"bg-white"} rounded-lg shadow-md flex-grow flex flex-col order-2 md:order-none`,children:M.jsx(uR,{panelMode:me,analysisResult:w,analysisLoading:Z,analysisError:se,chatMessages:tt,chatLoading:Wt,chatError:ss,onSendMessage:Xu,onClearChatHistory:Wu,theme:_,isMobile:Ne,apiKeyPresent:P})})]})]}),j&&M.jsx(dR,{isOpen:j,onClose:()=>he(!1),theme:_,movingAverages:b,setMovingAverages:x,onToggleAllMAs:Gs,chartPaneBackgroundColor:D,setChartPaneBackgroundColor:I,volumePaneHeight:B,setVolumePaneHeight:q,wSignalColor:ne,setWSignalColor:K,wSignalOpacity:X,setWSignalOpacity:ee,showWSignals:de,setShowWSignals:Ee})]})},YT=document.getElementById("root");if(!YT)throw new Error("Could not find root element to mount to");const u3=px.createRoot(YT);u3.render(M.jsx(ax.StrictMode,{children:M.jsx(r3,{})}));
